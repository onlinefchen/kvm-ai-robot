<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KVMARM 邮件列表 AI 总结报告</title>
    <style>
        body {
            font-family: 'Courier New', 'Courier', monospace;
            line-height: 1.5;
            max-width: 1200px;
            margin: 0 auto;
            padding: 30px 40px;
            background-color: #ffffff;
            color: #222;
        }
        .container {
            background: #ffffff;
        }
        h1 {
            font-size: 2.2em;
            font-weight: bold;
            color: #000;
            margin-bottom: 0.3em;
            text-align: center;
            border-bottom: 2px solid #000;
            padding-bottom: 15px;
        }
        h2 {
            font-size: 1.6em;
            font-weight: bold;
            color: #000;
            margin-top: 2em;
            margin-bottom: 0.6em;
            border-bottom: 1px solid #333;
            padding-bottom: 8px;
        }
        h3 {
            font-size: 1.2em;
            font-weight: bold;
            color: #111;
            margin-top: 1.5em;
            margin-bottom: 0.5em;
        }
        h4 {
            font-size: 1.05em;
            font-weight: bold;
            color: #333;
            margin-top: 1.2em;
            margin-bottom: 0.5em;
        }
        .meta-info {
            background: #f9f9f9;
            border: 1px solid #ddd;
            padding: 15px 20px;
            margin: 20px 0;
            font-size: 0.95em;
            line-height: 1.6;
        }
        .meta-info p {
            margin: 6px 0;
            color: #444;
        }
        .meta-info strong {
            color: #000;
            font-weight: bold;
        }
        .stats {
            display: table;
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            border: 1px solid #000;
        }
        .stat-card {
            display: table-cell;
            border: 1px solid #000;
            padding: 12px 15px;
            text-align: center;
            background: #fafafa;
        }
        .stat-card h3 {
            margin: 0;
            color: #000;
            font-size: 1.8em;
            font-weight: bold;
            border: none;
            padding: 0;
        }
        .stat-card p {
            margin: 5px 0 0 0;
            color: #444;
            font-size: 0.9em;
            font-weight: normal;
        }
        .category {
            margin: 30px 0;
        }
        .thread {
            margin: 25px 0;
            padding: 15px;
            background: #fafafa;
            border: 1px solid #ccc;
            page-break-inside: avoid;
        }
        .thread-header {
            margin-bottom: 12px;
            border-bottom: 1px solid #ddd;
            padding-bottom: 10px;
        }
        .thread-header h3 {
            font-size: 1.15em;
            font-weight: bold;
            color: #000;
            margin: 0;
        }
        .thread-meta {
            display: block;
            margin: 8px 0 12px 0;
            font-size: 0.9em;
            color: #555;
            font-style: italic;
        }
        .thread-meta span {
            margin-right: 15px;
        }
        .ai-summary {
            background: #fff;
            border-left: 3px solid #666;
            padding: 12px 15px;
            margin: 15px 0;
            line-height: 1.6;
            color: #222;
            font-style: italic;
        }
        .email-list {
            background: #fff;
            border: 1px solid #ccc;
            padding: 10px 15px;
            font-family: 'Courier New', 'Consolas', monospace;
            font-size: 0.88em;
            line-height: 1.5;
            overflow-x: auto;
            margin: 10px 0;
        }
        .email-item {
            margin: 4px 0;
            padding: 2px 0;
            color: #222;
        }
        .email-item.historical {
            background: #f5f5f5;
            border-left: 3px solid #999;
            padding-left: 8px;
            opacity: 0.8;
        }
        .email-item.new {
            background: #fffef0;
            border-left: 3px solid #0066cc;
            padding-left: 8px;
        }
        .email-date {
            color: #0066cc;
            font-weight: bold;
        }
        .email-date.historical {
            color: #666;
        }
        .email-sender {
            color: #c30;
            font-weight: normal;
        }
        .email-subject {
            color: #000;
        }
        .historical-marker {
            color: #999;
            font-size: 0.85em;
            font-style: italic;
        }
        .new-marker {
            color: #0066cc;
            font-size: 0.85em;
            font-weight: bold;
        }
        .archive-link {
            display: inline-block;
            margin: 15px 0;
            padding: 10px 20px;
            background: #333;
            color: #fff;
            text-decoration: none;
            border: 2px solid #000;
            font-weight: bold;
            transition: all 0.2s;
        }
        .archive-link:hover {
            background: #000;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>KVMARM Mailing List Analysis Report</h1>

        <div class="meta-info">
            <p><strong>Generated:</strong> 2025-10-27 10:12</p>
            <p><strong>Time Period:</strong> 2025年4月 第17周 (04/21 - 04/27)</p>
            <p><strong>Total Messages:</strong> 199 | <strong>Total Threads:</strong> 30</p>
            <p style="text-align: center;"><a href="archive.html" class="archive-link">📚 历史归档 Archive</a></p>
        </div>


        <div class="category">
            <h2>PATCH</h2>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v3 00/42] KVM: arm64: Revamp Fine Grained Trap handling</h3>
                </div>

                <div class="thread-meta">
                    <span>43 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-04-26</span>
                </div>

                <div class="ai-summary">
                    本邮件线程讨论了关于 KVM（Kernel-based Virtual Machine）在 ARM64 架构下的细粒度陷阱（Fine Grained Trap, FGT）处理的多个补丁和改进，特别是针对 FEAT_FGT2 特性的实现。<br><br>1. **原始补丁/问题的内容**：该系列补丁旨在重构 KVM 对细粒度陷阱的处理，特别是引入对 FEAT_FGT2 的支持，以便更好地管理和控制虚拟机中的系统寄存器。<br><br>2. **之前讨论的要点**：历史讨论中提到，之前的版本（v2）已经增加了对 FEAT_FGT2 的全面支持，并对处理原理进行了重构，减少了冗余代码。参与者强调了尽快合并该补丁的重要性，因为其规模已经显著增加。<br><br>3. **本周的新讨论、进展或结论**：本周的讨论集中在多个补丁的提交上，包括：<br>   - **补丁 1-4**：增加了对 FEAT_FGT2 寄存器的描述和处理逻辑。<br>   - **补丁 5-10**：对 HCR_EL2 和其他相关寄存器的处理进行了优化，确保它们的状态与特性映射一致。<br>   - **补丁 11-20**：引入了对 FEAT_FGT2 寄存器的陷阱路由和上下文切换支持，确保在虚拟机中正确处理这些寄存器的访问。<br>   - **补丁 21-30**：实现了对 FEAT_FGT2 的描述和验证，确保系统寄存器的描述与 RES0 掩码相符，避免潜在的错误。<br><br>整体来看，本周的讨论和补丁提交标志着 KVM 在 ARM64 架构下对细粒度陷阱处理的重大进展，增强了虚拟化的稳定性和性能。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-26]</span> <span class="email-subject">[PATCH v3 00/42] KVM: arm64: Revamp Fine Grained Trap handling</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-26]</span> <span class="email-subject">[PATCH v3 01/42] arm64: sysreg: Add ID_AA64ISAR1_EL1.LS64 encoding for FEAT_LS64WB</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-26]</span> <span class="email-subject">[PATCH v3 02/42] arm64: sysreg: Update ID_AA64MMFR4_EL1 description</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-26]</span> <span class="email-subject">[PATCH v3 03/42] arm64: sysreg: Add layout for HCR_EL2</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-26]</span> <span class="email-subject">[PATCH v3 04/42] arm64: sysreg: Replace HGFxTR_EL2 with HFG{R,W}TR_EL2</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-26]</span> <span class="email-subject">[PATCH v3 05/42] arm64: sysreg: Update ID_AA64PFR0_EL1 description</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-26]</span> <span class="email-subject">[PATCH v3 06/42] arm64: sysreg: Update PMSIDR_EL1 description</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-26]</span> <span class="email-subject">[PATCH v3 07/42] arm64: sysreg: Update TRBIDR_EL1 description</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-26]</span> <span class="email-subject">[PATCH v3 08/42] arm64: sysreg: Add registers trapped by HFG{R,W}TR2_EL2</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-26]</span> <span class="email-subject">[PATCH v3 09/42] arm64: sysreg: Add registers trapped by HDFG{R,W}TR2_EL2</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-26]</span> <span class="email-subject">[PATCH v3 10/42] arm64: sysreg: Add system instructions trapped by HFGIRT2_EL2</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-26]</span> <span class="email-subject">[PATCH v3 11/42] arm64: Remove duplicated sysreg encodings</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-26]</span> <span class="email-subject">[PATCH v3 12/42] arm64: tools: Resync sysreg.h</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-26]</span> <span class="email-subject">[PATCH v3 13/42] arm64: Add syndrome information for trapped LD64B/ST64B{,V,V0}</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-26]</span> <span class="email-subject">[PATCH v3 14/42] arm64: Add FEAT_FGT2 capability</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-26]</span> <span class="email-subject">[PATCH v3 15/42] KVM: arm64: Tighten handling of unknown FGT groups</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-26]</span> <span class="email-subject">[PATCH v3 16/42] KVM: arm64: Simplify handling of negative FGT bits</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-26]</span> <span class="email-subject">[PATCH v3 17/42] KVM: arm64: Handle trapping of FEAT_LS64* instructions</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-26]</span> <span class="email-subject">[PATCH v3 18/42] KVM: arm64: Restrict ACCDATA_EL1 undef to FEAT_ST64_ACCDATA being disabled</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-26]</span> <span class="email-subject">[PATCH v3 19/42] KVM: arm64: Don't treat HCRX_EL2 as a FGT register</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-26]</span> <span class="email-subject">[PATCH v3 20/42] KVM: arm64: Plug FEAT_GCS handling</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-26]</span> <span class="email-subject">[PATCH v3 21/42] KVM: arm64: Compute FGT masks from KVM's own FGT tables</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-26]</span> <span class="email-subject">[PATCH v3 22/42] KVM: arm64: Add description of FGT bits leading to EC!=0x18</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-26]</span> <span class="email-subject">[PATCH v3 23/42] KVM: arm64: Use computed masks as sanitisers for FGT registers</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-26]</span> <span class="email-subject">[PATCH v3 24/42] KVM: arm64: Unconditionally configure fine-grain traps</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-26]</span> <span class="email-subject">[PATCH v3 25/42] KVM: arm64: Propagate FGT masks to the nVHE hypervisor</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-26]</span> <span class="email-subject">[PATCH v3 26/42] KVM: arm64: Use computed FGT masks to setup FGT registers</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-26]</span> <span class="email-subject">[PATCH v3 27/42] KVM: arm64: Remove hand-crafted masks for FGT registers</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-26]</span> <span class="email-subject">[PATCH v3 28/42] KVM: arm64: Use KVM-specific HCRX_EL2 RES0 mask</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-26]</span> <span class="email-subject">[PATCH v3 29/42] KVM: arm64: Handle PSB CSYNC traps</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-26]</span> <span class="email-subject">[PATCH v3 30/42] KVM: arm64: Switch to table-driven FGU configuration</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-26]</span> <span class="email-subject">[PATCH v3 31/42] KVM: arm64: Validate FGT register descriptions against RES0 masks</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-26]</span> <span class="email-subject">[PATCH v3 32/42] KVM: arm64: Use FGT feature maps to drive RES0 bits</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-26]</span> <span class="email-subject">[PATCH v3 33/42] KVM: arm64: Allow kvm_has_feat() to take variable arguments</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-26]</span> <span class="email-subject">[PATCH v3 34/42] KVM: arm64: Use HCRX_EL2 feature map to drive fixed-value bits</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-26]</span> <span class="email-subject">[PATCH v3 35/42] KVM: arm64: Use HCR_EL2 feature map to drive fixed-value bits</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-26]</span> <span class="email-subject">[PATCH v3 36/42] KVM: arm64: Add FEAT_FGT2 registers to the VNCR page</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-26]</span> <span class="email-subject">[PATCH v3 37/42] KVM: arm64: Add sanitisation for FEAT_FGT2 registers</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-26]</span> <span class="email-subject">[PATCH v3 38/42] KVM: arm64: Add trap routing for FEAT_FGT2 registers</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-26]</span> <span class="email-subject">[PATCH v3 39/42] KVM: arm64: Add context-switch for FEAT_FGT2 registers</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-26]</span> <span class="email-subject">[PATCH v3 40/42] KVM: arm64: Allow sysreg ranges for FGT descriptors</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-26]</span> <span class="email-subject">[PATCH v3 41/42] KVM: arm64: Add FGT descriptors for FEAT_FGT2</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-26]</span> <span class="email-subject">[PATCH v3 42/42] KVM: arm64: Handle TSB CSYNC traps</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v3 0/6] Add FIELD_MODIFY() helper</h3>
                </div>

                <div class="thread-meta">
                    <span>29 messages</span>
                    <span>8 participants</span>
                    <span>Started: 2025-04-17</span>
                </div>

                <div class="ai-summary">
                    本邮件线程讨论的主题是增加一个名为 `FIELD_MODIFY()` 的辅助宏，以增强 Linux 内核中位域操作的可读性和安全性。<br><br>1. **原始 patch/问题的内容**：Luo Jie 提出的补丁系列（PATCH v3 0/6）旨在为位域操作引入 `FIELD_MODIFY()` 宏。该宏与现有的 `xxx_replace_bits()` 函数功能相似，但增加了编译时类型检查，以捕捉参数类型错误。补丁还包括将内核中的四个实例替换为新宏的转换。<br><br>2. **之前讨论要点**：在历史讨论中，Marc Zyngier 提出对增加新宏的必要性表示怀疑，认为现有的 `_replace_bits()` 函数已经足够。Andrew Lunn 则支持新宏的引入，认为其文档化程度更高，便于使用。Yury Norov 也强调了新宏在编译时检查参数的优势。<br><br>3. **本周的新讨论、进展或结论**：在本周的讨论中，参与者对 `FIELD_MODIFY()` 的使用表示认可，Luo Jie 表示将该宏应用于 Qualcomm 的以太网驱动程序。Markus Elfring 提出了一些代码格式和功能扩展的建议，Luo Jie 也表示将根据反馈更新补丁。总体来看，`FIELD_MODIFY()` 的引入得到了积极的反馈，参与者讨论了其在代码可读性和安全性方面的潜在优势。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-04-17]</span> <span class="email-subject">[PATCH v3 0/6] Add FIELD_MODIFY() helper</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Luo Jie <span class="email-sender">&lt;quic_luoj@quicinc.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-04-17]</span> <span class="email-subject">[PATCH v3 1/6] bitfield: Add FIELD_MODIFY() helper</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Luo Jie <span class="email-sender">&lt;quic_luoj@quicinc.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-04-17]</span> <span class="email-subject">[PATCH v3 2/6] coccinelle: misc: Add field_modify script</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Luo Jie <span class="email-sender">&lt;quic_luoj@quicinc.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-04-17]</span> <span class="email-subject">[PATCH v3 3/6] arm64: tlb: Convert the opencoded field modify</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Luo Jie <span class="email-sender">&lt;quic_luoj@quicinc.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-04-17]</span> <span class="email-subject">[PATCH v3 4/6] arm64: nvhe: Convert the opencoded field modify</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Luo Jie <span class="email-sender">&lt;quic_luoj@quicinc.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-04-17]</span> <span class="email-subject">Re: [PATCH v3 0/6] Add FIELD_MODIFY() helper</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-04-17]</span> <span class="email-subject">Re: [PATCH v3 4/6] arm64: nvhe: Convert the opencoded field modify</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-04-17]</span> <span class="email-subject">Re: [PATCH v3 0/6] Add FIELD_MODIFY() helper</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Andrew Lunn <span class="email-sender">&lt;andrew@lunn.ch&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-04-17]</span> <span class="email-subject">Re: [PATCH v3 0/6] Add FIELD_MODIFY() helper</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-04-17]</span> <span class="email-subject">Re: [PATCH v3 3/6] arm64: tlb: Convert the opencoded field modify</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Russell King (Oracle) <span class="email-sender">&lt;linux@armlinux.org.uk&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-04-18]</span> <span class="email-subject">Re: [PATCH v3 0/6] Add FIELD_MODIFY() helper</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Yury Norov <span class="email-sender">&lt;yury.norov@gmail.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-04-18]</span> <span class="email-subject">Re: [PATCH v3 4/6] arm64: nvhe: Convert the opencoded field modify</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Yury Norov <span class="email-sender">&lt;yury.norov@gmail.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-04-18]</span> <span class="email-subject">Re: [PATCH v3 0/6] Add FIELD_MODIFY() helper</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-04-18]</span> <span class="email-subject">Re: [PATCH v3 0/6] Add FIELD_MODIFY() helper</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Yury Norov <span class="email-sender">&lt;yury.norov@gmail.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-04-18]</span> <span class="email-subject">Re: [PATCH v3 1/6] bitfield: Add FIELD_MODIFY() helper</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Yury Norov <span class="email-sender">&lt;yury.norov@gmail.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-23]</span> <span class="email-subject">Re: [cocci] [PATCH v3 2/6] coccinelle: misc: Add field_modify script</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Markus Elfring <span class="email-sender">&lt;Markus.Elfring@web.de&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-23]</span> <span class="email-subject">Re: [cocci] [PATCH v3 2/6] coccinelle: misc: Add field_modify script</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Jie Luo <span class="email-sender">&lt;quic_luoj@quicinc.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-23]</span> <span class="email-subject">Re: [PATCH v3 1/6] bitfield: Add FIELD_MODIFY() helper</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Jie Luo <span class="email-sender">&lt;quic_luoj@quicinc.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-23]</span> <span class="email-subject">Re: [PATCH v3 3/6] arm64: tlb: Convert the opencoded field modify</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Jie Luo <span class="email-sender">&lt;quic_luoj@quicinc.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-23]</span> <span class="email-subject">Re: [PATCH v3 0/6] Add FIELD_MODIFY() helper</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Jie Luo <span class="email-sender">&lt;quic_luoj@quicinc.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-23]</span> <span class="email-subject">Re: [cocci] [PATCH v3 2/6] coccinelle: misc: Add field_modify script</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Markus Elfring <span class="email-sender">&lt;Markus.Elfring@web.de&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-23]</span> <span class="email-subject">RE: [cocci] [PATCH v3 3/6] arm64: tlb: Convert the opencoded field
 modify</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Keller, Jacob E <span class="email-sender">&lt;jacob.e.keller@intel.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-23]</span> <span class="email-subject">Re: [PATCH v3 0/6] Add FIELD_MODIFY() helper</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Russell King (Oracle) <span class="email-sender">&lt;linux@armlinux.org.uk&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-23]</span> <span class="email-subject">Re: [PATCH v3 4/6] arm64: nvhe: Convert the opencoded field modify</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Russell King (Oracle) <span class="email-sender">&lt;linux@armlinux.org.uk&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-23]</span> <span class="email-subject">Re: [PATCH v3 4/6] arm64: nvhe: Convert the opencoded field modify</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Yury Norov <span class="email-sender">&lt;yury.norov@gmail.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-23]</span> <span class="email-subject">Re: [PATCH v3 0/6] Add FIELD_MODIFY() helper</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Yury Norov <span class="email-sender">&lt;yury.norov@gmail.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-23]</span> <span class="email-subject">Re: [PATCH v3 4/6] arm64: nvhe: Convert the opencoded field modify</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Russell King (Oracle) <span class="email-sender">&lt;linux@armlinux.org.uk&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-23]</span> <span class="email-subject">Re: [PATCH v3 4/6] arm64: nvhe: Convert the opencoded field modify</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Yury Norov <span class="email-sender">&lt;yury.norov@gmail.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-24]</span> <span class="email-subject">RE: [cocci] [PATCH v3 3/6] arm64: tlb: Convert the opencoded field
 modify</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Keller, Jacob E <span class="email-sender">&lt;jacob.e.keller@intel.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v3 00/17] KVM: arm64: Recursive NV support</h3>
                </div>

                <div class="thread-meta">
                    <span>18 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-04-23</span>
                </div>

                <div class="ai-summary">
                    本邮件列表讨论的主题是关于 KVM（Kernel-based Virtual Machine）在 arm64 架构上支持递归虚拟化（Recursive NV）的补丁系列，具体为 PATCH v3 00/17。该补丁旨在实现对 VNCR_EL2（虚拟化的系统寄存器）支持，涉及内存管理、TLB（Translation Lookaside Buffer）管理等多个方面。<br><br>在历史讨论中，Marc Zyngier 提到，VNCR 的虚拟化涉及到如何让 L1（第一层虚拟机）为 L2（第二层虚拟机）准备 VNCR 页面，并在 L0（宿主机）中映射它。补丁的主要目标是确保在合适的时机管理 TLB，以便正确处理 VNCR 页面。<br><br>本周的新讨论中，Marc Zyngier 提出了多个补丁，涵盖了 VNCR_EL2 的布局、页面分配、地址转换助手、TLB 管理等功能。补丁还包括对 VNCR_EL2 触发的故障处理、映射管理、TLBI（Translation Lookaside Buffer Invalidate）指令的处理等。这些补丁的实现使得 KVM 在支持递归虚拟化方面更加完善，Marc 还表示，虽然当前实现尚未完全优化，但已经能够在其测试环境中成功运行 L4 客户机。<br><br>此外，补丁系列还增加了用户空间对 VNCR_EL2 的访问权限，并更新了相关文档，描述了新功能和标志。整体而言，这一系列补丁标志着 KVM 在 arm64 架构上递归虚拟化支持的重大进展。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-23]</span> <span class="email-subject">[PATCH v3 00/17] KVM: arm64: Recursive NV support</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-23]</span> <span class="email-subject">[PATCH v3 01/17] arm64: sysreg: Add layout for VNCR_EL2</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-23]</span> <span class="email-subject">[PATCH v3 02/17] KVM: arm64: nv: Allocate VNCR page when required</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-23]</span> <span class="email-subject">[PATCH v3 03/17] KVM: arm64: nv: Extract translation helper from the AT code</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-23]</span> <span class="email-subject">[PATCH v3 04/17] KVM: arm64: nv: Snapshot S1 ASID tagging information during walk</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-23]</span> <span class="email-subject">[PATCH v3 05/17] KVM: arm64: nv: Move TLBI range decoding to a helper</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-23]</span> <span class="email-subject">[PATCH v3 06/17] KVM: arm64: nv: Don't adjust PSTATE.M when L2 is nesting</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-23]</span> <span class="email-subject">[PATCH v3 07/17] KVM: arm64: nv: Add pseudo-TLB backing VNCR_EL2</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-23]</span> <span class="email-subject">[PATCH v3 08/17] KVM: arm64: nv: Add userspace and guest handling of VNCR_EL2</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-23]</span> <span class="email-subject">[PATCH v3 09/17] KVM: arm64: nv: Handle VNCR_EL2-triggered faults</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-23]</span> <span class="email-subject">[PATCH v3 10/17] KVM: arm64: nv: Handle mapping of VNCR_EL2 at EL2</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-23]</span> <span class="email-subject">[PATCH v3 11/17] KVM: arm64: nv: Handle VNCR_EL2 invalidation from MMU notifiers</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-23]</span> <span class="email-subject">[PATCH v3 12/17] KVM: arm64: nv: Program host's VNCR_EL2 to the fixmap address</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-23]</span> <span class="email-subject">[PATCH v3 13/17] KVM: arm64: nv: Add S1 TLB invalidation primitive for VNCR_EL2</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-23]</span> <span class="email-subject">[PATCH v3 14/17] KVM: arm64: nv: Plumb TLBI S1E2 into system instruction dispatch</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-23]</span> <span class="email-subject">[PATCH v3 15/17] KVM: arm64: nv: Remove dead code from ERET handling</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-23]</span> <span class="email-subject">[PATCH v3 16/17] KVM: arm64: Allow userspace to request KVM_ARM_VCPU_EL2*</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-23]</span> <span class="email-subject">[PATCH v3 17/17] KVM: arm64: Document NV caps and vcpu flags</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v3 1/1] KVM: arm64: Allow cacheable stage 2 mapping using
 VMA flags</h3>
                </div>

                <div class="thread-meta">
                    <span>16 messages</span>
                    <span>5 participants</span>
                    <span>Started: 2025-04-07</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主题是关于 KVM（Kernel-based Virtual Machine）在 arm64 架构下允许使用 VMA（虚拟内存区域）标志进行可缓存的二级映射的补丁（PATCH v3 1/1）。该补丁旨在解决在创建二级映射时，如何处理物理页框号（PFNMAP）内存的缓存属性问题。<br><br>在历史讨论中，参与者探讨了 KVM 如何在处理 VMA 的页表项（PTE）时，确保物理地址的缓存属性正确性。讨论中提到，KVM 需要遵循 PTE 的缓存属性，用户空间无法请求不同的映射属性。Jason Gunthorpe 和 Sean Christopherson 等人对是否需要引入一个 KVM 能力（capability）来暴露内核是否支持缓存 PFNMAP 进行了辩论。<br><br>在本周的新讨论中，Ankit Agrawal 提醒大家确认是否需要“缓存 PFNMAP” KVM 能力。Oliver Upton 强调用户空间在处理内存一致性时的重要性，并认为需要将 KVM 能力与内存槽标志（memslot flag）结合使用，以确保用户空间能够正确处理缓存属性。Jason Gunthorpe 和 Sean Christopherson 对此提出了不同看法，认为引入内存槽标志会增加复杂性，且 KVM 应该能够自动处理缓存属性，而无需用户空间的干预。<br><br>总体而言，讨论围绕如何在 KVM 中有效管理缓存属性展开，涉及到内存映射的复杂性和用户空间与内核之间的交互。参与者尚未达成一致意见，未来的讨论可能会继续深入这一主题。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-04-07]</span> <span class="email-subject">Re: [PATCH v3 1/1] KVM: arm64: Allow cacheable stage 2 mapping using
 VMA flags</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-04-07]</span> <span class="email-subject">Re: [PATCH v3 1/1] KVM: arm64: Allow cacheable stage 2 mapping using
 VMA flags</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Jason Gunthorpe <span class="email-sender">&lt;jgg@nvidia.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-04-07]</span> <span class="email-subject">Re: [PATCH v3 1/1] KVM: arm64: Allow cacheable stage 2 mapping using
 VMA flags</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-04-16]</span> <span class="email-subject">Re: [PATCH v3 1/1] KVM: arm64: Allow cacheable stage 2 mapping using
 VMA flags</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Ankit Agrawal <span class="email-sender">&lt;ankita@nvidia.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-21]</span> <span class="email-subject">Re: [PATCH v3 1/1] KVM: arm64: Allow cacheable stage 2 mapping using
 VMA flags</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Ankit Agrawal <span class="email-sender">&lt;ankita@nvidia.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-22]</span> <span class="email-subject">Re: [PATCH v3 1/1] KVM: arm64: Allow cacheable stage 2 mapping using
 VMA flags</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-22]</span> <span class="email-subject">Re: [PATCH v3 1/1] KVM: arm64: Allow cacheable stage 2 mapping using
 VMA flags</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Jason Gunthorpe <span class="email-sender">&lt;jgg@nvidia.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-22]</span> <span class="email-subject">Re: [PATCH v3 1/1] KVM: arm64: Allow cacheable stage 2 mapping using
 VMA flags</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-22]</span> <span class="email-subject">Re: [PATCH v3 1/1] KVM: arm64: Allow cacheable stage 2 mapping using
 VMA flags</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Catalin Marinas <span class="email-sender">&lt;catalin.marinas@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-22]</span> <span class="email-subject">Re: [PATCH v3 1/1] KVM: arm64: Allow cacheable stage 2 mapping using
 VMA flags</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Jason Gunthorpe <span class="email-sender">&lt;jgg@nvidia.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-22]</span> <span class="email-subject">Re: [PATCH v3 1/1] KVM: arm64: Allow cacheable stage 2 mapping using
 VMA flags</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-22]</span> <span class="email-subject">Re: [PATCH v3 1/1] KVM: arm64: Allow cacheable stage 2 mapping using
 VMA flags</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Jason Gunthorpe <span class="email-sender">&lt;jgg@nvidia.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-23]</span> <span class="email-subject">Re: [PATCH v3 1/1] KVM: arm64: Allow cacheable stage 2 mapping using
 VMA flags</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Catalin Marinas <span class="email-sender">&lt;catalin.marinas@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-23]</span> <span class="email-subject">Re: [PATCH v3 1/1] KVM: arm64: Allow cacheable stage 2 mapping using
 VMA flags</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Jason Gunthorpe <span class="email-sender">&lt;jgg@nvidia.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-23]</span> <span class="email-subject">Re: [PATCH v3 1/1] KVM: arm64: Allow cacheable stage 2 mapping using
 VMA flags</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Catalin Marinas <span class="email-sender">&lt;catalin.marinas@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-23]</span> <span class="email-subject">Re: [PATCH v3 1/1] KVM: arm64: Allow cacheable stage 2 mapping using
 VMA flags</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Jason Gunthorpe <span class="email-sender">&lt;jgg@nvidia.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v8 00/43] arm64: Support for Arm CCA in KVM</h3>
                </div>

                <div class="thread-meta">
                    <span>8 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-04-16</span>
                </div>

                <div class="ai-summary">
                    本邮件线程讨论了针对 Arm Confidential Compute Architecture (CCA) 的 KVM 支持的补丁系列（PATCH v8 00/43）。该补丁旨在实现受保护虚拟机的运行，相关的来宾支持已在 v6.14-rc1 版本中合并。<br><br>在历史讨论中，Steven Price 提出了多个补丁，包括添加对 RMM（Realm Management Monitor）的 SMC 定义、为 RMI 调用添加包装函数，以及在 KVM 初始化时检查 RME 支持。这些补丁经过了多次修改，增加了文档说明和代码注释，以提高可读性和功能性。<br><br>在本周的新讨论中，Suzuki K Poulose 对 Steven 的补丁进行了审核，并提出了一些小的修改建议。例如，他强调了在某些情况下需要明确区分 HIPAS 和 RMI_ASSIGNED 的用法。此外，他对 KVM 初始化时检查 RME 支持的必要性提出了疑问，认为在某些情况下可能不需要此检查。整体来看，本周的讨论主要集中在补丁的细节审查和小范围的改进建议上，未出现重大争议或变更。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-04-16]</span> <span class="email-subject">[PATCH v8 00/43] arm64: Support for Arm CCA in KVM</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Steven Price <span class="email-sender">&lt;steven.price@arm.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-04-16]</span> <span class="email-subject">[PATCH v8 03/43] arm64: RME: Add SMC definitions for calling the RMM</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Steven Price <span class="email-sender">&lt;steven.price@arm.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-04-16]</span> <span class="email-subject">[PATCH v8 04/43] arm64: RME: Add wrappers for RMI calls</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Steven Price <span class="email-sender">&lt;steven.price@arm.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-04-16]</span> <span class="email-subject">[PATCH v8 05/43] arm64: RME: Check for RME support at KVM init</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Steven Price <span class="email-sender">&lt;steven.price@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-25]</span> <span class="email-subject">Re: [PATCH v8 03/43] arm64: RME: Add SMC definitions for calling the
 RMM</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Suzuki K Poulose <span class="email-sender">&lt;suzuki.poulose@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-25]</span> <span class="email-subject">Re: [PATCH v8 04/43] arm64: RME: Add wrappers for RMI calls</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Suzuki K Poulose <span class="email-sender">&lt;suzuki.poulose@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-25]</span> <span class="email-subject">Re: [PATCH v8 04/43] arm64: RME: Add wrappers for RMI calls</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Suzuki K Poulose <span class="email-sender">&lt;suzuki.poulose@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-25]</span> <span class="email-subject">Re: [PATCH v8 05/43] arm64: RME: Check for RME support at KVM init</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Suzuki K Poulose <span class="email-sender">&lt;suzuki.poulose@arm.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH 0/3] KVM: arm64: Address Translation fixes</h3>
                </div>

                <div class="thread-meta">
                    <span>7 messages</span>
                    <span>3 participants</span>
                    <span>Started: 2025-04-22</span>
                </div>

                <div class="ai-summary">
                    本邮件线程讨论了针对 KVM（Kernel-based Virtual Machine）在 arm64 架构下的地址转换修复的补丁系列，共包含三个补丁。Marc Zyngier 提出了这些补丁，旨在解决 KVM 地址转换实现中的多个问题，包括错误报告、访问故障处理以及不当的数据初始化。<br><br>历史讨论方面，之前并没有详细的背景信息提供，但本周的讨论集中在补丁的具体内容和修复措施上。补丁主要包括：<br>1. **修复 PAR_EL1.PTW 报告**：确保在 AT S1E* 操作失败时，正确报告翻译失败的状态。<br>2. **处理访问故障**：修改 S1 PTW 代码以识别访问故障，确保系统能够正确处理这些情况。<br>3. **避免不初始化数据**：在特定条件下，避免将未初始化的数据传递给 HCR_EL2，确保系统稳定性。<br><br>本周的新讨论中，Joey Gouly 对第二个补丁进行了审核并表示认可，而 D Scott Phillips 提出了一个关于 TCR_ELx.HA 的依赖性问题，Marc Zyngier 则确认了当前配置的支持情况。这些讨论表明补丁的有效性和必要性得到了认可，同时也引发了对特定配置的进一步探讨。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-22]</span> <span class="email-subject">[PATCH 0/3] KVM: arm64: Address Translation fixes</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-22]</span> <span class="email-subject">[PATCH 1/3] KVM: arm64: Fix PAR_EL1.{PTW,S} reporting on AT S1E*</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-22]</span> <span class="email-subject">[PATCH 2/3] KVM: arm64: Teach address translation about access faults</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-22]</span> <span class="email-subject">[PATCH 3/3] KVM: arm64: Don't feed uninitialised data to HCR_EL2</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-22]</span> <span class="email-subject">Re: [PATCH 2/3] KVM: arm64: Teach address translation about access
 faults</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Joey Gouly <span class="email-sender">&lt;joey.gouly@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-22]</span> <span class="email-subject">Re: [PATCH 2/3] KVM: arm64: Teach address translation about access
 faults</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: D Scott Phillips <span class="email-sender">&lt;scott@os.amperecomputing.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-22]</span> <span class="email-subject">Re: [PATCH 2/3] KVM: arm64: Teach address translation about access faults</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH 1/2] arm64: errata: Work around AmpereOne's erratum AC03_CPU_36</h3>
                </div>

                <div class="thread-meta">
                    <span>4 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-04-15</span>
                </div>

                <div class="ai-summary">
                    本邮件线程讨论了针对 AmpereOne 处理器的 erratum AC03_CPU_36 的补丁（PATCH 1/2），该问题可能导致异步异常在更新异常控制时被错误路由到错误的异常级别。补丁建议在受影响的机器上，始终在阻止异步异常的情况下写入 HCR_EL2 寄存器。<br><br>在历史讨论中，D Scott Phillips 提出了补丁，并解释了该 erratum 的具体情况，Marc Zyngier 对此进行了回应，确认了补丁的必要性，并讨论了相关的技术细节。<br><br>在本周的新讨论中，D Scott Phillips 提出，在 nvhe 模式下，异步异常始终被屏蔽，因此该模式下不会触发 erratum。他询问 Marc Zyngier 是否同意这一观点，并讨论了在这种情况下的处理方式。Marc Zyngier 认可了这一观点，并指出 nVHE/hVHE 超级管理程序代码在处理 HVC 异常时会禁用中断，因此该情况是安全的。他还提到，SError 处理代码的实现不会受到影响，并表示将继续推进补丁的审查工作。<br><br>总体来看，本周的讨论进一步确认了补丁的有效性，并探讨了在不同模式下的潜在影响，推动了补丁的进展。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-04-15]</span> <span class="email-subject">[PATCH 1/2] arm64: errata: Work around AmpereOne's erratum AC03_CPU_36</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: D Scott Phillips <span class="email-sender">&lt;scott@os.amperecomputing.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-04-16]</span> <span class="email-subject">Re: [PATCH 1/2] arm64: errata: Work around AmpereOne's erratum AC03_CPU_36</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-24]</span> <span class="email-subject">Re: [PATCH 1/2] arm64: errata: Work around AmpereOne's erratum
 AC03_CPU_36</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: D Scott Phillips <span class="email-sender">&lt;scott@os.amperecomputing.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-27]</span> <span class="email-subject">Re: [PATCH 1/2] arm64: errata: Work around AmpereOne's erratum AC03_CPU_36</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH 0/4] KVM: arm64: UBSAN at EL2</h3>
                </div>

                <div class="thread-meta">
                    <span>4 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-04-16</span>
                </div>

                <div class="ai-summary">
                    本邮件线程讨论了一个关于在 KVM 的 arm64 架构中实现 UBSAN（Undefined Behavior Sanitizer）支持的补丁集。补丁的主要内容是为 EL2 模式添加 UBSAN 支持，以便在保护模式（如 nvhe/hvhe）下进行更好的错误检测。<br><br>在历史讨论中，Mostafa Saleh 提出了补丁集的背景，指出当前内核支持的许多 sanitizers 在 EL2 模式下是禁用的。他介绍了补丁的具体内容，包括引入新的 Kconfig 选项 CONFIG_UBSAN_KVM_EL2，以便在 EL2 代码中启用 UBSAN。Kees Cook 对补丁提出了一些小的格式和命名建议，整体上对补丁表示认可。<br><br>在本周的新讨论中，Mostafa Saleh 回复了 Kees Cook 的建议，表示将在补丁的 v2 版本中修正这些问题。这表明补丁的开发仍在继续，开发者们正在积极响应反馈并进行改进。<br><br>总结来说，此次讨论围绕在 KVM 的 arm64 架构中实现 UBSAN 的补丁展开，历史讨论提供了补丁的背景和初步反馈，而本周的讨论则集中在对补丁的细节修正上。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-04-16]</span> <span class="email-subject">[PATCH 0/4] KVM: arm64: UBSAN at EL2</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mostafa Saleh <span class="email-sender">&lt;smostafa@google.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-04-16]</span> <span class="email-subject">[PATCH 3/4] KVM: arm64: Introduce CONFIG_UBSAN_KVM_EL2</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mostafa Saleh <span class="email-sender">&lt;smostafa@google.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-04-16]</span> <span class="email-subject">Re: [PATCH 3/4] KVM: arm64: Introduce CONFIG_UBSAN_KVM_EL2</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Kees Cook <span class="email-sender">&lt;kees@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-25]</span> <span class="email-subject">Re: [PATCH 3/4] KVM: arm64: Introduce CONFIG_UBSAN_KVM_EL2</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mostafa Saleh <span class="email-sender">&lt;smostafa@google.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH] KVM: arm64: Force HCR_EL2.xMO to 1 at all times in VHE mode</h3>
                </div>

                <div class="thread-meta">
                    <span>3 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-04-22</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主题是关于 KVM（Kernel-based Virtual Machine）在 arm64 架构下的一个补丁，旨在强制在 VHE（Virtual Host Extensions）模式下始终将 HCR_EL2.xMO 设置为 1。<br><br>该补丁的背景是，当前在 VHE 模式下，系统会根据主机内核的角色不断设置和清除这些位，但实际上这并没有必要，因为我们始终希望物理中断能够传递到主机。此外，清除这些位会导致两个问题：一是当这些位被清除时，IRQ（中断请求）无法被处理；二是会触发 AmpereOne 硬件的一个严重错误，导致在处理中断时清除这些位会引发故障。<br><br>在本周的讨论中，Marc Zyngier 提出了补丁的具体实现，并指出了两个问题的解决方案。D Scott Phillips 提出了一个相关问题，询问是否应该在 `__vgic_v3_get_gic_config()` 函数中也去掉 xMO 的处理。Marc Zyngier 认可了这一点，并表示将对此进行修改并发布补丁的第二版。<br><br>总体来看，本周的讨论集中在补丁的具体实现及其潜在的改进上，参与者们对补丁的必要性和相关代码的优化进行了积极探讨。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-22]</span> <span class="email-subject">[PATCH] KVM: arm64: Force HCR_EL2.xMO to 1 at all times in VHE mode</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-24]</span> <span class="email-subject">Re: [PATCH] KVM: arm64: Force HCR_EL2.xMO to 1 at all times in VHE
 mode</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: D Scott Phillips <span class="email-sender">&lt;scott@os.amperecomputing.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-26]</span> <span class="email-subject">Re: [PATCH] KVM: arm64: Force HCR_EL2.xMO to 1 at all times in VHE mode</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v2] arm64: errata: Work around AmpereOne's erratum AC04_CPU_23</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-04-24</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主题是关于针对 AmpereOne 处理器的 erratum AC04_CPU_23 的补丁（PATCH v2）。该补丁旨在解决在更新 HCR_EL2 时可能导致数据地址的同时翻译被破坏的问题。具体来说，只有由指令发起的翻译会受到影响，而预取指令的翻译则不受影响。补丁中提出在对 HCR_EL2 进行存储之前插入 DSB 指令，以防止较早的指令进入可能的破坏窗口，并在存储之后插入 ISB 指令，以防止较新的指令进入该窗口。<br><br>在历史讨论中，补丁的初始版本（v1）已于之前发布，参与者对其进行了反馈和修改，包括增加了一个新的 `write_sysreg_hcr()` 辅助函数，并对 erratum 描述进行了更具体的措辞。<br><br>在本周的新讨论中，补丁的最新版本（v2）已被提交，包含了对 v1 的改进和修正。补丁的内容涉及到多个文件的修改，共计增加了 54 行代码，删除了 12 行，进一步完善了对 AmpereOne 处理器 erratum 的处理。参与者对补丁的内容表示认可，并期待其在后续版本中的应用。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-24]</span> <span class="email-subject">[PATCH v2] arm64: errata: Work around AmpereOne's erratum AC04_CPU_23</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: D Scott Phillips <span class="email-sender">&lt;scott@os.amperecomputing.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH 6.14 227/241] arm64/boot: Enable EL2 requirements for FEAT_PMUv3p9</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-04-23</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主题是关于 ARM64 架构下的一个补丁，旨在启用 FEAT_PMUv3p9 的 EL2 需求。该补丁的主要内容是添加一个新的初始化助手函数 `__init_el2_fgt2()`，用于配置细粒度陷阱控制寄存器 HDFGRTR2_EL2 和 HDFGWTR2_EL2，以便允许从 EL1 访问 PMICNTR_EL0、PMICFILTR_EL0 和 PMUACR_EL1 寄存器。<br><br>在历史讨论中，补丁的背景是为了修复之前的两个问题，分别涉及 PMUv3.9 计数器的访问控制和对 Armv9.4 PMU 指令计数器的支持。补丁的提出者 Anshuman Khandual 及其同事们在邮件中提到，缺乏适当的 EL2 细粒度陷阱配置会导致对这些寄存器的访问产生陷阱。<br><br>在本周的新讨论中，Greg Kroah-Hartman 提出了该补丁的审查请求，询问是否有任何异议。邮件中没有其他参与者的回复或反对意见，显示出对该补丁的支持态度。整体来看，该补丁的实施将增强 ARM64 架构在性能监控方面的能力，确保在特定条件下能够正确访问相关寄存器。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-23]</span> <span class="email-subject">[PATCH 6.14 227/241] arm64/boot: Enable EL2 requirements for FEAT_PMUv3p9</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Greg Kroah-Hartman <span class="email-sender">&lt;gregkh@linuxfoundation.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH 6.12 192/223] arm64/boot: Enable EL2 requirements for FEAT_PMUv3p9</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-04-23</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主题是针对 ARM64 架构的补丁，标题为“[PATCH 6.12 192/223] arm64/boot: Enable EL2 requirements for FEAT_PMUv3p9”。该补丁的主要目的是在 EL1 访问 FEAT_PMUv3p9 注册（如 PMICNTR_EL0、PMICFILTR_EL0 和 PMUACR_EL1）时，确保适当的 EL2 细粒度陷阱配置。补丁中新增了一个初始化帮助函数 `__init_el2_fgt2()`，用于设置相关的控制寄存器，以允许对这些寄存器的访问。<br><br>在历史讨论中，补丁的背景并未详细提及，但可以推测与之前对 ARM 性能监控单元（PMU）相关的功能扩展有关。<br><br>本周的新讨论中，Greg Kroah-Hartman 提出该补丁为 6.12 稳定版的审查补丁，并邀请其他参与者提出异议。没有其他参与者对此补丁提出反对意见，表明该补丁得到了认可并可能会被合并。<br><br>总的来说，该补丁通过增强 EL2 的配置来支持新特性，确保 ARM64 架构在处理性能监控时的稳定性和兼容性。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-23]</span> <span class="email-subject">[PATCH 6.12 192/223] arm64/boot: Enable EL2 requirements for FEAT_PMUv3p9</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Greg Kroah-Hartman <span class="email-sender">&lt;gregkh@linuxfoundation.org&gt;</span></div>
                </div>
            </div>
        </div>

        <div class="category">
            <h2>RFC</h2>

            <div class="thread">
                <div class="thread-header">
                    <h3>[RFC PATCH 00/34] Running Qualcomm's Gunyah Guests via KVM in EL1</h3>
                </div>

                <div class="thread-meta">
                    <span>39 messages</span>
                    <span>4 participants</span>
                    <span>Started: 2025-04-24</span>
                </div>

                <div class="ai-summary">
                    本邮件线程讨论了在 Qualcomm 的 Gunyah 超级管理程序上通过 KVM 运行虚拟机的相关补丁和实现。以下是讨论的主要内容：<br><br>1. **原始补丁/问题内容**：<br>   该补丁系列旨在将 Gunyah 超级管理程序的支持从独立驱动接口移植到 KVM，利用现有的 KVM 基础设施以减少内存管理、IRQ 处理等方面的重复工作。Gunyah 是一种 Type-1 超级管理程序，运行在高于虚拟机的 CPU 特权级别。<br><br>2. **之前讨论要点**：<br>   之前的讨论中提到，Gunyah 的实现依赖于特定的资源管理和虚拟机生命周期管理，补丁中保留了原作者的署名和贡献。讨论还涉及到 Gunyah 的一些功能，如内存压缩、SMP 启动等当前尚未支持的特性。<br><br>3. **本周的新讨论与进展**：<br>   本周的讨论集中在补丁的具体实现和反馈上。参与者提出了对 KVM 和 Gunyah 之间接口的看法，Oliver Upton 强调 KVM 不应被用作其他超级管理程序的通用接口，建议直接在 EL2 上运行 KVM。Trilok Soni 和 Marc Zyngier 也支持这一观点，认为 Qualcomm 更倾向于开发自己的驱动，而不是将 Gunyah 与 KVM 混合使用。Karim Manaouil 表示理解这一立场，并认为尽管如此，该补丁仍对希望在 EL1 上运行 KVM 的用户有一定的吸引力。<br><br>总的来说，讨论围绕着如何在 KVM 和 Gunyah 之间找到平衡，以及如何有效实现虚拟机的生命周期管理和资源共享。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-24]</span> <span class="email-subject">[RFC PATCH 00/34] Running Qualcomm's Gunyah Guests via KVM in EL1</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Karim Manaouil <span class="email-sender">&lt;karim.manaouil@linaro.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-24]</span> <span class="email-subject">[RFC PATCH 01/34] KVM: Allow arch-specific vCPU allocation and freeing</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Karim Manaouil <span class="email-sender">&lt;karim.manaouil@linaro.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-24]</span> <span class="email-subject">[RFC PATCH 02/34] KVM: irqfd: Add architecture hooks for irqfd allocation and initialization</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Karim Manaouil <span class="email-sender">&lt;karim.manaouil@linaro.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-24]</span> <span class="email-subject">[RFC PATCH 03/34] KVM: irqfd: Allow KVM backends to override IRQ injection via set_irq callback</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Karim Manaouil <span class="email-sender">&lt;karim.manaouil@linaro.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-24]</span> <span class="email-subject">[RFC PATCH 04/34] KVM: Add weak stubs for irqchip-related functions for Gunyah builds</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Karim Manaouil <span class="email-sender">&lt;karim.manaouil@linaro.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-24]</span> <span class="email-subject">[RFC PATCH 05/34] KVM: Add KVM_SET_DTB_ADDRESS ioctl to pass guest DTB address from userspace</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Karim Manaouil <span class="email-sender">&lt;karim.manaouil@linaro.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-24]</span> <span class="email-subject">[RFC PATCH 06/34] KVM: gunyah: Add initial Gunyah backend support</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Karim Manaouil <span class="email-sender">&lt;karim.manaouil@linaro.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-24]</span> <span class="email-subject">[RFC PATCH 07/34] KVM: gunyah: Pin guest memory</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Karim Manaouil <span class="email-sender">&lt;karim.manaouil@linaro.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-24]</span> <span class="email-subject">[RFC PATCH 08/34] docs: gunyah: Introduce Gunyah Hypervisor</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Karim Manaouil <span class="email-sender">&lt;karim.manaouil@linaro.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-24]</span> <span class="email-subject">[RFC PATCH 09/34] dt-bindings: Add binding for gunyah hypervisor</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Karim Manaouil <span class="email-sender">&lt;karim.manaouil@linaro.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-24]</span> <span class="email-subject">[RFC PATCH 10/34] gunyah: Common types and error codes for Gunyah hypercalls</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Karim Manaouil <span class="email-sender">&lt;karim.manaouil@linaro.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-24]</span> <span class="email-subject">[RFC PATCH 11/34] gunyah: Add hypercalls to identify Gunyah</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Karim Manaouil <span class="email-sender">&lt;karim.manaouil@linaro.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-24]</span> <span class="email-subject">[RFC PATCH 12/34] gunyah: Add hypervisor driver</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Karim Manaouil <span class="email-sender">&lt;karim.manaouil@linaro.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-24]</span> <span class="email-subject">[RFC PATCH 13/34] gunyah: Add hypercalls to send and receive messages</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Karim Manaouil <span class="email-sender">&lt;karim.manaouil@linaro.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-24]</span> <span class="email-subject">[RFC PATCH 14/34] gunyah: Add resource manager RPC core</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Karim Manaouil <span class="email-sender">&lt;karim.manaouil@linaro.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-24]</span> <span class="email-subject">[RFC PATCH 15/34] gunyah: Add VM lifecycle RPC</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Karim Manaouil <span class="email-sender">&lt;karim.manaouil@linaro.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-24]</span> <span class="email-subject">[RFC PATCH 16/34] gunyah: Add basic VM lifecycle management</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Karim Manaouil <span class="email-sender">&lt;karim.manaouil@linaro.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-24]</span> <span class="email-subject">[RFC PATCH 17/34] gunyah: Translate gh_rm_hyp_resource into gunyah_resource</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Karim Manaouil <span class="email-sender">&lt;karim.manaouil@linaro.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-24]</span> <span class="email-subject">[RFC PATCH 18/34] gunyah: Add resource tickets</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Karim Manaouil <span class="email-sender">&lt;karim.manaouil@linaro.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-24]</span> <span class="email-subject">[RFC PATCH 19/34] gunyah: Add hypercalls for running a vCPU</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Karim Manaouil <span class="email-sender">&lt;karim.manaouil@linaro.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-24]</span> <span class="email-subject">[RFC PATCH 20/34] gunyah: add proxy-scheduled vCPUs</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Karim Manaouil <span class="email-sender">&lt;karim.manaouil@linaro.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-24]</span> <span class="email-subject">[RFC PATCH 21/34] gunyah: Add hypercalls for demand paging</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Karim Manaouil <span class="email-sender">&lt;karim.manaouil@linaro.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-24]</span> <span class="email-subject">[RFC PATCH 22/34] gunyah: Add memory parcel RPC</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Karim Manaouil <span class="email-sender">&lt;karim.manaouil@linaro.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-24]</span> <span class="email-subject">[RFC PATCH 23/34] gunyah: Add interfaces to map memory into guest address space</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Karim Manaouil <span class="email-sender">&lt;karim.manaouil@linaro.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-24]</span> <span class="email-subject">[RFC PATCH 24/34] gunyah: Add platform ops on mem_lend/mem_reclaim</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Karim Manaouil <span class="email-sender">&lt;karim.manaouil@linaro.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-24]</span> <span class="email-subject">[RFC PATCH 25/34] gunyah: Add Qualcomm Gunyah platform ops</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Karim Manaouil <span class="email-sender">&lt;karim.manaouil@linaro.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-24]</span> <span class="email-subject">[RFC PATCH 26/34] gunyah: Share memory parcels</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Karim Manaouil <span class="email-sender">&lt;karim.manaouil@linaro.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-24]</span> <span class="email-subject">[RFC PATCH 27/34] gunyah: Share guest VM dtb configuration to Gunyah</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Karim Manaouil <span class="email-sender">&lt;karim.manaouil@linaro.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-24]</span> <span class="email-subject">[RFC PATCH 28/34] gunyah: Add RPC to enable demand paging</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Karim Manaouil <span class="email-sender">&lt;karim.manaouil@linaro.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-24]</span> <span class="email-subject">[RFC PATCH 29/34] gunyah: Enable demand paging</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Karim Manaouil <span class="email-sender">&lt;karim.manaouil@linaro.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-24]</span> <span class="email-subject">[RFC PATCH 30/34] gunyah: Add RPC to set VM boot context</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Karim Manaouil <span class="email-sender">&lt;karim.manaouil@linaro.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-24]</span> <span class="email-subject">[RFC PATCH 31/34] gunyah: allow userspace to set boot cpu context</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Karim Manaouil <span class="email-sender">&lt;karim.manaouil@linaro.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-24]</span> <span class="email-subject">[RFC PATCH 32/34] gunyah: Add hypercalls for sending doorbell</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Karim Manaouil <span class="email-sender">&lt;karim.manaouil@linaro.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-24]</span> <span class="email-subject">[RFC PATCH 33/34] KVM: gunyah: Implement irqfd interface</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Karim Manaouil <span class="email-sender">&lt;karim.manaouil@linaro.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-24]</span> <span class="email-subject">[RFC PATCH 34/34] KVM: gunyah: enable KVM for Gunyah</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Karim Manaouil <span class="email-sender">&lt;karim.manaouil@linaro.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-24]</span> <span class="email-subject">Re: [RFC PATCH 00/34] Running Qualcomm's Gunyah Guests via KVM in EL1</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-24]</span> <span class="email-subject">Re: [RFC PATCH 00/34] Running Qualcomm's Gunyah Guests via KVM in EL1</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Trilok Soni <span class="email-sender">&lt;quic_tsoni@quicinc.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-24]</span> <span class="email-subject">Re: [RFC PATCH 00/34] Running Qualcomm's Gunyah Guests via KVM in EL1</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Karim Manaouil <span class="email-sender">&lt;karim.manaouil@linaro.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-24]</span> <span class="email-subject">Re: [RFC PATCH 00/34] Running Qualcomm's Gunyah Guests via KVM in EL1</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[RFC] ARM vGIC-ITS tables serialization when running protected VMs</h3>
                </div>

                <div class="thread-meta">
                    <span>6 messages</span>
                    <span>3 participants</span>
                    <span>Started: 2025-04-14</span>
                </div>

                <div class="ai-summary">
                    本邮件线程讨论了在运行受保护虚拟机时，ARM vGIC-ITS 表的序列化问题，尤其是在使用 KVM 的环境中。最初的提案（patch）由 Ilias Stamatis 提出，旨在解决 KVM 的 ARM 虚拟中断转换服务（ITS）接口在保存和恢复设备表时遇到的困难，特别是在受保护的虚拟机（如 pKVM）上运行时，宿主机内核无法访问来宾内存。<br><br>在历史讨论中，Marc Zyngier 对该提案表示反对，认为 ITT（中断转换表）并没有特殊之处，宿主机应与来宾共享页面对齐的内存，并使用现有的 API。他还指出，当前的设计可能会导致安全隐患，尤其是在受保护的环境中。<br><br>本周的新讨论中，David Woodhouse 继续质疑提案的合理性，认为将 GIC 规范重新定义为在受保护的来宾中隐式共享整个页面是一个糟糕的主意，并建议 KVM 应该像处理其他状态一样，将状态传递给用户空间进行迁移。Marc Zyngier 则强调，任何操作系统在机密基础设施下运行时，都应暴露页面大小的数据给非信任基础设施，并认为这一过程并不复杂。<br><br>总体来看，讨论围绕如何安全有效地管理虚拟机中的中断表展开，参与者对提案的可行性和安全性持有不同看法，尚未达成共识。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-04-14]</span> <span class="email-subject">[RFC] ARM vGIC-ITS tables serialization when running protected VMs</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Ilias Stamatis <span class="email-sender">&lt;ilstam@amazon.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-04-15]</span> <span class="email-subject">Re: [RFC] ARM vGIC-ITS tables serialization when running protected VMs</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-04-15]</span> <span class="email-subject">Re: [RFC] ARM vGIC-ITS tables serialization when running protected
 VMs</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: David Woodhouse <span class="email-sender">&lt;dwmw2@infradead.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-22]</span> <span class="email-subject">Re: [RFC] ARM vGIC-ITS tables serialization when running protected
 VMs</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: David Woodhouse <span class="email-sender">&lt;dwmw2@infradead.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-27]</span> <span class="email-subject">Re: [RFC] ARM vGIC-ITS tables serialization when running protected VMs</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-27]</span> <span class="email-subject">Re: [RFC] ARM vGIC-ITS tables serialization when running protected VMs</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[RFC PATCH 0/3] KVM: arm64: Don't claim MTE_ASYNC if not supported</h3>
                </div>

                <div class="thread-meta">
                    <span>3 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-04-14</span>
                </div>

                <div class="ai-summary">
                    本邮件线程讨论了一个关于 KVM（Kernel-based Virtual Machine）在 arm64 架构下对 MTE（Memory Tagging Extension）支持的补丁系列，特别是如何处理 MTE_ASYNC 的声明问题。<br><br>**原始 patch/问题内容**：<br>Ben Horgan 提出的补丁系列旨在解决当前 KVM 隐藏 ID_AA64PFR1_EL1.MTE_frac 字段的问题。该字段在 ID_AA64PFR1_EL1.MTE==2 时，如果 MTE_frac==0，表示支持 MTE_ASYNC。然而，在没有 MTE_ASYNC 支持的主机上，启用 MTE 功能的来宾会错误地看到 MTE_ASYNC 被声明为支持。补丁的目标是修复这一问题。<br><br>**之前讨论要点**：<br>在历史讨论中，Ben Horgan 详细阐述了 MTE_frac 的处理逻辑，指出如果不对 MTE_frac 进行条件掩蔽，来宾将始终看到该字段为 0，这会导致错误的支持声明。补丁建议根据 MTE 能力来有条件地暴露 MTE_frac。<br><br>**本周的新讨论、进展或结论**：<br>在本周的讨论中，Marc Zyngier 对补丁提出了质疑，认为不应无条件传播硬件支持的能力，尤其是在 MTE_frac 未来可能演变的情况下。他建议将修复限制在当前问题的具体情况，而不是盲目覆盖来宾对硬件能力的视图。此讨论表明，补丁的实现需要更为谨慎，以避免潜在的兼容性问题。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-04-14]</span> <span class="email-subject">[RFC PATCH 0/3] KVM: arm64: Don't claim MTE_ASYNC if not supported</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Ben Horgan <span class="email-sender">&lt;ben.horgan@arm.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-04-14]</span> <span class="email-subject">[RFC PATCH 2/3] KVM: arm64: Make MTE_frac masking conditional on MTE capability</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Ben Horgan <span class="email-sender">&lt;ben.horgan@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-27]</span> <span class="email-subject">Re: [RFC PATCH 2/3] KVM: arm64: Make MTE_frac masking conditional on MTE capability</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
                </div>
            </div>
        </div>

        <div class="category">
            <h2>GIT PULL</h2>

            <div class="thread">
                <div class="thread-header">
                    <h3>[GIT PULL] KVM/arm64 fixes for 6.15, round #2</h3>
                </div>

                <div class="thread-meta">
                    <span>2 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-04-18</span>
                </div>

                <div class="ai-summary">
                    本邮件线程讨论了针对 KVM/arm64 的修复补丁，主要内容集中在为即将发布的 6.15 版本解决引导失败的问题。<br><br>在历史讨论中，Oliver Upton 提出了一个紧急修复补丁，旨在解决 PV MIDR 基础设施引发的引导失败。此补丁经过 Catalin 的审查，并被 Oliver 提请在工作周结束前进行合并。<br><br>在本周的新讨论中，Paolo Bonzini 对 Oliver 的补丁表示感谢，并确认已完成相关工作，表示感谢对方的耐心。这表明补丁已经得到了处理，且没有进一步的争议或问题。<br><br>总体而言，此次讨论的核心是针对 KVM/arm64 的一个重要修复补丁，经过审查后已顺利推进至合并阶段。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-04-18]</span> <span class="email-subject">[GIT PULL] KVM/arm64 fixes for 6.15, round #2</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-24]</span> <span class="email-subject">Re: [GIT PULL] KVM/arm64 fixes for 6.15, round #2</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Paolo Bonzini <span class="email-sender">&lt;pbonzini@redhat.com&gt;</span></div>
                </div>
            </div>
        </div>

        <div class="category">
            <h2>Other</h2>

            <div class="thread">
                <div class="thread-header">
                    <h3>Patch "arm64/boot: Enable EL2 requirements for FEAT_PMUv3p9" has been added to the 6.14-stable tree</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-04-22</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主题是关于补丁“arm64/boot: Enable EL2 requirements for FEAT_PMUv3p9”的更新，该补丁已被添加到6.14-stable树中。补丁的主要内容是为了支持FEAT_PMUv3p9特性，允许从EL1访问特定的性能监控寄存器（如PMICNTR_EL0、PMICFILTR_EL0和PMUACR_EL1），前提是EL2的细粒度陷阱配置得当。为此，补丁中新增了一个初始化帮助函数`__init_el2_fgt2()`，并更新了相关文档以反映SCR_EL3.FGTEn2的要求。<br><br>在历史讨论中没有相关的补丁或问题记录，因此本周的新讨论主要集中在补丁的添加上。邮件中提到，如果任何人认为该补丁不应被添加到稳定树中，可以联系稳定邮件列表。此次补丁的添加标志着对ARM64架构在性能监控方面的进一步支持，确保了在特定条件下的寄存器访问能够正常工作。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-22]</span> <span class="email-subject">Patch "arm64/boot: Enable EL2 requirements for FEAT_PMUv3p9" has been added to the 6.14-stable tree</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: gregkh <span class="email-sender">&lt;gregkh@linuxfoundation.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>Patch "arm64/boot: Enable EL2 requirements for FEAT_PMUv3p9" has been added to the 6.12-stable tree</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-04-22</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主题是关于补丁“arm64/boot: Enable EL2 requirements for FEAT_PMUv3p9”的更新，该补丁已被添加到6.12-stable树中。补丁的主要内容是为FEAT_PMUv3p9特性下的PMICNTR_EL0、PMICFILTR_EL0和PMUACR_EL1寄存器的访问配置EL2所需的细粒度陷阱控制，确保在EL1中访问这些寄存器时能够正确处理。<br><br>在之前的讨论中，补丁的必要性和实现细节已被提及，强调了在EL2中需要初始化特定的控制寄存器，以避免访问这些寄存器时出现陷阱。<br><br>本周的新进展是，补丁已正式被添加到稳定树中，并且提供了相关的文档更新，说明了在使用FEAT_FGT2扩展时，SCR_EL3.FGTEn2位的初始化要求。这一更新确保了在EL2中能够正确访问PMU寄存器，从而提升了系统的性能监控能力。参与者如Rob Herring和Greg Kroah-Hartman等人对补丁进行了测试和审核，确保其符合稳定性要求。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-22]</span> <span class="email-subject">Patch "arm64/boot: Enable EL2 requirements for FEAT_PMUv3p9" has been added to the 6.12-stable tree</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: gregkh <span class="email-sender">&lt;gregkh@linuxfoundation.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>Patch "KVM: arm64: Remove VHE host restore of CPACR_EL1.ZEN" has been added to the 6.1-stable tree</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-04-22</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主题是关于一个补丁的更新，该补丁标题为“KVM: arm64: Remove VHE host restore of CPACR_EL1.ZEN”，已被添加到6.1-stable树中。该补丁的主要内容是移除在VHE模式下，KVM主机对CPACR_EL1.ZEN的保存和恢复逻辑，因其在当前情况下显得多余。<br><br>在历史讨论中，补丁的作者Mark Rutland指出，当KVM处于VHE模式时，主机内核在执行kvm_arch_vcpu_load_fp()和kvm_arch_vcpu_put_fp()时尝试保存和恢复CPACR_EL1.ZEN的配置，但由于VHE hyp代码在返回主机时会无条件将CPTR_EL2.ZEN配置为0b01，因此主机内核可以安全地保存和恢复自身的FPSIMD/SVE/SME状态，而无需进行额外的保存和恢复操作。<br><br>本周的新讨论中，Greg Kroah-Hartman确认该补丁已成功添加到6.1-stable树，并提供了补丁文件的链接。如果有人认为该补丁不应被添加到稳定树中，可以联系稳定邮件列表。整体来看，该补丁的添加标志着对KVM在arm64架构下的进一步优化，简化了不必要的状态管理逻辑。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-22]</span> <span class="email-subject">Patch "KVM: arm64: Remove VHE host restore of CPACR_EL1.ZEN" has been added to the 6.1-stable tree</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: gregkh <span class="email-sender">&lt;gregkh@linuxfoundation.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>Patch "KVM: arm64: Unconditionally save+flush host FPSIMD/SVE/SME state" has been added to the 6.1-stable tree</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-04-22</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主题是关于补丁“KVM: arm64: Unconditionally save+flush host FPSIMD/SVE/SME state”的更新，该补丁已被添加到6.1-stable树中。补丁的主要目的是解决当前KVM在处理ARM64架构时，主机的FPSIMD/SVE/SME状态保存不当的问题。<br><br>在历史讨论中，补丁指出了几个问题，包括主机SVE状态因TIF_SVE和CPACR_ELx.ZEN配置不一致而意外丢失，ptrace修改后主机SVE状态被丢弃，以及在非保护虚拟机中未能保存主机FPMR值等。这些问题自v5.17版本以来就存在，导致了不稳定性和潜在的崩溃。<br><br>本周的新讨论中，Greg Kroah-Hartman通知大家该补丁已成功添加到稳定树，并提供了补丁的链接和文件名。他还邀请任何对该补丁有异议的人联系稳定邮件列表。这表明补丁的实施已得到认可，并且在稳定版本中得到了进一步的支持。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-22]</span> <span class="email-subject">Patch "KVM: arm64: Unconditionally save+flush host FPSIMD/SVE/SME state" has been added to the 6.1-stable tree</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: gregkh <span class="email-sender">&lt;gregkh@linuxfoundation.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>Patch "KVM: arm64: Calculate cptr_el2 traps on activating traps" has been added to the 6.1-stable tree</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-04-22</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主题是关于将补丁 "KVM: arm64: Calculate cptr_el2 traps on activating traps" 添加到 6.1-stable 树中。该补丁的主要目的是在激活陷阱时，从头计算 cptr_el2 的值，从而不再需要在每个虚拟 CPU 结构中存储 cptr_el2。这一改动有助于简化代码，并确保在每次虚拟 CPU 运行时正确设置某些陷阱，例如来宾是否拥有浮点寄存器。<br><br>在历史讨论中，该补丁的背景信息提到，之前的设计中需要在每个虚拟 CPU 结构中保存 cptr_el2 的值，而此次补丁通过动态计算来解决这一问题。补丁的提交者是 Fuad Tabba，并得到了多位开发者的签名支持。<br><br>在本周的新讨论中，Greg Kroah-Hartman 通知大家该补丁已成功添加到 6.1-stable 树中，并提供了补丁文件的链接。如果其他人认为该补丁不应被添加到稳定树中，可以通过邮件与稳定团队联系。此次更新没有其他新的讨论或异议，表明补丁的接受过程相对顺利。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-22]</span> <span class="email-subject">Patch "KVM: arm64: Calculate cptr_el2 traps on activating traps" has been added to the 6.1-stable tree</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: gregkh <span class="email-sender">&lt;gregkh@linuxfoundation.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>Patch "KVM: arm64: Remove VHE host restore of CPACR_EL1.SMEN" has been added to the 6.1-stable tree</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-04-22</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主题是关于补丁“KVM: arm64: Remove VHE host restore of CPACR_EL1.SMEN”的更新，该补丁已被添加到6.1稳定树中。补丁的主要内容是移除在VHE模式下，KVM主机对CPACR_EL1.SMEN的恢复逻辑。此逻辑在历史上曾因不安全而引入，但随着后续修复，现已不再需要。<br><br>在历史讨论中，补丁的背景说明了在VHE模式下，主机内核尝试在运行vCPU时保存和恢复CPACR_EL1.SMEN的配置。然而，之前的实现存在缺陷，导致在某些情况下可能引发致命错误。随着后来的修复，主机内核能够安全地保存和恢复状态，因此移除冗余的保存/恢复逻辑成为可能。<br><br>在本周的新讨论中，Greg Kroah-Hartman通知大家该补丁已成功添加至稳定树，并提供了相关链接。如果有任何人认为该补丁不应被添加，请及时联系稳定邮件列表。此次更新标志着对KVM在arm64架构下的进一步优化，确保系统的稳定性和安全性。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-22]</span> <span class="email-subject">Patch "KVM: arm64: Remove VHE host restore of CPACR_EL1.SMEN" has been added to the 6.1-stable tree</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: gregkh <span class="email-sender">&lt;gregkh@linuxfoundation.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>Patch "KVM: arm64: Remove host FPSIMD saving for non-protected KVM" has been added to the 6.1-stable tree</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-04-22</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主题是关于补丁“KVM: arm64: Remove host FPSIMD saving for non-protected KVM”的更新，该补丁已被添加到6.1-stable树中。<br><br>该补丁的主要内容是移除在非保护模式下KVM对主机FPSIMD（浮点 SIMD）状态的保存代码。由于主机现在会主动保存自身的FPSIMD/SVE/SME状态，因此在非保护模式下，KVM无需再保存这些状态。保护模式下仍需保存主机的FPSIMD/SVE状态，以防止泄露来宾状态，因此相关代码仍需保留。补丁的实施旨在清理未使用的代码和数据结构。<br><br>在本周的新讨论中，Greg Kroah-Hartman通知邮件列表，补丁已成功添加到6.1-stable树中，并提供了补丁的链接和文件名。如果有任何人认为该补丁不应被添加到稳定树中，可以联系稳定邮件列表。此次更新没有其他参与者的回复或异议，表明补丁的接受程度较高。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-22]</span> <span class="email-subject">Patch "KVM: arm64: Remove host FPSIMD saving for non-protected KVM" has been added to the 6.1-stable tree</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: gregkh <span class="email-sender">&lt;gregkh@linuxfoundation.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>Patch "KVM: arm64: Refactor exit handlers" has been added to the 6.1-stable tree</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-04-22</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主题是关于补丁“KVM: arm64: Refactor exit handlers”的更新，该补丁已被添加到6.1-stable树中。<br><br>1. **原始补丁内容**：该补丁旨在重构ARM64架构下KVM的退出处理程序，使得相关的头文件不再依赖于特定的C文件定义，从而避免编译时的警告。补丁的功能上没有改变，但改善了代码的结构和可维护性。<br><br>2. **之前的讨论要点**：由于邮件中没有提供历史讨论的内容，因此无法总结之前的讨论要点。<br><br>3. **本周的新讨论与进展**：本周的邮件由Greg Kroah-Hartman发出，通知大家该补丁已成功添加到6.1-stable树中，并提供了补丁的文件名和存放位置。邮件中还提到，如果有人认为该补丁不应被添加到稳定树，可以联系相关邮箱进行反馈。<br><br>总体来看，此次更新主要是对KVM退出处理程序的代码结构进行优化，提升了代码的可读性和维护性。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-22]</span> <span class="email-subject">Patch "KVM: arm64: Refactor exit handlers" has been added to the 6.1-stable tree</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: gregkh <span class="email-sender">&lt;gregkh@linuxfoundation.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>Patch "KVM: arm64: Mark some header functions as inline" has been added to the 6.1-stable tree</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-04-22</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主题是关于将补丁 "KVM: arm64: Mark some header functions as inline" 添加到 6.1-stable 树的通知。<br><br>1. **原始补丁内容**：该补丁的目的是将一些在共享的 hyp 切换头文件中定义的静态函数标记为 `inline`，以避免在未使用这些函数时产生编译器警告。这些函数包括 `kvm_hyp_handle_dabt_low`、`kvm_hyp_handle_cp15_32` 等。补丁还移除了头文件中的 `__alias()` 使用，并通过预处理器宏将部分函数重命名，以保持内核代码的一致性。<br><br>2. **之前讨论要点**：邮件中没有提及之前的讨论内容，说明该补丁可能是首次被提出或讨论。<br><br>3. **本周的新讨论和进展**：本周，Greg Kroah-Hartman 通知大家该补丁已成功添加到 6.1-stable 树中，并提供了补丁的下载链接。他还邀请任何对该补丁有异议的人联系稳定邮件列表。没有其他参与者对此补丁发表新的意见或反馈。<br><br>总体来看，此次讨论主要集中在补丁的添加及其目的上，未涉及更深入的技术讨论或争议。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-22]</span> <span class="email-subject">Patch "KVM: arm64: Mark some header functions as inline" has been added to the 6.1-stable tree</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: gregkh <span class="email-sender">&lt;gregkh@linuxfoundation.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>Patch "KVM: arm64: Eagerly switch ZCR_EL{1,2}" has been added to the 6.1-stable tree</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-04-22</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主题是关于补丁 "KVM: arm64: Eagerly switch ZCR_EL{1,2}" 的更新，该补丁已被添加到 6.1-stable 树中。补丁的主要目的是在 KVM 的非保护模式下，确保在客机与主机之间切换时，及时切换 ZCR_EL{1,2} 寄存器，以避免在处理软中断时出现状态保存失败的问题。<br><br>在历史讨论中，补丁的背景是针对当前 KVM 实现中，客机的 FPSIMD/SVE/SME 状态与主机的 SVE 最大向量长度（VL）可能不一致的问题。之前的讨论强调了在切换过程中，主机可能会尝试使用过时的状态，导致 SIGKILL 信号的产生。<br><br>本周的新进展是，邮件的发件人 Greg Kroah-Hartman 通知大家该补丁已成功添加到稳定树中，并提供了补丁的链接和文件名。如果有人认为该补丁不应被添加，可以联系稳定邮件列表进行反馈。这表明补丁经过审查并获得了批准，标志着该问题的解决方案已被正式采纳。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-22]</span> <span class="email-subject">Patch "KVM: arm64: Eagerly switch ZCR_EL{1,2}" has been added to the 6.1-stable tree</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: gregkh <span class="email-sender">&lt;gregkh@linuxfoundation.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>Patch "KVM: arm64: Discard any SVE state when entering KVM guests" has been added to the 6.1-stable tree</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-04-22</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主题是补丁“KVM: arm64: Discard any SVE state when entering KVM guests”，该补丁已被添加到6.1-stable树中。补丁的主要内容是，当进入KVM虚拟机时，清除任何SVE（Scalable Vector Extension）状态，以确保系统的稳定性和性能。补丁通过引入新的函数`fpsimd_kvm_prepare()`来处理任务状态的转换，确保在进入虚拟机时不保留主机的SVE状态。<br><br>在历史讨论中，补丁的背景是自从之前的提交8383741ab2e773a99以来，KVM不再跟踪主机的SVE状态，而是依赖于在执行系统调用时禁用SVE。随着未来可能的性能优化，SVE可能会保持启用，因此需要在进入虚拟机时进行适当的状态处理。<br><br>本周的新进展是补丁已被正式添加到6.1-stable树中，参与者Greg Kroah-Hartman通知了这一更新，并提供了补丁的链接。如果其他人认为该补丁不应被添加到稳定树中，可以通过邮件反馈。此次更新标志着该补丁的正式应用，进一步推动了KVM在arm64架构上的稳定性和性能优化。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-22]</span> <span class="email-subject">Patch "KVM: arm64: Discard any SVE state when entering KVM guests" has been added to the 6.1-stable tree</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: gregkh <span class="email-sender">&lt;gregkh@linuxfoundation.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>Patch "arm64/fpsimd: Track the saved FPSIMD state type separately to TIF_SVE" has been added to the 6.1-stable tree</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-04-22</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主题是关于一个补丁的更新，该补丁标题为“arm64/fpsimd: Track the saved FPSIMD state type separately to TIF_SVE”，已被添加到6.1-stable树中。<br><br>该补丁的主要内容是引入一个新的枚举类型，用于在保存浮点寄存器状态时明确指示当前使用的格式（FPSIMD或SVE）。目前的实现依赖于TIF_SVE标志来跟踪状态，这限制了优化的可能性，尤其是在系统调用时。补丁通过在`thread_struct`和KVM客体状态中增加一个新的字段，来改善这一点。<br><br>在历史讨论中，补丁得到了多位开发者的审查和认可，包括Catalin Marinas和Marc Zyngier等，他们对补丁的逻辑和实现表示支持。<br><br>本周的新进展是，补丁已正式被添加到6.1-stable树中，开发者Greg Kroah-Hartman在邮件中通知了这一更新，并邀请任何对此补丁有异议的人提出意见。这标志着补丁的正式集成，预计将为后续的功能改进铺平道路。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-22]</span> <span class="email-subject">Patch "arm64/fpsimd: Track the saved FPSIMD state type separately to TIF_SVE" has been added to the 6.1-stable tree</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: gregkh <span class="email-sender">&lt;gregkh@linuxfoundation.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>Patch "arm64/fpsimd: Stop using TIF_SVE to manage register saving in KVM" has been added to the 6.1-stable tree</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-04-22</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主题是关于一个补丁，标题为“arm64/fpsimd: Stop using TIF_SVE to manage register saving in KVM”，该补丁已被添加到6.1-stable树中。补丁的主要内容是停止在KVM中使用TIF_SVE来管理寄存器的保存，而是通过明确告知主机浮点代码需要保存的寄存器状态来简化KVM代码。这一改动旨在优化常规任务的处理，并且不会对功能或性能产生影响。<br><br>在历史讨论中，补丁的背景信息提到，之前的实现依赖于TIF_SVE标志来管理寄存器的保存，而此次补丁通过使用`to_save`变量来确保保存正确的数据，从而简化了代码。<br><br>本周的新讨论主要是补丁被正式添加到6.1-stable树的通知。邮件中提到，如果有人认为该补丁不应被添加到稳定树，可以联系稳定邮件列表。此次更新没有引发新的争论或问题，表明补丁的接受过程相对顺利。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-22]</span> <span class="email-subject">Patch "arm64/fpsimd: Stop using TIF_SVE to manage register saving in KVM" has been added to the 6.1-stable tree</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: gregkh <span class="email-sender">&lt;gregkh@linuxfoundation.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>Patch "arm64/fpsimd: Have KVM explicitly say which FP registers to save" has been added to the 6.1-stable tree</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-04-22</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主题是关于一个补丁“arm64/fpsimd: Have KVM explicitly say which FP registers to save”，该补丁已被添加到6.1-stable树中。补丁的主要目的是让KVM明确指定需要保存的浮点寄存器，以优化寄存器的保存和恢复过程，避免不必要的操作。<br><br>在历史讨论中，补丁提出了通过引入新的FP_STATE_CURRENT状态来简化KVM与CPU的绑定过程，从而更清晰地管理浮点寄存器的保存。这种方法旨在减少复杂性，并提高对SVE寄存器状态的优化能力。补丁并未直接修改保存的决策逻辑，而是开始跟踪新的信息，并在请求的状态与默认保存状态不一致时发出警告。<br><br>本周的新进展是，补丁已经被正式添加到6.1-stable树中，参与者Greg Kroah-Hartman通知了这一更新，并提供了补丁文件的链接。如果有任何人认为该补丁不应被添加到稳定树中，可以联系稳定邮件列表。此次更新标志着该补丁的正式实施，表明开发者对其功能的认可。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-22]</span> <span class="email-subject">Patch "arm64/fpsimd: Have KVM explicitly say which FP registers to save" has been added to the 6.1-stable tree</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: gregkh <span class="email-sender">&lt;gregkh@linuxfoundation.org&gt;</span></div>
                </div>
            </div>
        </div>

    </div>
</body>
</html>
