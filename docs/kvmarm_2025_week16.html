<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KVMARM 邮件列表 AI 总结报告</title>
    <style>
        body {
            font-family: 'Courier New', 'Courier', monospace;
            line-height: 1.5;
            max-width: 1200px;
            margin: 0 auto;
            padding: 30px 40px;
            background-color: #ffffff;
            color: #222;
        }
        .container {
            background: #ffffff;
        }
        h1 {
            font-size: 2.2em;
            font-weight: bold;
            color: #000;
            margin-bottom: 0.3em;
            text-align: center;
            border-bottom: 2px solid #000;
            padding-bottom: 15px;
        }
        h2 {
            font-size: 1.6em;
            font-weight: bold;
            color: #000;
            margin-top: 2em;
            margin-bottom: 0.6em;
            border-bottom: 1px solid #333;
            padding-bottom: 8px;
        }
        h3 {
            font-size: 1.2em;
            font-weight: bold;
            color: #111;
            margin-top: 1.5em;
            margin-bottom: 0.5em;
        }
        h4 {
            font-size: 1.05em;
            font-weight: bold;
            color: #333;
            margin-top: 1.2em;
            margin-bottom: 0.5em;
        }
        .meta-info {
            background: #f9f9f9;
            border: 1px solid #ddd;
            padding: 15px 20px;
            margin: 20px 0;
            font-size: 0.95em;
            line-height: 1.6;
        }
        .meta-info p {
            margin: 6px 0;
            color: #444;
        }
        .meta-info strong {
            color: #000;
            font-weight: bold;
        }
        .stats {
            display: table;
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            border: 1px solid #000;
        }
        .stat-card {
            display: table-cell;
            border: 1px solid #000;
            padding: 12px 15px;
            text-align: center;
            background: #fafafa;
        }
        .stat-card h3 {
            margin: 0;
            color: #000;
            font-size: 1.8em;
            font-weight: bold;
            border: none;
            padding: 0;
        }
        .stat-card p {
            margin: 5px 0 0 0;
            color: #444;
            font-size: 0.9em;
            font-weight: normal;
        }
        .category {
            margin: 30px 0;
        }
        .thread {
            margin: 25px 0;
            padding: 15px;
            background: #fafafa;
            border: 1px solid #ccc;
            page-break-inside: avoid;
        }
        .thread-header {
            margin-bottom: 12px;
            border-bottom: 1px solid #ddd;
            padding-bottom: 10px;
        }
        .thread-header h3 {
            font-size: 1.15em;
            font-weight: bold;
            color: #000;
            margin: 0;
        }
        .thread-meta {
            display: block;
            margin: 8px 0 12px 0;
            font-size: 0.9em;
            color: #555;
            font-style: italic;
        }
        .thread-meta span {
            margin-right: 15px;
        }
        .ai-summary {
            background: #fff;
            border-left: 3px solid #666;
            padding: 12px 15px;
            margin: 15px 0;
            line-height: 1.6;
            color: #222;
            font-style: italic;
        }
        .email-list {
            background: #fff;
            border: 1px solid #ccc;
            padding: 10px 15px;
            font-family: 'Courier New', 'Consolas', monospace;
            font-size: 0.88em;
            line-height: 1.5;
            overflow-x: auto;
            margin: 10px 0;
        }
        .email-item {
            margin: 4px 0;
            padding: 2px 0;
            color: #222;
        }
        .email-item.historical {
            background: #f5f5f5;
            border-left: 3px solid #999;
            padding-left: 8px;
            opacity: 0.8;
        }
        .email-item.new {
            background: #fffef0;
            border-left: 3px solid #0066cc;
            padding-left: 8px;
        }
        .email-date {
            color: #0066cc;
            font-weight: bold;
        }
        .email-date.historical {
            color: #666;
        }
        .email-sender {
            color: #c30;
            font-weight: normal;
        }
        .email-subject {
            color: #000;
        }
        .historical-marker {
            color: #999;
            font-size: 0.85em;
            font-style: italic;
        }
        .new-marker {
            color: #0066cc;
            font-size: 0.85em;
            font-weight: bold;
        }
        .archive-link {
            display: inline-block;
            margin: 15px 0;
            padding: 10px 20px;
            background: #333;
            color: #fff;
            text-decoration: none;
            border: 2px solid #000;
            font-weight: bold;
            transition: all 0.2s;
        }
        .archive-link:hover {
            background: #000;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>KVMARM Mailing List Analysis Report</h1>

        <div class="meta-info">
            <p><strong>Generated:</strong> 2025-10-27 10:06</p>
            <p><strong>Time Period:</strong> 2025年4月 第16周 (04/14 - 04/20)</p>
            <p><strong>Total Messages:</strong> 217 | <strong>Total Threads:</strong> 25</p>
            <p style="text-align: center;"><a href="archive.html" class="archive-link">📚 历史归档 Archive</a></p>
        </div>


        <div class="category">
            <h2>PATCH</h2>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v8 00/43] arm64: Support for Arm CCA in KVM</h3>
                </div>

                <div class="thread-meta">
                    <span>44 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-04-16</span>
                </div>

                <div class="ai-summary">
                    本邮件线程讨论的主题是针对 ARM64 架构的 KVM（内核虚拟机）支持 Arm CCA（机密计算架构）的补丁系列（PATCH v8 00/43）。该补丁旨在为 KVM 提供对受保护虚拟机的支持，主要通过引入 Realm（领域）概念来实现。<br><br>1. **原始补丁内容**：补丁系列的核心是为 KVM 添加对 Arm CCA 的支持，允许在受保护的环境中运行虚拟机。补丁包括对新 ioctl 的支持，以便创建和管理 Realm，以及对 RMM（Realm 管理监控器）功能的集成。<br><br>2. **历史讨论要点**：之前的讨论集中在如何处理 RMM 与 KVM 之间的交互，特别是在处理内存映射、异常处理和资源分配方面。补丁经过多轮审查和修改，增加了文档、错误处理和代码清晰度。<br><br>3. **本周的新讨论与进展**：本周的讨论主要围绕补丁的具体实现细节，包括：<br>   - 增强了对文档的支持，详细描述了新功能和接口。<br>   - 引入了对 Realm 的管理，包括创建、激活和内存映射的功能。<br>   - 处理了 Realm 中的 MMIO（内存映射输入输出）和 PSCI（电源状态控制接口）请求。<br>   - 讨论了如何在 Realm 中处理定时器和中断，确保在进入 Realm 时禁用物理中断。<br>   - 提供了对 SVE（可扩展向量扩展）的支持，允许用户空间配置最大向量长度。<br><br>整体而言，本周的讨论和补丁更新进一步完善了 KVM 在 ARM64 架构下对机密计算的支持，确保了更高的安全性和灵活性。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-16]</span> <span class="email-subject">[PATCH v8 00/43] arm64: Support for Arm CCA in KVM</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Steven Price <span class="email-sender">&lt;steven.price@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-16]</span> <span class="email-subject">[PATCH v8 01/43] kvm: arm64: Include kvm_emulate.h in kvm/arm_psci.h</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Steven Price <span class="email-sender">&lt;steven.price@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-16]</span> <span class="email-subject">[PATCH v8 02/43] arm64: RME: Handle Granule Protection Faults (GPFs)</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Steven Price <span class="email-sender">&lt;steven.price@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-16]</span> <span class="email-subject">[PATCH v8 03/43] arm64: RME: Add SMC definitions for calling the RMM</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Steven Price <span class="email-sender">&lt;steven.price@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-16]</span> <span class="email-subject">[PATCH v8 04/43] arm64: RME: Add wrappers for RMI calls</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Steven Price <span class="email-sender">&lt;steven.price@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-16]</span> <span class="email-subject">[PATCH v8 05/43] arm64: RME: Check for RME support at KVM init</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Steven Price <span class="email-sender">&lt;steven.price@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-16]</span> <span class="email-subject">[PATCH v8 06/43] arm64: RME: Define the user ABI</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Steven Price <span class="email-sender">&lt;steven.price@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-16]</span> <span class="email-subject">[PATCH v8 07/43] arm64: RME: ioctls to create and configure realms</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Steven Price <span class="email-sender">&lt;steven.price@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-16]</span> <span class="email-subject">[PATCH v8 08/43] kvm: arm64: Don't expose debug capabilities for realm guests</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Steven Price <span class="email-sender">&lt;steven.price@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-16]</span> <span class="email-subject">[PATCH v8 09/43] KVM: arm64: Allow passing machine type in KVM creation</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Steven Price <span class="email-sender">&lt;steven.price@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-16]</span> <span class="email-subject">[PATCH v8 10/43] arm64: RME: RTT tear down</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Steven Price <span class="email-sender">&lt;steven.price@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-16]</span> <span class="email-subject">[PATCH v8 11/43] arm64: RME: Allocate/free RECs to match vCPUs</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Steven Price <span class="email-sender">&lt;steven.price@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-16]</span> <span class="email-subject">[PATCH v8 12/43] KVM: arm64: vgic: Provide helper for number of list registers</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Steven Price <span class="email-sender">&lt;steven.price@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-16]</span> <span class="email-subject">[PATCH v8 13/43] arm64: RME: Support for the VGIC in realms</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Steven Price <span class="email-sender">&lt;steven.price@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-16]</span> <span class="email-subject">[PATCH v8 14/43] KVM: arm64: Support timers in realm RECs</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Steven Price <span class="email-sender">&lt;steven.price@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-16]</span> <span class="email-subject">[PATCH v8 15/43] arm64: RME: Allow VMM to set RIPAS</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Steven Price <span class="email-sender">&lt;steven.price@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-16]</span> <span class="email-subject">[PATCH v8 16/43] arm64: RME: Handle realm enter/exit</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Steven Price <span class="email-sender">&lt;steven.price@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-16]</span> <span class="email-subject">[PATCH v8 17/43] arm64: RME: Handle RMI_EXIT_RIPAS_CHANGE</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Steven Price <span class="email-sender">&lt;steven.price@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-16]</span> <span class="email-subject">[PATCH v8 18/43] KVM: arm64: Handle realm MMIO emulation</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Steven Price <span class="email-sender">&lt;steven.price@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-16]</span> <span class="email-subject">[PATCH v8 19/43] arm64: RME: Allow populating initial contents</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Steven Price <span class="email-sender">&lt;steven.price@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-16]</span> <span class="email-subject">[PATCH v8 20/43] arm64: RME: Runtime faulting of memory</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Steven Price <span class="email-sender">&lt;steven.price@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-16]</span> <span class="email-subject">[PATCH v8 21/43] KVM: arm64: Handle realm VCPU load</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Steven Price <span class="email-sender">&lt;steven.price@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-16]</span> <span class="email-subject">[PATCH v8 22/43] KVM: arm64: Validate register access for a Realm VM</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Steven Price <span class="email-sender">&lt;steven.price@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-16]</span> <span class="email-subject">[PATCH v8 23/43] KVM: arm64: Handle Realm PSCI requests</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Steven Price <span class="email-sender">&lt;steven.price@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-16]</span> <span class="email-subject">[PATCH v8 24/43] KVM: arm64: WARN on injected undef exceptions</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Steven Price <span class="email-sender">&lt;steven.price@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-16]</span> <span class="email-subject">[PATCH v8 25/43] arm64: Don't expose stolen time for realm guests</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Steven Price <span class="email-sender">&lt;steven.price@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-16]</span> <span class="email-subject">[PATCH v8 26/43] arm64: RME: allow userspace to inject aborts</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Steven Price <span class="email-sender">&lt;steven.price@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-16]</span> <span class="email-subject">[PATCH v8 27/43] arm64: RME: support RSI_HOST_CALL</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Steven Price <span class="email-sender">&lt;steven.price@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-16]</span> <span class="email-subject">[PATCH v8 28/43] arm64: RME: Allow checking SVE on VM instance</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Steven Price <span class="email-sender">&lt;steven.price@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-16]</span> <span class="email-subject">[PATCH v8 29/43] arm64: RME: Always use 4k pages for realms</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Steven Price <span class="email-sender">&lt;steven.price@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-16]</span> <span class="email-subject">[PATCH v8 30/43] arm64: RME: Prevent Device mappings for Realms</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Steven Price <span class="email-sender">&lt;steven.price@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-16]</span> <span class="email-subject">[PATCH v8 31/43] arm_pmu: Provide a mechanism for disabling the physical IRQ</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Steven Price <span class="email-sender">&lt;steven.price@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-16]</span> <span class="email-subject">[PATCH v8 32/43] arm64: RME: Enable PMU support with a realm guest</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Steven Price <span class="email-sender">&lt;steven.price@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-16]</span> <span class="email-subject">[PATCH v8 33/43] arm64: RME: Hide KVM_CAP_READONLY_MEM for realm guests</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Steven Price <span class="email-sender">&lt;steven.price@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-16]</span> <span class="email-subject">[PATCH v8 34/43] arm64: RME: Propagate number of breakpoints and watchpoints to userspace</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Steven Price <span class="email-sender">&lt;steven.price@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-16]</span> <span class="email-subject">[PATCH v8 35/43] arm64: RME: Set breakpoint parameters through SET_ONE_REG</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Steven Price <span class="email-sender">&lt;steven.price@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-16]</span> <span class="email-subject">[PATCH v8 36/43] arm64: RME: Initialize PMCR.N with number counter supported by RMM</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Steven Price <span class="email-sender">&lt;steven.price@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-16]</span> <span class="email-subject">[PATCH v8 37/43] arm64: RME: Propagate max SVE vector length from RMM</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Steven Price <span class="email-sender">&lt;steven.price@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-16]</span> <span class="email-subject">[PATCH v8 38/43] arm64: RME: Configure max SVE vector length for a Realm</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Steven Price <span class="email-sender">&lt;steven.price@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-16]</span> <span class="email-subject">[PATCH v8 39/43] arm64: RME: Provide register list for unfinalized RME RECs</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Steven Price <span class="email-sender">&lt;steven.price@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-16]</span> <span class="email-subject">[PATCH v8 40/43] arm64: RME: Provide accurate register list</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Steven Price <span class="email-sender">&lt;steven.price@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-16]</span> <span class="email-subject">[PATCH v8 41/43] KVM: arm64: Expose support for private memory</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Steven Price <span class="email-sender">&lt;steven.price@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-16]</span> <span class="email-subject">[PATCH v8 42/43] KVM: arm64: Expose KVM_ARM_VCPU_REC to user space</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Steven Price <span class="email-sender">&lt;steven.price@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-16]</span> <span class="email-subject">[PATCH v8 43/43] KVM: arm64: Allow activating realms</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Steven Price <span class="email-sender">&lt;steven.price@arm.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v5 00/28] KVM: arm64: Implement support for SME</h3>
                </div>

                <div class="thread-meta">
                    <span>29 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-04-17</span>
                </div>

                <div class="ai-summary">
                    本邮件线程讨论了针对 KVM 的 ARM64 架构实现 SME（可扩展矩阵扩展）的支持，主要包括一系列补丁（PATCH v5 00/28）。以下是讨论的主要内容：<br><br>1. **原始补丁内容**：补丁旨在为非保护的 KVM 客户端实现 SME 支持，涉及到新的向量长度配置、控制寄存器（如 SMCR 和 SVCR）以及 ZA 和 ZT0 寄存器的访问。补丁中还定义了与 SVE 类似的用户空间 ABI。<br><br>2. **历史讨论要点**：之前的讨论集中在如何有效地管理 SME 和 SVE 的寄存器状态，确保在不同模式下（如流模式）正确处理寄存器访问。补丁的设计考虑了与现有 SVE 功能的兼容性，避免了复杂的状态管理。<br><br>3. **本周新讨论与进展**：本周的讨论中，Mark Brown 提出了对补丁的更新，明确了用户空间如何访问 SME 特定的状态，并提供了对 SME 控制寄存器的支持。此外，补丁还增加了对 SME 状态的上下文切换支持，确保在嵌套虚拟化环境中也能正确处理 SME 状态。补丁的最终目标是实现完整的 SME 功能，同时保持与 SVE 的一致性。<br><br>整体来看，这一系列补丁的实施将为 KVM 提供更强大的虚拟化支持，尤其是在处理 ARM64 架构的矩阵运算时。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-17]</span> <span class="email-subject">[PATCH v5 00/28] KVM: arm64: Implement support for SME</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-17]</span> <span class="email-subject">[PATCH v5 01/28] arm64/fpsimd: Update FA64 and ZT0 enables when
 loading SME state</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-17]</span> <span class="email-subject">[PATCH v5 02/28] arm64/fpsimd: Decide to save ZT0 and streaming
 mode FFR at bind time</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-17]</span> <span class="email-subject">[PATCH v5 03/28] arm64/fpsimd: Check enable bit for FA64 when
 saving EFI state</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-17]</span> <span class="email-subject">[PATCH v5 04/28] arm64/fpsimd: Determine maximum virtualisable SME
 vector length</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-17]</span> <span class="email-subject">[PATCH v5 05/28] KVM: arm64: Introduce non-UNDEF FGT control</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-17]</span> <span class="email-subject">[PATCH v5 06/28] KVM: arm64: Pay attention to FFR parameter in SVE
 save and load</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-17]</span> <span class="email-subject">[PATCH v5 07/28] KVM: arm64: Pull ctxt_has_ helpers to start of
 sysreg-sr.h</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-17]</span> <span class="email-subject">[PATCH v5 08/28] KVM: arm64: Move SVE state access macros after
 feature test macros</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-17]</span> <span class="email-subject">[PATCH v5 09/28] KVM: arm64: Rename SVE finalization constants to
 be more general</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-17]</span> <span class="email-subject">[PATCH v5 10/28] KVM: arm64: Document the KVM ABI for SME</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-17]</span> <span class="email-subject">[PATCH v5 11/28] KVM: arm64: Define internal features for SME</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-17]</span> <span class="email-subject">[PATCH v5 12/28] KVM: arm64: Rename sve_state_reg_region</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-17]</span> <span class="email-subject">[PATCH v5 13/28] KVM: arm64: Store vector lengths in an array</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-17]</span> <span class="email-subject">[PATCH v5 14/28] KVM: arm64: Implement SME vector length
 configuration</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-17]</span> <span class="email-subject">[PATCH v5 15/28] KVM: arm64: Support SME control registers</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-17]</span> <span class="email-subject">[PATCH v5 16/28] KVM: arm64: Support TPIDR2_EL0</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-17]</span> <span class="email-subject">[PATCH v5 17/28] KVM: arm64: Support SME identification registers
 for guests</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-17]</span> <span class="email-subject">[PATCH v5 18/28] KVM: arm64: Support SME priority registers</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-17]</span> <span class="email-subject">[PATCH v5 19/28] KVM: arm64: Provide assembly for SME register
 access</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-17]</span> <span class="email-subject">[PATCH v5 20/28] KVM: arm64: Support userspace access to streaming
 mode Z and P registers</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-17]</span> <span class="email-subject">[PATCH v5 21/28] KVM: arm64: Flush register state on writes to
 SVCR.SM and SVCR.ZA</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-17]</span> <span class="email-subject">[PATCH v5 22/28] KVM: arm64: Expose SME specific state to
 userspace</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-17]</span> <span class="email-subject">[PATCH v5 23/28] KVM: arm64: Context switch SME state for guests</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-17]</span> <span class="email-subject">[PATCH v5 24/28] KVM: arm64: Handle SME exceptions</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-17]</span> <span class="email-subject">[PATCH v5 25/28] KVM: arm64: Expose SME to nested guests</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-17]</span> <span class="email-subject">[PATCH v5 26/28] KVM: arm64: Provide interface for configuring and
 enabling SME for guests</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-17]</span> <span class="email-subject">[PATCH v5 27/28] KVM: arm64: selftests: Add SME system registers
 to get-reg-list</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-17]</span> <span class="email-subject">[PATCH v5 28/28] KVM: arm64: selftests: Add SME to set_id_regs
 test</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH 1/2] KVM: arm64: fix config.hcr used uninitialized in __kvm_at_s1e01_fast</h3>
                </div>

                <div class="thread-meta">
                    <span>22 messages</span>
                    <span>3 participants</span>
                    <span>Started: 2025-04-15</span>
                </div>

                <div class="ai-summary">
                    本邮件主题为“[PATCH 1/2] KVM: arm64: fix config.hcr used uninitialized in __kvm_at_s1e01_fast”，主要讨论了在 KVM 的 arm64 架构中修复未初始化的 `config.hcr` 使用问题。<br><br>**原始 patch/问题的内容**：<br>该 patch 旨在修复在 `__kvm_at_s1e01_fast` 函数中，`config.hcr` 在 `skip_mmu_switch` 情况下未初始化的问题，导致 HCR_EL2 被写入垃圾值，进而导致 CPU 停滞。修复方法是将 `config.hcr` 初始化为 `HCR_HOST_VHE_FLAGS`。<br><br>**之前讨论要点**：<br>之前的讨论中，参与者们指出了该问题的严重性，并提出了可能的修复方案。Marc Zyngier 提到，保存和恢复 HCR_EL2 的过程是多余的，因为在执行该代码时总是在主机上下文中。<br><br>**本周的新讨论、进展或结论**：<br>本周的讨论中，D Scott Phillips 提出了多个补丁，进一步修复了与 AmpereOne 相关的多个 erratum，包括 AC03_CPU_36 和 AC04_CPU_23。这些补丁的主要目的是在写入 HCR_EL2 时避免异步异常的干扰，并在写操作前后添加 DSB 和 ISB 指令以确保数据一致性。Oliver Upton 对这些补丁提出了疑问，认为需要更清晰的描述和更稳健的实现方式。最终，参与者们达成共识，认为将 HCR 的 xMO 位保持为设置状态是较好的方案，以简化代码并减少维护复杂性。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-15]</span> <span class="email-subject">[PATCH 1/2] KVM: arm64: fix config.hcr used uninitialized in __kvm_at_s1e01_fast</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: D Scott Phillips <span class="email-sender">&lt;scott@os.amperecomputing.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-15]</span> <span class="email-subject">[PATCH 2/2] KVM: arm64: Avoid blocking irqs when tlb flushing/ATing with HCR.TGE=0</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: D Scott Phillips <span class="email-sender">&lt;scott@os.amperecomputing.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-15]</span> <span class="email-subject">[PATCH 1/2] arm64: errata: Work around AmpereOne's erratum AC03_CPU_36</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: D Scott Phillips <span class="email-sender">&lt;scott@os.amperecomputing.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-15]</span> <span class="email-subject">[PATCH 2/2] arm64: errata: Work around AmpereOne's erratum AC04_CPU_23</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: D Scott Phillips <span class="email-sender">&lt;scott@os.amperecomputing.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-15]</span> <span class="email-subject">Re: [PATCH 2/2] arm64: errata: Work around AmpereOne's erratum
 AC04_CPU_23</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-15]</span> <span class="email-subject">Re: [PATCH 1/2] arm64: errata: Work around AmpereOne's erratum
 AC03_CPU_36</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-15]</span> <span class="email-subject">Re: [PATCH 1/2] arm64: errata: Work around AmpereOne's erratum
 AC03_CPU_36</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: D Scott Phillips <span class="email-sender">&lt;scott@os.amperecomputing.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-15]</span> <span class="email-subject">Re: [PATCH 1/2] arm64: errata: Work around AmpereOne's erratum
 AC03_CPU_36</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-15]</span> <span class="email-subject">Re: [PATCH 1/2] arm64: errata: Work around AmpereOne's erratum
 AC03_CPU_36</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: D Scott Phillips <span class="email-sender">&lt;scott@os.amperecomputing.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-15]</span> <span class="email-subject">Re: [PATCH 1/2] KVM: arm64: fix config.hcr used uninitialized in __kvm_at_s1e01_fast</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-15]</span> <span class="email-subject">Re: [PATCH 2/2] KVM: arm64: Avoid blocking irqs when tlb flushing/ATing with HCR.TGE=0</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-15]</span> <span class="email-subject">Re: [PATCH 2/2] arm64: errata: Work around AmpereOne's erratum AC04_CPU_23</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-15]</span> <span class="email-subject">Re: [PATCH 2/2] arm64: errata: Work around AmpereOne's erratum
 AC04_CPU_23</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: D Scott Phillips <span class="email-sender">&lt;scott@os.amperecomputing.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-15]</span> <span class="email-subject">Re: [PATCH 2/2] arm64: errata: Work around AmpereOne's erratum
 AC04_CPU_23</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-16]</span> <span class="email-subject">Re: [PATCH 2/2] arm64: errata: Work around AmpereOne's erratum AC04_CPU_23</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-16]</span> <span class="email-subject">Re: [PATCH 1/2] arm64: errata: Work around AmpereOne's erratum AC03_CPU_36</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-16]</span> <span class="email-subject">Re: [PATCH 2/2] KVM: arm64: Avoid blocking irqs when tlb
 flushing/ATing with HCR.TGE=0</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: D Scott Phillips <span class="email-sender">&lt;scott@os.amperecomputing.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-16]</span> <span class="email-subject">Re: [PATCH 1/2] KVM: arm64: fix config.hcr used uninitialized in
 __kvm_at_s1e01_fast</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: D Scott Phillips <span class="email-sender">&lt;scott@os.amperecomputing.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-16]</span> <span class="email-subject">Re: [PATCH 2/2] arm64: errata: Work around AmpereOne's erratum
 AC04_CPU_23</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: D Scott Phillips <span class="email-sender">&lt;scott@os.amperecomputing.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-16]</span> <span class="email-subject">Re: [PATCH 2/2] arm64: errata: Work around AmpereOne's erratum
 AC04_CPU_23</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: D Scott Phillips <span class="email-sender">&lt;scott@os.amperecomputing.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-16]</span> <span class="email-subject">Re: [PATCH 1/2] arm64: errata: Work around AmpereOne's erratum
 AC03_CPU_36</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: D Scott Phillips <span class="email-sender">&lt;scott@os.amperecomputing.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-17]</span> <span class="email-subject">Re: [PATCH 1/2] KVM: arm64: fix config.hcr used uninitialized in __kvm_at_s1e01_fast</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v3 0/6] Add FIELD_MODIFY() helper</h3>
                </div>

                <div class="thread-meta">
                    <span>18 messages</span>
                    <span>5 participants</span>
                    <span>Started: 2025-04-17</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主题是引入一个新的宏助手 `FIELD_MODIFY()`，旨在增强对位域操作的编译时类型检查。该补丁系列共包含六个部分，主要由 Luo Jie 提出。<br><br>**原始补丁内容**：<br>`FIELD_MODIFY()` 是对现有 `xxx_replace_bits()` 函数的补充，提供了更好的文档支持和编译时错误检查。补丁还包括将内核中四个使用 `FIELD_MODIFY()` 的实例转换为新的宏形式，利用 Coccinelle 脚本实现自动化转换。<br><br>**之前讨论要点**：<br>在历史讨论中，参与者对引入新助手的必要性提出了质疑，认为现有的 `*_replace_bits()` 函数已经能够满足需求。部分参与者指出，虽然这些函数的文档不够完善，但它们在实际使用中仍然被广泛应用。<br><br>**本周新讨论与进展**：<br>本周的讨论中，Luo Jie 提交了补丁的多个版本，逐步完善了文档和实现细节。Marc Zyngier 和其他参与者对新宏的必要性和优越性进行了辩论，部分人认为 `FIELD_MODIFY()` 提供了更严格的参数检查，适合在内核中使用。最终，Yury Norov 表示将接受补丁中的部分内容，并将决定是否在 ARM64 部分采用新的宏。<br><br>整体来看，讨论围绕着新宏的引入与现有函数的替代性展开，反映了内核开发中对代码可读性和安全性的关注。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-17]</span> <span class="email-subject">[PATCH v3 0/6] Add FIELD_MODIFY() helper</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Luo Jie <span class="email-sender">&lt;quic_luoj@quicinc.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-17]</span> <span class="email-subject">[PATCH v3 1/6] bitfield: Add FIELD_MODIFY() helper</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Luo Jie <span class="email-sender">&lt;quic_luoj@quicinc.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-17]</span> <span class="email-subject">[PATCH v3 2/6] coccinelle: misc: Add field_modify script</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Luo Jie <span class="email-sender">&lt;quic_luoj@quicinc.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-17]</span> <span class="email-subject">[PATCH v3 3/6] arm64: tlb: Convert the opencoded field modify</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Luo Jie <span class="email-sender">&lt;quic_luoj@quicinc.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-17]</span> <span class="email-subject">[PATCH v3 4/6] arm64: nvhe: Convert the opencoded field modify</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Luo Jie <span class="email-sender">&lt;quic_luoj@quicinc.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-17]</span> <span class="email-subject">[PATCH v3 5/6] arm64: kvm: Convert the opencoded field modify</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Luo Jie <span class="email-sender">&lt;quic_luoj@quicinc.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-17]</span> <span class="email-subject">[PATCH v3 6/6] arm64: mm: Convert the opencoded field modify</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Luo Jie <span class="email-sender">&lt;quic_luoj@quicinc.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-17]</span> <span class="email-subject">Re: [PATCH v3 0/6] Add FIELD_MODIFY() helper</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-17]</span> <span class="email-subject">Re: [PATCH v3 4/6] arm64: nvhe: Convert the opencoded field modify</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-17]</span> <span class="email-subject">Re: [PATCH v3 0/6] Add FIELD_MODIFY() helper</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Andrew Lunn <span class="email-sender">&lt;andrew@lunn.ch&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-17]</span> <span class="email-subject">Re: [PATCH v3 0/6] Add FIELD_MODIFY() helper</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-17]</span> <span class="email-subject">Re: [PATCH v3 3/6] arm64: tlb: Convert the opencoded field modify</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Russell King (Oracle) <span class="email-sender">&lt;linux@armlinux.org.uk&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-18]</span> <span class="email-subject">Re: [PATCH v3 0/6] Add FIELD_MODIFY() helper</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Yury Norov <span class="email-sender">&lt;yury.norov@gmail.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-18]</span> <span class="email-subject">Re: [PATCH v3 4/6] arm64: nvhe: Convert the opencoded field modify</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Yury Norov <span class="email-sender">&lt;yury.norov@gmail.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-18]</span> <span class="email-subject">Re: [PATCH v3 4/6] arm64: nvhe: Convert the opencoded field modify</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-18]</span> <span class="email-subject">Re: [PATCH v3 0/6] Add FIELD_MODIFY() helper</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-18]</span> <span class="email-subject">Re: [PATCH v3 0/6] Add FIELD_MODIFY() helper</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Yury Norov <span class="email-sender">&lt;yury.norov@gmail.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-18]</span> <span class="email-subject">Re: [PATCH v3 1/6] bitfield: Add FIELD_MODIFY() helper</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Yury Norov <span class="email-sender">&lt;yury.norov@gmail.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH hyperv-next v8 00/11] arm64: hyperv: Support Virtual Trust Level Boot</h3>
                </div>

                <div class="thread-meta">
                    <span>17 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-04-14</span>
                </div>

                <div class="ai-summary">
                    本邮件线程讨论了一个关于在 ARM64 架构上支持虚拟信任级别（VTL）启动的补丁系列。Roman Kisel 提出了一个补丁集（PATCH hyperv-next v8 00/11），旨在使 Hyper-V 代码能够在 ARM64 上以 VTL 模式启动。VTL 是虚拟安全模式的一部分，相关文档可在 Microsoft 的官方网站上找到。<br><br>在历史讨论中，补丁经历了多个版本的迭代，逐步修正了代码风格、功能实现和文档描述等问题。补丁的主要内容包括引入 SMCCC API 来检测 Hyper-V 的存在、更新 Kconfig 以支持 ARM64 的 VTL 模式、以及在 VMBus 中实现 DMA 一致性等。<br><br>本周的新讨论中，Roman Kisel 提交了多个补丁，涵盖了 VTL 模式的启用、VTL 字段的初始化、以及对 VMBus 驱动的更新，以支持从设备树中获取中断配置。此外，Michael Kelley 对多个补丁进行了审核，提出了一些建议和改进意见。<br><br>总体而言，这一系列补丁的目标是增强 ARM64 上 Hyper-V 的功能，确保其能够在 VTL 模式下正常工作，并提高代码的可维护性和一致性。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-14]</span> <span class="email-subject">[PATCH hyperv-next v8 00/11] arm64: hyperv: Support Virtual Trust Level Boot</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Roman Kisel <span class="email-sender">&lt;romank@linux.microsoft.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-14]</span> <span class="email-subject">[PATCH hyperv-next v8 01/11] arm64: kvm, smccc: Introduce and use API for getting hypervisor UUID</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Roman Kisel <span class="email-sender">&lt;romank@linux.microsoft.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-14]</span> <span class="email-subject">[PATCH hyperv-next v8 02/11] arm64: hyperv: Use SMCCC to detect hypervisor presence</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Roman Kisel <span class="email-sender">&lt;romank@linux.microsoft.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-14]</span> <span class="email-subject">[PATCH hyperv-next v8 03/11] Drivers: hv: Enable VTL mode for arm64</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Roman Kisel <span class="email-sender">&lt;romank@linux.microsoft.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-14]</span> <span class="email-subject">[PATCH hyperv-next v8 04/11] Drivers: hv: Provide arch-neutral implementation of get_vtl()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Roman Kisel <span class="email-sender">&lt;romank@linux.microsoft.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-14]</span> <span class="email-subject">[PATCH hyperv-next v8 05/11] arm64: hyperv: Initialize the Virtual Trust Level field</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Roman Kisel <span class="email-sender">&lt;romank@linux.microsoft.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-14]</span> <span class="email-subject">[PATCH hyperv-next v8 06/11] arm64, x86: hyperv: Report the VTL the system boots in</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Roman Kisel <span class="email-sender">&lt;romank@linux.microsoft.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-14]</span> <span class="email-subject">[PATCH hyperv-next v8 07/11] dt-bindings: microsoft,vmbus: Add interrupt and DMA coherence properties</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Roman Kisel <span class="email-sender">&lt;romank@linux.microsoft.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-14]</span> <span class="email-subject">[PATCH hyperv-next v8 08/11] Drivers: hv: vmbus: Get the IRQ number from DeviceTree</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Roman Kisel <span class="email-sender">&lt;romank@linux.microsoft.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-14]</span> <span class="email-subject">[PATCH hyperv-next v8 09/11] Drivers: hv: vmbus: Introduce hv_get_vmbus_root_device()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Roman Kisel <span class="email-sender">&lt;romank@linux.microsoft.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-14]</span> <span class="email-subject">[PATCH hyperv-next v8 10/11] ACPI: irq: Introduce acpi_get_gsi_dispatcher()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Roman Kisel <span class="email-sender">&lt;romank@linux.microsoft.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-14]</span> <span class="email-subject">[PATCH hyperv-next v8 11/11] PCI: hv: Get vPCI MSI IRQ domain from DeviceTree</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Roman Kisel <span class="email-sender">&lt;romank@linux.microsoft.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-17]</span> <span class="email-subject">RE: [PATCH hyperv-next v8 01/11] arm64: kvm, smccc: Introduce and use
 API for getting hypervisor UUID</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Michael Kelley <span class="email-sender">&lt;mhklinux@outlook.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-17]</span> <span class="email-subject">RE: [PATCH hyperv-next v8 02/11] arm64: hyperv: Use SMCCC to detect
 hypervisor presence</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Michael Kelley <span class="email-sender">&lt;mhklinux@outlook.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-17]</span> <span class="email-subject">RE: [PATCH hyperv-next v8 03/11] Drivers: hv: Enable VTL mode for
 arm64</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Michael Kelley <span class="email-sender">&lt;mhklinux@outlook.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-17]</span> <span class="email-subject">RE: [PATCH hyperv-next v8 06/11] arm64, x86: hyperv: Report the VTL
 the system boots in</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Michael Kelley <span class="email-sender">&lt;mhklinux@outlook.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-17]</span> <span class="email-subject">RE: [PATCH hyperv-next v8 11/11] PCI: hv: Get vPCI MSI IRQ domain
 from DeviceTree</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Michael Kelley <span class="email-sender">&lt;mhklinux@outlook.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v3 00/10] kvm/arm: Introduce a customizable aarch64 KVM host model</h3>
                </div>

                <div class="thread-meta">
                    <span>15 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-04-14</span>
                </div>

                <div class="ai-summary">
                    本邮件线程讨论了一个关于 KVM/ARM 的补丁系列，主要是引入可定制的 AArch64 KVM 主机模型，允许通过命令行配置 ID 寄存器。<br><br>**原始补丁/问题内容**：<br>补丁系列的核心是使 ID 寄存器可通过命令行配置，增强 KVM 的灵活性和可定制性。补丁分为多个部分，涉及 ID 寄存器的存储重构、文档改进和错误修复等。<br><br>**之前讨论要点**：<br>在之前的讨论中，参与者提到不建议将未知寄存器清零，因为这可能导致不必要的兼容性问题。补丁还强调了在进行内核更新时，用户需要明确配置寄存器字段。<br><br>**本周的新讨论、进展或结论**：<br>本周的讨论集中在补丁的具体实现和文档更新上。Cornelia Huck 提交了多个补丁，涵盖了 ID 寄存器的生成、可写寄存器的访问、以及将修改后的寄存器写回 KVM 的功能。Eric Auger 进一步扩展了 KVM 的功能，使其能够读取所有可写的 ID 寄存器，并在 CPU 对象中引入了新的 IdRegMap 结构。此外，讨论中还提到了如何通过 QMP 命令查询可用的 ID 寄存器值，增强了对主机模型的支持。最后，文档也进行了更新，以便更好地指导用户如何配置和使用这些新特性。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-14]</span> <span class="email-subject">[PATCH v3 00/10] kvm/arm: Introduce a customizable aarch64 KVM host model</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Cornelia Huck <span class="email-sender">&lt;cohuck@redhat.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-14]</span> <span class="email-subject">[PATCH v3 01/10] arm/cpu: Add infra to handle generated ID register definitions</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Cornelia Huck <span class="email-sender">&lt;cohuck@redhat.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-14]</span> <span class="email-subject">[PATCH v3 02/10] arm/cpu: Add sysreg properties generation</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Cornelia Huck <span class="email-sender">&lt;cohuck@redhat.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-14]</span> <span class="email-subject">[PATCH v3 03/10] arm/cpu: Add generated sysreg properties</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Cornelia Huck <span class="email-sender">&lt;cohuck@redhat.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-14]</span> <span class="email-subject">[PATCH v3 04/10] kvm: kvm_get_writable_id_regs</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Cornelia Huck <span class="email-sender">&lt;cohuck@redhat.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-14]</span> <span class="email-subject">[PATCH v3 05/10] arm/cpu: accessors for writable id registers</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Cornelia Huck <span class="email-sender">&lt;cohuck@redhat.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-14]</span> <span class="email-subject">[PATCH v3 06/10] arm/kvm: Allow reading all the writable ID registers</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Cornelia Huck <span class="email-sender">&lt;cohuck@redhat.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-14]</span> <span class="email-subject">[PATCH v3 07/10] arm/kvm: write back modified ID regs to KVM</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Cornelia Huck <span class="email-sender">&lt;cohuck@redhat.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-14]</span> <span class="email-subject">[PATCH v3 08/10] arm/cpu: more customization for the kvm host cpu model</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Cornelia Huck <span class="email-sender">&lt;cohuck@redhat.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-14]</span> <span class="email-subject">[PATCH v3 09/10] arm-qmp-cmds: introspection for ID register props</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Cornelia Huck <span class="email-sender">&lt;cohuck@redhat.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-14]</span> <span class="email-subject">[PATCH v3 10/10] arm/cpu-features: document ID reg properties</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Cornelia Huck <span class="email-sender">&lt;cohuck@redhat.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-15]</span> <span class="email-subject">Re: [PATCH v3 07/10] arm/kvm: write back modified ID regs to KVM</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: =?UTF-8?Q?Philippe_Mathieu-Daud=C3=A9?= <span class="email-sender">&lt;philmd@linaro.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-15]</span> <span class="email-subject">Re: [PATCH v3 02/10] arm/cpu: Add sysreg properties generation</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: =?UTF-8?Q?Philippe_Mathieu-Daud=C3=A9?= <span class="email-sender">&lt;philmd@linaro.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-15]</span> <span class="email-subject">Re: [PATCH v3 02/10] arm/cpu: Add sysreg properties generation</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: =?UTF-8?Q?Philippe_Mathieu-Daud=C3=A9?= <span class="email-sender">&lt;philmd@linaro.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-15]</span> <span class="email-subject">Re: [PATCH v3 07/10] arm/kvm: write back modified ID regs to KVM</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Cornelia Huck <span class="email-sender">&lt;cohuck@redhat.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH 0/4] KVM: arm64: UBSAN at EL2</h3>
                </div>

                <div class="thread-meta">
                    <span>8 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-04-16</span>
                </div>

                <div class="ai-summary">
                    本邮件线程讨论了一个针对 KVM（Kernel-based Virtual Machine）在 ARM64 架构下的补丁集，主题为在 EL2（异常级别 2）中启用 UBSAN（Undefined Behavior Sanitizer）功能。<br><br>**原始补丁内容**：<br>补丁集包含四个部分，主要目的是在 EL2 模式下支持 UBSAN。UBSAN 可以在两种模式下运行：正常模式和陷阱模式。由于在 EL2 中无法打印报告，因此补丁建议在此模式下使用陷阱模式，导致 hypervisor 在检测到错误时会崩溃。<br><br>**历史讨论要点**：<br>在之前的讨论中，提到了一些内核支持的清理工具在 EL2 模式下是被禁用的，去年已经添加了 kCFI（Kernel Control Flow Integrity）支持。补丁集的逻辑重用内核中的 UBSAN 解码，确保 hypervisor 的错误信息格式与内核一致。<br><br>**本周新讨论与进展**：<br>本周的讨论集中在补丁的具体实现上。Mostafa Saleh 提出了补丁的具体内容，并逐一介绍了每个补丁的功能，包括引入新的 Kconfig 选项以便在 EL2 中启用 UBSAN、处理 UBSAN 故障等。Kees Cook 对补丁的格式和命名提出了一些小建议，并表示支持该补丁集的提交。整体来看，补丁集得到了积极的反馈，预计将通过 ARM64 的维护者进行合并。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-16]</span> <span class="email-subject">[PATCH 0/4] KVM: arm64: UBSAN at EL2</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mostafa Saleh <span class="email-sender">&lt;smostafa@google.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-16]</span> <span class="email-subject">[PATCH 1/4] arm64: Introduce esr_is_ubsan_brk()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mostafa Saleh <span class="email-sender">&lt;smostafa@google.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-16]</span> <span class="email-subject">[PATCH 2/4] ubsan: Remove regs from report_ubsan_failure()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mostafa Saleh <span class="email-sender">&lt;smostafa@google.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-16]</span> <span class="email-subject">[PATCH 3/4] KVM: arm64: Introduce CONFIG_UBSAN_KVM_EL2</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mostafa Saleh <span class="email-sender">&lt;smostafa@google.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-16]</span> <span class="email-subject">[PATCH 4/4] KVM: arm64: Handle UBSAN faults</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mostafa Saleh <span class="email-sender">&lt;smostafa@google.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-16]</span> <span class="email-subject">Re: [PATCH 2/4] ubsan: Remove regs from report_ubsan_failure()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Kees Cook <span class="email-sender">&lt;kees@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-16]</span> <span class="email-subject">Re: [PATCH 3/4] KVM: arm64: Introduce CONFIG_UBSAN_KVM_EL2</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Kees Cook <span class="email-sender">&lt;kees@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-16]</span> <span class="email-subject">Re: [PATCH 0/4] KVM: arm64: UBSAN at EL2</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Kees Cook <span class="email-sender">&lt;kees@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v2 0/7] Move pKVM ownership state to hyp_vmemmap</h3>
                </div>

                <div class="thread-meta">
                    <span>8 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-04-16</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主题是关于将 pKVM 所有权状态迁移到 hyp_vmemmap 的补丁系列，共包含 7 个补丁。该补丁的主要目的是提高超管状态查找的效率，并简化现有代码，以便未来可以更容易地引入新特性。<br><br>在历史讨论中，参与者提到该补丁系列的两大主要好处：一是显著降低超管状态查找的开销，避免了对超管阶段 1 页表的遍历；二是将超管状态与线性映射范围的存在解耦，从而为后续代码清理和新特性引入提供便利。<br><br>本周的新讨论中，Quentin Perret 提出了补丁的具体实现，包括：<br>1. **补丁 1**：修复 pKVM 页跟踪的注释。<br>2. **补丁 2**：使用 0b11 编码 PKVM_NOPAGE 状态，以简化后续迁移。<br>3. **补丁 3**：引入访问器函数以替代直接访问结构体中的状态。<br>4. **补丁 4**：将超管状态迁移到 hyp_vmemmap，提升查找效率。<br>5. **补丁 5**：推迟 EL2 阶段 1 映射，增强安全性。<br>6. **补丁 6**：无条件交叉检查超管状态，避免潜在问题。<br><br>整体来看，本周的讨论集中在补丁的具体实现细节和对现有代码的改进，参与者们对补丁的方向表示支持，并进行了代码审查。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-16]</span> <span class="email-subject">[PATCH v2 0/7] Move pKVM ownership state to hyp_vmemmap</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Quentin Perret <span class="email-sender">&lt;qperret@google.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-16]</span> <span class="email-subject">[PATCH v2 1/7] KVM: arm64: Track SVE state in the hypervisor vcpu structure</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Quentin Perret <span class="email-sender">&lt;qperret@google.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-16]</span> <span class="email-subject">[PATCH v2 2/7] KVM: arm64: Fix pKVM page-tracking comments</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Quentin Perret <span class="email-sender">&lt;qperret@google.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-16]</span> <span class="email-subject">[PATCH v2 3/7] KVM: arm64: Use 0b11 for encoding PKVM_NOPAGE</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Quentin Perret <span class="email-sender">&lt;qperret@google.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-16]</span> <span class="email-subject">[PATCH v2 4/7] KVM: arm64: Introduce {get,set}_host_state() helpers</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Quentin Perret <span class="email-sender">&lt;qperret@google.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-16]</span> <span class="email-subject">[PATCH v2 5/7] KVM: arm64: Move hyp state to hyp_vmemmap</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Quentin Perret <span class="email-sender">&lt;qperret@google.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-16]</span> <span class="email-subject">[PATCH v2 6/7] KVM: arm64: Defer EL2 stage-1 mapping on share</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Quentin Perret <span class="email-sender">&lt;qperret@google.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-16]</span> <span class="email-subject">[PATCH v2 7/7] KVM: arm64: Unconditionally cross check hyp state</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Quentin Perret <span class="email-sender">&lt;qperret@google.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v2 0/4] KVM: extract lock_all_vcpus/unlock_all_vcpus</h3>
                </div>

                <div class="thread-meta">
                    <span>6 messages</span>
                    <span>3 participants</span>
                    <span>Started: 2025-04-08</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主题是关于 KVM 中的锁管理，特别是提取 `lock_all_vcpus` 和 `unlock_all_vcpus` 函数的补丁（PATCH v2 0/4）。该补丁旨在重用 `sev_lock/unlock_vcpus_for_migration` 函数，以便在 ARM 和 RISC-V 架构中锁定虚拟机的所有 vCPU，从而解决 ARM 架构中由于锁深度过大而引发的警告。<br><br>在历史讨论中，Maxim Levitsky 提出了这一补丁，并指出通过使用现有的锁机制，可以避免触发锁依赖（lockdep）警告。Peter Zijlstra 对补丁提出了批评，认为代码设计存在问题，并指出补丁中引入的 `trylock` 选项并未在变更日志中明确说明。<br><br>在本周的新讨论中，Paolo Bonzini 和 Peter Zijlstra 继续探讨 ARM 架构中存在的问题，特别是如何使用 `mutex_trylock_nest_lock()` 来避免增加锁深度。Paolo 提出了具体的代码修改建议，以确保在锁定时不增加每个任务的锁深度，并请求 Peter 提供相关 ARM 代码的链接以便进一步分析。<br><br>总体来看，讨论集中在如何优化 KVM 的锁管理机制，以提高系统的稳定性和性能。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-04-08]</span> <span class="email-subject">[PATCH v2 0/4] KVM: extract lock_all_vcpus/unlock_all_vcpus</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Maxim Levitsky <span class="email-sender">&lt;mlevitsk@redhat.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-04-08]</span> <span class="email-subject">[PATCH v2 2/4] KVM: x86: move sev_lock/unlock_vcpus_for_migration to kvm_main.c</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Maxim Levitsky <span class="email-sender">&lt;mlevitsk@redhat.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-04-10]</span> <span class="email-subject">Re: [PATCH v2 2/4] KVM: x86: move
 sev_lock/unlock_vcpus_for_migration to kvm_main.c</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Peter Zijlstra <span class="email-sender">&lt;peterz@infradead.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-16]</span> <span class="email-subject">Re: [PATCH v2 2/4] KVM: x86: move sev_lock/unlock_vcpus_for_migration
 to kvm_main.c</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Paolo Bonzini <span class="email-sender">&lt;pbonzini@redhat.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-16]</span> <span class="email-subject">Re: [PATCH v2 2/4] KVM: x86: move
 sev_lock/unlock_vcpus_for_migration to kvm_main.c</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Peter Zijlstra <span class="email-sender">&lt;peterz@infradead.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-17]</span> <span class="email-subject">Re: [PATCH v2 2/4] KVM: x86: move sev_lock/unlock_vcpus_for_migration
 to kvm_main.c</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Paolo Bonzini <span class="email-sender">&lt;pbonzini@redhat.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH] arm64: Remove checks for broken Cavium HW from the PI code</h3>
                </div>

                <div class="thread-meta">
                    <span>5 messages</span>
                    <span>4 participants</span>
                    <span>Started: 2025-04-16</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主题是关于移除 ARM64 架构中对有缺陷的 Cavium 硬件的检查，相关的补丁由 Marc Zyngier 提出。补丁的主要内容是删除在 PI（Position Independent）代码中对 Cavium ThunderX 系统的 MIDR（Main ID Register）检查，这些系统由于 Erratum 27456 的影响，无法正确处理 KASLR（Kernel Address Space Layout Randomization）和 KPTI（Kernel Page Table Isolation）组合带来的 nG 属性。<br><br>在之前的讨论中，Marc 指出，当前的 MIDR 检查框架由于新引入的多 MIDR 支持变得复杂且难以实现，且对 Cavium ThunderX 的检查已不再必要，因为该硬件的使用已大幅减少，且在实际测试中，很多情况下并不会出现相关问题。<br><br>本周的新讨论中，Catalin Marinas 表示支持该补丁，并确认其修复了 Ada Couprie Diaz 之前遇到的启动失败问题。Ada 也进行了测试，确认该补丁有效。然而，Will Deacon 提出了对该补丁的担忧，认为可能会影响到使用该硬件的用户，尤其是虚拟机环境下的 KASLR 种子问题。他建议考虑在 PI 代码中直接读取 MIDR_EL1 来检测 ThunderX，或者彻底移除对该硬件的支持，以避免潜在的启动失败。<br><br>整体来看，讨论围绕如何在保持系统稳定性和兼容性的同时，简化代码和移除对过时硬件的支持展开。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-16]</span> <span class="email-subject">[PATCH] arm64: Remove checks for broken Cavium HW from the PI code</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-16]</span> <span class="email-subject">Re: [PATCH] arm64: Remove checks for broken Cavium HW from the PI
 code</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Catalin Marinas <span class="email-sender">&lt;catalin.marinas@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-16]</span> <span class="email-subject">Re: [PATCH] arm64: Remove checks for broken Cavium HW from the PI
 code</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Ada Couprie Diaz <span class="email-sender">&lt;ada.coupriediaz@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-17]</span> <span class="email-subject">Re: [PATCH] arm64: Remove checks for broken Cavium HW from the PI
 code</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Will Deacon <span class="email-sender">&lt;will@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-17]</span> <span class="email-subject">Re: [PATCH] arm64: Remove checks for broken Cavium HW from the PI code</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v3 0/4] Selftest for pKVM ownership transitions</h3>
                </div>

                <div class="thread-meta">
                    <span>5 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-04-16</span>
                </div>

                <div class="ai-summary">
                    本邮件线程讨论了针对 pKVM 所有权转换的自测试补丁系列（PATCH v3 0/4）。该补丁旨在增强 pKVM 的内存所有权转换的测试能力，以确保在不同状态下的合法性和稳定性。<br><br>历史讨论中，之前的版本（v2）已提出了一些改进，包括将 hyp 跟踪移动到 vmemmap，并在 v2 中引入了新的 Kconfig 选项。此次 v3 版本在此基础上进行了重构，删除了不必要的 Kconfig 选项，整合到现有的 NVHE_EL2_DEBUG 下，并修正了部分提交信息。<br><br>在本周的新讨论中，Quentin Perret 提出了四个补丁：<br>1. **添加 .hyp.data 段**：为 hypervisor 引入了新的数据段，以便未来的数据结构能够在运行时初始化。<br>2. **去除 __pkvm_host_share_guest() 中的 WARN()**：为了简化测试，删除了不必要的警告，使得错误代码可以被正确传播。<br>3. **引入 pKVM 转换的自测试**：通过引入一个启动时自测试，检查所有已知的 pKVM 内存转换及非法转换的拒绝情况。<br>4. **扩展自测试以覆盖非保护 guest 的页面共享**：增强自测试以涵盖与非保护 guest 的页面共享情况，包括多共享的场景。<br><br>这些补丁的提出旨在提高 pKVM 的稳定性和安全性，确保在不同的内存状态下能够正确处理内存所有权的转换。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-16]</span> <span class="email-subject">[PATCH v3 0/4] Selftest for pKVM ownership transitions</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Quentin Perret <span class="email-sender">&lt;qperret@google.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-16]</span> <span class="email-subject">[PATCH v3 1/4] KVM: arm64: Add .hyp.data section</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Quentin Perret <span class="email-sender">&lt;qperret@google.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-16]</span> <span class="email-subject">[PATCH v3 2/4] KVM: arm64: Don't WARN from __pkvm_host_share_guest()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Quentin Perret <span class="email-sender">&lt;qperret@google.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-16]</span> <span class="email-subject">[PATCH v3 3/4] KVM: arm64: Selftest for pKVM transitions</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Quentin Perret <span class="email-sender">&lt;qperret@google.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-16]</span> <span class="email-subject">[PATCH v3 4/4] KVM: arm64: Extend pKVM selftest for np-guests</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Quentin Perret <span class="email-sender">&lt;qperret@google.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v3 1/1] KVM: arm64: Allow cacheable stage 2 mapping using
 VMA flags</h3>
                </div>

                <div class="thread-meta">
                    <span>5 messages</span>
                    <span>3 participants</span>
                    <span>Started: 2025-03-31</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主题是关于 KVM（Kernel-based Virtual Machine）在 arm64 架构下允许使用 VMA（虚拟内存区域）标志进行可缓存的二级映射的补丁（PATCH v3 1/1）。该补丁旨在解决在没有虚拟地址映射的情况下，如何处理可缓存的物理页框号（PFNMAP）的问题。<br><br>在历史讨论中，参与者探讨了补丁的背景和实现细节，特别是关于 KVM 如何处理 PTE（页表项）以及如何在没有 FWB（Firmware Write Buffer）支持的情况下管理缓存的可用性。Jason 和 Sean 等人讨论了在 guest_memfd 场景下的映射问题，以及如何确保在创建内存槽时进行必要的检查。<br><br>本周的新讨论总结了之前的讨论要点，并提出了下一步的计划。主要内容包括：<br>1. KVM 需要暴露一个能力标志，以指示内核是否支持可缓存的 PFNMAP。虽然有观点认为这可能不是必需的，但 Marc 指出，了解 FWB 支持情况可以帮助用户空间避免在不同 FWB 主机之间进行实时迁移时出现问题。<br>2. 讨论了在内存槽注册时是否需要新的标志，最终认为 KVM 应该遵循 VMA 的 pgprot。<br>3. 针对 PFNMAP 的回退路径处理，认为不应允许在 FWB 未设置的情况下降级缓存属性，以避免潜在的安全问题。<br><br>下一步计划包括更新补丁系列，阻止在内存槽创建中使用可缓存的 PFN 映射，并在 FWB 启用时支持可缓存的 PFN 映射，同时征求维护者对新能力标志必要性的反馈。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-03-31]</span> <span class="email-subject">Re: [PATCH v3 1/1] KVM: arm64: Allow cacheable stage 2 mapping using
 VMA flags</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Jason Gunthorpe <span class="email-sender">&lt;jgg@nvidia.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-04-07]</span> <span class="email-subject">Re: [PATCH v3 1/1] KVM: arm64: Allow cacheable stage 2 mapping using
 VMA flags</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-04-07]</span> <span class="email-subject">Re: [PATCH v3 1/1] KVM: arm64: Allow cacheable stage 2 mapping using
 VMA flags</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Jason Gunthorpe <span class="email-sender">&lt;jgg@nvidia.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-04-07]</span> <span class="email-subject">Re: [PATCH v3 1/1] KVM: arm64: Allow cacheable stage 2 mapping using
 VMA flags</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-16]</span> <span class="email-subject">Re: [PATCH v3 1/1] KVM: arm64: Allow cacheable stage 2 mapping using
 VMA flags</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Ankit Agrawal <span class="email-sender">&lt;ankita@nvidia.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[BUG][PATCH v8 4/6] arm64: Make _midr_in_range_list() an exported
 function</h3>
                </div>

                <div class="thread-meta">
                    <span>5 messages</span>
                    <span>4 participants</span>
                    <span>Started: 2025-04-15</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主题是关于一个针对 ARM64 架构的补丁，旨在将 `_midr_in_range_list()` 函数导出。该补丁的主要目的是使该函数在内核中可被其他模块调用。<br><br>在历史讨论中，补丁的背景并未详细说明，但本周的新讨论揭示了该补丁存在的问题。Ada Couprie Diaz 报告称，该补丁在启用 KASAN 和 `CONFIG_RANDOMIZE_BASE` 的情况下，导致某些 CPU 的启动失败。具体来说，补丁将 `is_midr_in_range_list` 标记为位置无关（PI），但实际上并不符合这一要求，导致在早期启动阶段出现崩溃。<br><br>Shameerali Kolothum Thodi 提出可能需要恢复补丁的 v7 版本，以解决该问题。Marc Zyngier 进一步指出，尝试将相关辅助函数引入 PI 部分时遇到了困难，并建议可能需要对内核进行一些修剪以解决问题。<br><br>Catalin Marinas 也参与了讨论，表示如果在这些平台上启用 KPTI，可能会导致系统崩溃，建议在启动时强制用户使用 `nokaslr` 参数来避免崩溃。<br><br>总体来看，本周的讨论集中在补丁引发的启动问题及其解决方案上，参与者们对如何修复该问题进行了深入探讨。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-15]</span> <span class="email-subject">Re: [BUG][PATCH v8 4/6] arm64: Make _midr_in_range_list() an exported
 function</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Ada Couprie Diaz <span class="email-sender">&lt;ada.coupriediaz@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-15]</span> <span class="email-subject">RE: [BUG][PATCH v8 4/6] arm64: Make _midr_in_range_list() an exported
 function</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Shameerali Kolothum Thodi <span class="email-sender">&lt;shameerali.kolothum.thodi@huawei.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-15]</span> <span class="email-subject">Re: [BUG][PATCH v8 4/6] arm64: Make _midr_in_range_list() an exported function</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-15]</span> <span class="email-subject">Re: [BUG][PATCH v8 4/6] arm64: Make _midr_in_range_list() an
 exported function</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Catalin Marinas <span class="email-sender">&lt;catalin.marinas@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-15]</span> <span class="email-subject">Re: [BUG][PATCH v8 4/6] arm64: Make _midr_in_range_list() an exported function</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v2] arm64: Rework checks for broken Cavium HW in the PI code</h3>
                </div>

                <div class="thread-meta">
                    <span>4 messages</span>
                    <span>3 participants</span>
                    <span>Started: 2025-04-18</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主题是关于对 ARM64 架构中 PI（Position Independent）代码中对 Cavium 硬件问题的检查进行重构的补丁（PATCH v2）。该补丁旨在解决由于新引入的“多-MIDR”支持而导致的 PI 代码与 MIDR 检查框架之间的复杂依赖关系，特别是针对 Cavium ThunderX 系统的 Erratum 27456 问题。<br><br>在历史讨论中，Marc Zyngier 提到，PI 代码调用 MIDR 检查的唯一原因是为了应对 Cavium ThunderX 系统的兼容性问题。补丁通过在 PI 代码中复制 Erratum 检查，消除了对 MIDR 检查框架的依赖，从而简化了代码结构并保持 KASLR 功能的正常运作。<br><br>在本周的新讨论中，Marc Zyngier 提出了补丁的具体实现，并得到了 Oliver Upton 和 Catalin Marinas 的认可和审阅。Oliver 建议将该补丁尽快提交到 ARM64 树中，以便更快地解决问题。最终，补丁已被 Oliver 应用并提交到修复分支。<br><br>总结来说，本周的讨论集中在对补丁的审查和快速合并上，确保了对 Cavium 硬件问题的有效处理。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-18]</span> <span class="email-subject">[PATCH v2] arm64: Rework checks for broken Cavium HW in the PI code</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-18]</span> <span class="email-subject">Re: [PATCH v2] arm64: Rework checks for broken Cavium HW in the PI
 code</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-18]</span> <span class="email-subject">Re: [PATCH v2] arm64: Rework checks for broken Cavium HW in the PI
 code</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Catalin Marinas <span class="email-sender">&lt;catalin.marinas@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-18]</span> <span class="email-subject">Re: [PATCH v2] arm64: Rework checks for broken Cavium HW in the PI code</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH] KVM: arm64, x86: make kvm_arch_has_irq_bypass() inline</h3>
                </div>

                <div class="thread-meta">
                    <span>3 messages</span>
                    <span>3 participants</span>
                    <span>Started: 2025-04-18</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主题是关于将 `kvm_arch_has_irq_bypass()` 函数改为内联函数的补丁（patch）。该函数在 KVM（Kernel-based Virtual Machine）中用于检查是否支持 IRQ（中断请求）旁路功能。尽管该函数在性能关键路径中并不常见，但将其设为内联可以提高代码的整洁性，并为在 `kvm-intel.ko` 和 `kvm-amd.ko` 中使用该函数做准备。<br><br>在历史讨论中，参与者并未就此补丁进行深入讨论，主要是提供了背景信息。<br><br>在本周的新讨论中，Paolo Bonzini 提出了补丁，并得到了 Oliver Upton 的认可（Acked-by），表示对该补丁的支持。Sean Christopherson 则对补丁中的某些实现细节提出了意见，认为将声明移到 PowerPC（PPC）架构的头文件中是不必要的，且可能会导致不一致性。他建议保持现有的声明方式，以确保代码的一致性。<br><br>总体来看，本周的讨论集中在补丁的实现细节和代码一致性上，参与者对补丁的方向表示支持。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-18]</span> <span class="email-subject">[PATCH] KVM: arm64, x86: make kvm_arch_has_irq_bypass() inline</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Paolo Bonzini <span class="email-sender">&lt;pbonzini@redhat.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-18]</span> <span class="email-subject">Re: [PATCH] KVM: arm64, x86: make kvm_arch_has_irq_bypass() inline</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-18]</span> <span class="email-subject">Re: [PATCH] KVM: arm64, x86: make kvm_arch_has_irq_bypass() inline</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH kvmtool v2 0/9] arm: Drop support for 32-bit kvmtool</h3>
                </div>

                <div class="thread-meta">
                    <span>2 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-04-04</span>
                </div>

                <div class="ai-summary">
                    本邮件线程讨论了一个关于 KVM 工具的补丁，主题为“[PATCH kvmtool v2 0/9] arm: Drop support for 32-bit kvmtool”。该补丁的主要内容是移除对 32 位 ARM 架构的支持，并对 ARM64 相关的代码进行了一系列重构和整理。<br><br>在历史讨论中，Oliver Upton 提出了该补丁的初版（v1），并在后续版本（v2）中进行了调整，具体包括将头文件移至 arm64/include/kvm 目录下，以便与其他架构保持一致。此外，补丁还涉及合并和重命名多个源文件和目录，以简化代码结构。<br><br>在本周的新讨论中，Will Deacon 确认已将该补丁应用到 kvmtool 的主分支，并感谢 Oliver 的贡献。补丁的各个部分（共九个）均已成功合并，并提供了每个补丁的链接，便于后续查看和验证。<br><br>总体而言，此次讨论集中在对 KVM 工具代码的优化和对 32 位支持的移除上，标志着项目向更现代化和简化的方向发展。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-04-04]</span> <span class="email-subject">[PATCH kvmtool v2 0/9] arm: Drop support for 32-bit kvmtool</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-17]</span> <span class="email-subject">Re: [PATCH kvmtool v2 0/9] arm: Drop support for 32-bit kvmtool</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Will Deacon <span class="email-sender">&lt;will@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH] arm64: kvm: Replace ternary flags with str_on_off() helper</h3>
                </div>

                <div class="thread-meta">
                    <span>2 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-04-15</span>
                </div>

                <div class="ai-summary">
                    本邮件线程讨论的主题是关于一个针对 ARM64 KVM 的补丁，旨在用 `str_on_off()` 辅助函数替换重复的三元表达式，以提高代码的可读性并确保跟踪点字符串格式的一致性。<br><br>在本周的新讨论中，Seongsu Park 提出了这个补丁，具体修改了 `arch/arm64/kvm/trace_arm.h` 文件，减少了代码中的三元运算符使用，改为调用 `str_on_off()` 函数来处理缓存状态的字符串表示。该补丁的主要改动包括在两个跟踪事件中使用 `str_on_off()` 来替代原有的三元表达式。<br><br>Anshuman Khandual 在同一天的回复中表示对该补丁进行了审核，并给予了认可（Reviewed-by），表明补丁得到了积极的反馈。<br><br>总结而言，本周的讨论集中在补丁的提出与审核上，补丁的目的是提升代码质量，当前已获得初步的认可。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-15]</span> <span class="email-subject">[PATCH] arm64: kvm: Replace ternary flags with str_on_off() helper</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Seongsu Park <span class="email-sender">&lt;sgsu.park@samsung.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-15]</span> <span class="email-subject">Re: [PATCH] arm64: kvm: Replace ternary flags with str_on_off()
 helper</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Anshuman Khandual <span class="email-sender">&lt;anshuman.khandual@arm.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH] KVM: selftests: add test for SVE host corruption</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-04-17</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主题是关于 KVM（Kernel-based Virtual Machine）自测试的补丁，主要目的是增加一个测试程序以验证主机 SVE（Scalable Vector Extension）状态是否会被错误地丢弃。<br><br>在历史讨论中，补丁的背景是针对之前修复的一个问题，该问题涉及到主机的 FPSIMD/SVE/SME 状态在 KVM 运行时未能正确保存和恢复。具体修复是在提交记录 fbc7e61195e2 中完成的。<br><br>本周的新讨论中，Mark Brown 提交了一个补丁，包含了一个新的测试程序，该程序经过轻微修改后，旨在验证在运行虚拟机时，SVE 寄存器状态不会出现损坏。补丁中新增了两个文件：`host_sve.c` 和更新后的 `Makefile.kvm`，以便将新测试集成到现有的自测试框架中。测试程序通过运行简单的虚拟机并检查 SVE 寄存器的状态来确保没有数据丢失。<br><br>总结来说，本周的讨论集中在补丁的提交和测试程序的实现上，标志着对 KVM SVE 状态管理的进一步验证和改进。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-17]</span> <span class="email-subject">[PATCH] KVM: selftests: add test for SVE host corruption</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH V2] arm64/mm: Implement pte_po_index() for permission overlay index</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-04-15</span>
                </div>

                <div class="ai-summary">
                    本邮件主题为“[PATCH V2] arm64/mm: 实现 pte_po_index() 用于权限覆盖索引”，由 Ryan Roberts 提交，主要目的是为了解决在处理 128 位数据时，原有的 FIELD_GET() 函数无法正确获取权限覆盖索引的问题。为此，提出了一个新的辅助函数 pte_po_index()，能够根据数据类型宽度进行必要的掩码和位移操作。<br><br>在历史讨论中，Ryan 提到之前的版本（V1）中使用 FIELD_GET() 直接获取权限覆盖索引，但在即将支持 D128 页表的情况下，这种方法存在局限性。因此，V2 版本进行了修改，替换了 compute_s1_overlay_permissions() 中的 FIELD_GET() 调用，改为使用新定义的 pte_po_index() 函数。<br><br>本周的新讨论中，Ryan 提交了 V2 版本的补丁，详细说明了补丁的修改内容，包括在多个文件中添加和修改了相关代码，以支持新的权限索引处理方式。补丁已应用于 v6.15-rc2 版本，并获得了相关开发者的关注和支持。整体来看，本周的进展集中在补丁的具体实现和代码调整上，推动了 ARM64 架构下权限管理的进一步完善。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-15]</span> <span class="email-subject">[PATCH V2] arm64/mm: Implement pte_po_index() for permission overlay index</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Anshuman Khandual <span class="email-sender">&lt;anshuman.khandual@arm.com&gt;</span></div>
                </div>
            </div>
        </div>

        <div class="category">
            <h2>RFC</h2>

            <div class="thread">
                <div class="thread-header">
                    <h3>[RFC] ARM vGIC-ITS tables serialization when running protected VMs</h3>
                </div>

                <div class="thread-meta">
                    <span>4 messages</span>
                    <span>3 participants</span>
                    <span>Started: 2025-04-14</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主题是关于在运行受保护虚拟机时，ARM vGIC-ITS 表的序列化问题。Ilias Stamatis 提出了一个 RFC 补丁，旨在解决在 pKVM 或其他低虚拟机监控程序上运行受保护虚拟机时，EL1 主机内核无法访问来宾内存的问题。该补丁引入了一个新的标志 KVM_DEV_ARM_ITS_ITT_UBUF，允许将中断翻译表（ITT）序列化到用户空间提供的缓冲区中，而不是直接写入来宾内存。<br><br>在之前的讨论中，Ilias 指出 ITT 的特殊性在于其不按页对齐，且大小可变，这使得低虚拟机监控程序无法直接访问这些表。Marc Zyngier 对这一提议表示反对，认为 ITT 并没有特殊之处，并建议使用现有的 API 共享页对齐的内存。David Woodhouse 进一步质疑了在没有 IOMMU 或访问控制的情况下，如何有效地管理这些内存。<br><br>本周的讨论集中在补丁的可行性和设计选择上，参与者对将 KVM 状态传递给用户空间进行序列化的提议表示支持，同时也对补丁的实现细节提出了质疑。整体来看，尽管补丁旨在解决特定问题，但在设计和实现上仍需进一步讨论和优化。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-14]</span> <span class="email-subject">[RFC] ARM vGIC-ITS tables serialization when running protected VMs</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Ilias Stamatis <span class="email-sender">&lt;ilstam@amazon.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-14]</span> <span class="email-subject">[RFC PATCH 1/1] KVM: arm64: vgic-its: Add flag for saving ITTs in userspace buffer</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Ilias Stamatis <span class="email-sender">&lt;ilstam@amazon.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-15]</span> <span class="email-subject">Re: [RFC] ARM vGIC-ITS tables serialization when running protected VMs</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-15]</span> <span class="email-subject">Re: [RFC] ARM vGIC-ITS tables serialization when running protected
 VMs</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: David Woodhouse <span class="email-sender">&lt;dwmw2@infradead.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[RFC PATCH 0/3] KVM: arm64: Don't claim MTE_ASYNC if not supported</h3>
                </div>

                <div class="thread-meta">
                    <span>4 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-04-14</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主题是关于 KVM（Kernel-based Virtual Machine）在 arm64 架构下处理 MTE（Memory Tagging Extension）特性的补丁系列，主要目的是确保在不支持 MTE_ASYNC 的情况下，KVM 不会错误地向虚拟机报告该特性。<br><br>**原始补丁内容**：<br>补丁系列包括三部分，主要针对 ID_AA64PFR1_EL1.MTE_frac 字段的处理。当前，KVM 隐藏了该字段，导致在某些情况下虚拟机错误地认为支持 MTE_ASYNC。补丁的目标是修复这一问题，确保虚拟机只在实际支持的情况下报告 MTE_ASYNC。<br><br>**之前讨论要点**：<br>在之前的讨论中，参与者指出 Linux 内核并未检查 MTE_frac 字段，而是错误地假设只要支持 MTE，就可以生成 MTE 异步故障。虽然当前行为未导致已知问题，但仍需修正以避免潜在的错误。<br><br>**本周的新讨论与进展**：<br>本周的讨论集中在补丁的具体实现上。Ben Horgan 提出了三项补丁，分别是：<br>1. 公开 MTE_frac 字段以便 KVM 可见。<br>2. 根据 MTE 能力条件性地处理 MTE_frac 的屏蔽。<br>3. 增加自测以确认公开 MTE_frac 不会影响迁移功能。<br><br>参与者对补丁的价值进行了反馈，强调了在 KVM 中正确处理 MTE 特性的重要性，确保虚拟机能够准确反映宿主机的能力。整体来看，讨论推动了补丁的完善与实施。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-14]</span> <span class="email-subject">[RFC PATCH 0/3] KVM: arm64: Don't claim MTE_ASYNC if not supported</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Ben Horgan <span class="email-sender">&lt;ben.horgan@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-14]</span> <span class="email-subject">[RFC PATCH 1/3] arm64/sysreg: Expose MTE_frac so that it is visible to KVM</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Ben Horgan <span class="email-sender">&lt;ben.horgan@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-14]</span> <span class="email-subject">[RFC PATCH 2/3] KVM: arm64: Make MTE_frac masking conditional on MTE capability</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Ben Horgan <span class="email-sender">&lt;ben.horgan@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-14]</span> <span class="email-subject">[RFC PATCH 3/3] KVM: selftests: Confirm exposing MTE_frac does not break migration</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Ben Horgan <span class="email-sender">&lt;ben.horgan@arm.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[RFC PATCH 0/1] KVM-arm: Optimize cache flush by only flushing on vcpu0</h3>
                </div>

                <div class="thread-meta">
                    <span>3 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-04-18</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主题是关于优化 KVM/arm64 中的缓存刷新机制，主要由 Jiayuan Liang 提出了一项 RFC patch。该 patch 的核心内容是，在多 vCPU 的虚拟机中，仅在 vcpu0 上执行缓存状态切换时的页面表刷新操作，以避免在每个 vCPU 上重复执行相同的刷新操作，从而提高虚拟机启动性能。测试结果显示，使用 64 核心虚拟机和大页内存的情况下，busybox 启动时间从 33 秒减少到 5 秒。<br><br>在之前的讨论中，Jiayuan Liang 提出了该优化的背景，指出当前的做法导致了冗余的缓存刷新，尤其是在虚拟机启动过程中。此 patch 旨在通过只在 vcpu0 上执行 `stage2_flush_vm()` 操作来保持缓存一致性，同时消除其他 vCPU 的冗余刷新。<br><br>本周的讨论中，Marc Zyngier 对该 patch 提出了质疑，指出 vcpu0 并不一定是第一个切换 MMU 的 vCPU，且可能会影响某些依赖于当前行为的客人系统。他建议考虑让第一个启用 MMU 的 vCPU 执行缓存维护操作，而其他 vCPU 则可以省略此操作。此外，他提到对于 64 位客人系统，可能可以完全省略这一过程，但需要更多的测试和思考。整体来看，本周的讨论集中在对 patch 的可行性和潜在影响的深入分析上。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-18]</span> <span class="email-subject">[RFC PATCH 0/1] KVM-arm: Optimize cache flush by only flushing on vcpu0</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Jiayuan Liang <span class="email-sender">&lt;ljykernel@163.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-18]</span> <span class="email-subject">[RFC PATCH 1/1]     KVM: arm: Optimize cache flush by only flushing on vcpu0</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Jiayuan Liang <span class="email-sender">&lt;ljykernel@163.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-18]</span> <span class="email-subject">Re: [RFC PATCH 0/1] KVM-arm: Optimize cache flush by only flushing on vcpu0</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
                </div>
            </div>
        </div>

        <div class="category">
            <h2>Bug Report</h2>

            <div class="thread">
                <div class="thread-header">
                    <h3>arch_timer_edge_cases failures on ampere-one</h3>
                </div>

                <div class="thread-meta">
                    <span>3 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-04-10</span>
                </div>

                <div class="ai-summary">
                    在本邮件线程中，讨论的主要问题是关于在 ampere-one 平台上运行的 arch_timer_edge_cases 自测试失败。历史讨论中，Sebastian Ott 提出了在 ampere-one 上运行该测试时出现的错误，具体表现为 timer_condition 与 istatus 不一致，并指出可能与 AC03_CPU_14 有关。Marc Zyngier 认为该测试可能存在问题，因为它依赖于 64 位计数器，而这在某些实现中并不成立。<br><br>在本周的新讨论中，Sebastian Ott 对 Marc Zyngier 的观点表示赞同，认为他的猜测是正确的，并指出如果差值小于 2^63，测试应按预期工作。他表示将尝试进行一些更改，以便在 ampere 上使测试成功，同时确保测试的有效性。整体来看，讨论集中在如何解决测试失败的问题，并探索可能的解决方案。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-04-10]</span> <span class="email-subject">arch_timer_edge_cases failures on ampere-one</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sebastian Ott <span class="email-sender">&lt;sebott@redhat.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-04-10]</span> <span class="email-subject">Re: arch_timer_edge_cases failures on ampere-one</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-15]</span> <span class="email-subject">Re: arch_timer_edge_cases failures on ampere-one</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sebastian Ott <span class="email-sender">&lt;sebott@redhat.com&gt;</span></div>
                </div>
            </div>
        </div>

        <div class="category">
            <h2>Selftest</h2>

            <div class="thread">
                <div class="thread-header">
                    <h3>linux-6.15-rc2/tools/testing/selftests/kvm/lib/arm64/processor.c:107:
 Possible int/long mixup ?</h3>
                </div>

                <div class="thread-meta">
                    <span>2 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-04-14</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主题是关于 Linux 内核 6.15-rc2 版本中 `tools/testing/selftests/kvm/lib/arm64/processor.c` 文件第 107 行的代码，涉及到可能的整型与长整型混用问题。<br><br>在历史讨论中，没有相关的背景信息提供，但本周的新讨论中，David Binderman 提出了静态分析工具 cppcheck 的警告，指出该行代码返回了一个整型值，但其返回类型为长整型，可能导致信息丢失。他建议将代码修改为 `return 1UL << (vm->va_bits - shift);` 以避免潜在的问题。<br><br>对此，Oliver Upton 进行了回复，指出该表达式的最大值为 8192，因此实际上并不存在截断的风险，尽管返回类型可以进一步优化。<br><br>总结来说，本周的讨论主要集中在代码的类型安全性上，虽然存在警告，但由于实际值的限制，风险并不大。参与者们达成了一致，即代码可以进行改进，但当前风险较低。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-14]</span> <span class="email-subject">linux-6.15-rc2/tools/testing/selftests/kvm/lib/arm64/processor.c:107:
 Possible int/long mixup ?</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: David Binderman <span class="email-sender">&lt;dcb314@hotmail.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-14]</span> <span class="email-subject">Re:
 linux-6.15-rc2/tools/testing/selftests/kvm/lib/arm64/processor.c:107:
 Possible int/long mixup ?</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
                </div>
            </div>
        </div>

        <div class="category">
            <h2>GIT PULL</h2>

            <div class="thread">
                <div class="thread-header">
                    <h3>[GIT PULL] KVM/arm64 fixes for 6.15, round #2</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-04-18</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主题是关于 KVM/arm64 在 6.15 版本中的修复，主要集中在一个紧急的补丁上。该补丁旨在解决与 PV MIDR 基础设施相关的启动失败问题。邮件由 Oliver Upton 发出，提到该补丁已获得 Catalin 的审核，并请求将其合并，因为这是工作周的结束。<br><br>在历史讨论中，没有提供具体的上下文或之前的讨论内容，因此我们无法得知该补丁的背景信息。不过，从本周的新讨论来看，这个补丁主要是针对 PI 代码中对 Cavium ThunderX 硬件的错误使用进行了修复，增加了一个明确的错误检查。<br><br>本周的进展包括 Oliver 提供了补丁的详细信息，并指出该补丁已经在 Git 仓库中可用，供开发者拉取。补丁涉及对多个文件的修改，主要是对错误检查的重构，以确保更好的兼容性和稳定性。整体来看，此次讨论强调了对 KVM/arm64 代码的持续改进和对硬件兼容性的关注。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-04-18]</span> <span class="email-subject">[GIT PULL] KVM/arm64 fixes for 6.15, round #2</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
                </div>
            </div>
        </div>

    </div>
</body>
</html>
