<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KVMARM 邮件列表 AI 总结报告</title>
    <style>
        body {
            font-family: 'Courier New', 'Courier', monospace;
            line-height: 1.5;
            max-width: 1200px;
            margin: 0 auto;
            padding: 30px 40px;
            background-color: #ffffff;
            color: #222;
        }
        .container {
            background: #ffffff;
        }
        h1 {
            font-size: 2.2em;
            font-weight: bold;
            color: #000;
            margin-bottom: 0.3em;
            text-align: center;
            border-bottom: 2px solid #000;
            padding-bottom: 15px;
        }
        h2 {
            font-size: 1.6em;
            font-weight: bold;
            color: #000;
            margin-top: 2em;
            margin-bottom: 0.6em;
            border-bottom: 1px solid #333;
            padding-bottom: 8px;
        }
        h3 {
            font-size: 1.2em;
            font-weight: bold;
            color: #111;
            margin-top: 1.5em;
            margin-bottom: 0.5em;
        }
        h4 {
            font-size: 1.05em;
            font-weight: bold;
            color: #333;
            margin-top: 1.2em;
            margin-bottom: 0.5em;
        }
        .meta-info {
            background: #f9f9f9;
            border: 1px solid #ddd;
            padding: 15px 20px;
            margin: 20px 0;
            font-size: 0.95em;
            line-height: 1.6;
        }
        .meta-info p {
            margin: 6px 0;
            color: #444;
        }
        .meta-info strong {
            color: #000;
            font-weight: bold;
        }
        .stats {
            display: table;
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            border: 1px solid #000;
        }
        .stat-card {
            display: table-cell;
            border: 1px solid #000;
            padding: 12px 15px;
            text-align: center;
            background: #fafafa;
        }
        .stat-card h3 {
            margin: 0;
            color: #000;
            font-size: 1.8em;
            font-weight: bold;
            border: none;
            padding: 0;
        }
        .stat-card p {
            margin: 5px 0 0 0;
            color: #444;
            font-size: 0.9em;
            font-weight: normal;
        }
        .category {
            margin: 30px 0;
        }
        .thread {
            margin: 25px 0;
            padding: 15px;
            background: #fafafa;
            border: 1px solid #ccc;
            page-break-inside: avoid;
        }
        .thread-header {
            margin-bottom: 12px;
            border-bottom: 1px solid #ddd;
            padding-bottom: 10px;
        }
        .thread-header h3 {
            font-size: 1.15em;
            font-weight: bold;
            color: #000;
            margin: 0;
        }
        .thread-meta {
            display: block;
            margin: 8px 0 12px 0;
            font-size: 0.9em;
            color: #555;
            font-style: italic;
        }
        .thread-meta span {
            margin-right: 15px;
        }
        .ai-summary {
            background: #fff;
            border-left: 3px solid #666;
            padding: 12px 15px;
            margin: 15px 0;
            line-height: 1.6;
            color: #222;
            font-style: italic;
        }
        .email-list {
            background: #fff;
            border: 1px solid #ccc;
            padding: 10px 15px;
            font-family: 'Courier New', 'Consolas', monospace;
            font-size: 0.88em;
            line-height: 1.5;
            overflow-x: auto;
            margin: 10px 0;
        }
        .email-item {
            margin: 4px 0;
            padding: 2px 0;
            color: #222;
        }
        .email-date {
            color: #0066cc;
            font-weight: bold;
        }
        .email-sender {
            color: #c30;
            font-weight: normal;
        }
        .email-subject {
            color: #000;
        }
        .archive-link {
            display: inline-block;
            margin: 15px 0;
            padding: 10px 20px;
            background: #333;
            color: #fff;
            text-decoration: none;
            border: 2px solid #000;
            font-weight: bold;
            transition: all 0.2s;
        }
        .archive-link:hover {
            background: #000;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>KVMARM Mailing List Analysis Report</h1>

        <div class="meta-info">
            <p><strong>Generated:</strong> 2025-10-21 20:42</p>
            <p><strong>Time Period:</strong> 2025年9月 第40周 (09/29 - 10/05)</p>
            <p><strong>Total Messages:</strong> 149 | <strong>Total Threads:</strong> 35</p>
            <p style="text-align: center;"><a href="archive.html" class="archive-link">📚 历史归档 Archive</a></p>
        </div>


        <div class="category">
            <h2>PATCH</h2>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v7 00/28] Tracefs support for pKVM</h3>
                </div>

                <div class="thread-meta">
                    <span>29 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-10-03</span>
                </div>

                <div class="ai-summary">
                    本邮件线程主要讨论了为 pKVM（保护模式下的 KVM）添加 Tracefs 支持的补丁系列。该补丁旨在为 hypervisor 提供调试和性能分析工具，利用 Tracefs 的简单性和多工具支持，建立一个内核与 hypervisor 之间的远程事件和缓冲区的通用接口。<br><br>关键技术要点包括：<br>1. 引入了新的环形缓冲区结构，允许 hypervisor 写入事件，而内核则作为读取者。<br>2. 通过 `trace_remote` 接口实现了与 Tracefs 的连接，支持远程环形缓冲区的创建和管理。<br>3. 添加了新的事件宏 `HYP_EVENT()`，简化了事件的声明过程，类似于内核事件的处理。<br>4. 设计了简单的环形缓冲区实现，旨在减少对 pKVM 的依赖，确保其能在 hypervisor 中高效运行。<br><br>讨论的主要结论包括：<br>- 该补丁系列为 pKVM 提供了必要的追踪能力，尽管当前不支持事件功能，但未来将会实现。<br>- 还需解决的主要问题包括确保环形缓冲区的稳定性和性能，以及在不同 CPU 上的事件同步问题。<br>- 通过自测模块和 Tracefs 接口，开发者可以验证和调试 pKVM 的追踪功能。<br><br>整体而言，该补丁系列为 pKVM 的调试和性能监控奠定了基础，提升了其在保护模式下的可用性。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-10-03]</span> <span class="email-subject">[PATCH v7 00/28] Tracefs support for pKVM</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Vincent Donnefort <span class="email-sender">&lt;vdonnefort@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-03]</span> <span class="email-subject">[PATCH v7 01/28] ring-buffer: Add page statistics to the meta-page</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Vincent Donnefort <span class="email-sender">&lt;vdonnefort@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-03]</span> <span class="email-subject">[PATCH v7 02/28] ring-buffer: Store bpage pointers into subbuf_ids</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Vincent Donnefort <span class="email-sender">&lt;vdonnefort@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-03]</span> <span class="email-subject">[PATCH v7 03/28] ring-buffer: Introduce ring-buffer remotes</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Vincent Donnefort <span class="email-sender">&lt;vdonnefort@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-03]</span> <span class="email-subject">[PATCH v7 04/28] ring-buffer: Add non-consuming read for ring-buffer remotes</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Vincent Donnefort <span class="email-sender">&lt;vdonnefort@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-03]</span> <span class="email-subject">[PATCH v7 05/28] tracing: Introduce trace remotes</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Vincent Donnefort <span class="email-sender">&lt;vdonnefort@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-03]</span> <span class="email-subject">[PATCH v7 06/28] tracing: Add reset to trace remotes</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Vincent Donnefort <span class="email-sender">&lt;vdonnefort@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-03]</span> <span class="email-subject">[PATCH v7 07/28] tracing: Add non-consuming read to trace remotes</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Vincent Donnefort <span class="email-sender">&lt;vdonnefort@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-03]</span> <span class="email-subject">[PATCH v7 08/28] tracing: Add init callback to trace remotes</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Vincent Donnefort <span class="email-sender">&lt;vdonnefort@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-03]</span> <span class="email-subject">[PATCH v7 09/28] tracing: Add events to trace remotes</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Vincent Donnefort <span class="email-sender">&lt;vdonnefort@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-03]</span> <span class="email-subject">[PATCH v7 10/28] tracing: Add events/ root files to trace remotes</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Vincent Donnefort <span class="email-sender">&lt;vdonnefort@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-03]</span> <span class="email-subject">[PATCH v7 11/28] tracing: Add helpers to create trace remote events</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Vincent Donnefort <span class="email-sender">&lt;vdonnefort@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-03]</span> <span class="email-subject">[PATCH v7 12/28] ring-buffer: Export buffer_data_page and macros</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Vincent Donnefort <span class="email-sender">&lt;vdonnefort@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-03]</span> <span class="email-subject">[PATCH v7 13/28] tracing: Introduce simple_ring_buffer</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Vincent Donnefort <span class="email-sender">&lt;vdonnefort@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-03]</span> <span class="email-subject">[PATCH v7 14/28] tracing: Add a trace remote module for testing</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Vincent Donnefort <span class="email-sender">&lt;vdonnefort@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-03]</span> <span class="email-subject">[PATCH v7 15/28] tracing: selftests: Add trace remote tests</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Vincent Donnefort <span class="email-sender">&lt;vdonnefort@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-03]</span> <span class="email-subject">[PATCH v7 16/28] Documentation: tracing: Add tracing remotes</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Vincent Donnefort <span class="email-sender">&lt;vdonnefort@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-03]</span> <span class="email-subject">[PATCH v7 17/28] tracing: load/unload page callbacks for simple_ring_buffer</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Vincent Donnefort <span class="email-sender">&lt;vdonnefort@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-03]</span> <span class="email-subject">[PATCH v7 18/28] tracing: Check for undefined symbols in simple_ring_buffer</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Vincent Donnefort <span class="email-sender">&lt;vdonnefort@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-03]</span> <span class="email-subject">[PATCH v7 19/28] KVM: arm64: Support unaligned fixmap in the pKVM hyp</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Vincent Donnefort <span class="email-sender">&lt;vdonnefort@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-03]</span> <span class="email-subject">[PATCH v7 20/28] KVM: arm64: Add clock support for the pKVM hyp</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Vincent Donnefort <span class="email-sender">&lt;vdonnefort@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-03]</span> <span class="email-subject">[PATCH v7 21/28] KVM: arm64: Add tracing capability for the pKVM hyp</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Vincent Donnefort <span class="email-sender">&lt;vdonnefort@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-03]</span> <span class="email-subject">[PATCH v7 22/28] KVM: arm64: Add trace remote for the pKVM hyp</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Vincent Donnefort <span class="email-sender">&lt;vdonnefort@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-03]</span> <span class="email-subject">[PATCH v7 23/28] KVM: arm64: Sync boot clock with the pKVM hyp</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Vincent Donnefort <span class="email-sender">&lt;vdonnefort@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-03]</span> <span class="email-subject">[PATCH v7 24/28] KVM: arm64: Add trace reset to the pKVM hyp</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Vincent Donnefort <span class="email-sender">&lt;vdonnefort@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-03]</span> <span class="email-subject">[PATCH v7 25/28] KVM: arm64: Add event support to the pKVM hyp and
 trace remote</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Vincent Donnefort <span class="email-sender">&lt;vdonnefort@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-03]</span> <span class="email-subject">[PATCH v7 26/28] KVM: arm64: Add hyp_enter/hyp_exit events to pKVM hyp</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Vincent Donnefort <span class="email-sender">&lt;vdonnefort@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-03]</span> <span class="email-subject">[PATCH v7 27/28] KVM: arm64: Add selftest event support to pKVM hyp</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Vincent Donnefort <span class="email-sender">&lt;vdonnefort@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-03]</span> <span class="email-subject">[PATCH v7 28/28] tracing: selftests: Add pKVM trace remote tests</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Vincent Donnefort <span class="email-sender">&lt;vdonnefort@google.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH 00/13] KVM: arm64: De-specialise the timer UAPI</h3>
                </div>

                <div class="thread-meta">
                    <span>22 messages</span>
                    <span>3 participants</span>
                    <span>Started: 2025-09-29</span>
                </div>

                <div class="ai-summary">
                    本邮件线程主要讨论了针对 KVM/arm64 的定时器用户空间接口（UAPI）的改进补丁，旨在简化定时器寄存器的处理流程，减少代码重复和复杂性。Marc Zyngier 提出了多个补丁，解决了定时器寄存器在用户空间访问中的编码错误（CNTV_CVAL_EL0 和 CNTVCT_EL0 的编码被交换），并将定时器寄存器的处理移至通用基础设施中。<br><br>关键技术要点包括：<br>1. 移除对 CNTHV_*_EL2 寄存器的用户空间暴露，确保其在 nVHE 配置下不可用。<br>2. 引入新的辅助函数 `timer_context_to_vcpu()`，以便在定时器上下文中使用定时器 ID 替代 vcpu 指针，简化数据结构。<br>3. 通过改进测试用例，确保在不同配置下的寄存器访问正确性。<br><br>讨论的主要结论是，虽然存在一些历史遗留问题，但当前的补丁系列能够有效地清理和优化代码，提升 KVM/arm64 的稳定性和可维护性。待解决的问题主要集中在用户空间对寄存器的访问是否应继续暴露，以及如何处理与 NV 相关的保存/恢复机制。参与者对补丁表示支持，并进行了代码审查。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-29]</span> <span class="email-subject">[PATCH 00/13] KVM: arm64: De-specialise the timer UAPI</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-29]</span> <span class="email-subject">[PATCH 01/13] KVM: arm64: Hide CNTHV_*_EL2 from userspace for nVHE guests</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-29]</span> <span class="email-subject">[PATCH 02/13] KVM: arm64: Introduce timer_context_to_vcpu() helper</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-29]</span> <span class="email-subject">[PATCH 03/13] KVM: arm64: Replace timer context vcpu pointer with timer_id</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-29]</span> <span class="email-subject">[PATCH 04/13] KVM: arm64: Make timer_set_offset() generally accessible</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-29]</span> <span class="email-subject">[PATCH 05/13] KVM: arm64: Add timer UAPI workaround to sysreg infrastructure</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-29]</span> <span class="email-subject">[PATCH 06/13] KVM: arm64: Move CNT*_CTL_EL0 userspace accessors to generic infrastructure</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-29]</span> <span class="email-subject">[PATCH 07/13] KVM: arm64: Move CNT*_CVAL_EL0 userspace accessors to generic infrastructure</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-29]</span> <span class="email-subject">[PATCH 08/13] KVM: arm64: Move CNT*CT_EL0 userspace accessors to generic infrastructure</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-29]</span> <span class="email-subject">[PATCH 09/13] KVM: arm64: Fix WFxT handling of nested virt</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-29]</span> <span class="email-subject">[PATCH 10/13] KVM: arm64: Kill leftovers of ad-hoc timer userspace access</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-29]</span> <span class="email-subject">[PATCH 11/13] KVM: arm64: selftests: Make dependencies on VHE-specific registers explicit</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-29]</span> <span class="email-subject">[PATCH 12/13] KVM: arm64: selftests: Add an E2H=0-specific configuration to get_reg_list</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-29]</span> <span class="email-subject">[PATCH 13/13] KVM: arm64: selftest: Fix misleading comment about virtual timer encoding</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-29]</span> <span class="email-subject">Re: [PATCH 01/13] KVM: arm64: Hide CNTHV_*_EL2 from userspace for
 nVHE guests</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-29]</span> <span class="email-subject">Re: [PATCH 05/13] KVM: arm64: Add timer UAPI workaround to sysreg
 infrastructure</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-30]</span> <span class="email-subject">Re: [PATCH 01/13] KVM: arm64: Hide CNTHV_*_EL2 from userspace for nVHE guests</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-30]</span> <span class="email-subject">Re: [PATCH 05/13] KVM: arm64: Add timer UAPI workaround to sysreg infrastructure</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-30]</span> <span class="email-subject">Re: [PATCH 03/13] KVM: arm64: Replace timer context vcpu pointer
 with timer_id</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Joey Gouly <span class="email-sender">&lt;joey.gouly@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-30]</span> <span class="email-subject">Re: [PATCH 08/13] KVM: arm64: Move CNT*CT_EL0 userspace accessors to
 generic infrastructure</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Joey Gouly <span class="email-sender">&lt;joey.gouly@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-30]</span> <span class="email-subject">Re: [PATCH 08/13] KVM: arm64: Move CNT*CT_EL0 userspace accessors to generic infrastructure</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-30]</span> <span class="email-subject">Re: [PATCH 08/13] KVM: arm64: Move CNT*CT_EL0 userspace accessors to
 generic infrastructure</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Joey Gouly <span class="email-sender">&lt;joey.gouly@arm.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH kvmtool 00/15] arm64: Handle PSCI calls in userspace</h3>
                </div>

                <div class="thread-meta">
                    <span>18 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-09-30</span>
                </div>

                <div class="ai-summary">
                    该邮件列表讨论的主要内容是关于在用户空间处理ARM64平台的PSCI（电源状态和协调接口）调用的补丁系列。这一系列补丁旨在增强KVM工具的功能，支持PSCI的多个调用，包括CPU的挂起、开启、亲和性信息和系统重置等。<br><br>关键技术要点包括：<br>1. 引入了PSCI的基本实现，支持PSCI_VERSION、CPU_SUSPEND、CPU_ON、AFFINITY_INFO和SYSTEM_{OFF,RESET}等调用。<br>2. 通过KVM_SET_MP_STATE ioctl实现对非引导vCPU的电源管理。<br>3. 增加了对MPIDR亲和性信息的处理，确保在处理PSCI调用时避免竞争条件。<br>4. 采用SMCCC（安全监控调用约定）来转发PSCI调用到用户空间进行处理。<br><br>讨论的主要结论是，补丁系列成功实现了PSCI的基本功能，允许用户空间更好地管理虚拟CPU的电源状态。待解决的问题包括确保在多线程环境中处理这些调用时的安全性和稳定性。此外，补丁还在不断迭代中，参与者对实现的细节进行了深入讨论和优化。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-30]</span> <span class="email-subject">[PATCH kvmtool 00/15] arm64: Handle PSCI calls in userspace</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Suzuki K Poulose <span class="email-sender">&lt;suzuki.poulose@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-30]</span> <span class="email-subject">[PATCH kvmtool v4 01/15] Allow pausing the VM from vcpu thread</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Suzuki K Poulose <span class="email-sender">&lt;suzuki.poulose@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-30]</span> <span class="email-subject">[PATCH kvmtool v4 02/15] update_headers: arm64: Track psci.h for PSCI definitions</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Suzuki K Poulose <span class="email-sender">&lt;suzuki.poulose@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-30]</span> <span class="email-subject">[PATCH kvmtool v4 03/15] update headers: Linux v6.17-rc7</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Suzuki K Poulose <span class="email-sender">&lt;suzuki.poulose@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-30]</span> <span class="email-subject">[PATCH kvmtool v4 04/15] Import arm-smccc.h from Linux 6.16-rc1</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Suzuki K Poulose <span class="email-sender">&lt;suzuki.poulose@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-30]</span> <span class="email-subject">[PATCH kvmtool v4 04/15] Import arm-smccc.h from Linux 6.17-rc7</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Suzuki K Poulose <span class="email-sender">&lt;suzuki.poulose@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-30]</span> <span class="email-subject">[PATCH kvmtool v4 05/15] arm64: Stash kvm_vcpu_init for later use</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Suzuki K Poulose <span class="email-sender">&lt;suzuki.poulose@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-30]</span> <span class="email-subject">[PATCH kvmtool v4 06/15] arm64: Use KVM_SET_MP_STATE ioctl to power off non-boot vCPUs</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Suzuki K Poulose <span class="email-sender">&lt;suzuki.poulose@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-30]</span> <span class="email-subject">[PATCH kvmtool v4 07/15] arm64: Expose ARM64_CORE_REG() for general use</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Suzuki K Poulose <span class="email-sender">&lt;suzuki.poulose@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-30]</span> <span class="email-subject">[PATCH kvmtool v4 08/15] arm64: Add support for finding vCPU for given MPIDR</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Suzuki K Poulose <span class="email-sender">&lt;suzuki.poulose@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-30]</span> <span class="email-subject">[PATCH kvmtool v4 09/15] arm64: Add skeleton implementation for PSCI</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Suzuki K Poulose <span class="email-sender">&lt;suzuki.poulose@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-30]</span> <span class="email-subject">[PATCH kvmtool v4 10/15] arm64: psci: Implement CPU_SUSPEND</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Suzuki K Poulose <span class="email-sender">&lt;suzuki.poulose@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-30]</span> <span class="email-subject">[PATCH kvmtool v4 11/15] arm64: psci: Implement CPU_ON</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Suzuki K Poulose <span class="email-sender">&lt;suzuki.poulose@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-30]</span> <span class="email-subject">[PATCH kvmtool v4 12/15] arm64: psci: Implement AFFINITY_INFO</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Suzuki K Poulose <span class="email-sender">&lt;suzuki.poulose@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-30]</span> <span class="email-subject">[PATCH kvmtool v4 13/15] arm64: psci: Implement MIGRATE_INFO_TYPE</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Suzuki K Poulose <span class="email-sender">&lt;suzuki.poulose@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-30]</span> <span class="email-subject">[PATCH kvmtool v4 14/15] arm64: psci: Implement SYSTEM_{OFF,RESET}</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Suzuki K Poulose <span class="email-sender">&lt;suzuki.poulose@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-30]</span> <span class="email-subject">[PATCH kvmtool v4 15/15] arm64: smccc: Start sending PSCI to userspace</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Suzuki K Poulose <span class="email-sender">&lt;suzuki.poulose@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-30]</span> <span class="email-subject">Re: [PATCH kvmtool v4 04/15] Import arm-smccc.h from Linux 6.16-rc1</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Suzuki K Poulose <span class="email-sender">&lt;suzuki.poulose@arm.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v3 0/9] KVM Selftest Runner</h3>
                </div>

                <div class="thread-meta">
                    <span>16 messages</span>
                    <span>3 participants</span>
                    <span>Started: 2025-09-30</span>
                </div>

                <div class="ai-summary">
                    本邮件线程主要讨论了 KVM 自测运行器（KVM Selftest Runner）的补丁系列，旨在改进 KVM 自测的执行和管理。该系列从最初的 15 个补丁减少到 9 个，主要包括以下技术要点：<br><br>1. **技术问题和补丁内容**：KVM 自测运行器允许用户以更灵活的方式运行自测，包括支持并行执行、输出保存、超时设置等功能。补丁中引入了多个命令行选项，如指定测试路径、超时限制、输出目录等。<br><br>2. **关键技术要点**：<br>   - 增加了命令行选项以支持并行测试执行和输出的层次化保存。<br>   - 引入了超时机制，确保测试在指定时间内完成。<br>   - 提供了多种输出控制选项，允许用户根据测试状态选择性打印结果。<br>   - 通过 Makefile 增加了自动生成默认测试用例的功能。<br><br>3. **讨论结论和待解决问题**：参与者对补丁的功能表示认可，但也提出了对配置灵活性和现有构建输出指令支持的关注。未来的改进可能包括增强配置选项以支持更复杂的测试场景，以及确保与现有构建系统的兼容性。<br><br>总体而言，该补丁系列旨在提升 KVM 自测的可用性和灵活性，为开发者提供更强大的测试工具。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-30]</span> <span class="email-subject">[PATCH v3 0/9] KVM Selftest Runner</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Vipin Sharma <span class="email-sender">&lt;vipinsh@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-30]</span> <span class="email-subject">[PATCH v3 1/9] KVM: selftest: Create KVM selftest runner</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Vipin Sharma <span class="email-sender">&lt;vipinsh@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-30]</span> <span class="email-subject">[PATCH v3 2/9] KVM: selftests: Provide executables path option to the
 KVM selftest runner</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Vipin Sharma <span class="email-sender">&lt;vipinsh@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-30]</span> <span class="email-subject">[PATCH v3 3/9] KVM: selftests: Add timeout option in selftests runner</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Vipin Sharma <span class="email-sender">&lt;vipinsh@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-30]</span> <span class="email-subject">[PATCH v3 4/9] KVM: selftests: Add option to save selftest runner
 output to a directory</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Vipin Sharma <span class="email-sender">&lt;vipinsh@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-30]</span> <span class="email-subject">[PATCH v3 5/9] KVM: selftests: Run tests concurrently in KVM
 selftests runner</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Vipin Sharma <span class="email-sender">&lt;vipinsh@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-30]</span> <span class="email-subject">[PATCH v3 6/9] KVM: selftests: Add various print flags to KVM
 selftest runner</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Vipin Sharma <span class="email-sender">&lt;vipinsh@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-30]</span> <span class="email-subject">[PATCH v3 7/9] KVM: selftests: Print sticky KVM selftests runner
 status at bottom</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Vipin Sharma <span class="email-sender">&lt;vipinsh@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-30]</span> <span class="email-subject">[PATCH v3 8/9] KVM: selftests: Add rule to generate default tests for
 KVM selftests runner</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Vipin Sharma <span class="email-sender">&lt;vipinsh@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-30]</span> <span class="email-subject">[PATCH v3 9/9] KVM: selftests: Provide README.rst for KVM selftests runner</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Vipin Sharma <span class="email-sender">&lt;vipinsh@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-30]</span> <span class="email-subject">Re: [PATCH v3 1/9] KVM: selftest: Create KVM selftest runner</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Vipin Sharma <span class="email-sender">&lt;vipinsh@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-01]</span> <span class="email-subject">Re: [PATCH v3 9/9] KVM: selftests: Provide README.rst for KVM selftests runner</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-01]</span> <span class="email-subject">Re: [PATCH v3 9/9] KVM: selftests: Provide README.rst for KVM
 selftests runner</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Vipin Sharma <span class="email-sender">&lt;vipinsh@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-02]</span> <span class="email-subject">Re: [PATCH v3 9/9] KVM: selftests: Provide README.rst for KVM selftests runner</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-02]</span> <span class="email-subject">Re: [PATCH v3 9/9] KVM: selftests: Provide README.rst for KVM
 selftests runner</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-02]</span> <span class="email-subject">Re: [PATCH v3 9/9] KVM: selftests: Provide README.rst for KVM
 selftests runner</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Vipin Sharma <span class="email-sender">&lt;vipinsh@google.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v10 05/43] arm64: RME: Check for RME support at KVM init</h3>
                </div>

                <div class="thread-meta">
                    <span>4 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-10-01</span>
                </div>

                <div class="ai-summary">
                    本邮件线程主要讨论了在 KVM 初始化时检查 RME（Runtime Memory Encryption）支持的相关补丁。参与者 Marc Zyngier 和 Steven Price 就补丁内容展开了技术讨论，主要集中在 RME 和 CCA（Common Control Architecture）之间的关系，以及如何在代码中处理这两者的状态。<br><br>关键技术要点包括：<br>1. Marc Zyngier 提出在处理 CCA 时不需要单独存储 RME 和 CCA 的状态，建议使用联合体来简化设计。<br>2. Steven Price 认为在检查 CCA 接口时，应该确认 RME 是否可用，并提到可能存在其他实现 CCA 的方式，而不仅仅依赖于 RME 特性位。<br>3. 双方讨论了 RME 和 CCA 的依赖关系，Marc 强调 CCA 不能在没有 RME 的情况下存在，而 Steven 则认为需要关注固件的实际能力。<br><br>讨论的结论是，尽管存在不同观点，最终决定在代码中添加 RME 可用性的检查，以确保在极不可能的情况下不会引发问题。整体上，邮件线程反映了对 KVM 和 ARM 架构中 RME 和 CCA 关系的深入技术探讨。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-10-01]</span> <span class="email-subject">Re: [PATCH v10 05/43] arm64: RME: Check for RME support at KVM init</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-01]</span> <span class="email-subject">Re: [PATCH v10 05/43] arm64: RME: Check for RME support at KVM init</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Steven Price <span class="email-sender">&lt;steven.price@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-01]</span> <span class="email-subject">Re: [PATCH v10 05/43] arm64: RME: Check for RME support at KVM init</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-01]</span> <span class="email-subject">Re: [PATCH v10 05/43] arm64: RME: Check for RME support at KVM init</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Steven Price <span class="email-sender">&lt;steven.price@arm.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v10 03/43] arm64: RME: Add SMC definitions for calling the RMM</h3>
                </div>

                <div class="thread-meta">
                    <span>4 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-10-01</span>
                </div>

                <div class="ai-summary">
                    在这段邮件讨论中，主要围绕 ARM64 架构下的 RMM（Realm Management Monitor）与 KVM（Kernel-based Virtual Machine）之间的交互进行了深入探讨，特别是关于 SMC（Secure Monitor Call）定义的补丁内容。Marc Zyngier 和 Steven Price 是主要参与者。<br><br>讨论的关键技术问题包括 RMM 是否有权限制 KVM 对 GIC（Generic Interrupt Controller）寄存器的访问，以及 RMM 在处理中断和寄存器状态时的角色。Marc 提出，既然 KVM 负责中断注入，RMM 不应干预 KVM 对 TALL0、TALL1 和 TC 位的使用。他认为 RMM 的设计存在问题，因为它限制了 KVM 的功能，而这些寄存器的信息 KVM 本身已经掌握。<br><br>Steven 则解释了 RMM 的设计初衷，强调 RMM 需要对陷阱行为进行控制，以保护自身的安全性。他提到，当前规范允许 RMM 不实现某些陷阱处理程序，从而简化了设计，但这也可能导致问题。<br><br>讨论的结论是，RMM 和 KVM 之间的角色划分仍需进一步明确，以避免复杂性增加和功能的丧失。双方都同意需要对现有规范进行审视，以便更好地平衡安全性与灵活性。待解决的问题包括如何在不增加 RMM 复杂度的情况下，合理分配两者的职责。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-10-01]</span> <span class="email-subject">Re: [PATCH v10 03/43] arm64: RME: Add SMC definitions for calling the RMM</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-01]</span> <span class="email-subject">Re: [PATCH v10 03/43] arm64: RME: Add SMC definitions for calling the
 RMM</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Steven Price <span class="email-sender">&lt;steven.price@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-01]</span> <span class="email-subject">Re: [PATCH v10 03/43] arm64: RME: Add SMC definitions for calling the RMM</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-01]</span> <span class="email-subject">Re: [PATCH v10 03/43] arm64: RME: Add SMC definitions for calling the
 RMM</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Steven Price <span class="email-sender">&lt;steven.price@arm.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[STABLE 5.15.y] [PATCH] KVM: arm64: Fix softirq masking in FPSIMD register saving sequence</h3>
                </div>

                <div class="thread-meta">
                    <span>3 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-10-03</span>
                </div>

                <div class="ai-summary">
                    本邮件线程主要讨论了针对 KVM（内核虚拟机）在 arm64 架构下的一个补丁，旨在修复 FPSIMD（浮点 SIMD）寄存器保存序列中的软中断屏蔽问题。补丁的背景是之前的提交（23249dade24e）修复了因错误回溯导致的内核 BUG，但引入了死锁风险，因为在重新启用软中断时可能会在持有锁的情况下处理待处理的软中断。<br><br>关键技术要点包括：补丁通过在保存 FPSIMD 寄存器时禁用硬中断，进一步解决了死锁问题。具体实现上，补丁在 `fpsimd_save_and_flush_cpu_state` 函数中增加了对硬中断的禁用和恢复，以确保在保存寄存器状态时不会引发锁的递归。<br><br>讨论的结论是，补丁得到了参与者的认可（如 Ard Biesheuvel 的确认），但仍需关注潜在的死锁问题，确保在未来的版本中进一步优化和验证该修复的有效性。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-10-03]</span> <span class="email-subject">[STABLE 5.15.y] [PATCH] KVM: arm64: Fix softirq masking in FPSIMD register saving sequence</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Will Deacon <span class="email-sender">&lt;will@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-03]</span> <span class="email-subject">Re: [STABLE 5.15.y] [PATCH] KVM: arm64: Fix softirq masking in
 FPSIMD register saving sequence</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Will Deacon <span class="email-sender">&lt;will@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-05]</span> <span class="email-subject">Re: [STABLE 5.15.y] [PATCH] KVM: arm64: Fix softirq masking in FPSIMD
 register saving sequence</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Ard Biesheuvel <span class="email-sender">&lt;ardb@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v10 06/43] arm64: RME: Define the user ABI</h3>
                </div>

                <div class="thread-meta">
                    <span>3 messages</span>
                    <span>3 participants</span>
                    <span>Started: 2025-10-01</span>
                </div>

                <div class="ai-summary">
                    在此次邮件讨论中，主要集中在针对 ARM64 架构的 RME（Runtime Memory Encryption）用户 ABI（应用程序二进制接口）定义的补丁内容上。参与者们探讨了用户空间与虚拟机监控器（VMM）之间的接口设计及其必要性。<br><br>关键技术要点包括：<br>1. Marc Zyngier 提出，用户空间不应直接参与 RMM（Runtime Memory Manager）的操作，认为应由主机在 VCPU 运行前进行通知，而不是通过用户空间配置。<br>2. Steven Price 解释了使用能力（capabilities）来设置 RME 领域的做法，承认这种方式有些“黑客”性质，但指出其目的是为了兼容早期实现，并讨论了是否应将其重构为独立的 ioctl 接口。<br>3. 讨论了不同的 KVM_CAP_* 接口的设计，包括如何处理内存区域的保护与共享，以及如何有效地初始化和激活 RME 领域。<br><br>主要讨论结论是，尽管存在对用户空间参与的质疑，参与者们一致认为需要进一步明确 RME 领域的语义和接口设计，以避免未来的兼容性问题。同时，关于如何优化 API 设计和减少潜在的错误报告复杂性仍需深入探讨。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-10-01]</span> <span class="email-subject">Re: [PATCH v10 06/43] arm64: RME: Define the user ABI</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-01]</span> <span class="email-subject">Re: [PATCH v10 06/43] arm64: RME: Define the user ABI</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Steven Price <span class="email-sender">&lt;steven.price@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-02]</span> <span class="email-subject">Re: [PATCH v10 06/43] arm64: RME: Define the user ABI</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Suzuki K Poulose <span class="email-sender">&lt;suzuki.poulose@arm.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH] KVM: arm64: Remove unreachable break after return</h3>
                </div>

                <div class="thread-meta">
                    <span>3 messages</span>
                    <span>3 participants</span>
                    <span>Started: 2025-09-30</span>
                </div>

                <div class="ai-summary">
                    本邮件线程讨论了一个针对 KVM（Kernel-based Virtual Machine）在 arm64 架构中的补丁，主要内容是移除 `arch/arm64/kvm/at.c` 文件中一个不必要的 `break` 语句。该 `break` 语句位于一个 `return` 语句之后，因此是不可达的，移除后可以简化代码。<br><br>关键技术要点包括：<br>1. 补丁的具体修改：在 `compute_translation_regime` 函数中，删除了一个无效的 `break` 语句。<br>2. 代码的可读性和维护性得到了提升，避免了潜在的误解。<br><br>讨论的结论是，该补丁得到了参与者的认可，Zenghui Yu 表示已进行审核并确认无误，Marc Zyngier 则表示已将该补丁应用于修复集。整体来看，此次讨论顺利，补丁已成功合并，没有提出其他待解决的问题。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-30]</span> <span class="email-subject">[PATCH] KVM: arm64: Remove unreachable break after return</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Osama Abdelkader <span class="email-sender">&lt;osama.abdelkader@gmail.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-01]</span> <span class="email-subject">Re: [PATCH] KVM: arm64: Remove unreachable break after return</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Zenghui Yu <span class="email-sender">&lt;yuzenghui@huawei.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-01]</span> <span class="email-subject">Re: [PATCH] KVM: arm64: Remove unreachable break after return</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH] KVM: selftests: fix irqfd_test on arm64</h3>
                </div>

                <div class="thread-meta">
                    <span>3 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-09-30</span>
                </div>

                <div class="ai-summary">
                    本邮件线程主要讨论了针对 KVM（Kernel-based Virtual Machine）自测试中 irqfd_test 的一个补丁，旨在修复其在 arm64 架构上的问题。参与者 Sean Christopherson 和 Oliver Upton 讨论了补丁的必要性，指出当前的测试依赖于一个默认的 IRQ 芯片，而在非 x86 架构上并不总是存在这一假设。<br><br>关键技术要点包括：<br>1. 补丁通过添加一个架构特定的谓词 `kvm_arch_has_default_irqchip()` 来判断默认虚拟机是否会创建 IRQ 芯片，从而使 irqfd_test 能够在不同架构上正确运行。<br>2. 在 arm64 上，补丁通过 `vm_create_with_one_vcpu()` 函数来满足 IRQ 芯片初始化的要求，尽管创建的 vCPU 在测试中并未被使用。<br><br>讨论的结论是，补丁已被确认并获得认可，尽快合并以减少 CI（持续集成）中的噪声问题。同时，参与者提到需要关注补丁的最终形式，以确保其在所有相关架构上的有效性。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-30]</span> <span class="email-subject">Re: [PATCH] KVM: selftests: fix irqfd_test on arm64</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-30]</span> <span class="email-subject">Re: [PATCH] KVM: selftests: fix irqfd_test on arm64</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-30]</span> <span class="email-subject">Re: [PATCH] KVM: selftests: fix irqfd_test on arm64</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v4 10/28] KVM: arm64: iommu: Shadow host stage-2 page
 table</h3>
                </div>

                <div class="thread-meta">
                    <span>3 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-09-29</span>
                </div>

                <div class="ai-summary">
                    在此次邮件讨论中，主要围绕KVM在arm64架构下的IOMMU（输入输出内存管理单元）和影子主机阶段2页表的实现进行了深入探讨。Mostafa Saleh提出了一个补丁，旨在优化IOMMU_CACHE的使用，以简化当前的映射逻辑。Will Deacon支持这一思路，认为可以暂时移除某些复杂性，但也指出不同IOMMU的行为可能会有所不同，未来需要进一步更新逻辑。<br><br>Jason Gunthorpe则强调了DMA API在使用IOMMU_MMIO时的重要性，指出DMA发起者的内存属性通常是固定的，不能像CPU那样灵活处理。这意味着在设置CACHE和MMIO属性时需要更加谨慎，以确保系统的正常运行。<br><br>讨论的结论是，尽管当前的实现可以简化，但仍需注意不同硬件架构的差异，确保DMA和CPU的内存属性设置正确。未来的版本更新将继续关注这些问题，以保证补丁的兼容性和有效性。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-29]</span> <span class="email-subject">Re: [PATCH v4 10/28] KVM: arm64: iommu: Shadow host stage-2 page
 table</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mostafa Saleh <span class="email-sender">&lt;smostafa@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-30]</span> <span class="email-subject">Re: [PATCH v4 10/28] KVM: arm64: iommu: Shadow host stage-2 page
 table</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Jason Gunthorpe <span class="email-sender">&lt;jgg@ziepe.ca&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-30]</span> <span class="email-subject">Re: [PATCH v4 10/28] KVM: arm64: iommu: Shadow host stage-2 page
 table</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mostafa Saleh <span class="email-sender">&lt;smostafa@google.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH] KVM: arm64: Prevent access to vCPU events before init</h3>
                </div>

                <div class="thread-meta">
                    <span>3 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-09-30</span>
                </div>

                <div class="ai-summary">
                    本邮件线程主要讨论了一个针对 KVM（Kernel-based Virtual Machine）在 arm64 架构下的补丁，旨在防止在虚拟 CPU（vCPU）未初始化前访问其事件。参与者 Oliver Upton 提出了一个问题，即 KVM 允许用户空间在未初始化的 vCPU 上挂起事件，这可能导致 KVM 处理未初始化的数据，从而引发内核错误（BUG）。<br><br>关键技术要点包括：<br>1. 补丁通过在 ioctl 调用中添加检查，确保只有在 vCPU 初始化后才能访问 KVM_GET_VCPU_EVENTS 和 KVM_SET_VCPU_EVENTS。<br>2. 该问题在 6.17 版本及以上的内核中尤为明显，因相关提交导致异常处理不当。<br><br>讨论的结论是，Marc Zyngier 对补丁表示认可，并指出需要在未来对返回的 -ENOEXEC 错误进行文档说明。最终，补丁被应用于修复中，解决了一个令人烦恼的 bug。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-30]</span> <span class="email-subject">[PATCH] KVM: arm64: Prevent access to vCPU events before init</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-30]</span> <span class="email-subject">Re: [PATCH] KVM: arm64: Prevent access to vCPU events before init</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-30]</span> <span class="email-subject">Re: [PATCH] KVM: arm64: Prevent access to vCPU events before init</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[STABLE 6.1.y] [PATCH] KVM: arm64: Fix softirq masking in FPSIMD register saving sequence</h3>
                </div>

                <div class="thread-meta">
                    <span>2 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-10-03</span>
                </div>

                <div class="ai-summary">
                    本邮件线程讨论了针对 KVM（内核虚拟机）在 arm64 架构下的一个补丁，主要内容是修复在 FPSIMD（浮点 SIMD）寄存器保存序列中的软中断屏蔽问题。最初的补丁（提交 ID: 8f4dc4e54eed）解决了由于不当回溯导致的内核 BUG，但引入了潜在的死锁问题，特别是在重新启用软中断时可能会导致持有锁的情况下处理待处理的软中断。<br><br>关键技术要点包括：补丁通过在保存 FPSIMD 寄存器时禁用硬中断，减少了死锁的风险。此外，邮件中提到的调用栈显示了死锁发生的具体情况，强调了在处理软中断时的锁管理问题。<br><br>讨论的结论是，当前的补丁虽然修复了原有的 BUG，但仍需进一步改进以防止死锁的发生。最终，Ard Biesheuvel 对补丁表示认可，确认了其有效性。待解决的问题是如何在不引入死锁的情况下，确保软中断的正确处理。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-10-03]</span> <span class="email-subject">[STABLE 6.1.y] [PATCH] KVM: arm64: Fix softirq masking in FPSIMD register saving sequence</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Will Deacon <span class="email-sender">&lt;will@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-05]</span> <span class="email-subject">Re: [STABLE 6.1.y] [PATCH] KVM: arm64: Fix softirq masking in FPSIMD
 register saving sequence</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Ard Biesheuvel <span class="email-sender">&lt;ardb@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[STABLE 6.6.y] [PATCH] KVM: arm64: Fix softirq masking in FPSIMD register saving sequence</h3>
                </div>

                <div class="thread-meta">
                    <span>2 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-10-03</span>
                </div>

                <div class="ai-summary">
                    本邮件线程讨论了一个针对 KVM（内核虚拟机）在 arm64 架构下的补丁，旨在修复在 FPSIMD（浮点 SIMD）寄存器保存序列中的软中断屏蔽问题。最初的补丁（提交 ID：28b82be094e2）解决了由于错误回溯导致的内核 BUG，但引入了新的问题，即在重新启用软中断时可能导致死锁，因为处理待处理的软中断时会持有锁。<br><br>为了解决这一问题，Will Deacon 提出了一个新的补丁，建议在保存 FPSIMD 寄存器时禁用硬中断，以避免在持有锁的情况下处理软中断，从而减少死锁风险。补丁的关键在于在保存和刷新 CPU 状态时使用 `local_irq_save` 和 `local_irq_restore` 来管理中断状态。<br><br>讨论的结论是，补丁得到了 Ard Biesheuvel 的认可，并且在一定程度上向上游修复（提交 ID：9b19700e623f）迈出了小步，但仍需关注可能的死锁问题。整体来看，补丁在解决现有问题的同时，也为进一步的优化提供了基础。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-10-03]</span> <span class="email-subject">[STABLE 6.6.y] [PATCH] KVM: arm64: Fix softirq masking in FPSIMD register saving sequence</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Will Deacon <span class="email-sender">&lt;will@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-05]</span> <span class="email-subject">Re: [STABLE 6.6.y] [PATCH] KVM: arm64: Fix softirq masking in FPSIMD
 register saving sequence</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Ard Biesheuvel <span class="email-sender">&lt;ardb@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v2] KVM: arm64: Check range args for pKVM mem transitions</h3>
                </div>

                <div class="thread-meta">
                    <span>2 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-10-01</span>
                </div>

                <div class="ai-summary">
                    该邮件线程主要讨论了针对 KVM（Kernel-based Virtual Machine）在 ARM64 架构下的内存过渡检查的补丁，特别是检查范围参数的有效性。Marc Zyngier 提出了一个简单的函数 `check_range_args`，用于验证内存范围的起始地址和页面数是否合理，避免溢出问题。他认为该函数能够有效处理边界问题。<br><br>然而，Vincent Donnefort 对此表示担忧，指出即使 `check_range_args` 函数通过了检查，仍然可能在后续的 `__pkvm_host_share_guest()` 函数中导致溢出。例如，当物理地址为 `0xfffffffffffff000` 且大小为 `4096` 时，虽然 `check_range_args()` 返回真，但在实际映射中可能会绕过内存检查，从而引发错误。<br><br>讨论的关键技术要点包括：<br>1. `check_range_args` 函数的实现及其对内存边界问题的处理。<br>2. 对于内存溢出风险的关注，尤其是在后续处理中的潜在问题。<br><br>最终，讨论的结论是需要进一步审查和完善内存检查机制，以确保在所有情况下都能有效防止溢出问题，确保系统的稳定性和安全性。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-10-01]</span> <span class="email-subject">Re: [PATCH v2] KVM: arm64: Check range args for pKVM mem transitions</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-03]</span> <span class="email-subject">Re: [PATCH v2] KVM: arm64: Check range args for pKVM mem transitions</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Vincent Donnefort <span class="email-sender">&lt;vdonnefort@google.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v5 32/44] KVM: x86/pmu: Disable interception of select PMU
 MSRs for mediated vPMUs</h3>
                </div>

                <div class="thread-meta">
                    <span>2 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-10-01</span>
                </div>

                <div class="ai-summary">
                    该邮件线程主要讨论了一个针对 KVM（内核虚拟机）中 PMU（性能监控单元）相关功能的补丁，具体是禁用对某些 PMU MSR（模型特定寄存器）的拦截，以支持中介 vPMU（虚拟性能监控单元）。补丁的核心在于优化 PMU 的拦截逻辑，确保在虚拟化环境中正确处理性能计数器的访问。<br><br>关键技术要点包括：<br>1. 通过修改 `kvm_need_pmc_intercept` 函数来判断是否需要拦截 PMU 相关操作，确保在有中介 PMU 的情况下不进行不必要的拦截。<br>2. 引入了对主机 PMU 能力的检查，以确保虚拟机的 PMU 能力与主机相匹配，从而避免潜在的性能问题。<br><br>讨论的结论是，补丁看起来良好，得到了参与者的认可。当前没有提出新的问题，表明该补丁在技术上是可行的，且符合 KVM 的设计目标。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-10-01]</span> <span class="email-subject">Re: [PATCH v5 32/44] KVM: x86/pmu: Disable interception of select PMU
 MSRs for mediated vPMUs</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-03]</span> <span class="email-subject">Re: [PATCH v5 32/44] KVM: x86/pmu: Disable interception of select PMU
 MSRs for mediated vPMUs</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sandipan Das <span class="email-sender">&lt;sandidas@amd.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH] KVM: arm64: nv: do not inject L2-bound IRQs to L1 hypervisor</h3>
                </div>

                <div class="thread-meta">
                    <span>2 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-10-02</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主要技术问题是关于 KVM（内核虚拟机）在 ARM64 架构下处理嵌套虚拟化时，L1 超级管理程序（hypervisor）如何处理 L2 虚拟机（guest）中的中断（IRQ）的问题。具体来说，当前实现中，当 L1 超级管理程序尝试注入新的 IRQ 时，如果活动 IRQ 的数量已达到硬件限制（LR 数量），将导致中断处理异常。<br><br>关键技术要点包括：1）L1 超级管理程序在处理 IRQ 时，未能适当地移除已注入到 L2 的 IRQ，导致 KVM 继续尝试注入新 IRQ，形成循环；2）该补丁通过标记已注入到 L2 的 IRQ，确保 L1 超级管理程序只看到待处理或活动的 IRQ，从而避免了中断溢出的问题。<br><br>讨论的主要结论是，尽管补丁提供了一种解决方案，但仍需考虑更根本的设计问题，例如如何在不违反架构模型的情况下处理活动 IRQ 的溢出。Oliver Upton 提出了调整 IRQ 排序的建议，以确保待处理的 IRQ 优先填充 LR，避免潜在的中断丢失。整体而言，补丁尚处于 RFC（请求反馈）阶段，需进一步讨论和验证。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-10-02]</span> <span class="email-subject">[PATCH] KVM: arm64: nv: do not inject L2-bound IRQs to L1 hypervisor</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Volodymyr Babchuk <span class="email-sender">&lt;Volodymyr_Babchuk@epam.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-02]</span> <span class="email-subject">Re: [PATCH] KVM: arm64: nv: do not inject L2-bound IRQs to L1
 hypervisor</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v4 15/28] iommu/arm-smmu-v3: Load the driver later in KVM
 mode</h3>
                </div>

                <div class="thread-meta">
                    <span>2 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-09-29</span>
                </div>

                <div class="ai-summary">
                    本邮件线程主要讨论了针对 KVM 模式下的 ARM SMMU v3 驱动加载顺序的补丁。参与者 Mostafa Saleh 提出了将 KVM SMMUv3 驱动在 KVM 初始化完成之前先绑定到 SMMU 的建议，以确保在支持 RPM 的情况下，电源域在 SMMU 之前被探测。此方法不需要对主驱动进行修改，但在运行时 KVM 驱动无法与驱动模型交互。<br><br>另一种可能的解决方案是让 KVM 驱动探测 SMMU，并创建子设备，从而在内核中形成清晰的父子关系，便于使用 sysfs/debugfs 进行管理。然而，这种方法可能更具挑战性，Mostafa 表示将进一步研究这两种方案，并在 v5 版本中更新逻辑。<br><br>Jason Gunthorpe 对于保持 KVM 特定驱动绑定和可见性表示赞同，认为这有助于系统调试，但对如何实现仍不确定，认为可以考虑使用简单的辅助设备来获取父设备的节点信息。<br><br>讨论的关键在于如何优化 KVM 模式下 SMMU 驱动的加载顺序，以提高系统的稳定性和可调试性，当前仍需进一步探索具体实现方案。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-29]</span> <span class="email-subject">Re: [PATCH v4 15/28] iommu/arm-smmu-v3: Load the driver later in KVM
 mode</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mostafa Saleh <span class="email-sender">&lt;smostafa@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-02]</span> <span class="email-subject">Re: [PATCH v4 15/28] iommu/arm-smmu-v3: Load the driver later in KVM
 mode</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Jason Gunthorpe <span class="email-sender">&lt;jgg@ziepe.ca&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v10 07/43] arm64: RME: ioctls to create and configure realms</h3>
                </div>

                <div class="thread-meta">
                    <span>2 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-10-01</span>
                </div>

                <div class="ai-summary">
                    在这封邮件线程中，主要讨论了一个针对 ARM64 架构的补丁，内容涉及创建和配置“领域”（realms）的 ioctl 接口。Marc Zyngier 和 Steven Price 两位参与者对补丁的设计和实现细节进行了深入探讨。<br><br>关键技术要点包括：<br>1. **IPA 大小的配置**：Marc 指出，虚拟机监控器（VMM）需要查询主机的 IPA 大小，以便正确管理 IPA 空间，确保来宾能够正确进行 I/O 操作。<br>2. **代码结构和依赖性问题**：Marc 提出了对补丁中包含特定于用户空间的文件的质疑，认为这可能导致循环依赖，并建议将 S2 管理移出当前补丁，以提高可读性。<br>3. **VMID 分配器的必要性**：Marc 询问为何需要 VMID 分配器，认为 RMM 应该能够独立管理其 VMID。<br><br>讨论的结论是，补丁的设计需要更多的解释和文档支持，以便其他开发者理解其目的和实现细节。此外，Steven 表示愿意改进代码的可读性，并考虑如何更好地组织函数和宏，以适应不同的页面大小配置。整体上，邮件中反映出对补丁设计的复杂性和潜在改进方向的关注。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-10-01]</span> <span class="email-subject">Re: [PATCH v10 07/43] arm64: RME: ioctls to create and configure realms</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-02]</span> <span class="email-subject">Re: [PATCH v10 07/43] arm64: RME: ioctls to create and configure
 realms</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Steven Price <span class="email-sender">&lt;steven.price@arm.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v10 09/43] KVM: arm64: Allow passing machine type in KVM creation</h3>
                </div>

                <div class="thread-meta">
                    <span>2 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-10-01</span>
                </div>

                <div class="ai-summary">
                    本邮件线程讨论了关于在 KVM 创建过程中允许传递机器类型的补丁（PATCH v10 09/43），主要涉及 ARM64 架构的虚拟化实现。参与者 Marc Zyngier 和 Steven Price 针对补丁中的一些技术细节进行了深入探讨。<br><br>关键技术要点包括：Marc Zyngier 提出对于 CCA（客户机控制访问）能力的处理，认为在未广告该能力时，返回错误码应为 EINVAL 而非 EPERM。他还询问为何不使用与 pKVM 一致的“PROTECTED”标志（位31），以保持一致性。Steven Price 则回应称，当前的实现需要区分 pKVM 和 CCA，指出这两者可能在同一平台上共存，并提到该补丁是对 Will 提出的早期提案的扩展。<br><br>讨论的结论是，补丁的设计需要在 pKVM 和 CCA 之间找到平衡，同时确保对用户空间使用保留位的检测和错误处理。此外，双方达成一致，补丁中的检查逻辑已在 kvm_arch_init_vm() 中进行了调整。待解决的问题包括如何在未来的实现中更好地处理这两种虚拟化技术的兼容性。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-10-01]</span> <span class="email-subject">Re: [PATCH v10 09/43] KVM: arm64: Allow passing machine type in KVM creation</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-01]</span> <span class="email-subject">Re: [PATCH v10 09/43] KVM: arm64: Allow passing machine type in KVM
 creation</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Steven Price <span class="email-sender">&lt;steven.price@arm.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v10 08/43] kvm: arm64: Don't expose debug capabilities for realm guests</h3>
                </div>

                <div class="thread-meta">
                    <span>2 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-10-01</span>
                </div>

                <div class="ai-summary">
                    该邮件线程主要讨论了一个关于 KVM（内核虚拟机）在 ARM64 架构下的补丁，具体内容是关于不向 Realm 客户机暴露调试能力的问题。参与者 Marc Zyngier 和 Steven Price 讨论了调试机制的细节及其对虚拟机监控器（VMM）和客户机的影响。<br><br>关键技术要点包括：<br>1. 客户机的断点和观察点数量由架构寄存器 ID_AA64DFR0_EL1 配置，VMM 可以根据需要调整客户机的调试能力。<br>2. CCA（客户机隔离）机制确保主机无法访问客户机的调试信息，因此一般不允许对客户机进行调试。<br>3. RMM（Realm Management Monitor）v1.1 可能会提供一些主机调试 Realm 的机制，但这会影响到客户机的证明流程，尚需客户机的配合。<br><br>讨论的结论是，尽管有潜在的调试机制，但由于 RMM API 尚未最终确定，且缺乏相应的 Linux 补丁，当前的调试能力仍需进一步探讨和解决。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-10-01]</span> <span class="email-subject">Re: [PATCH v10 08/43] kvm: arm64: Don't expose debug capabilities for realm guests</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-01]</span> <span class="email-subject">Re: [PATCH v10 08/43] kvm: arm64: Don't expose debug capabilities for
 realm guests</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Steven Price <span class="email-sender">&lt;steven.price@arm.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH] KVM: selftests: Fix irqfd_test for non-x86 architectures</h3>
                </div>

                <div class="thread-meta">
                    <span>2 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-09-30</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主要技术问题是修复 KVM 自测中的 irqfd_test，以支持非 x86 架构。Oliver Upton 提出，当前的 irqfd_test 假设默认虚拟机在自测中会隐式创建内核中的 IRQ 芯片，但这一假设在非 x86 架构上并不成立，因此需要进行调整。<br><br>关键技术要点包括：1) 引入一个架构谓词，以指示默认虚拟机是否会获得 IRQ 芯片；2) 针对 arm64 架构的 VGIC 初始化要求，使用 vm_create_with_one_vcpu() 创建虚拟机，尽管创建的 vCPU 在测试中未被使用；3) 修改了多个文件以实现这一功能，包括 kvm_util.h、irqfd_test.c 和不同架构的处理器文件。<br><br>讨论的结论是，Oliver Upton 的补丁已被 Marc Zyngier 确认并应用于修复，确保 irqfd_test 在不同架构下的兼容性。此补丁解决了 irqfd 测试在没有内核 IRQ 芯片时的失败问题，提升了 KVM 自测的可靠性。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-30]</span> <span class="email-subject">[PATCH] KVM: selftests: Fix irqfd_test for non-x86 architectures</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-01]</span> <span class="email-subject">Re: [PATCH] KVM: selftests: Fix irqfd_test for non-x86 architectures</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v2] KVM: arm64: Document vCPU event ioctls as requiring init'ed vCPU</h3>
                </div>

                <div class="thread-meta">
                    <span>2 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-09-30</span>
                </div>

                <div class="ai-summary">
                    该邮件线程主要讨论了一个关于 KVM（Kernel-based Virtual Machine）在 arm64 架构下的补丁，内容涉及对 vCPU 事件 ioctl 的文档更新。具体来说，补丁更新了 API 文档，以明确指出在未初始化的 vCPU 上调用 KVM_{GET,SET}_VCPU_EVENTS 将会返回错误代码 -ENOEXEC。这一变化源于之前的提交（commit cc96679f3c03），旨在防止在 vCPU 初始化之前访问其事件。<br><br>关键技术要点包括：<br>1. 更新了文档，明确了对未初始化 vCPU 的 ioctl 调用的限制。<br>2. 通过补丁增加了对错误处理的说明，提升了 API 的可用性和安全性。<br><br>讨论的结论是，该补丁已被 Marc Zyngier 接受并应用于修复分支，表明此项更新得到了认可并将正式纳入代码库中。整体来看，邮件讨论围绕文档的准确性和 API 使用的安全性展开，确保开发者在使用 KVM 时能够遵循正确的操作流程。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-30]</span> <span class="email-subject">[PATCH v2] KVM: arm64: Document vCPU event ioctls as requiring init'ed vCPU</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-01]</span> <span class="email-subject">Re: [PATCH v2] KVM: arm64: Document vCPU event ioctls as requiring init'ed vCPU</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH 3/6] KVM: arm64: Add pre_fault_memory implementation</h3>
                </div>

                <div class="thread-meta">
                    <span>2 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-09-29</span>
                </div>

                <div class="ai-summary">
                    在这封邮件讨论中，主要围绕一个针对 KVM（内核虚拟机）在 arm64 架构下的补丁进行讨论，补丁内容为实现 `pre_fault_memory` 函数。参与者 Jack Thomson 和 Oliver Upton 就补丁的实现细节进行了交流。<br><br>关键技术要点包括：<br>1. Jack 提出了 `kvm_arch_vcpu_pre_fault_memory` 函数的实现，该函数用于处理虚拟机中的内存预故障情况。<br>2. Oliver 指出，使用合成中止（synthetic abort）的方法更为合适，并建议在处理访问标志故障时应考虑更准确的翻译故障表示。<br>3. Oliver 还提到，当前实现缺少一些重要的 ESR（异常状态寄存器）字段，这些字段对于指示数据中止至关重要。<br><br>讨论的结论是，Jack 已经根据 Oliver 的反馈进行了修改，但仍需进一步完善以确保向前兼容，并准确处理相关的故障类型。待解决的问题包括补丁中 ESR 字段的完整性和准确性，以及如何更好地处理访问标志故障。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-29]</span> <span class="email-subject">Re: [PATCH 3/6] KVM: arm64: Add pre_fault_memory implementation</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Thomson, Jack <span class="email-sender">&lt;jackabt.amazon@gmail.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-29]</span> <span class="email-subject">Re: [PATCH 3/6] KVM: arm64: Add pre_fault_memory implementation</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v3 0/3] VMM can handle guest SEA via KVM_EXIT_ARM_SEA</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-10-03</span>
                </div>

                <div class="ai-summary">
                    该邮件线程主要讨论了一个补丁系列，主题为“VMM可以通过KVM_EXIT_ARM_SEA处理客体SEA”。发件人Jiaqi Yan请求Marc、Oliver及其他开发者对该补丁进行审查，并期待他们的反馈。<br><br>技术要点包括：<br>1. 该补丁系列的目的是增强虚拟机监控器（VMM）对ARM架构下的特定事件（SEA，System Error Address）的处理能力。<br>2. 通过引入KVM_EXIT_ARM_SEA事件，VMM能够更有效地管理和响应虚拟机中的错误情况，从而提高系统的稳定性和可靠性。<br><br>讨论的结论是，发件人希望能获得社区的反馈，以便进一步完善补丁。当前尚未提及具体的技术问题或争议，主要集中在补丁的审查和改进建议上。待解决的问题包括如何更好地集成该补丁以及可能的性能影响。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-10-03]</span> <span class="email-subject">Re: [PATCH v3 0/3] VMM can handle guest SEA via KVM_EXIT_ARM_SEA</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Jiaqi Yan <span class="email-sender">&lt;jiaqiyan@google.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH 15/34] KVM: Add KVM_CREATE_GUEST_MEMFD ioctl() for
 guest-specific backing memory</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-10-03</span>
                </div>

                <div class="ai-summary">
                    在这封邮件中，主要讨论了一个针对 KVM 的补丁，即添加 KVM_CREATE_GUEST_MEMFD ioctl() 以支持特定于来宾的后备内存。参与者 Paolo Bonzini 提出了对当前限制的质疑，认为在某些情况下（如来宾内存可被宿主机访问时），这些限制是否仍然必要。他指出，能够支持基于脏页跟踪的差异内存快照对于 Firecracker 或实时迁移非常有用。<br><br>关键技术要点包括：<br>1. KVM_CREATE_GUEST_MEMFD ioctl() 的引入，旨在改善虚拟机的内存管理。<br>2. 讨论了在特定条件下是否可以解除对来宾内存访问的限制，以便实现更灵活的快照和恢复功能。<br><br>主要讨论结论是，虽然当前的限制可能在某些情况下是合理的，但在支持差异快照和实时迁移的需求下，考虑放宽这些限制是值得探索的方向。待解决的问题是如何在确保安全性的同时，优化内存管理和快照功能。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-10-03]</span> <span class="email-subject">Re: [PATCH 15/34] KVM: Add KVM_CREATE_GUEST_MEMFD ioctl() for
 guest-specific backing memory</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Nikita Kalyazin <span class="email-sender">&lt;kalyazin@amazon.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH] KVM: arm64: nv: do not inject L2-bound IRQs to L1
 hypervisor</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-10-03</span>
                </div>

                <div class="ai-summary">
                    在这封邮件中，主要讨论了一个关于 KVM（Kernel-based Virtual Machine）在 arm64 架构下的补丁，内容是关于不将 L2 绑定的中断注入到 L1 虚拟机监控器（hypervisor）的问题。参与者 Volodymyr Babchuk 提到他之前错过了一些相关的讨论，并表示对 LRENPIE 位的了解不足。<br><br>关键技术要点包括：<br>1. L2 绑定中断的处理方式对 L1 hypervisor 的影响。<br>2. 讨论者提到无法提供重现问题的代码，因为这需要复杂的 Android 构建环境，但他认为通过在 kvmtool 中同时触发大量中断可能会重现该问题。<br><br>讨论的结论是，Volodymyr 表示由于工作压力，他无法继续对此问题进行深入研究，并欢迎其他人接手。同时，他也指出当前没有 Xen 特定的依赖，因此 KVM 作为 L1 hypervisor 应该能够正常工作。整体来看，讨论中存在对问题的理解和解决的需求，但由于参与者的时间限制，后续的进展尚不明确。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-10-03]</span> <span class="email-subject">Re: [PATCH] KVM: arm64: nv: do not inject L2-bound IRQs to L1
 hypervisor</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Volodymyr Babchuk <span class="email-sender">&lt;Volodymyr_Babchuk@epam.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH] KVM: arm64: Document vCPU event ioctls as requiring init'ed vCPU</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-09-30</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主要技术问题是关于 KVM（Kernel-based Virtual Machine）在 arm64 架构中对未初始化 vCPU 的事件调用的处理。具体来说，邮件中提到 KVM 在 commit cc96679f3c03 中引入了对未初始化 vCPU 调用 KVM_{GET,SET}_VCPU_EVENTS 的拒绝机制，因此需要更新相关的 API 文档。<br><br>关键技术要点包括：<br>1. 对于未初始化的 vCPU，调用 KVM_{GET,SET}_VCPU_EVENTS 将返回错误 -ENXIO。<br>2. 更新的文档中明确指出，未初始化的 vCPU 不能访问其事件，这一限制旨在防止潜在的错误和不一致性。<br><br>讨论的结论是，文档更新已完成，确保开发者在使用这些 ioctl 时了解未初始化 vCPU 的限制。当前没有提出待解决的问题，邮件内容主要集中在文档的准确性和清晰性上。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-30]</span> <span class="email-subject">[PATCH] KVM: arm64: Document vCPU event ioctls as requiring init'ed vCPU</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v4 02/28] KVM: arm64: Donate MMIO to the hypervisor</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-09-29</span>
                </div>

                <div class="ai-summary">
                    在这封邮件中，讨论的主要技术问题是关于 KVM（Kernel-based Virtual Machine）在 arm64 架构下如何将 MMIO（内存映射输入输出）捐赠给虚拟机监控器（hypervisor）。Mostafa Saleh 提出了一个补丁（PATCH v4 02/28），旨在优化这一过程。<br><br>关键的技术要点包括：Mostafa 表达了对添加新辅助函数的顾虑，认为这些函数可能只在少见的错误路径中使用，因此增加了代码的复杂性。他提到将会在下一个版本（v5）中添加这些辅助函数，以便更好地处理相关的错误情况。<br><br>讨论的结论是，尽管添加新函数可能会增加代码的复杂性，但为了提高系统的稳定性和错误处理能力，还是决定在未来的版本中实现这一改动。当前的主要待解决问题是如何平衡代码的简洁性与功能的完整性。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-29]</span> <span class="email-subject">Re: [PATCH v4 02/28] KVM: arm64: Donate MMIO to the hypervisor</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mostafa Saleh <span class="email-sender">&lt;smostafa@google.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v7 06/12] KVM: guest_memfd: add module param for disabling
 TLB flushing</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-09-29</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主要技术问题是关于 KVM（内核虚拟机）中添加一个模块参数以禁用 TLB（翻译后备缓冲区）刷新功能的补丁。参与者 Patrick Roy 提出了在没有大页支持的情况下，可以通过在访问某个地址时分配并准备同一 2M 块中的所有页面，从而只在调整所有直接映射条目后一次性刷新 TLB 的方法。<br><br>讨论中提到，虽然可以选择完全刷新 TLB，但在尝试刷新特定范围时，可能会遇到需要刷新不断扩大的范围的问题。此外，某些架构（如 x86 的扩展）能够在不发送中断的情况下刷新远程 TLB。参与者还提到了一些关于异步 TLB 刷新的研究，并讨论了在特定上下文中，异步 TLB 刷新是否比不进行显式刷新更有效。<br><br>讨论的结论是，虽然异步 TLB 刷新可能在平均情况下更快，但在确定性方面仍然存在不确定性。待解决的问题包括如何在不同架构中有效实现 TLB 刷新，以及异步刷新是否能显著提高性能。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-29]</span> <span class="email-subject">Re: [PATCH v7 06/12] KVM: guest_memfd: add module param for disabling
 TLB flushing</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: David Hildenbrand <span class="email-sender">&lt;david@redhat.com&gt;</span></div>
                </div>
            </div>
        </div>

        <div class="category">
            <h2>Selftest</h2>

            <div class="thread">
                <div class="thread-header">
                    <h3>selftests: kvm: irqfd_test: KVM_IRQFD failed, rc: -1 errno: 11
 (Resource temporarily unavailable)</h3>
                </div>

                <div class="thread-meta">
                    <span>2 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-09-30</span>
                </div>

                <div class="ai-summary">
                    此次邮件讨论主要集中在 KVM 的自测试 irqfd_test 失败的问题。自从 Linux next-20250625 版本引入该测试以来，所有测试平台上均出现了 KVM_IRQFD ioctl 返回 errno 11（资源暂时不可用）的错误，导致测试失败，重现率达到 100%。受影响的平台包括 graviton4 和 rk3399-rock-pi-4b。<br><br>关键技术要点包括：测试尝试注册 IRQFD 时失败，可能是由于资源耗尽或 ARM 平台不支持该行为。Naresh Kamboju 提出是否应将此视为 ARM 平台的一个不支持案例，或者是否存在缺失的实现或配置需要解决。<br><br>Sean Christopherson 在回复中指出，这是一个已知问题，KVM ARM 需要测试创建一个虚拟 GIC，但由于缺乏明显的解决方案，修复工作停滞不前。他提到将会联系其他相关人员以推动问题解决。<br><br>讨论的结论是，当前需要进一步明确 KVM ARM 平台对 irqfd_test 的支持情况，并寻找合适的解决方案来实现虚拟 GIC 的创建。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-30]</span> <span class="email-subject">selftests: kvm: irqfd_test: KVM_IRQFD failed, rc: -1 errno: 11
 (Resource temporarily unavailable)</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Naresh Kamboju <span class="email-sender">&lt;naresh.kamboju@linaro.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-30]</span> <span class="email-subject">Re: selftests: kvm: irqfd_test: KVM_IRQFD failed, rc: -1 errno: 11
 (Resource temporarily unavailable)</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
                </div>
            </div>
        </div>

        <div class="category">
            <h2>GIT PULL</h2>

            <div class="thread">
                <div class="thread-header">
                    <h3>[GIT PULL] KVM/arm64 updates for 6.18</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-09-30</span>
                </div>

                <div class="ai-summary">
                    在邮件主题为“[GIT PULL] KVM/arm64 updates for 6.18”的讨论中，参与者主要讨论了针对 KVM（Kernel-based Virtual Machine）在 arm64 架构上的更新和补丁内容。Marc Zyngier 提到新增的自测试功能，表示对更多自测试的欢迎，并感谢 Paolo Bonzini 的拉取请求，同时对延迟表示歉意。<br><br>关键技术要点包括 KVM 在 arm64 平台的改进，特别是自测试的增加，这有助于提升代码的稳定性和可靠性。自测试功能的引入可以帮助开发者在开发过程中更早地发现潜在问题，从而提高整体质量。<br><br>讨论的结论是，尽管更新和补丁已被接受，但仍需关注自测试的进一步完善和其他潜在问题的解决。整体来看，邮件反映了社区对 KVM/arm64 更新的积极态度和对自测试功能的重视。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-30]</span> <span class="email-subject">Re: [GIT PULL] KVM/arm64 updates for 6.18</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Paolo Bonzini <span class="email-sender">&lt;pbonzini@redhat.com&gt;</span></div>
                </div>
            </div>
        </div>

        <div class="category">
            <h2>Discussion</h2>

            <div class="thread">
                <div class="thread-header">
                    <h3>KVM: Nested VGIC emulation leads to infinite IRQ exceptions</h3>
                </div>

                <div class="thread-meta">
                    <span>2 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-10-02</span>
                </div>

                <div class="ai-summary">
                    在此次邮件讨论中，主要关注的问题是 KVM 中嵌套 VGIC 模拟导致的无限 IRQ 异常。参与者 Volodymyr Babchuk 和 Marc Zyngier 针对该问题进行了深入分析。<br><br>技术要点包括：Volodymyr 通过增加追踪信息发现，Xen 在返回到虚拟 CPU 时，存在多个活动中断填满了可用的中断路由（LR），导致无法处理新的定时器中断。由于这些中断是针对 DomU（第二级虚拟机）的，Xen 无法直接去激活它们，从而形成了死锁状态。Volodymyr 提出了两种可能的解决方案：一是优先处理定时器中断，确保其始终存在于 LR 中；二是降低活动中断的优先级，使其最后插入 LR。<br><br>Marc 对此表示质疑，认为如果这些中断是 DomU 的，为什么会影响到 Xen。他指出，在进入 Xen 时，硬件 LR 应仅包含针对 Xen 的虚拟中断，而不应包含 DomU 的中断，暗示可能存在上下文切换的问题。<br><br>讨论结论是，虽然提出了两种解决方案，但仍需进一步探讨如何在 KVM 中正确处理 DomU 中断，以避免此类异常的发生。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-10-02]</span> <span class="email-subject">Re: KVM: Nested VGIC emulation leads to infinite IRQ exceptions</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Volodymyr Babchuk <span class="email-sender">&lt;Volodymyr_Babchuk@epam.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-02]</span> <span class="email-subject">Re: KVM: Nested VGIC emulation leads to infinite IRQ exceptions</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>KVM: Nested VGIC emulation leads to infinite IRQ exceptions</h3>
                </div>

                <div class="thread-meta">
                    <span>2 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-10-01</span>
                </div>

                <div class="ai-summary">
                    本邮件线程主要讨论了 KVM 中嵌套 VGIC 模拟导致无限 IRQ 异常的问题。参与者 Marc Zyngier 和 Volodymyr Babchuk 进行了技术交流，探讨了在特定配置下，Xen 和 KVM 之间的中断处理机制。<br><br>关键技术要点包括：<br>1. 对于 KVM 和 Xen 的中断管理，特别是在处理维护中断时，如何配置 ICH_HCR_EL2 对中断的影响。<br>2. 在 EL2 和 EL1 之间切换时，定时器中断的状态和处理流程，尤其是如何在不同的执行级别中正确地确认和处理中断。<br>3. Marc 提到需要提供一个可重现的测试环境，以便更深入地分析问题，并指出目前缺乏足够的信息来定位故障。<br><br>讨论的结论是，虽然观察到定时器中断的触发，但 EL2 并未正确确认这些中断，可能是 KVM 或 Xen 中存在问题。参与者建议进行进一步的调试和分析，以找出问题根源。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-10-01]</span> <span class="email-subject">Re: KVM: Nested VGIC emulation leads to infinite IRQ exceptions</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-01]</span> <span class="email-subject">Re: KVM: Nested VGIC emulation leads to infinite IRQ exceptions</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>KVM: Nested VGIC emulation leads to infinite IRQ exceptions</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-10-02</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主要技术问题是 KVM（内核虚拟机）在嵌套 VGIC（虚拟通用中断控制器）仿真中导致的无限 IRQ（中断请求）异常。参与者 Volodymyr Babchuk 和 Marc Zyngier 探讨了 IRQ 的处理机制，特别是在 Xen 嵌套虚拟化环境中，KVM 如何跟踪和管理 IRQ。<br><br>关键技术要点包括：1）Xen 将 QEMU 生成的 IRQ 视为硬件中断，并通过写入 vLR（虚拟负载寄存器）将其注入到虚拟机中；2）KVM 需要跟踪这些重新注入的 IRQ，并在上下文切换时从 Xen 的 LRs 中移除它们；3）讨论中提到，KVM 可能需要采用某种启发式方法来判断 L1（第一层）虚拟化管理程序是否将 IRQ 重新注入到 L2（第二层）虚拟机中。<br><br>主要讨论结论是，KVM 在处理 IRQ 时需要依赖 L1 虚拟化管理程序的良好行为，因为它可能会尝试结束已经注入到虚拟机中的 IRQ。尽管处理虚拟硬件中断相对简单，但对于真实硬件中断的管理则可能会更加复杂。待解决的问题是如何有效区分和管理 L1 和 L2 目标的 IRQ，以避免无限循环的异常情况。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-10-02]</span> <span class="email-subject">Re: KVM: Nested VGIC emulation leads to infinite IRQ exceptions</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Volodymyr Babchuk <span class="email-sender">&lt;Volodymyr_Babchuk@epam.com&gt;</span></div>
                </div>
            </div>
        </div>

    </div>
</body>
</html>
