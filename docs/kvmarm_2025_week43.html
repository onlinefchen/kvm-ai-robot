<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KVMARM 邮件列表 AI 总结报告</title>
    <style>
        body {
            font-family: 'Courier New', 'Courier', monospace;
            line-height: 1.5;
            max-width: 1200px;
            margin: 0 auto;
            padding: 30px 40px;
            background-color: #ffffff;
            color: #222;
        }
        .container {
            background: #ffffff;
        }
        h1 {
            font-size: 2.2em;
            font-weight: bold;
            color: #000;
            margin-bottom: 0.3em;
            text-align: center;
            border-bottom: 2px solid #000;
            padding-bottom: 15px;
        }
        h2 {
            font-size: 1.6em;
            font-weight: bold;
            color: #000;
            margin-top: 2em;
            margin-bottom: 0.6em;
            border-bottom: 1px solid #333;
            padding-bottom: 8px;
        }
        h3 {
            font-size: 1.2em;
            font-weight: bold;
            color: #111;
            margin-top: 1.5em;
            margin-bottom: 0.5em;
        }
        h4 {
            font-size: 1.05em;
            font-weight: bold;
            color: #333;
            margin-top: 1.2em;
            margin-bottom: 0.5em;
        }
        .meta-info {
            background: #f9f9f9;
            border: 1px solid #ddd;
            padding: 15px 20px;
            margin: 20px 0;
            font-size: 0.95em;
            line-height: 1.6;
        }
        .meta-info p {
            margin: 6px 0;
            color: #444;
        }
        .meta-info strong {
            color: #000;
            font-weight: bold;
        }
        .stats {
            display: table;
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            border: 1px solid #000;
        }
        .stat-card {
            display: table-cell;
            border: 1px solid #000;
            padding: 12px 15px;
            text-align: center;
            background: #fafafa;
        }
        .stat-card h3 {
            margin: 0;
            color: #000;
            font-size: 1.8em;
            font-weight: bold;
            border: none;
            padding: 0;
        }
        .stat-card p {
            margin: 5px 0 0 0;
            color: #444;
            font-size: 0.9em;
            font-weight: normal;
        }
        .category {
            margin: 30px 0;
        }
        .thread {
            margin: 25px 0;
            padding: 15px;
            background: #fafafa;
            border: 1px solid #ccc;
            page-break-inside: avoid;
        }
        .thread-header {
            margin-bottom: 12px;
            border-bottom: 1px solid #ddd;
            padding-bottom: 10px;
        }
        .thread-header h3 {
            font-size: 1.15em;
            font-weight: bold;
            color: #000;
            margin: 0;
        }
        .thread-meta {
            display: block;
            margin: 8px 0 12px 0;
            font-size: 0.9em;
            color: #555;
            font-style: italic;
        }
        .thread-meta span {
            margin-right: 15px;
        }
        .ai-summary {
            background: #fff;
            border-left: 3px solid #666;
            padding: 12px 15px;
            margin: 15px 0;
            line-height: 1.6;
            color: #222;
            font-style: italic;
        }
        .email-list {
            background: #fff;
            border: 1px solid #ccc;
            padding: 10px 15px;
            font-family: 'Courier New', 'Consolas', monospace;
            font-size: 0.88em;
            line-height: 1.5;
            overflow-x: auto;
            margin: 10px 0;
        }
        .email-item {
            margin: 4px 0;
            padding: 2px 0;
            color: #222;
        }
        .email-item.historical {
            background: #f5f5f5;
            border-left: 3px solid #999;
            padding-left: 8px;
            opacity: 0.8;
        }
        .email-item.new {
            background: #fffef0;
            border-left: 3px solid #0066cc;
            padding-left: 8px;
        }
        .email-date {
            color: #0066cc;
            font-weight: bold;
        }
        .email-date.historical {
            color: #666;
        }
        .email-sender {
            color: #c30;
            font-weight: normal;
        }
        .email-subject {
            color: #000;
        }
        .historical-marker {
            color: #999;
            font-size: 0.85em;
            font-style: italic;
        }
        .new-marker {
            color: #0066cc;
            font-size: 0.85em;
            font-weight: bold;
        }
        .archive-link {
            display: inline-block;
            margin: 15px 0;
            padding: 10px 20px;
            background: #333;
            color: #fff;
            text-decoration: none;
            border: 2px solid #000;
            font-weight: bold;
            transition: all 0.2s;
        }
        .archive-link:hover {
            background: #000;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>KVMARM Mailing List Analysis Report</h1>

        <div class="meta-info">
            <p><strong>Generated:</strong> 2025-10-27 08:13</p>
            <p><strong>Time Period:</strong> 2025年10月 第43周 (10/20 - 10/26)</p>
            <p><strong>Total Messages:</strong> 159 | <strong>Total Threads:</strong> 24</p>
            <p style="text-align: center;"><a href="archive.html" class="archive-link">📚 历史归档 Archive</a></p>
        </div>


        <div class="category">
            <h2>PATCH</h2>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v3 00/25] KVM: x86/mmu: TDX post-populate cleanups</h3>
                </div>

                <div class="thread-meta">
                    <span>65 messages</span>
                    <span>5 participants</span>
                    <span>Started: 2025-10-16</span>
                </div>

                <div class="ai-summary">
                    本邮件线程讨论了关于 KVM（内核虚拟机）和 TDX（可信执行环境扩展）相关的多个补丁（patch），主要集中在 TDX 的后填充清理工作上。<br><br>**原始补丁内容**：<br>本系列补丁的主要目标是清理 TDX 的后填充路径，解决 KVM 内部和 gmem（guest memory）之间的锁定问题。补丁包括强制执行 kvm_arch_vcpu_async_ioctl() 的使用、重命名为 kvm_arch_vcpu_unlocked_ioctl()，以及其他与 TDX 相关的 API 改进。<br><br>**之前讨论要点**：<br>在历史讨论中，补丁的设计初衷是为了提高代码的可维护性和安全性，尤其是在处理内存映射和锁定时。讨论中提到了一些冗余检查和函数的合并，以减少代码复杂性。<br><br>**本周新讨论与进展**：<br>本周的讨论主要集中在补丁的审查和细节调整上。参与者对多个补丁进行了审核，并提出了一些建议，例如在处理 guest_memfd 的映射时需要确保锁定机制的正确性。此外，关于补丁的顺序和潜在的 KVM_BUG_ON() 问题也进行了讨论。总体来看，补丁得到了积极的反馈，多个补丁已被审核通过，显示出开发者对改进 KVM 和 TDX 代码的共识和支持。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-10-16]</span> <span class="email-subject">[PATCH v3 00/25] KVM: x86/mmu: TDX post-populate cleanups</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-10-16]</span> <span class="email-subject">[PATCH v3 03/25] KVM: TDX: Drop PROVE_MMU=y sanity check on
 to-be-populated mappings</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-10-16]</span> <span class="email-subject">[PATCH v3 04/25] KVM: x86/mmu: Add dedicated API to map guest_memfd
 pfn into TDP MMU</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-10-16]</span> <span class="email-subject">[PATCH v3 05/25] Revert "KVM: x86/tdp_mmu: Add a helper function to
 walk down the TDP MMU"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-10-16]</span> <span class="email-subject">[PATCH v3 06/25] KVM: x86/mmu: Rename kvm_tdp_map_page() to kvm_tdp_page_prefault()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-10-16]</span> <span class="email-subject">[PATCH v3 07/25] KVM: TDX: Drop superfluous page pinning in S-EPT management</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-10-16]</span> <span class="email-subject">[PATCH v3 09/25] KVM: TDX: Fold tdx_sept_drop_private_spte() into tdx_sept_remove_private_spte()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-10-16]</span> <span class="email-subject">[PATCH v3 10/25] KVM: x86/mmu: Drop the return code from kvm_x86_ops.remove_external_spte()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-10-16]</span> <span class="email-subject">[PATCH v3 11/25] KVM: TDX: Avoid a double-KVM_BUG_ON() in tdx_sept_zap_private_spte()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-10-16]</span> <span class="email-subject">[PATCH v3 13/25] KVM: TDX: Fold tdx_mem_page_record_premap_cnt() into
 its sole caller</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-10-16]</span> <span class="email-subject">[PATCH v3 14/25] KVM: TDX: Bug the VM if extended the initial
 measurement fails</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-10-16]</span> <span class="email-subject">[PATCH v3 15/25] KVM: TDX: ADD pages to the TD image while populating
 mirror EPT entries</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-10-16]</span> <span class="email-subject">[PATCH v3 16/25] KVM: TDX: Fold tdx_sept_zap_private_spte() into tdx_sept_remove_private_spte()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-10-16]</span> <span class="email-subject">[PATCH v3 19/25] KVM: TDX: Assert that mmu_lock is held for write
 when removing S-EPT entries</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-10-16]</span> <span class="email-subject">[PATCH v3 20/25] KVM: TDX: Add macro to retry SEAMCALLs when forcing
 vCPUs out of guest</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-10-16]</span> <span class="email-subject">[PATCH v3 21/25] KVM: TDX: Add tdx_get_cmd() helper to get and
 validate sub-ioctl command</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-10-16]</span> <span class="email-subject">[PATCH v3 22/25] KVM: TDX: Convert INIT_MEM_REGION and INIT_VCPU to
 "unlocked" vCPU ioctl</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-10-16]</span> <span class="email-subject">[PATCH v3 23/25] KVM: TDX: Use guard() to acquire kvm->lock in tdx_vm_ioctl()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-10-16]</span> <span class="email-subject">[PATCH v3 24/25] KVM: TDX: Guard VM state transitions with "all" the locks</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-10-16]</span> <span class="email-subject">[PATCH v3 25/25] KVM: TDX: Fix list_add corruption during vcpu_load()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-20]</span> <span class="email-subject">Re: [PATCH v3 25/25] KVM: TDX: Fix list_add corruption during
 vcpu_load()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Yan Zhao <span class="email-sender">&lt;yan.y.zhao@intel.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-21]</span> <span class="email-subject">Re: [PATCH v3 23/25] KVM: TDX: Use guard() to acquire kvm->lock in
 tdx_vm_ioctl()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Edgecombe, Rick P <span class="email-sender">&lt;rick.p.edgecombe@intel.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-21]</span> <span class="email-subject">Re: [PATCH v3 04/25] KVM: x86/mmu: Add dedicated API to map
 guest_memfd pfn into TDP MMU</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Edgecombe, Rick P <span class="email-sender">&lt;rick.p.edgecombe@intel.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-21]</span> <span class="email-subject">Re: [PATCH v3 07/25] KVM: TDX: Drop superfluous page pinning in S-EPT
 management</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Edgecombe, Rick P <span class="email-sender">&lt;rick.p.edgecombe@intel.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-21]</span> <span class="email-subject">Re: [PATCH v3 14/25] KVM: TDX: Bug the VM if extended the initial
 measurement fails</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Edgecombe, Rick P <span class="email-sender">&lt;rick.p.edgecombe@intel.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-21]</span> <span class="email-subject">Re: [PATCH v3 21/25] KVM: TDX: Add tdx_get_cmd() helper to get and
 validate sub-ioctl command</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Edgecombe, Rick P <span class="email-sender">&lt;rick.p.edgecombe@intel.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-21]</span> <span class="email-subject">Re: [PATCH v3 04/25] KVM: x86/mmu: Add dedicated API to map
 guest_memfd pfn into TDP MMU</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Yan Zhao <span class="email-sender">&lt;yan.y.zhao@intel.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-21]</span> <span class="email-subject">Re: [PATCH v3 04/25] KVM: x86/mmu: Add dedicated API to map
 guest_memfd pfn into TDP MMU</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-21]</span> <span class="email-subject">Re: [PATCH v3 23/25] KVM: TDX: Use guard() to acquire kvm->lock in tdx_vm_ioctl()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-21]</span> <span class="email-subject">Re: [PATCH v3 23/25] KVM: TDX: Use guard() to acquire kvm->lock in
 tdx_vm_ioctl()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Edgecombe, Rick P <span class="email-sender">&lt;rick.p.edgecombe@intel.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-22]</span> <span class="email-subject">Re: [PATCH v3 03/25] KVM: TDX: Drop PROVE_MMU=y sanity check on
 to-be-populated mappings</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Binbin Wu <span class="email-sender">&lt;binbin.wu@linux.intel.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-22]</span> <span class="email-subject">Re: [PATCH v3 04/25] KVM: x86/mmu: Add dedicated API to map
 guest_memfd pfn into TDP MMU</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Yan Zhao <span class="email-sender">&lt;yan.y.zhao@intel.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-22]</span> <span class="email-subject">Re: [PATCH v3 05/25] Revert "KVM: x86/tdp_mmu: Add a helper function
 to walk down the TDP MMU"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Binbin Wu <span class="email-sender">&lt;binbin.wu@linux.intel.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-22]</span> <span class="email-subject">Re: [PATCH v3 06/25] KVM: x86/mmu: Rename kvm_tdp_map_page() to
 kvm_tdp_page_prefault()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Binbin Wu <span class="email-sender">&lt;binbin.wu@linux.intel.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-22]</span> <span class="email-subject">Re: [PATCH v3 04/25] KVM: x86/mmu: Add dedicated API to map
 guest_memfd pfn into TDP MMU</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Yan Zhao <span class="email-sender">&lt;yan.y.zhao@intel.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-22]</span> <span class="email-subject">Re: [PATCH v3 10/25] KVM: x86/mmu: Drop the return code from
 kvm_x86_ops.remove_external_spte()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Yan Zhao <span class="email-sender">&lt;yan.y.zhao@intel.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-22]</span> <span class="email-subject">Re: [PATCH v3 04/25] KVM: x86/mmu: Add dedicated API to map
 guest_memfd pfn into TDP MMU</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-22]</span> <span class="email-subject">Re: [PATCH v3 10/25] KVM: x86/mmu: Drop the return code from kvm_x86_ops.remove_external_spte()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-23]</span> <span class="email-subject">Re: [PATCH v3 04/25] KVM: x86/mmu: Add dedicated API to map
 guest_memfd pfn into TDP MMU</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Yan Zhao <span class="email-sender">&lt;yan.y.zhao@intel.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-23]</span> <span class="email-subject">Re: [PATCH v3 19/25] KVM: TDX: Assert that mmu_lock is held for
 write when removing S-EPT entries</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Yan Zhao <span class="email-sender">&lt;yan.y.zhao@intel.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-23]</span> <span class="email-subject">Re: [PATCH v3 04/25] KVM: x86/mmu: Add dedicated API to map
 guest_memfd pfn into TDP MMU</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Huang, Kai <span class="email-sender">&lt;kai.huang@intel.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-23]</span> <span class="email-subject">Re: [PATCH v3 05/25] Revert "KVM: x86/tdp_mmu: Add a helper function
 to walk down the TDP MMU"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Huang, Kai <span class="email-sender">&lt;kai.huang@intel.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-23]</span> <span class="email-subject">Re: [PATCH v3 06/25] KVM: x86/mmu: Rename kvm_tdp_map_page() to
 kvm_tdp_page_prefault()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Huang, Kai <span class="email-sender">&lt;kai.huang@intel.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-23]</span> <span class="email-subject">Re: [PATCH v3 09/25] KVM: TDX: Fold tdx_sept_drop_private_spte() into
 tdx_sept_remove_private_spte()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Huang, Kai <span class="email-sender">&lt;kai.huang@intel.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-23]</span> <span class="email-subject">Re: [PATCH v3 09/25] KVM: TDX: Fold tdx_sept_drop_private_spte() into tdx_sept_remove_private_spte()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-23]</span> <span class="email-subject">Re: [PATCH v3 19/25] KVM: TDX: Assert that mmu_lock is held for write
 when removing S-EPT entries</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-23]</span> <span class="email-subject">Re: [PATCH v3 14/25] KVM: TDX: Bug the VM if extended the initial
 measurement fails</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-23]</span> <span class="email-subject">Re: [PATCH v3 09/25] KVM: TDX: Fold tdx_sept_drop_private_spte() into
 tdx_sept_remove_private_spte()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Huang, Kai <span class="email-sender">&lt;kai.huang@intel.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-23]</span> <span class="email-subject">Re: [PATCH v3 11/25] KVM: TDX: Avoid a double-KVM_BUG_ON() in
 tdx_sept_zap_private_spte()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Huang, Kai <span class="email-sender">&lt;kai.huang@intel.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-23]</span> <span class="email-subject">Re: [PATCH v3 13/25] KVM: TDX: Fold tdx_mem_page_record_premap_cnt()
 into its sole caller</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Huang, Kai <span class="email-sender">&lt;kai.huang@intel.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-23]</span> <span class="email-subject">Re: [PATCH v3 14/25] KVM: TDX: Bug the VM if extended the initial
 measurement fails</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Huang, Kai <span class="email-sender">&lt;kai.huang@intel.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-24]</span> <span class="email-subject">Re: [PATCH v3 15/25] KVM: TDX: ADD pages to the TD image while
 populating mirror EPT entries</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Huang, Kai <span class="email-sender">&lt;kai.huang@intel.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-24]</span> <span class="email-subject">Re: [PATCH v3 13/25] KVM: TDX: Fold tdx_mem_page_record_premap_cnt()
 into its sole caller</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Huang, Kai <span class="email-sender">&lt;kai.huang@intel.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-24]</span> <span class="email-subject">Re: [PATCH v3 13/25] KVM: TDX: Fold tdx_mem_page_record_premap_cnt()
 into its sole caller</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Binbin Wu <span class="email-sender">&lt;binbin.wu@linux.intel.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-24]</span> <span class="email-subject">Re: [PATCH v3 16/25] KVM: TDX: Fold tdx_sept_zap_private_spte() into
 tdx_sept_remove_private_spte()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Huang, Kai <span class="email-sender">&lt;kai.huang@intel.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-24]</span> <span class="email-subject">Re: [PATCH v3 24/25] KVM: TDX: Guard VM state transitions with "all"
 the locks</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Yan Zhao <span class="email-sender">&lt;yan.y.zhao@intel.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-24]</span> <span class="email-subject">Re: [PATCH v3 19/25] KVM: TDX: Assert that mmu_lock is held for
 write when removing S-EPT entries</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Yan Zhao <span class="email-sender">&lt;yan.y.zhao@intel.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-24]</span> <span class="email-subject">Re: [PATCH v3 20/25] KVM: TDX: Add macro to retry SEAMCALLs when
 forcing vCPUs out of guest</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Huang, Kai <span class="email-sender">&lt;kai.huang@intel.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-24]</span> <span class="email-subject">Re: [PATCH v3 21/25] KVM: TDX: Add tdx_get_cmd() helper to get and
 validate sub-ioctl command</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Huang, Kai <span class="email-sender">&lt;kai.huang@intel.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-24]</span> <span class="email-subject">Re: [PATCH v3 22/25] KVM: TDX: Convert INIT_MEM_REGION and INIT_VCPU
 to "unlocked" vCPU ioctl</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Huang, Kai <span class="email-sender">&lt;kai.huang@intel.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-24]</span> <span class="email-subject">Re: [PATCH v3 23/25] KVM: TDX: Use guard() to acquire kvm->lock in
 tdx_vm_ioctl()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Huang, Kai <span class="email-sender">&lt;kai.huang@intel.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-24]</span> <span class="email-subject">Re: [PATCH v3 24/25] KVM: TDX: Guard VM state transitions with "all"
 the locks</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Huang, Kai <span class="email-sender">&lt;kai.huang@intel.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-24]</span> <span class="email-subject">Re: [PATCH v3 13/25] KVM: TDX: Fold tdx_mem_page_record_premap_cnt()
 into its sole caller</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-24]</span> <span class="email-subject">Re: [PATCH v3 14/25] KVM: TDX: Bug the VM if extended the initial
 measurement fails</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-24]</span> <span class="email-subject">Re: [PATCH v3 24/25] KVM: TDX: Guard VM state transitions with "all"
 the locks</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v6 0/7] Add support for FEAT_{LS64, LS64_V} and related tests</h3>
                </div>

                <div class="thread-meta">
                    <span>16 messages</span>
                    <span>3 participants</span>
                    <span>Started: 2025-10-24</span>
                </div>

                <div class="ai-summary">
                    本邮件线程讨论的主题是为 Armv8.7 架构添加对 FEAT_{LS64, LS64_V} 特性的支持及相关测试。该补丁集包含 7 个补丁，主要目的是实现对 64 字节原子加载和存储指令的支持，并在用户空间中暴露这些特性。<br><br>在历史讨论中，补丁的背景是 Armv8.7 引入了新的指令集特性，允许在虚拟机中进行更高效的内存操作。之前的讨论集中在如何处理不支持的内存访问和指令的异常情况。<br><br>本周的新讨论中，参与者 Zhou Wang 详细介绍了补丁的具体实现，包括：<br>1. 在 CPU 特性列表中添加对 FEAT_{LS64, LS64_V} 的识别和启用。<br>2. 通过 HWCAP3 和 cpuinfo 向用户空间暴露这些特性。<br>3. 添加相关的硬件能力测试。<br>4. 处理虚拟机中对不支持的内存访问的异常情况。<br><br>此外，Zhou Wang 还提到将继续推进该补丁集的上游合并工作，并对补丁进行了多次修改以解决之前的反馈意见。整体来看，本周的讨论主要集中在补丁的细节完善和测试验证上，参与者对补丁的合理性表示认可，但也提出了一些技术细节的改进建议。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-24]</span> <span class="email-subject">[PATCH v6 0/7] Add support for FEAT_{LS64, LS64_V} and related tests</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Zhou Wang <span class="email-sender">&lt;wangzhou1@hisilicon.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-24]</span> <span class="email-subject">[PATCH v6 1/7] KVM: arm64: Add exit to userspace on {LD,ST}64B* outside of memslots</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Zhou Wang <span class="email-sender">&lt;wangzhou1@hisilicon.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-24]</span> <span class="email-subject">[PATCH v6 2/7] KVM: arm64: Add documentation for KVM_EXIT_ARM_LDST64B</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Zhou Wang <span class="email-sender">&lt;wangzhou1@hisilicon.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-24]</span> <span class="email-subject">[PATCH v6 3/7] KVM: arm64: Handle DABT caused by LS64* instructions on unsupported memory</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Zhou Wang <span class="email-sender">&lt;wangzhou1@hisilicon.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-24]</span> <span class="email-subject">[PATCH v6 4/7] arm64: Provide basic EL2 setup for FEAT_{LS64, LS64_V} usage at EL0/1</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Zhou Wang <span class="email-sender">&lt;wangzhou1@hisilicon.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-24]</span> <span class="email-subject">[PATCH v6 5/7] arm64: Add support for FEAT_{LS64, LS64_V}</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Zhou Wang <span class="email-sender">&lt;wangzhou1@hisilicon.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-24]</span> <span class="email-subject">[PATCH v6 6/7] KVM: arm64: Enable FEAT_{LS64, LS64_V} in the supported guest</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Zhou Wang <span class="email-sender">&lt;wangzhou1@hisilicon.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-24]</span> <span class="email-subject">[PATCH v6 7/7] kselftest/arm64: Add HWCAP test for FEAT_{LS64, LS64_V}</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Zhou Wang <span class="email-sender">&lt;wangzhou1@hisilicon.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-24]</span> <span class="email-subject">Re: [PATCH v6 7/7] kselftest/arm64: Add HWCAP test for FEAT_{LS64, LS64_V}</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Arnd Bergmann <span class="email-sender">&lt;arnd@arndb.de&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-24]</span> <span class="email-subject">Re: [PATCH v6 0/7] Add support for FEAT_{LS64, LS64_V} and related tests</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Arnd Bergmann <span class="email-sender">&lt;arnd@arndb.de&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-24]</span> <span class="email-subject">Re: [PATCH v6 3/7] KVM: arm64: Handle DABT caused by LS64*
 instructions on unsupported memory</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-25]</span> <span class="email-subject">Re: [PATCH v6 0/7] Add support for FEAT_{LS64, LS64_V} and related
 tests</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Zhou Wang <span class="email-sender">&lt;wangzhou1@hisilicon.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-25]</span> <span class="email-subject">Re: [PATCH v6 7/7] kselftest/arm64: Add HWCAP test for FEAT_{LS64,
 LS64_V}</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Zhou Wang <span class="email-sender">&lt;wangzhou1@hisilicon.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-25]</span> <span class="email-subject">Re: [PATCH v6 3/7] KVM: arm64: Handle DABT caused by LS64*
 instructions on unsupported memory</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Zhou Wang <span class="email-sender">&lt;wangzhou1@hisilicon.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-26]</span> <span class="email-subject">Re: [PATCH v6 7/7] kselftest/arm64: Add HWCAP test for FEAT_{LS64, LS64_V}</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Arnd Bergmann <span class="email-sender">&lt;arnd@arndb.de&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-26]</span> <span class="email-subject">Re: [PATCH v6 0/7] Add support for FEAT_{LS64, LS64_V} and related tests</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Arnd Bergmann <span class="email-sender">&lt;arnd@arndb.de&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v2 1/4] arm64/sysreg: Fix checks for incomplete sysreg
 definitions</h3>
                </div>

                <div class="thread-meta">
                    <span>8 messages</span>
                    <span>4 participants</span>
                    <span>Started: 2025-10-09</span>
                </div>

                <div class="ai-summary">
                    本邮件线程讨论了与 ARM64 系统寄存器相关的多个补丁，特别是修复不完整 sysreg 定义的检查。<br><br>1. **原始补丁内容**：Sascha Bischoff 提出的补丁 [PATCH v2 1/4] 旨在修复对不完整 sysreg 定义的检查，之前的检查条件为 `next_bit > 0`，这在某些情况下会导致错误。补丁将检查条件改为 `next_bit >= 0`，并将 Mapping 中的 `next_bit` 设置为 -1，以匹配新的检查逻辑。<br><br>2. **之前讨论要点**：在历史讨论中，Sascha 还介绍了其他补丁，涉及到引入前缀描述符和对 ICH_VMCR_EL2 的支持。这些补丁旨在改进 sysreg 描述框架，支持条件字段编码，并解决不完整寄存器定义的跟踪问题。<br><br>3. **本周新讨论进展**：本周，Mark Brown 对补丁进行了审核，表示该解决方案合理且实现良好，并建议将某些重构内容单独作为补丁提交。此外，Sean Christopherson 对另一个补丁提出了疑问，询问在自测中使用错误的 `map_size` 时是否会导致 `munmap()` 静默失败，表明该补丁可能需要进一步审查。<br><br>总体来看，本周的讨论主要集中在对补丁的审核和潜在问题的探讨上，显示出对 ARM64 系统寄存器改进的持续关注。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-10-09]</span> <span class="email-subject">[PATCH v2 1/4] arm64/sysreg: Fix checks for incomplete sysreg
 definitions</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sascha Bischoff <span class="email-sender">&lt;Sascha.Bischoff@arm.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-10-09]</span> <span class="email-subject">[PATCH v2 0/4] arm64/sysreg: Introduce Prefix descriptor and
 generated ICH_VMCR_EL2 support</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sascha Bischoff <span class="email-sender">&lt;Sascha.Bischoff@arm.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-10-09]</span> <span class="email-subject">[PATCH v2 2/4] arm64/sysreg: Support feature-specific fields with
 'Prefix' descriptor</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sascha Bischoff <span class="email-sender">&lt;Sascha.Bischoff@arm.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-10-13]</span> <span class="email-subject">[PATCH v2 0/4] KVM ARM64 pre_fault_memory</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Jack Thomson <span class="email-sender">&lt;jackabt.amazon@gmail.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-10-13]</span> <span class="email-subject">[PATCH v2 2/4] KVM: selftests: Fix unaligned mmap allocations</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Jack Thomson <span class="email-sender">&lt;jackabt.amazon@gmail.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-21]</span> <span class="email-subject">Re: [PATCH v2 1/4] arm64/sysreg: Fix checks for incomplete sysreg
 definitions</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-21]</span> <span class="email-subject">Re: [PATCH v2 2/4] arm64/sysreg: Support feature-specific fields
 with 'Prefix' descriptor</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-23]</span> <span class="email-subject">Re: [PATCH v2 2/4] KVM: selftests: Fix unaligned mmap allocations</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH] KVM: arm64: gic-v3: Only set ICH_HCR traps for v2-on-v3 or v3
 guests</h3>
                </div>

                <div class="thread-meta">
                    <span>8 messages</span>
                    <span>4 participants</span>
                    <span>Started: 2025-10-07</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主题是关于 KVM（Kernel-based Virtual Machine）在 arm64 架构中对 GICv3（通用中断控制器版本3）处理的补丁。补丁的主要内容是仅在运行 GICv2-on-GICv3 或 GICv3 客户机时设置 ICH_HCR（中断控制器硬件控制寄存器）陷阱，而不适用于 GICv2 本地客户机。<br><br>在历史讨论中，Sascha Bischoff 提出了该补丁，指出在 GICv3 硬件上运行 GICv2 客户机时，陷阱的设置是为了确保客户机看不到 GICv3 的任何部分，而在 GICv3 客户机中则用于特定场景的陷阱处理。<br><br>本周的新讨论中，Mark Brown 提到在 v6.18-rc2 版本中引入的补丁导致了 KVM 的 no-vgic-v3 自测失败，影响了所有使用 GICv3 的 arm64 平台。讨论中还提到，建议将 KVM 的修复分支直接包含在 -next 中，以便更快地捕获和解决问题。Marc Zyngier 和 Mark Brown 之间的交流显示出对如何管理修复分支的不同看法，Marc 强调了保持分支独立的必要性，而 Mark 则认为将修复分支纳入 -next 可以减少测试工作负担并提高效率。<br><br>总体来看，本周的讨论集中在补丁引入的问题及其对测试流程的影响，以及如何更有效地管理 KVM 的修复分支。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-10-07]</span> <span class="email-subject">[PATCH] KVM: arm64: gic-v3: Only set ICH_HCR traps for v2-on-v3 or v3
 guests</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sascha Bischoff <span class="email-sender">&lt;Sascha.Bischoff@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-21]</span> <span class="email-subject">Re: [PATCH] KVM: arm64: gic-v3: Only set ICH_HCR traps for v2-on-v3
 or v3 guests</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-20]</span> <span class="email-subject">Re: [PATCH] KVM: arm64: gic-v3: Only set ICH_HCR traps for v2-on-v3
 or v3 guests</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-21]</span> <span class="email-subject">Re: [PATCH] KVM: arm64: gic-v3: Only set ICH_HCR traps for v2-on-v3 or v3 guests</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-21]</span> <span class="email-subject">Re: [PATCH] KVM: arm64: gic-v3: Only set ICH_HCR traps for v2-on-v3
 or v3 guests</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-21]</span> <span class="email-subject">Re: [PATCH] KVM: arm64: gic-v3: Only set ICH_HCR traps for v2-on-v3
 or v3 guests</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-21]</span> <span class="email-subject">Re: [PATCH] KVM: arm64: gic-v3: Only set ICH_HCR traps for v2-on-v3 or v3 guests</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-21]</span> <span class="email-subject">Re: [PATCH] KVM: arm64: gic-v3: Only set ICH_HCR traps for v2-on-v3
 or v3 guests</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH 0/3] KVM: arm64: Fix handling of ID_PFR1_EL1.GIC</h3>
                </div>

                <div class="thread-meta">
                    <span>7 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-10-13</span>
                </div>

                <div class="ai-summary">
                    本邮件线程讨论了针对 KVM（Kernel-based Virtual Machine）在 arm64 架构下处理 ID_PFR1_EL1.GIC 的一系列补丁。历史讨论中，Marc Zyngier 提出了三个补丁，旨在解决 GICv2 虚拟机恢复失败的问题，具体内容包括：<br><br>1. **补丁内容**：<br>   - **补丁 1**：使 ID_PFR1_EL1.GIC 可写，以便与 ID_AA64PFR0_EL1.GIC 保持一致。<br>   - **补丁 2**：在配置 GICv3 时直接设置 ID_{AA64PFR0,PFR1}_EL1.GIC 的值，避免运行时清除。<br>   - **补丁 3**：将 ID_{AA64PFR0,PFR1}_EL1.GIC 的清除限制在用户空间 irqchip 的情况。<br><br>2. **之前讨论要点**：Marc 指出在 6.12 版本中引入的更改导致 ID_PFR1_EL1.GIC 变得不可写，影响了虚拟机的正常恢复。补丁的提出旨在修复这些问题，并提高系统的稳定性。<br><br>3. **本周新讨论**：Oliver Upton 对补丁提出了一些建议，认为可以允许用户空间随意写入 32 位 ID 寄存器的值，并建议使用 kvm_read_vm_id_reg() 和 kvm_set_vm_id_reg() 函数来确保对 ID 寄存器的访问符合锁定机制。此外，他也认可了将访问转换为使用访问器的做法。<br><br>总体来看，本周的讨论集中在补丁的实现细节和潜在改进上，参与者们对补丁的方向表示支持，但也提出了进一步的优化建议。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-10-13]</span> <span class="email-subject">[PATCH 0/3] KVM: arm64: Fix handling of ID_PFR1_EL1.GIC</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-10-13]</span> <span class="email-subject">[PATCH 1/3] KVM: arm64: Make ID_PFR1_EL1.GIC writable</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-10-13]</span> <span class="email-subject">[PATCH 2/3] KVM: arm64: Set ID_{AA64PFR0,PFR1}_EL1.GIC when GICv3 is configured</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-10-13]</span> <span class="email-subject">[PATCH 3/3] KVM: arm64: Limit clearing of ID_{AA64PFR0,PFR1}_EL1.GIC to userspace irqchip</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-22]</span> <span class="email-subject">Re: [PATCH 1/3] KVM: arm64: Make ID_PFR1_EL1.GIC writable</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-22]</span> <span class="email-subject">Re: [PATCH 2/3] KVM: arm64: Set ID_{AA64PFR0,PFR1}_EL1.GIC when
 GICv3 is configured</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-22]</span> <span class="email-subject">Re: [PATCH 3/3] KVM: arm64: Limit clearing of
 ID_{AA64PFR0,PFR1}_EL1.GIC to userspace irqchip</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v3 0/5] arm64/sysreg: Introduce Prefix descriptor and
 generated ICH_VMCR_EL2 support</h3>
                </div>

                <div class="thread-meta">
                    <span>6 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-10-22</span>
                </div>

                <div class="ai-summary">
                    本邮件线程讨论了一个针对 ARM64 架构的系统寄存器（sysreg）框架的补丁系列，主要目的是引入前缀描述符（Prefix descriptor）和生成 ICH_VMCR_EL2 寄存器的支持。<br><br>**原始补丁/问题内容**：<br>补丁系列的核心是引入支持条件字段编码的机制，并将 vGIC-v3 代码迁移到使用生成的 ICH_VMCR_EL2 定义。这些补丁解决了不完整系统寄存器定义的跟踪问题，并为描述具有多个字段编码的寄存器建立了基础设施。<br><br>**之前讨论要点**：<br>在之前的讨论中，补丁经历了多个版本的修改，主要集中在重构生成器以使用前缀而非特性（Feat），并确保在 sysreg 定义中前缀字段的顺序正确。<br><br>**本周的新讨论、进展或结论**：<br>本周的讨论集中在补丁的最终版本上，Sascha Bischoff 提出了五个补丁：<br>1. 修复对不完整 sysreg 定义的检查。<br>2. 支持特性特定字段的前缀描述符。<br>3. 将 RES0/RES1/UNKN 的生成逻辑移至函数中以减少代码重复。<br>4. 添加 ICH_VMCR_EL2 寄存器的定义，支持 GICv5 KVM。<br>5. 将 vGIC-v3 代码切换为使用生成的 ICH_VMCR_EL2 定义，确保没有功能性变化。<br><br>这些补丁的合并将提升 ARM64 sysreg 框架的灵活性和可维护性，为未来的 GICv5 支持奠定基础。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-22]</span> <span class="email-subject">[PATCH v3 0/5] arm64/sysreg: Introduce Prefix descriptor and
 generated ICH_VMCR_EL2 support</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sascha Bischoff <span class="email-sender">&lt;Sascha.Bischoff@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-22]</span> <span class="email-subject">[PATCH v3 2/5] arm64/sysreg: Support feature-specific fields with
 'Prefix' descriptor</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sascha Bischoff <span class="email-sender">&lt;Sascha.Bischoff@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-22]</span> <span class="email-subject">[PATCH v3 1/5] arm64/sysreg: Fix checks for incomplete sysreg
 definitions</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sascha Bischoff <span class="email-sender">&lt;Sascha.Bischoff@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-22]</span> <span class="email-subject">[PATCH v3 3/5] arm64/sysreg: Move generation of RES0/RES1/UNKN to
 function</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sascha Bischoff <span class="email-sender">&lt;Sascha.Bischoff@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-22]</span> <span class="email-subject">[PATCH v3 4/5] arm64/sysreg: Add ICH_VMCR_EL2</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sascha Bischoff <span class="email-sender">&lt;Sascha.Bischoff@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-22]</span> <span class="email-subject">[PATCH v3 5/5] KVM: arm64: gic-v3: Switch vGIC-v3 to use generated
 ICH_VMCR_EL2</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sascha Bischoff <span class="email-sender">&lt;Sascha.Bischoff@arm.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH V2 0/2] arm64/mm: Add remaining TLBI_XXX_MASK macros</h3>
                </div>

                <div class="thread-meta">
                    <span>5 messages</span>
                    <span>3 participants</span>
                    <span>Started: 2025-10-24</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主题是关于 ARM64 架构下内存管理的补丁，主要涉及添加剩余的 TLBI_XXX_MASK 宏。原始补丁由 Anshuman Khandual 提交，分为两个部分：第一部分是去除 __tlbi_level() 函数中的冗余 'level' 修剪操作，第二部分是添加剩余的 TLBI_XXX_MASK 宏，并对现有的编码字段进行替换。<br><br>在之前的讨论中，补丁的 V1 版本已经引起了一些关注，但没有详细的讨论记录。本周的讨论集中在补丁 V2 上，Anshuman 提供了对 V1 的更新，包括对 KVM 的相关更改，以适应 TLBI_TTL_MASK 的拆分，并更新了提交信息。<br><br>本周的进展包括 Ben Horgan 对补丁的认可，表示代码看起来正确，但他对 TTL 拆分成 TG 和 TTL 的合理性表示不确定。Jonathan Cameron 则建议在代码中使用 FIELD_MODIFY 函数来简化某些操作，尽管他对这种修改持开放态度。整体来看，补丁得到了初步的认可，但仍需进一步的讨论和验证。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-24]</span> <span class="email-subject">[PATCH V2 0/2] arm64/mm: Add remaining TLBI_XXX_MASK macros</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Anshuman Khandual <span class="email-sender">&lt;anshuman.khandual@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-24]</span> <span class="email-subject">[PATCH V2 1/2] arm64/mm: Drop redundant 'level' range trimming in __tlbi_level()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Anshuman Khandual <span class="email-sender">&lt;anshuman.khandual@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-24]</span> <span class="email-subject">[PATCH V2 2/2] arm64/mm: Add remaining TLBI_XXX_MASK macros</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Anshuman Khandual <span class="email-sender">&lt;anshuman.khandual@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-24]</span> <span class="email-subject">Re: [PATCH V2 2/2] arm64/mm: Add remaining TLBI_XXX_MASK macros</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Ben Horgan <span class="email-sender">&lt;ben.horgan@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-24]</span> <span class="email-subject">Re: [PATCH V2 2/2] arm64/mm: Add remaining TLBI_XXX_MASK macros</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Jonathan Cameron <span class="email-sender">&lt;jonathan.cameron@huawei.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v4 0/3] VMM can handle guest SEA via KVM_EXIT_ARM_SEA</h3>
                </div>

                <div class="thread-meta">
                    <span>5 messages</span>
                    <span>3 participants</span>
                    <span>Started: 2025-10-13</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主题是关于通过 KVM_EXIT_ARM_SEA 处理虚拟机监控器（VMM）中的来宾同步外部中止（SEA）的补丁（PATCH v4 0/3）。补丁的主要问题在于，当主机的 APEI 无法处理来宾的同步外部中止时，KVM 会直接向虚拟CPU 注入异步 SError，导致来宾内核崩溃。补丁旨在改善这一情况，特别是在现代数据中心服务器中，来宾 VCPU 处理可恢复的未更正内存错误时。<br><br>在之前的讨论中，Jiaqi Yan 提出了补丁的背景和必要性，并详细描述了新用户空间可见的功能和 API，包括如何启用新特性和处理 SEA 时用户空间的退出信息。Randy Dunlap 对文档提出了一些格式上的建议。<br><br>在本周的新讨论中，Jason Gunthorpe 表达了对补丁内容的理解和支持，认为其解释合理，并表示有相关的使用案例。Jiaqi Yan 则回应了 Randy Dunlap 的反馈，表示已对补丁进行了修正，并在等待其他提交的审查。<br><br>总体来看，讨论围绕如何优化 KVM 对来宾 SEA 的处理展开，补丁得到了参与者的认可，且修正工作正在进行中。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-10-13]</span> <span class="email-subject">[PATCH v4 0/3] VMM can handle guest SEA via KVM_EXIT_ARM_SEA</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Jiaqi Yan <span class="email-sender">&lt;jiaqiyan@google.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-10-13]</span> <span class="email-subject">[PATCH v4 3/3] Documentation: kvm: new UAPI for handling SEA</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Jiaqi Yan <span class="email-sender">&lt;jiaqiyan@google.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-10-13]</span> <span class="email-subject">Re: [PATCH v4 3/3] Documentation: kvm: new UAPI for handling SEA</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Randy Dunlap <span class="email-sender">&lt;rdunlap@infradead.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-20]</span> <span class="email-subject">Re: [PATCH v4 0/3] VMM can handle guest SEA via KVM_EXIT_ARM_SEA</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Jason Gunthorpe <span class="email-sender">&lt;jgg@nvidia.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-21]</span> <span class="email-subject">Re: [PATCH v4 3/3] Documentation: kvm: new UAPI for handling SEA</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Jiaqi Yan <span class="email-sender">&lt;jiaqiyan@google.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH] KVM: selftests: fix ITS collection target addresses in vgic_lpi_stress</h3>
                </div>

                <div class="thread-meta">
                    <span>5 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-10-17</span>
                </div>

                <div class="ai-summary">
                    在本次邮件讨论中，主题为「[PATCH] KVM: selftests: fix ITS collection target addresses in vgic_lpi_stress」的补丁旨在修复在 KVM 自测试中，vgic_lpi_stress 处理 ITS 集合目标地址时的错误。历史讨论中，Maximilian Dittgen 指出，当前实现将 vCPU ID 作为目标地址传递给 its_send_mapc_cmd()，而其_encode_target() 函数实际上需要的是 vCPU 的重分配器地址，这导致了错误的地址映射。<br><br>在本周的新讨论中，Maximilian Dittgen 进一步阐述了问题的根源，指出当前的 selftest 使用线性 vCPU ID 作为重分配器地址（GITS_TYPER.PTA = 0），而其_encode_target() 函数会将 CPU 编号右移 16 位，最终导致所有集合都映射到目标 vCPU 0。为了解决这个问题，他提出了几种方案，包括对 selftest 进行对齐或重构其_encode_target() 函数。<br><br>Marc Zyngier 对补丁的提交信息表示异议，认为描述不够准确，但认可补丁的修复方向，并建议将其封装为一个辅助函数。Maximilian 随后表示，他已创建了一个修订版的补丁（PATCH v2），并正在进行一个关于每个 vCPU 的 vLPI 启用的 RFC 补丁集，以扩展此自测试功能。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-10-17]</span> <span class="email-subject">[PATCH] KVM: selftests: fix ITS collection target addresses in vgic_lpi_stress</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Maximilian Dittgen <span class="email-sender">&lt;mdittgen@amazon.de&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-10-17]</span> <span class="email-subject">Re: [PATCH] KVM: selftests: fix ITS collection target addresses in vgic_lpi_stress</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-20]</span> <span class="email-subject">Re: [PATCH] KVM: selftests: fix ITS collection target addresses in vgic_lpi_stress</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Maximilian Dittgen <span class="email-sender">&lt;mdittgen@amazon.de&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-20]</span> <span class="email-subject">Re: [PATCH] KVM: selftests: fix ITS collection target addresses in vgic_lpi_stress</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-20]</span> <span class="email-subject">Re: [PATCH] KVM: selftests: fix ITS collection target addresses in vgic_lpi_stress</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Maximilian Dittgen <span class="email-sender">&lt;mdittgen@amazon.de&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v2] KVM: arm64: nv: Optimize unmapping of shadow S2-MMU tables</h3>
                </div>

                <div class="thread-meta">
                    <span>3 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-10-12</span>
                </div>

                <div class="ai-summary">
                    在本次邮件讨论中，主题为“[PATCH v2] KVM: arm64: nv: 优化影子 S2-MMU 表的反向映射”。历史讨论中，Ganapatrao Kulkarni 提出了一个补丁，旨在优化在反向映射时对影子 S2-MMU 表的处理，指出当前的实现由于缺乏直接映射，导致需要遍历整个 L1 地址空间，造成性能低下，尤其是在处理大页面时。<br><br>在本周的新讨论中，Ganapatrao Kulkarni 询问了对该补丁的审查意见，但 Marc Zyngier 对补丁表示了强烈的质疑。他指出该补丁缺乏处理多个映射到同一 IPA 的基本要求，可能导致反向映射失败，并且没有提供相关文档和测试，这使得他对该补丁的认真程度表示怀疑。<br><br>总结来看，尽管补丁旨在优化性能，但由于缺乏必要的功能和文档支持，当前讨论并未达成积极的进展。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-10-12]</span> <span class="email-subject">[PATCH v2] KVM: arm64: nv: Optimize unmapping of shadow S2-MMU tables</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Ganapatrao Kulkarni <span class="email-sender">&lt;gankulkarni@os.amperecomputing.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-23]</span> <span class="email-subject">Re: [PATCH v2] KVM: arm64: nv: Optimize unmapping of shadow S2-MMU
 tables</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Ganapatrao Kulkarni <span class="email-sender">&lt;gankulkarni@os.amperecomputing.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-23]</span> <span class="email-subject">Re: [PATCH v2] KVM: arm64: nv: Optimize unmapping of shadow S2-MMU tables</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v13 00/12] KVM: guest_memfd: Add NUMA mempolicy support</h3>
                </div>

                <div class="thread-meta">
                    <span>3 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-10-16</span>
                </div>

                <div class="ai-summary">
                    本邮件线程讨论的主题是关于 KVM（Kernel-based Virtual Machine）中 guest_memfd 的 NUMA（非统一内存访问）内存策略支持的补丁（PATCH v13 00/12）。<br><br>1. **原始补丁内容**：该补丁系列旨在为 guest_memfd 添加对 NUMA 感知内存放置的支持，主要由 Shivank 提出，并基于 kvm-x86/next 分支。补丁中包括了对结构体命名、宏定义、内存分配等方面的修改。<br><br>2. **之前讨论要点**：在历史讨论中，Sean Christopherson 提到需要对 cpuset_do_page_mem_spread() 的行为进行测试，尽管他认为可以在没有这些测试的情况下合并补丁。此外，补丁的 v13 版本收集了评论，并进行了小幅修正。<br><br>3. **本周新讨论与进展**：在本周的讨论中，Sean Christopherson 表示已将补丁应用于 kvm-x86 gmem，但未包含 .clang-format 的更改。同时，Shivank 对于 v12 到 v13 版本的所有更改表示感谢，并感谢所有提供支持和建议的参与者。补丁系列的具体提交链接也被列出，显示出各个补丁的具体改动。<br><br>总体来看，本周的讨论主要集中在补丁的应用和感谢参与者的支持上，表明该补丁系列正在向前推进。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-10-16]</span> <span class="email-subject">[PATCH v13 00/12] KVM: guest_memfd: Add NUMA mempolicy support</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-20]</span> <span class="email-subject">Re: [PATCH v13 00/12] KVM: guest_memfd: Add NUMA mempolicy support</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-21]</span> <span class="email-subject">Re: [PATCH v13 00/12] KVM: guest_memfd: Add NUMA mempolicy support</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Garg, Shivank <span class="email-sender">&lt;shivankg@amd.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH] KVM: arm64: Check the untrusted offset in FF-A memory share</h3>
                </div>

                <div class="thread-meta">
                    <span>2 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-10-17</span>
                </div>

                <div class="ai-summary">
                    本邮件线程讨论了一个针对 KVM（Kernel-based Virtual Machine）在 arm64 架构下的补丁，主要关注于在 FF-A（Firmware Framework for Arm）内存共享中检查不可信偏移量的问题。<br><br>**原始补丁内容**：由 Sebastian Ene 提出的补丁旨在验证偏移量，以防止在 hypervisor 中发生越界访问（OOB）。补丁中指出，当主机内核设置了一个不可信的较大值时，可能导致访问 FF-A 缓冲区的越界问题。补丁通过在代码中增加检查逻辑来解决这一潜在的安全隐患。<br><br>**之前的讨论要点**：在历史讨论中，补丁的必要性得到了认可，参与者一致认为，确保偏移量的有效性是保护系统稳定性和安全性的关键。补丁的具体实现细节也得到了初步讨论。<br><br>**本周的新讨论**：Vincent Donnefort 在本周的回复中提到，虽然不可信的偏移量可能导致系统崩溃，但不太可能被利用来进行更严重的安全攻击。他建议将检查逻辑与 `nr_ranges` 结合，以便更容易理解和处理。具体来说，他提出了在代码中调整检查顺序的建议，以增强代码的可读性和安全性。<br><br>总体来看，本周的讨论进一步深化了对补丁的理解，并提出了改进建议，显示出参与者对系统安全性的持续关注。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-10-17]</span> <span class="email-subject">[PATCH] KVM: arm64: Check the untrusted offset in FF-A memory share</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sebastian Ene <span class="email-sender">&lt;sebastianene@google.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-22]</span> <span class="email-subject">Re: [PATCH] KVM: arm64: Check the untrusted offset in FF-A memory
 share</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Vincent Donnefort <span class="email-sender">&lt;vdonnefort@google.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH] KVM: arm64: vgic-v3: Trap all if no in-kernel irqchip</h3>
                </div>

                <div class="thread-meta">
                    <span>2 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-10-21</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主题是关于 KVM（Kernel-based Virtual Machine）在 arm64 架构下的 vgic-v3（虚拟通用中断控制器）相关的一个补丁。该补丁的目的是在没有内核中断控制器的情况下，设置所有的陷阱位，以阻止所有访问，从而修复 no-vgic-v3 自测失败的问题。<br><br>在历史讨论中并没有提供具体的背景信息，但补丁的修复内容是基于之前的提交记录（3193287ddffb），该提交只在特定情况下设置 ICH_HCR 陷阱位。补丁的作者 Sascha Bischoff 指出，当虚拟机没有内核中断控制器时，需要将所有的陷阱位设置为阻止访问，以确保系统的稳定性。<br><br>在本周的新讨论中，Sascha Bischoff 提交了补丁，并且 Mark Brown 对该补丁进行了测试并确认有效。Mark 在邮件中表示已进行测试，表明该补丁在实际应用中得到了验证，进一步推动了补丁的合并进程。整体来看，本周的讨论主要集中在补丁的提交和测试反馈上，未涉及其他新的技术争议或问题。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-21]</span> <span class="email-subject">[PATCH] KVM: arm64: vgic-v3: Trap all if no in-kernel irqchip</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sascha Bischoff <span class="email-sender">&lt;Sascha.Bischoff@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-21]</span> <span class="email-subject">Re: [PATCH] KVM: arm64: vgic-v3: Trap all if no in-kernel irqchip</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH] KVM: arm64: selftests: Filter ZCR_EL2 in get-reg-list</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-10-24</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主题是关于 KVM（Kernel-based Virtual Machine）在 arm64 架构下的自测试（selftests）中，如何处理 ZCR_EL2 寄存器的问题。原始的 patch 提出了在 `get-reg-list` 函数中添加 ZCR_EL2 寄存器，以便在启用 SVE（Scalable Vector Extension）特性时，测试能够正确识别该寄存器的存在。<br><br>在之前的讨论中，提到 `get-reg-list` 函数在 NV（Non-virtualization）模式下包含 ZCR_EL2，但没有为该寄存器设置特性门控（feature gate），这导致在测试不包含 SVE 的 EL2 特性组合时，出现寄存器缺失的错误。为了解决这个问题，patch 建议将 ZCR_EL2 添加到 `feat_id_regs` 中，以便测试能够正确处理寄存器的期望。<br><br>本周的新讨论中，Mark Brown 提交了该 patch，并详细说明了问题的背景和解决方案。具体修改是在 `get-reg-list.c` 文件中增加了一行代码，以确保在没有启用 SVE 的情况下，测试不会错误地期望 ZCR_EL2 寄存器的存在。该 patch 旨在修复之前的测试失败问题，并确保测试的准确性。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-24]</span> <span class="email-subject">[PATCH] KVM: arm64: selftests: Filter ZCR_EL2 in get-reg-list</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH] KVM: arm64: selftests: Add SCTLR2_EL2 to get-reg-list</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-10-23</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主题是关于在 KVM（Kernel-based Virtual Machine）中为 arm64 架构的自测试添加 SCTLR2_EL2 寄存器的补丁。Mark Brown 提出了这一补丁，目的是将最近添加到内核的 SCTLR2_EL2 寄存器纳入到寄存器列表中，以解决在可用时未能报告该寄存器的问题。<br><br>在历史讨论中并未涉及相关内容，因此本周的新讨论是唯一的内容。Mark Brown 在邮件中详细描述了补丁的具体修改，包括在 `get-reg-list.c` 文件中添加了 SCTLR2_EL2 寄存器的定义和引用。补丁的具体实现包括在特征寄存器数组中插入 SCTLR2_EL2，并在 EL2 寄存器数组中添加该寄存器的系统寄存器定义。<br><br>总结来说，本周的讨论集中在补丁的提交上，旨在完善 KVM 的自测试功能，使其能够正确识别和报告 SCTLR2_EL2 寄存器。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-23]</span> <span class="email-subject">[PATCH] KVM: arm64: selftests: Add SCTLR2_EL2 to get-reg-list</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v4 04/23] perf: arm_pmuv3: Introduce method to partition
 the PMU</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-10-22</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主题是关于一个针对 ARM PMU（性能监控单元）的补丁，具体是引入了一种方法来对 PMU 进行分区。该补丁旨在提升性能监控的灵活性和效率。<br><br>在历史讨论中，虽然没有具体的邮件记录，但可以推测该补丁的提出是为了改善现有的 PMU 使用方式，可能涉及到如何更好地管理和分配性能监控资源。<br><br>在本周的新讨论中，参与者 Suzuki K Poulose 对补丁中的一个具体实现提出了疑问。他质疑是否真的需要在代码中使用 `WARN_ON` 来警告用户，因为这种情况可能很容易被用户触发（例如通过 `modprobe` 命令）。他认为，既然系统能够优雅地处理这种情况并初始化为安全设置，那么使用 `pr_warn`（打印警告信息）就足够了。总体来看，Suzuki 对补丁的其他部分表示认可。<br><br>总结而言，本周的讨论集中在补丁的错误处理机制上，提出了对警告级别的合理性进行重新评估的建议。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-22]</span> <span class="email-subject">Re: [PATCH v4 04/23] perf: arm_pmuv3: Introduce method to partition
 the PMU</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Suzuki K Poulose <span class="email-sender">&lt;suzuki.poulose@arm.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v2] KVM: selftests: fix MAPC RDbase target formatting in vgic_lpi_stress</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-10-20</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主题是针对 KVM 自测试中的一个补丁，旨在修复 vgic_lpi_stress 中 MAPC RDbase 目标格式的问题。<br><br>**原始补丁内容**：补丁的主要目的是修复在执行 MAPC 命令时，RDbase 参数的格式不正确。具体来说，当前实现中，vgic_lpi_stress 在处理 ITS MAPC 命令时，错误地将 CPU ID 作为 RDbase 参数传递，而没有进行适当的位移处理，导致所有中断都被错误地分配给 vCPU 0。<br><br>**之前讨论要点**：在历史讨论中，未提及具体的讨论内容，但补丁的背景表明，存在对 RDbase 参数格式的误解，导致多 vCPU 测试无法正常工作。<br><br>**本周新讨论和进展**：本周的讨论由 Maximilian Dittgen 提出，补丁通过引入一个新的辅助函数 `procnum_to_rdbase()` 来解决 RDbase 参数格式问题，该函数将 vCPU ID 左移 16 位后再传递给编码函数。补丁经过测试，调试日志显示，在应用补丁后，所有 MAPC 调用都能正确解析出对应的 vCPU ID，验证了补丁的有效性。补丁已成功提交并包含在自测试代码中。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-20]</span> <span class="email-subject">[PATCH v2] KVM: selftests: fix MAPC RDbase target formatting in vgic_lpi_stress</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Maximilian Dittgen <span class="email-sender">&lt;mdittgen@amazon.de&gt;</span></div>
                </div>
            </div>
        </div>

        <div class="category">
            <h2>RFC</h2>

            <div class="thread">
                <div class="thread-header">
                    <h3>[RFC PATCH 14/16] arm64/insn: always inline aarch64_insn_encode_ldst_size()</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-10-20</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主题是关于一个针对 ARM64 架构的补丁（patch），具体内容为「始终内联 aarch64_insn_encode_ldst_size()」的提议。该补丁旨在优化 ARM64 指令编码的实现方式。<br><br>在历史讨论中，并没有提供具体的背景信息或之前的讨论内容，因此我们无法得知该补丁的详细背景或早期的反馈。<br><br>本周的新讨论由 Marc Zyngier 提出，他对补丁中的某些实现细节进行了评价。他指出，补丁中定义的一个枚举类型 `aarch64_insn_size_type` 及其对应的数组是多余的，因为可以直接使用 `type` 来表示指令大小，这样可以简化代码。虽然这只是一个小的改进，但他认为这种方法确实使得在模块中添加使用 `aarch64_insn_encode_ldst_size()` 的补丁回调变得不可能。<br><br>总体来看，本周的讨论集中在补丁的细节优化上，Marc Zyngier 提出了对代码简化的建议，并指出了潜在的局限性。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-20]</span> <span class="email-subject">Re: [RFC PATCH 14/16] arm64/insn: always inline aarch64_insn_encode_ldst_size()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[RFC PATCH 12/16] kvm/arm64: make alternative callbacks safe</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-10-20</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主题是关于一个针对 KVM/arm64 的补丁，目的是使替代回调（alternative callbacks）更安全。该补丁的编号是 RFC PATCH 12/16。<br><br>在本周的讨论中，Marc Zyngier 对补丁的主题行提出了建议，建议将其修改为更符合子系统的命名规范，即“KVM: arm64: Make alternative callbacks safe”。此外，Ada Couprie Diaz 提出补丁中包含的调试代码可以轻易移除，但建议增加一种方法来指示补丁回调失败的情况。这种方法不需要复杂的基础设施，可以采用尽力而为的方式，允许在单一位置仅失败一个回调。<br><br>Ada 还提到，当前的 `generate_mov_q()` 等函数以 `BUG_ON()` 开头，这可能导致不可恢复的错误，类似于 `WARN_ON()`。因此，她认为应该能够更优雅地处理失败，并至少能够指示出失败的情况，以帮助捕捉意外情况。<br><br>总结来说，本周的讨论主要集中在补丁的命名规范和改进补丁失败处理机制的建议上。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-20]</span> <span class="email-subject">Re: [RFC PATCH 12/16] kvm/arm64: make alternative callbacks safe</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[RFC PATCH 06/16] arm64/insn: always inline aarch64_insn_gen_movewide()</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-10-20</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主题是关于一个 RFC PATCH，具体内容是提议在 ARM64 架构的指令生成中，始终将 `aarch64_insn_gen_movewide()` 函数内联。该补丁旨在优化代码性能。<br><br>在历史讨论中，尚未有其他邮件提供背景信息，因此我们无法获取之前的讨论要点。<br><br>在本周的新讨论中，Marc Zyngier 对补丁中的代码风格提出了个人意见。他认为当前的定义风格不够可读，建议将 `static __always_inline` 放在单独的一行，以提高可读性。此外，他还建议在代码中利用编译时检查的功能，将有效性检查放入 `default` 情况中，并去掉返回语句，以简化代码逻辑。Marc 还提到可以检查指令变体，进一步增强代码的健壮性。<br><br>总体来看，本周的讨论集中在代码风格和优化建议上，未涉及补丁的功能性问题。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-20]</span> <span class="email-subject">Re: [RFC PATCH 06/16] arm64/insn: always inline aarch64_insn_gen_movewide()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[RFC PATCH 03/16] arm64/insn: always inline aarch64_insn_decode_register()</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-10-20</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主题是关于一个 RFC 补丁（patch），其内容是建议在 ARM64 架构中始终内联 `aarch64_insn_decode_register()` 函数。该补丁旨在优化代码性能，确保在编译时进行更严格的检查。<br><br>在之前的讨论中，虽然没有具体的邮件记录，但可以推测出对该补丁的初步反应和技术细节进行了探讨，可能涉及到内联函数的优缺点以及如何确保代码的健壮性。<br><br>在本周的新讨论中，Marc Zyngier 对补丁提出了具体的建议。他建议将补丁中使用的 `compiletime_assert()` 替换为在 `default:` 情况下使用的其他检查方法，如 `BUILD_BUG_ON()`。他表达了对当前实现的担忧，指出如果在现有枚举中间添加新条目，可能会导致代码在不被注意的情况下出现问题。此外，他还提到这样做可以消除一个“返回 0”的情况，这种情况被认为是比较脆弱的。<br><br>总体来看，本周的讨论集中在如何增强代码的健壮性和可维护性上，提出了具体的改进建议。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-20]</span> <span class="email-subject">Re: [RFC PATCH 03/16] arm64/insn: always inline aarch64_insn_decode_register()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
                </div>
            </div>
        </div>

        <div class="category">
            <h2>Selftest</h2>

            <div class="thread">
                <div class="thread-header">
                    <h3>RFC KVM: arm64: selftest: stage 2 mapping helpers</h3>
                </div>

                <div class="thread-meta">
                    <span>10 messages</span>
                    <span>4 participants</span>
                    <span>Started: 2025-10-20</span>
                </div>

                <div class="ai-summary">
                    本邮件线程讨论了针对 KVM 的 arm64 架构的自测框架中，添加二级映射辅助函数的提案。Itaru Kitayama 提出了一个补丁，目的是为了简化二级页表的创建和管理，便于测试 FEAT_NV2 特性。补丁中引入了新的结构体和函数，用于处理二级页表的映射。<br><br>在之前的讨论中，Oliver Upton 提出了改进建议，包括引入一个用于跟踪二级 MMU 上下文的结构体，并建议在自测中实现多个二级页表的创建。此外，他还指出需要相应的测试用例来验证这些功能。<br><br>本周的讨论中，Itaru 更新了补丁并提供了一个测试程序，尝试在 L1 客户机中启动 L2 客户机，但遇到了异常问题。Oliver 提醒他需要初始化 EL1 CPU 上下文，并指出可以重用 EL2 和 EL0 的页表。Sean Christopherson 和 Yosry Ahmed 参与讨论，探讨了在不同架构间统一接口的可能性，但也意识到两者之间的差异可能会很大。<br><br>最后，Itaru 表达了对如何实现 L2 客户机异常处理的疑问，期待进一步的建议。整体来看，讨论集中在补丁的改进、测试用例的必要性以及不同架构间的兼容性问题上。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-20]</span> <span class="email-subject">RFC KVM: arm64: selftest: stage 2 mapping helpers </span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Itaru Kitayama <span class="email-sender">&lt;itaru.kitayama@linux.dev&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-20]</span> <span class="email-subject">Re: RFC KVM: arm64: selftest: stage 2 mapping helpers</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-22]</span> <span class="email-subject">Re: RFC KVM: arm64: selftest: stage 2 mapping helpers</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Itaru Kitayama <span class="email-sender">&lt;itaru.kitayama@linux.dev&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-22]</span> <span class="email-subject">Re: RFC KVM: arm64: selftest: stage 2 mapping helpers</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-22]</span> <span class="email-subject">Re: RFC KVM: arm64: selftest: stage 2 mapping helpers</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-22]</span> <span class="email-subject">Re: RFC KVM: arm64: selftest: stage 2 mapping helpers</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Yosry Ahmed <span class="email-sender">&lt;yosry.ahmed@linux.dev&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-22]</span> <span class="email-subject">Re: RFC KVM: arm64: selftest: stage 2 mapping helpers</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-22]</span> <span class="email-subject">Re: RFC KVM: arm64: selftest: stage 2 mapping helpers</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Yosry Ahmed <span class="email-sender">&lt;yosry.ahmed@linux.dev&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-23]</span> <span class="email-subject">Re: RFC KVM: arm64: selftest: stage 2 mapping helpers</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-25]</span> <span class="email-subject">Re: RFC KVM: arm64: selftest: stage 2 mapping helpers </span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Itaru Kitayama <span class="email-sender">&lt;itaru.kitayama@linux.dev&gt;</span></div>
                </div>
            </div>
        </div>

        <div class="category">
            <h2>Question</h2>

            <div class="thread">
                <div class="thread-header">
                    <h3>[Question] Received vtimer interrupt but ISTATUS is 0</h3>
                </div>

                <div class="thread-meta">
                    <span>4 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-10-14</span>
                </div>

                <div class="ai-summary">
                    在本次邮件讨论中，Kunkun Jiang 提出了一个关于虚拟定时器中断（vtimer interrupt）的问题，即在 ISTATUS 为 0 的情况下接收到中断。根据他的分析，可能是由于虚拟机中的某些操作（如取消定时器）导致 ISTATUS 变为 0，而硬件清除中断的命令发送得太慢，导致操作系统已经读取了 ICC_IAR_EL1。<br><br>Marc Zyngier 在回复中表示，对于这种情况，他感到困惑，因为在现代硬件上不应出现这样的行为。他质疑硬件处理定时器中断的速度，并询问何时可以信任中断处理的准确性。<br><br>在本周的新讨论中，Kunkun Jiang 进行了进一步的测试，添加了堆栈跟踪以帮助分析问题，并确认该问题与硬件有关，认为 GIC（中断控制器）处理待处理中断的速度过慢。他指出，经过 extensive testing 后，某个补丁能够解决他遇到的问题。Marc Zyngier 则重申，当前的情况并不存在bug，而是由于硬件实现的速度较慢导致的次优行为，并表示在有限时间内中断仍然能够被传递，因此系统的运行是正常的。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-10-14]</span> <span class="email-subject">[Question] Received vtimer interrupt but ISTATUS is 0</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Kunkun Jiang <span class="email-sender">&lt;jiangkunkun@huawei.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-10-14]</span> <span class="email-subject">Re: [Question] Received vtimer interrupt but ISTATUS is 0</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-21]</span> <span class="email-subject">Re: [Question] Received vtimer interrupt but ISTATUS is 0</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Kunkun Jiang <span class="email-sender">&lt;jiangkunkun@huawei.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-21]</span> <span class="email-subject">Re: [Question] Received vtimer interrupt but ISTATUS is 0</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
                </div>
            </div>
        </div>

        <div class="category">
            <h2>Other</h2>

            <div class="thread">
                <div class="thread-header">
                    <h3>linux-6.18-rc2/arch/arm64/kvm/vgic/vgic-v3.c:728: Possible || and |
 mixup ?</h3>
                </div>

                <div class="thread-meta">
                    <span>2 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-10-20</span>
                </div>

                <div class="ai-summary">
                    在本周的邮件讨论中，David Binderman 提出了一个关于 Linux 内核 6.18-rc2 版本中 `arch/arm64/kvm/vgic/vgic-v3.c` 文件第 728 行的潜在代码问题。静态分析工具 cppcheck 报告指出，布尔表达式 `common_trap` 在位运算中被使用，可能是开发者的疏忽，建议将 `|` 运算符替换为 `||`，以更符合逻辑运算的语义。具体代码建议为：<br><br>```c<br>if (group0_trap || group1_trap || common_trap || dir_trap) {<br>```<br><br>Marc Zyngier 对此问题表示认可，并鼓励 David 提交相应的补丁以修复该问题。<br><br>本周的讨论主要集中在代码的可读性和逻辑正确性上，参与者们一致认为修改是合理的，并期待看到具体的补丁提交。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-20]</span> <span class="email-subject">linux-6.18-rc2/arch/arm64/kvm/vgic/vgic-v3.c:728: Possible || and |
 mixup ?</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: David Binderman <span class="email-sender">&lt;dcb314@hotmail.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-20]</span> <span class="email-subject">Re: linux-6.18-rc2/arch/arm64/kvm/vgic/vgic-v3.c:728: Possible || and | mixup ?</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
                </div>
            </div>
        </div>

    </div>
</body>
</html>
