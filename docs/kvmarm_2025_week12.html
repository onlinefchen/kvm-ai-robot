<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KVMARM 邮件列表 AI 总结报告</title>
    <style>
        body {
            font-family: 'Courier New', 'Courier', monospace;
            line-height: 1.5;
            max-width: 1200px;
            margin: 0 auto;
            padding: 30px 40px;
            background-color: #ffffff;
            color: #222;
        }
        .container {
            background: #ffffff;
        }
        h1 {
            font-size: 2.2em;
            font-weight: bold;
            color: #000;
            margin-bottom: 0.3em;
            text-align: center;
            border-bottom: 2px solid #000;
            padding-bottom: 15px;
        }
        h2 {
            font-size: 1.6em;
            font-weight: bold;
            color: #000;
            margin-top: 2em;
            margin-bottom: 0.6em;
            border-bottom: 1px solid #333;
            padding-bottom: 8px;
        }
        h3 {
            font-size: 1.2em;
            font-weight: bold;
            color: #111;
            margin-top: 1.5em;
            margin-bottom: 0.5em;
        }
        h4 {
            font-size: 1.05em;
            font-weight: bold;
            color: #333;
            margin-top: 1.2em;
            margin-bottom: 0.5em;
        }
        .meta-info {
            background: #f9f9f9;
            border: 1px solid #ddd;
            padding: 15px 20px;
            margin: 20px 0;
            font-size: 0.95em;
            line-height: 1.6;
        }
        .meta-info p {
            margin: 6px 0;
            color: #444;
        }
        .meta-info strong {
            color: #000;
            font-weight: bold;
        }
        .stats {
            display: table;
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            border: 1px solid #000;
        }
        .stat-card {
            display: table-cell;
            border: 1px solid #000;
            padding: 12px 15px;
            text-align: center;
            background: #fafafa;
        }
        .stat-card h3 {
            margin: 0;
            color: #000;
            font-size: 1.8em;
            font-weight: bold;
            border: none;
            padding: 0;
        }
        .stat-card p {
            margin: 5px 0 0 0;
            color: #444;
            font-size: 0.9em;
            font-weight: normal;
        }
        .category {
            margin: 30px 0;
        }
        .thread {
            margin: 25px 0;
            padding: 15px;
            background: #fafafa;
            border: 1px solid #ccc;
            page-break-inside: avoid;
        }
        .thread-header {
            margin-bottom: 12px;
            border-bottom: 1px solid #ddd;
            padding-bottom: 10px;
        }
        .thread-header h3 {
            font-size: 1.15em;
            font-weight: bold;
            color: #000;
            margin: 0;
        }
        .thread-meta {
            display: block;
            margin: 8px 0 12px 0;
            font-size: 0.9em;
            color: #555;
            font-style: italic;
        }
        .thread-meta span {
            margin-right: 15px;
        }
        .ai-summary {
            background: #fff;
            border-left: 3px solid #666;
            padding: 12px 15px;
            margin: 15px 0;
            line-height: 1.6;
            color: #222;
            font-style: italic;
        }
        .email-list {
            background: #fff;
            border: 1px solid #ccc;
            padding: 10px 15px;
            font-family: 'Courier New', 'Consolas', monospace;
            font-size: 0.88em;
            line-height: 1.5;
            overflow-x: auto;
            margin: 10px 0;
        }
        .email-item {
            margin: 4px 0;
            padding: 2px 0;
            color: #222;
        }
        .email-item.historical {
            background: #f5f5f5;
            border-left: 3px solid #999;
            padding-left: 8px;
            opacity: 0.8;
        }
        .email-item.new {
            background: #fffef0;
            border-left: 3px solid #0066cc;
            padding-left: 8px;
        }
        .email-date {
            color: #0066cc;
            font-weight: bold;
        }
        .email-date.historical {
            color: #666;
        }
        .email-sender {
            color: #c30;
            font-weight: normal;
        }
        .email-subject {
            color: #000;
        }
        .historical-marker {
            color: #999;
            font-size: 0.85em;
            font-style: italic;
        }
        .new-marker {
            color: #0066cc;
            font-size: 0.85em;
            font-weight: bold;
        }
        .archive-link {
            display: inline-block;
            margin: 15px 0;
            padding: 10px 20px;
            background: #333;
            color: #fff;
            text-decoration: none;
            border: 2px solid #000;
            font-weight: bold;
            transition: all 0.2s;
        }
        .archive-link:hover {
            background: #000;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>KVMARM Mailing List Analysis Report</h1>

        <div class="meta-info">
            <p><strong>Generated:</strong> 2025-10-27 09:45</p>
            <p><strong>Time Period:</strong> 2025年3月 第12周 (03/17 - 03/23)</p>
            <p><strong>Total Messages:</strong> 189 | <strong>Total Threads:</strong> 22</p>
            <p style="text-align: center;"><a href="archive.html" class="archive-link">📚 历史归档 Archive</a></p>
        </div>


        <div class="category">
            <h2>PATCH</h2>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v3 0/1] KVM: arm64: Map GPU device memory as cacheable</h3>
                </div>

                <div class="thread-meta">
                    <span>27 messages</span>
                    <span>8 participants</span>
                    <span>Started: 2025-03-10</span>
                </div>

                <div class="ai-summary">
                    本邮件线程讨论的主题是关于在 KVM（内核虚拟机）中将 GPU 设备内存映射为可缓存（cacheable）的补丁（PATCH v3 0/1）。该补丁旨在解决在 Grace Hopper 和 Blackwell 超级芯片等平台上，GPU 设备内存作为 DDR 内存使用时的映射问题。当前 KVM 仅允许将内存标记为 NORMAL 或 DEVICE_nGnRE，限制了对 GPU 内存的有效利用。<br><br>在历史讨论中，Ankit Agrawal 提出了补丁的初步版本，并与其他开发者讨论了如何在内存区域（memslot）注册时进行适当的错误检查，以避免用户空间的错误映射。Marc Zyngier 提出了对补丁的反馈，强调需要在内存槽创建时进行检查，以确保不允许不支持的映射。<br><br>在本周的新讨论中，参与者们集中讨论了如何在 memslot 创建时添加可缓存属性的检查。Marc Zyngier 和其他开发者建议，在创建 memslot 时应明确标识是否支持可缓存映射，并提出了多种实现方案，包括使用新的 memslot 标志或依赖 VMA 属性。Jason Gunthorpe 强调了确保内存属性一致性的重要性，以避免潜在的安全问题。<br><br>总体来看，本周的讨论推动了补丁的进一步完善，参与者们一致认为需要在 memslot 创建时进行更严格的检查，以确保 GPU 内存的安全和有效使用。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-03-10]</span> <span class="email-subject">[PATCH v3 0/1] KVM: arm64: Map GPU device memory as cacheable</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: ankita <span class="email-sender">&lt;ankita@nvidia.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-03-10]</span> <span class="email-subject">[PATCH v3 1/1] KVM: arm64: Allow cacheable stage 2 mapping using VMA flags</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: ankita <span class="email-sender">&lt;ankita@nvidia.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-03-10]</span> <span class="email-subject">Re: [PATCH v3 1/1] KVM: arm64: Allow cacheable stage 2 mapping using VMA flags</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-03-11]</span> <span class="email-subject">Re: [PATCH v3 1/1] KVM: arm64: Allow cacheable stage 2 mapping using
 VMA flags</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Ankit Agrawal <span class="email-sender">&lt;ankita@nvidia.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-03-11]</span> <span class="email-subject">Re: [PATCH v3 1/1] KVM: arm64: Allow cacheable stage 2 mapping using VMA flags</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-03-11]</span> <span class="email-subject">Re: [PATCH v3 1/1] KVM: arm64: Allow cacheable stage 2 mapping using
 VMA flags</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Ankit Agrawal <span class="email-sender">&lt;ankita@nvidia.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-03-12]</span> <span class="email-subject">Re: [PATCH v3 1/1] KVM: arm64: Allow cacheable stage 2 mapping using VMA flags</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-17]</span> <span class="email-subject">Re: [PATCH v3 1/1] KVM: arm64: Allow cacheable stage 2 mapping using
 VMA flags</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Ankit Agrawal <span class="email-sender">&lt;ankita@nvidia.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-17]</span> <span class="email-subject">Re: [PATCH v3 1/1] KVM: arm64: Allow cacheable stage 2 mapping using VMA flags</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-17]</span> <span class="email-subject">Re: [PATCH v3 1/1] KVM: arm64: Allow cacheable stage 2 mapping using
 VMA flags</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Catalin Marinas <span class="email-sender">&lt;catalin.marinas@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-18]</span> <span class="email-subject">Re: [PATCH v3 1/1] KVM: arm64: Allow cacheable stage 2 mapping using VMA flags</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-18]</span> <span class="email-subject">Re: [PATCH v3 1/1] KVM: arm64: Allow cacheable stage 2 mapping using
 VMA flags</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Jason Gunthorpe <span class="email-sender">&lt;jgg@nvidia.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-18]</span> <span class="email-subject">Re: [PATCH v3 1/1] KVM: arm64: Allow cacheable stage 2 mapping using
 VMA flags</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Jason Gunthorpe <span class="email-sender">&lt;jgg@nvidia.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-18]</span> <span class="email-subject">Re: [PATCH v3 1/1] KVM: arm64: Allow cacheable stage 2 mapping using
 VMA flags</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Catalin Marinas <span class="email-sender">&lt;catalin.marinas@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-18]</span> <span class="email-subject">Re: [PATCH v3 1/1] KVM: arm64: Allow cacheable stage 2 mapping using
 VMA flags</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-18]</span> <span class="email-subject">Re: [PATCH v3 1/1] KVM: arm64: Allow cacheable stage 2 mapping using
 VMA flags</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: David Hildenbrand <span class="email-sender">&lt;david@redhat.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-18]</span> <span class="email-subject">Re: [PATCH v3 1/1] KVM: arm64: Allow cacheable stage 2 mapping using
 VMA flags</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-18]</span> <span class="email-subject">Re: [PATCH v3 1/1] KVM: arm64: Allow cacheable stage 2 mapping using
 VMA flags</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Jason Gunthorpe <span class="email-sender">&lt;jgg@nvidia.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-18]</span> <span class="email-subject">Re: [PATCH v3 1/1] KVM: arm64: Allow cacheable stage 2 mapping using
 VMA flags</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Jason Gunthorpe <span class="email-sender">&lt;jgg@nvidia.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-19]</span> <span class="email-subject">Re: [PATCH v3 1/1] KVM: arm64: Allow cacheable stage 2 mapping using
 VMA flags</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-19]</span> <span class="email-subject">Re: [PATCH v3 1/1] KVM: arm64: Allow cacheable stage 2 mapping using
 VMA flags</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Jason Gunthorpe <span class="email-sender">&lt;jgg@nvidia.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-19]</span> <span class="email-subject">Re: [PATCH v3 1/1] KVM: arm64: Allow cacheable stage 2 mapping using
 VMA flags</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Catalin Marinas <span class="email-sender">&lt;catalin.marinas@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-19]</span> <span class="email-subject">Re: [PATCH v3 1/1] KVM: arm64: Allow cacheable stage 2 mapping using
 VMA flags</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Catalin Marinas <span class="email-sender">&lt;catalin.marinas@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-19]</span> <span class="email-subject">Re: [PATCH v3 1/1] KVM: arm64: Allow cacheable stage 2 mapping using
 VMA flags</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Jason Gunthorpe <span class="email-sender">&lt;jgg@nvidia.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-19]</span> <span class="email-subject">Re: [PATCH v3 1/1] KVM: arm64: Allow cacheable stage 2 mapping using
 VMA flags</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Catalin Marinas <span class="email-sender">&lt;catalin.marinas@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-20]</span> <span class="email-subject">Re: [PATCH v3 1/1] KVM: arm64: Allow cacheable stage 2 mapping using
 VMA flags</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: bibo mao <span class="email-sender">&lt;maobibo@loongson.cn&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-20]</span> <span class="email-subject">Re: [PATCH v3 1/1] KVM: arm64: Allow cacheable stage 2 mapping using
 VMA flags</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: bibo mao <span class="email-sender">&lt;maobibo@loongson.cn&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH RFC] KVM: arm64: PMU: Use multiple host PMUs</h3>
                </div>

                <div class="thread-meta">
                    <span>19 messages</span>
                    <span>3 participants</span>
                    <span>Started: 2025-03-19</span>
                </div>

                <div class="ai-summary">
                    本邮件线程讨论了一个关于 KVM（Kernel-based Virtual Machine）在 arm64 架构下如何使用多个主机 PMU（性能监控单元）的补丁提案。该提案旨在解决 Windows 虚拟机在处理 PMU 时可能出现的崩溃问题，尤其是在 PMU 停止计数的情况下。<br><br>**补丁内容**：<br>补丁的核心是允许 KVM 在虚拟机中使用多个主机 PMU，以确保即使在异构核心的情况下，虚拟 CPU（vCPU）也能正常运行并获取准确的性能计数。补丁还指出了当前实现的局限性，例如多主机 PMU 的计数溢出未被处理。<br><br>**历史讨论要点**：<br>之前的讨论主要集中在如何处理 Windows 对 PMU 的需求，以及如何在 KVM 中实现更好的 PMU 支持。参与者们讨论了现有实现的不足之处，以及如何在不破坏现有 ABI（应用二进制接口）的情况下进行改进。<br><br>**本周新讨论进展**：<br>本周的讨论中，参与者们对补丁的实现细节进行了深入探讨。Oliver Upton 提出了一个建议，即在未明确指定 PMU 类型时，KVM 应继续提供默认 PMU，并确保固定的 CPU 周期计数器在任何 PMUv3 实现中都能正常工作。Akihiko Odaki 则强调了需要对 PMU 的行为进行明确的用户空间支持，以避免对现有行为的破坏。Marc Zyngier 表达了对引入新行为的反对意见，认为应保持现有的行为不变。<br><br>总体来看，讨论围绕如何在不影响现有系统行为的前提下，改进 KVM 对 PMU 的支持展开，参与者们对如何实现这一目标存在不同看法。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-19]</span> <span class="email-subject">[PATCH RFC] KVM: arm64: PMU: Use multiple host PMUs</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Akihiko Odaki <span class="email-sender">&lt;akihiko.odaki@daynix.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-19]</span> <span class="email-subject">Re: [PATCH RFC] KVM: arm64: PMU: Use multiple host PMUs</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-19]</span> <span class="email-subject">Re: [PATCH RFC] KVM: arm64: PMU: Use multiple host PMUs</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Akihiko Odaki <span class="email-sender">&lt;akihiko.odaki@daynix.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-19]</span> <span class="email-subject">Re: [PATCH RFC] KVM: arm64: PMU: Use multiple host PMUs</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-19]</span> <span class="email-subject">Re: [PATCH RFC] KVM: arm64: PMU: Use multiple host PMUs</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Akihiko Odaki <span class="email-sender">&lt;akihiko.odaki@daynix.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-19]</span> <span class="email-subject">Re: [PATCH RFC] KVM: arm64: PMU: Use multiple host PMUs</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-19]</span> <span class="email-subject">Re: [PATCH RFC] KVM: arm64: PMU: Use multiple host PMUs</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Akihiko Odaki <span class="email-sender">&lt;akihiko.odaki@daynix.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-19]</span> <span class="email-subject">Re: [PATCH RFC] KVM: arm64: PMU: Use multiple host PMUs</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-19]</span> <span class="email-subject">Re: [PATCH RFC] KVM: arm64: PMU: Use multiple host PMUs</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Akihiko Odaki <span class="email-sender">&lt;akihiko.odaki@daynix.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-19]</span> <span class="email-subject">Re: [PATCH RFC] KVM: arm64: PMU: Use multiple host PMUs</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-19]</span> <span class="email-subject">Re: [PATCH RFC] KVM: arm64: PMU: Use multiple host PMUs</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-20]</span> <span class="email-subject">Re: [PATCH RFC] KVM: arm64: PMU: Use multiple host PMUs</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Akihiko Odaki <span class="email-sender">&lt;akihiko.odaki@daynix.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-20]</span> <span class="email-subject">Re: [PATCH RFC] KVM: arm64: PMU: Use multiple host PMUs</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-20]</span> <span class="email-subject">Re: [PATCH RFC] KVM: arm64: PMU: Use multiple host PMUs</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-20]</span> <span class="email-subject">Re: [PATCH RFC] KVM: arm64: PMU: Use multiple host PMUs</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Akihiko Odaki <span class="email-sender">&lt;akihiko.odaki@daynix.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-20]</span> <span class="email-subject">Re: [PATCH RFC] KVM: arm64: PMU: Use multiple host PMUs</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-20]</span> <span class="email-subject">Re: [PATCH RFC] KVM: arm64: PMU: Use multiple host PMUs</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-21]</span> <span class="email-subject">Re: [PATCH RFC] KVM: arm64: PMU: Use multiple host PMUs</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Akihiko Odaki <span class="email-sender">&lt;akihiko.odaki@daynix.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-21]</span> <span class="email-subject">Re: [PATCH RFC] KVM: arm64: PMU: Use multiple host PMUs</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH hyperv-next v6 00/11] arm64: hyperv: Support Virtual Trust Level Boot</h3>
                </div>

                <div class="thread-meta">
                    <span>15 messages</span>
                    <span>5 participants</span>
                    <span>Started: 2025-03-14</span>
                </div>

                <div class="ai-summary">
                    本邮件线程讨论了一个关于在ARM64架构下支持虚拟信任级别（Virtual Trust Level, VTL）引导的补丁集。该补丁集的主要内容是使Hyper-V代码能够在ARM64环境中以VTL模式启动，相关文档可参考微软的虚拟安全模式规范。<br><br>在历史讨论中，Roman Kisel提出了多个补丁，包括引入用于检测Hypervisor存在的API、使用SMCCC（安全监控调用）来替代ACPI检测Hyper-V的方式，以及为VMBus添加中断和DMA一致性属性。这些补丁旨在提高Hyper-V在ARM64上的兼容性和性能。<br><br>本周的新讨论主要集中在对补丁的代码风格和实现细节的反馈。Mark Rutland提出了对某些函数命名和实现方式的改进建议，以提高代码的可读性和一致性。Roman Kisel表示将根据反馈进行修改，并感谢参与者的建议。同时，Michael Kelley补充了关于ACPI的定义，支持使用存根（stub）来改善代码结构。<br><br>总体来看，本周讨论推动了补丁集的进一步完善，参与者之间的互动积极，显示出对代码质量的重视。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-03-14]</span> <span class="email-subject">[PATCH hyperv-next v6 00/11] arm64: hyperv: Support Virtual Trust Level Boot</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Roman Kisel <span class="email-sender">&lt;romank@linux.microsoft.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-03-14]</span> <span class="email-subject">[PATCH hyperv-next v6 01/11] arm64: kvm, smccc: Introduce and use API for detecting hypervisor presence</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Roman Kisel <span class="email-sender">&lt;romank@linux.microsoft.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-03-14]</span> <span class="email-subject">[PATCH hyperv-next v6 02/11] arm64: hyperv: Use SMCCC to detect hypervisor presence</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Roman Kisel <span class="email-sender">&lt;romank@linux.microsoft.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-03-14]</span> <span class="email-subject">[PATCH hyperv-next v6 07/11] dt-bindings: microsoft,vmbus: Add interrupt and DMA coherence properties</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Roman Kisel <span class="email-sender">&lt;romank@linux.microsoft.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-03-14]</span> <span class="email-subject">Re: [PATCH hyperv-next v6 01/11] arm64: kvm, smccc: Introduce and use
 API for detecting hypervisor presence</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Roman Kisel <span class="email-sender">&lt;romank@linux.microsoft.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-03-15]</span> <span class="email-subject">Re: [PATCH hyperv-next v6 01/11] arm64: kvm, smccc: Introduce and use API for
 detecting hypervisor presence</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Arnd Bergmann <span class="email-sender">&lt;arnd@arndb.de&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-03-16]</span> <span class="email-subject">Re: [PATCH hyperv-next v6 07/11] dt-bindings: microsoft,vmbus: Add
 interrupt and DMA coherence properties</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Krzysztof Kozlowski <span class="email-sender">&lt;krzk@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-17]</span> <span class="email-subject">Re: [PATCH hyperv-next v6 01/11] arm64: kvm, smccc: Introduce and
 use API for detecting hypervisor presence</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Rutland <span class="email-sender">&lt;mark.rutland@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-17]</span> <span class="email-subject">Re: [PATCH hyperv-next v6 02/11] arm64: hyperv: Use SMCCC to detect
 hypervisor presence</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Rutland <span class="email-sender">&lt;mark.rutland@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-17]</span> <span class="email-subject">Re: [PATCH hyperv-next v6 07/11] dt-bindings: microsoft,vmbus: Add
 interrupt and DMA coherence properties</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Roman Kisel <span class="email-sender">&lt;romank@linux.microsoft.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-17]</span> <span class="email-subject">Re: [PATCH hyperv-next v6 01/11] arm64: kvm, smccc: Introduce and use
 API for detecting hypervisor presence</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Roman Kisel <span class="email-sender">&lt;romank@linux.microsoft.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-17]</span> <span class="email-subject">Re: [PATCH hyperv-next v6 02/11] arm64: hyperv: Use SMCCC to detect
 hypervisor presence</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Roman Kisel <span class="email-sender">&lt;romank@linux.microsoft.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-17]</span> <span class="email-subject">Re: [PATCH hyperv-next v6 01/11] arm64: kvm, smccc: Introduce and use
 API for detecting hypervisor presence</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Roman Kisel <span class="email-sender">&lt;romank@linux.microsoft.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-19]</span> <span class="email-subject">RE: [PATCH hyperv-next v6 02/11] arm64: hyperv: Use SMCCC to detect
 hypervisor presence</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Michael Kelley <span class="email-sender">&lt;mhklinux@outlook.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-20]</span> <span class="email-subject">Re: [PATCH hyperv-next v6 02/11] arm64: hyperv: Use SMCCC to detect
 hypervisor presence</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Roman Kisel <span class="email-sender">&lt;romank@linux.microsoft.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v3 00/14] arm: rework id register storage</h3>
                </div>

                <div class="thread-meta">
                    <span>13 messages</span>
                    <span>4 participants</span>
                    <span>Started: 2025-03-11</span>
                </div>

                <div class="ai-summary">
                    本邮件线程讨论了一个关于 ARM 架构 ID 寄存器存储重构的补丁系列（[PATCH v3 00/14]）。该补丁旨在通过重新组织 ID 寄存器的存储方式，提高代码的可维护性和可扩展性。具体来说，补丁包括了新的寄存器定义和访问器，旨在将 ID 寄存器从结构体中的命名字段迁移到数组单元中。<br><br>在历史讨论中，Cornelia Huck 提到该补丁系列的更新主要集中在寄存器定义的生成方式上，并将一些 KVM 特有的代码移至 kvm.c 文件中。参与者也讨论了脚本的合并问题，Cornelia 表示可能会单独维护这些生成脚本。<br><br>在本周的新讨论中，Sebastian Ott 对补丁进行了审查，并提出了一些关于寄存器命名和使用的建议。他指出，当前的实现可能不适用于所有寄存器，并建议在未来的自动生成中进行扩展。此外，Cornelia 也对补丁的使用情况进行了反馈，表示在后续补丁完成后会重新审视该系列的内容。<br><br>总体而言，讨论集中在补丁的具体实现、潜在问题及其未来的扩展方向上，参与者积极交流以确保补丁的有效性和适用性。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-03-11]</span> <span class="email-subject">[PATCH v3 00/14] arm: rework id register storage</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Cornelia Huck <span class="email-sender">&lt;cohuck@redhat.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-03-11]</span> <span class="email-subject">[PATCH v3 01/14] arm/cpu: Add sysreg definitions in cpu-sysregs.h</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Cornelia Huck <span class="email-sender">&lt;cohuck@redhat.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-03-11]</span> <span class="email-subject">[PATCH v3 02/14] arm/kvm: add accessors for storing host features into idregs</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Cornelia Huck <span class="email-sender">&lt;cohuck@redhat.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-03-11]</span> <span class="email-subject">[PATCH v3 13/14] arm/cpu: Add sysreg generation scripts</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Cornelia Huck <span class="email-sender">&lt;cohuck@redhat.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-03-11]</span> <span class="email-subject">Re: [PATCH v3 02/14] arm/kvm: add accessors for storing host features
 into idregs</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Richard Henderson <span class="email-sender">&lt;richard.henderson@linaro.org&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-03-11]</span> <span class="email-subject">Re: [PATCH v3 00/14] arm: rework id register storage</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-20]</span> <span class="email-subject">Re: [PATCH v3 13/14] arm/cpu: Add sysreg generation scripts</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sebastian Ott <span class="email-sender">&lt;sebott@redhat.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-20]</span> <span class="email-subject">Re: [PATCH v3 01/14] arm/cpu: Add sysreg definitions in
 cpu-sysregs.h</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sebastian Ott <span class="email-sender">&lt;sebott@redhat.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-20]</span> <span class="email-subject">Re: [PATCH v3 00/14] arm: rework id register storage</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sebastian Ott <span class="email-sender">&lt;sebott@redhat.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-21]</span> <span class="email-subject">Re: [PATCH v3 00/14] arm: rework id register storage</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Cornelia Huck <span class="email-sender">&lt;cohuck@redhat.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-21]</span> <span class="email-subject">Re: [PATCH v3 01/14] arm/cpu: Add sysreg definitions in cpu-sysregs.h</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Cornelia Huck <span class="email-sender">&lt;cohuck@redhat.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-21]</span> <span class="email-subject">Re: [PATCH v3 02/14] arm/kvm: add accessors for storing host
 features into idregs</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Cornelia Huck <span class="email-sender">&lt;cohuck@redhat.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-21]</span> <span class="email-subject">Re: [PATCH v3 13/14] arm/cpu: Add sysreg generation scripts</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Cornelia Huck <span class="email-sender">&lt;cohuck@redhat.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH 6.12 v2 0/8] KVM: arm64: Backport of SVE fixes to v6.12</h3>
                </div>

                <div class="thread-meta">
                    <span>10 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-03-21</span>
                </div>

                <div class="ai-summary">
                    本邮件线程讨论了针对 KVM（内核虚拟机）在 arm64 架构下的 SVE（可扩展向量扩展）相关修复的补丁系列，旨在将这些修复回移到 v6.12 版本。补丁包括多个重要的改动，主要集中在优化和修复 KVM 与 SVE 之间的交互。<br><br>**原始补丁内容**：<br>补丁系列的主要目的是回移 Mark Rutland 提出的 SVE/KVM 交互的修复。具体补丁包括对 FPSIMD/SVE/SME 状态的保存与清除逻辑的改进，确保在虚拟机运行时，主机的状态不会被意外丢失。<br><br>**之前讨论要点**：<br>在历史讨论中，参与者们关注了 KVM 在处理 SVE 状态时的多种问题，包括状态丢失、错误的状态保存等。之前的讨论强调了需要在进入和退出虚拟机时正确处理主机和来宾的状态，以避免潜在的崩溃和不一致性。<br><br>**本周新讨论与进展**：<br>本周的讨论中，Mark Brown 提出了多个补丁，具体包括：<br>1. 计算 cptr_el2 陷阱的逻辑改进。<br>2. 无条件保存和刷新主机的 FPSIMD/SVE/SME 状态。<br>3. 移除非保护模式下对主机 FPSIMD 状态的保存。<br>4. 移除 VHE 模式下对 CPACR_EL1.ZEN 和 CPACR_EL1.SMEN 的保存与恢复逻辑。<br>5. 重构退出处理程序以简化代码结构。<br>6. 通过标记某些头文件函数为内联来减少编译警告。<br><br>这些补丁旨在提高 KVM 的稳定性和性能，同时简化代码结构，减少潜在的错误。整体来看，讨论集中在确保虚拟化环境中状态管理的正确性和效率上。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-21]</span> <span class="email-subject">[PATCH 6.12 v2 0/8] KVM: arm64: Backport of SVE fixes to v6.12</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-21]</span> <span class="email-subject">[PATCH 6.12 v2 1/8] KVM: arm64: Calculate cptr_el2 traps on
 activating traps</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-21]</span> <span class="email-subject">[PATCH 6.12 v2 2/8] KVM: arm64: Unconditionally save+flush host
 FPSIMD/SVE/SME state</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-21]</span> <span class="email-subject">[PATCH 6.12 v2 3/8] KVM: arm64: Remove host FPSIMD saving for
 non-protected KVM</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-21]</span> <span class="email-subject">[PATCH 6.12 v2 4/8] KVM: arm64: Remove VHE host restore of
 CPACR_EL1.ZEN</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-21]</span> <span class="email-subject">[PATCH 6.12 v2 5/8] KVM: arm64: Remove VHE host restore of
 CPACR_EL1.SMEN</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-21]</span> <span class="email-subject">[PATCH 6.12 v2 6/8] KVM: arm64: Refactor exit handlers</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-21]</span> <span class="email-subject">[PATCH 6.12 v2 7/8] KVM: arm64: Mark some header functions as
 inline</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-21]</span> <span class="email-subject">[PATCH 6.12 v2 8/8] KVM: arm64: Eagerly switch ZCR_EL{1,2}</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-21]</span> <span class="email-subject">Re: [PATCH 6.12 v2 3/8] KVM: arm64: Remove host FPSIMD saving for
 non-protected KVM</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH 6.6 0/8] KVM: arm64: Backport of SVE fixes to v6.6</h3>
                </div>

                <div class="thread-meta">
                    <span>9 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-03-21</span>
                </div>

                <div class="ai-summary">
                    本邮件线程讨论了针对 KVM（内核虚拟机）在 arm64 架构上 SVE（可扩展向量扩展）相关问题的修复补丁，主要集中在将这些修复从较新的版本回移植到 v6.6 版本。<br><br>1. **原始 patch/问题的内容**：该系列补丁主要回移植了 Mark Rutland 提出的 SVE/KVM 交互的修复，包括对 FPSIMD/SVE/SME 状态的处理、CPACR_EL1.ZEN 和 CPACR_EL1.SMEN 的保存与恢复逻辑等。<br><br>2. **之前的讨论要点**：历史讨论中提到，之前的实现存在一些问题，例如在处理 SVE 状态时的懒惰保存导致主机状态不一致，可能引发 QEMU 崩溃等问题。因此，补丁中提出了在加载 vCPU 时主动保存和刷新主机的 FPSIMD/SVE/SME 状态，以避免这些问题。<br><br>3. **本周的新讨论、进展或结论**：本周的讨论中，参与者 Mark Brown 提交了多个补丁，涵盖了对 SVE 状态的积极切换、去除冗余的保存/恢复逻辑、重构退出处理程序等。补丁的目标是简化代码结构并提高稳定性，确保在虚拟机和主机之间切换时，状态能够正确保存和恢复。所有补丁均经过审查并得到认可，预计将合并到主线代码中。<br><br>总体来看，本周的讨论集中在优化 KVM 的 SVE 处理逻辑，确保主机与虚拟机之间的状态管理更加高效和安全。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-21]</span> <span class="email-subject">[PATCH 6.6 0/8] KVM: arm64: Backport of SVE fixes to v6.6</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-21]</span> <span class="email-subject">[PATCH 6.6 1/8] KVM: arm64: Calculate cptr_el2 traps on activating
 traps</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-21]</span> <span class="email-subject">[PATCH 6.6 2/8] KVM: arm64: Unconditionally save+flush host
 FPSIMD/SVE/SME state</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-21]</span> <span class="email-subject">[PATCH 6.6 3/8] KVM: arm64: Remove host FPSIMD saving for
 non-protected KVM</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-21]</span> <span class="email-subject">[PATCH 6.6 4/8] KVM: arm64: Remove VHE host restore of
 CPACR_EL1.ZEN</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-21]</span> <span class="email-subject">[PATCH 6.6 5/8] KVM: arm64: Remove VHE host restore of
 CPACR_EL1.SMEN</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-21]</span> <span class="email-subject">[PATCH 6.6 6/8] KVM: arm64: Refactor exit handlers</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-21]</span> <span class="email-subject">[PATCH 6.6 7/8] KVM: arm64: Mark some header functions as inline</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-21]</span> <span class="email-subject">[PATCH 6.6 8/8] KVM: arm64: Eagerly switch ZCR_EL{1,2}</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH 6.13 v2 0/8] KVM: arm64: Backport of SVE fixes to v6.13</h3>
                </div>

                <div class="thread-meta">
                    <span>9 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-03-21</span>
                </div>

                <div class="ai-summary">
                    本邮件线程讨论了针对 KVM（内核虚拟机）在 arm64 架构下的 SVE（可扩展向量扩展）相关修复的补丁系列，主要是将这些修复从较新的版本回移植到 v6.13 版本。<br><br>### 原始补丁/问题内容<br>补丁系列的主题为“[PATCH 6.13 v2 0/8] KVM: arm64: Backport of SVE fixes to v6.13”，包含了 8 个补丁，主要解决了 SVE 与 KVM 交互中的一些问题。这些补丁包括修复 FPSIMD/SVE/SME 状态的保存和恢复逻辑，以及对 CPACR_EL1.ZEN 和 CPACR_EL1.SMEN 的处理。<br><br>### 之前讨论要点<br>在历史讨论中，参与者 Mark Brown 提到了一些历史问题，包括 KVM 在处理 SVE 状态时的错误假设和不一致的状态管理，导致在使用 QEMU 时可能出现崩溃。这些问题的根源可以追溯到 v5.17 版本。<br><br>### 本周的新讨论、进展或结论<br>本周的讨论中，Mark Brown 提交了 8 个补丁，逐一解决了上述问题，包括：<br>1. **计算 cptr_el2 陷阱**：在激活陷阱时重新计算 cptr_el2 的值。<br>2. **无条件保存和刷新主机状态**：确保在加载 vCPU 时，主机的 FPSIMD/SVE/SME 状态被及时保存。<br>3. **移除不必要的保存逻辑**：对于非保护模式的 KVM，移除了保存主机 FPSIMD 状态的代码。<br>4. **重构退出处理程序**：简化了 VHE 和 nVHE/hVHE 模式下的退出处理逻辑。<br>5. **标记头文件中的一些函数为内联**：以减少编译警告。<br><br>这些补丁的合并将有助于提高 KVM 在 arm64 架构下的稳定性和性能，尤其是在处理 SVE 状态时。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-21]</span> <span class="email-subject">[PATCH 6.13 v2 0/8] KVM: arm64: Backport of SVE fixes to v6.13</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-21]</span> <span class="email-subject">[PATCH 6.13 v2 1/8] KVM: arm64: Calculate cptr_el2 traps on
 activating traps</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-21]</span> <span class="email-subject">[PATCH 6.13 v2 2/8] KVM: arm64: Unconditionally save+flush host
 FPSIMD/SVE/SME state</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-21]</span> <span class="email-subject">[PATCH 6.13 v2 3/8] KVM: arm64: Remove host FPSIMD saving for
 non-protected KVM</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-21]</span> <span class="email-subject">[PATCH 6.13 v2 4/8] KVM: arm64: Remove VHE host restore of
 CPACR_EL1.ZEN</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-21]</span> <span class="email-subject">[PATCH 6.13 v2 5/8] KVM: arm64: Remove VHE host restore of
 CPACR_EL1.SMEN</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-21]</span> <span class="email-subject">[PATCH 6.13 v2 6/8] KVM: arm64: Refactor exit handlers</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-21]</span> <span class="email-subject">[PATCH 6.13 v2 7/8] KVM: arm64: Mark some header functions as
 inline</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-21]</span> <span class="email-subject">[PATCH 6.13 v2 8/8] KVM: arm64: Eagerly switch ZCR_EL{1,2}</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH 6.12 0/8] KVM: arm64: Backport of SVE fixes to v6.12</h3>
                </div>

                <div class="thread-meta">
                    <span>7 messages</span>
                    <span>5 participants</span>
                    <span>Started: 2025-03-14</span>
                </div>

                <div class="ai-summary">
                    本邮件线程讨论了针对 KVM（Kernel-based Virtual Machine）在 arm64 架构上 SVE（Scalable Vector Extension）相关问题的补丁，主题为“[PATCH 6.12 0/8] KVM: arm64: Backport of SVE fixes to v6.12”。该补丁系列旨在将 Mark Rutland 提出的 SVE 与 KVM 交互的修复程序回移植到 v6.12 版本。<br><br>在历史讨论中，Mark Brown 提出了多个补丁，主要集中在如何处理 KVM 中的 FPSIMD/SVE/SME 状态保存和恢复，以及在不同模式下对 ZCR_EL1 和 ZCR_EL2 的切换逻辑。这些补丁的目的是确保在虚拟机运行时，主机和客户机之间的状态一致性。<br><br>在本周的新讨论中，Gavin Shan 指出当前补丁中对 `@host_vcpu` 的处理存在问题，认为不应假设其为内核线性映射地址。Marc Zyngier 进一步确认了这一点，并指出当前的实现逻辑存在缺陷，可能导致地址转换错误。Mark Rutland 也同意这一看法，并表示需要撤回这些补丁以进行进一步审查。最终，Greg Kroah-Hartman 确认所有相关补丁已从队列中撤回，等待新的版本发布。<br><br>总结而言，本周的讨论集中在补丁的逻辑错误上，参与者一致认为需要对补丁进行修正，确保其在未来版本中的正确性。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-03-14]</span> <span class="email-subject">[PATCH 6.12 0/8] KVM: arm64: Backport of SVE fixes to v6.12</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-03-14]</span> <span class="email-subject">[PATCH 6.12 8/8] KVM: arm64: Eagerly switch ZCR_EL{1,2}</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-19]</span> <span class="email-subject">Re: [PATCH 6.12 8/8] KVM: arm64: Eagerly switch ZCR_EL{1,2}</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Gavin Shan <span class="email-sender">&lt;gshan@redhat.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-19]</span> <span class="email-subject">Re: [PATCH 6.12 8/8] KVM: arm64: Eagerly switch ZCR_EL{1,2}</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-19]</span> <span class="email-subject">Re: [PATCH 6.12 8/8] KVM: arm64: Eagerly switch ZCR_EL{1,2}</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Rutland <span class="email-sender">&lt;mark.rutland@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-19]</span> <span class="email-subject">Re: [PATCH 6.12 8/8] KVM: arm64: Eagerly switch ZCR_EL{1,2}</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-19]</span> <span class="email-subject">Re: [PATCH 6.12 8/8] KVM: arm64: Eagerly switch ZCR_EL{1,2}</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Greg Kroah-Hartman <span class="email-sender">&lt;gregkh@linuxfoundation.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v5 0/5] KVM: arm64: PMU: Fix SET_ONE_REG for vPMC regs</h3>
                </div>

                <div class="thread-meta">
                    <span>5 messages</span>
                    <span>4 participants</span>
                    <span>Started: 2025-03-15</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主题是关于 KVM（Kernel-based Virtual Machine）在 arm64 架构下的性能监控单元（PMU）相关的补丁，主要针对 vPMC（虚拟性能监控计数器）寄存器的 SET_ONE_REG 操作进行修复。<br><br>**原始补丁内容**：Akihiko Odaki 提出的补丁系列（PATCH v5 0/5）旨在修复 vPMC 寄存器的 SET_ONE_REG 功能，确保在用户发起更改后能够正确加载 vPMC 寄存器的值。这一修复对于在 QEMU 上调试 Windows 系统时尤为重要，因为 QEMU 在恢复虚拟机执行时会尝试写回所有可见寄存器，可能导致 PMU 状态损坏。<br><br>**之前讨论要点**：历史讨论中提到，补丁的核心在于确保在设置 vPMC 寄存器时能够重新加载性能事件，以避免寄存器值与实际计数不一致的问题。<br><br>**本周新讨论进展**：本周的讨论中，kernel test robot 报告了构建错误，指出在未选择 CONFIG_HW_PERF_EVENTS 时缺少必要的存根定义。Marc Zyngier 也确认了这一问题。Oliver Upton 表示已经将修复合并到下一个版本中，并感谢 Akihiko 的贡献。补丁系列中的多个补丁已被应用，确保了在不同配置下的兼容性和稳定性。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-03-15]</span> <span class="email-subject">[PATCH v5 0/5] KVM: arm64: PMU: Fix SET_ONE_REG for vPMC regs</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Akihiko Odaki <span class="email-sender">&lt;akihiko.odaki@daynix.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-03-15]</span> <span class="email-subject">[PATCH v5 3/5] KVM: arm64: PMU: Fix SET_ONE_REG for vPMC regs</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Akihiko Odaki <span class="email-sender">&lt;akihiko.odaki@daynix.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-17]</span> <span class="email-subject">Re: [PATCH v5 3/5] KVM: arm64: PMU: Fix SET_ONE_REG for vPMC regs</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: kernel test robot <span class="email-sender">&lt;lkp@intel.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-17]</span> <span class="email-subject">Re: [PATCH v5 3/5] KVM: arm64: PMU: Fix SET_ONE_REG for vPMC regs</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-17]</span> <span class="email-subject">Re: [PATCH v5 0/5] KVM: arm64: PMU: Fix SET_ONE_REG for vPMC regs</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH] KVM: arm64: pmu: Avoid initializing KVM PMU when KVM is not initialised</h3>
                </div>

                <div class="thread-meta">
                    <span>4 messages</span>
                    <span>3 participants</span>
                    <span>Started: 2025-03-22</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主题是关于 KVM（Kernel-based Virtual Machine）在 arm64 架构下的性能监控单元（PMU）初始化问题。Jia He 提出了一个补丁，目的是在 KVM 未初始化时避免调用 `kvm_host_pmu_init()` 函数，以防止在 KVM 不可用的环境中导致意外行为。<br><br>在本周的讨论中，Marc Zyngier 对补丁提出了质疑，询问具体的“意外行为”是什么，并指出该补丁可能并不适用于当前的上游代码。他认为补丁中对 KVM 初始化状态的检查依赖于 PMU 驱动和 KVM 的探测顺序，这种做法是不可靠的。Jia He 随后解释了补丁的背景，提到在 Colton Lewis 的 RFC 补丁中，未初始化的 KVM 会导致虚拟机无法启动，并引发内核崩溃。他还询问是否可以用 `is_hyp_mode_available()` 替代 `is_kvm_arm_initialised()` 进行检查。<br><br>Marc Zyngier 最后建议，Jia He 应该直接回复 Colton 的系列补丁，阐述自己的担忧和发现，而不是发布与上游无关的补丁。整体来看，本周的讨论集中在补丁的适用性和必要性上，尚未达成明确的结论。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-22]</span> <span class="email-subject">[PATCH] KVM: arm64: pmu: Avoid initializing KVM PMU when KVM is not initialised</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Jia He <span class="email-sender">&lt;justin.he@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-22]</span> <span class="email-subject">Re: [PATCH] KVM: arm64: pmu: Avoid initializing KVM PMU when KVM is not initialised</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-22]</span> <span class="email-subject">RE: [PATCH] KVM: arm64: pmu: Avoid initializing KVM PMU when KVM is
 not initialised</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Justin He <span class="email-sender">&lt;Justin.He@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-22]</span> <span class="email-subject">Re: [PATCH] KVM: arm64: pmu: Avoid initializing KVM PMU when KVM is not initialised</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v3 0/3] KVM: arm64: Separate the hyp FF-A buffers init from
 the host</h3>
                </div>

                <div class="thread-meta">
                    <span>4 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-03-18</span>
                </div>

                <div class="ai-summary">
                    本邮件线程讨论了一个关于 KVM（Kernel-based Virtual Machine）在 arm64 架构下的补丁，旨在将 hypervisor FF-A（Firmware Framework for Arm）缓冲区的初始化与主机分离。<br><br>**原始补丁内容**：<br>补丁的核心是将 hypervisor FF-A 缓冲区的初始化过程从主机 FF-A 映射调用路径中分离出来。这是为了确保在受保护模式下，如果 hypervisor 无法与 Trustzone 映射这些缓冲区，它将拒绝任何 FF-A 调用。此外，补丁还将错误映射的定义从 arm_ffa 驱动程序移动到 ffa 头文件，以便 hyp 代码可以使用。<br><br>**之前讨论要点**：<br>在历史讨论中，补丁经历了多个版本的修改。最新版本（v3）删除了一个映射补丁，并增加了确认和审查标签，同时调整了 RX 缓冲区的所有权释放逻辑。<br><br>**本周的新讨论与进展**：<br>本周的讨论主要集中在补丁的具体实现上。Sebastian Ene 提交了三个补丁，分别涉及使用静态初始化器替代版本锁的定义、将错误映射定义移动到头文件，以及引入释放 FF-A 调用以通知 Trustzone hypervisor 已完成数据复制。所有补丁均获得了相关开发者的认可和审查，显示出社区对该补丁的支持和积极反馈。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-18]</span> <span class="email-subject">[PATCH v3 0/3] KVM: arm64: Separate the hyp FF-A buffers init from
 the host</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sebastian Ene <span class="email-sender">&lt;sebastianene@google.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-18]</span> <span class="email-subject">[PATCH v3 1/3] KVM: arm64: Use the static initializer for the version lock</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sebastian Ene <span class="email-sender">&lt;sebastianene@google.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-18]</span> <span class="email-subject">[PATCH v3 2/3] firmware: arm_ffa: Move the ffa_to_linux definition to
 the ffa header</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sebastian Ene <span class="email-sender">&lt;sebastianene@google.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-18]</span> <span class="email-subject">[PATCH v3 3/3] KVM: arm64: Release the ownership of the hyp rx buffer
 to Trustzone</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sebastian Ene <span class="email-sender">&lt;sebastianene@google.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH 0/4] arm64: mitigate CVE-2024-7881 in the absence of firmware mitigation</h3>
                </div>

                <div class="thread-meta">
                    <span>4 messages</span>
                    <span>3 participants</span>
                    <span>Started: 2025-03-14</span>
                </div>

                <div class="ai-summary">
                    本邮件线程讨论了针对 CVE-2024-7881 漏洞的补丁系列，主要涉及 ARM64 架构在缺乏固件缓解措施时的应对方案。历史讨论中，Mark Rutland 提到该补丁系列已被排入待处理列表，但对其审查不多，Catalin Marinas 表达了对该系列的担忧，认为其可能与 KVM/arm64 树存在小冲突。<br><br>在本周的新讨论中，Catalin 再次表示不希望继续推进该补丁系列，建议将其撤回，理由是该补丁的处理方式可能会误导用户空间，导致对漏洞状态的错误理解。他指出，当前的补丁未能有效地向用户空间传达 KPTI 的启用状态，可能会给用户带来虚假的安全感。Oliver Upton 也支持这一观点，认为应将此视为 CSV3 实现的缺陷，而非全新的 CPU 漏洞，以避免假设最坏情况的问题。<br><br>最终，Catalin 确认已将该补丁系列撤回，讨论将继续进行，以寻求更合适的解决方案。整体来看，邮件讨论强调了对漏洞处理透明度的重要性，以及在补丁实施过程中需谨慎对待用户空间的反馈。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-03-14]</span> <span class="email-subject">Re: [PATCH 0/4] arm64: mitigate CVE-2024-7881 in the absence of firmware mitigation</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Catalin Marinas <span class="email-sender">&lt;catalin.marinas@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-17]</span> <span class="email-subject">Re: [PATCH 0/4] arm64: mitigate CVE-2024-7881 in the absence of
 firmware mitigation</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Will Deacon <span class="email-sender">&lt;will@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-17]</span> <span class="email-subject">Re: [PATCH 0/4] arm64: mitigate CVE-2024-7881 in the absence of
 firmware mitigation</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-18]</span> <span class="email-subject">Re: [PATCH 0/4] arm64: mitigate CVE-2024-7881 in the absence of
 firmware mitigation</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Catalin Marinas <span class="email-sender">&lt;catalin.marinas@arm.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH 0/2] KVM: arm64: A few trace additions</h3>
                </div>

                <div class="thread-meta">
                    <span>3 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-03-19</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主题是关于 KVM（Kernel-based Virtual Machine）在 arm64 架构下的跟踪功能增强，主要涉及两个补丁（patch）。<br><br>第一个补丁（PATCH 1/2）旨在增加对系统寄存器访问的跟踪，具体是记录对系统寄存器的读写操作。通过在 `perform_access` 函数中添加跟踪点，开发者希望能够更好地调试和分析虚拟机中的寄存器操作。<br><br>第二个补丁（PATCH 2/2）则是为了在处理 SMC（Secure Monitor Call）指令时，增加类似于 HVC（Hypervisor Call）的跟踪功能。该补丁复制了 HVC 的跟踪点到 SMC 处理程序中，以便能够追踪来自 HVC 和 SMC 的 SMCCC（SM Common Calling Convention）调用。<br><br>在本周的新讨论中，Akihiko Odaki 提交了这两个补丁，并附上了详细的代码更改说明。邮件中没有其他参与者的回复或评论，表明目前讨论仍在初步阶段，尚未形成共识或结论。整体来看，这些补丁的目的是为了提升 KVM 在 arm64 平台上的调试能力，帮助开发者更好地理解和优化虚拟化环境中的操作。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-19]</span> <span class="email-subject">[PATCH 0/2] KVM: arm64: A few trace additions</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Akihiko Odaki <span class="email-sender">&lt;akihiko.odaki@daynix.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-19]</span> <span class="email-subject">[PATCH 1/2] KVM: arm64: Trace values with kvm_sys_access</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Akihiko Odaki <span class="email-sender">&lt;akihiko.odaki@daynix.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-19]</span> <span class="email-subject">[PATCH 2/2] KVM: arm64: Trace SMC in a way similar to HVC</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Akihiko Odaki <span class="email-sender">&lt;akihiko.odaki@daynix.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH 6.13 0/8] KVM: arm64: Backport of SVE fixes to v6.13</h3>
                </div>

                <div class="thread-meta">
                    <span>3 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-03-12</span>
                </div>

                <div class="ai-summary">
                    本邮件线程讨论了针对 KVM（Kernel-based Virtual Machine）在 arm64 架构下的 SVE（Scalable Vector Extension）修复的回溯补丁，主要集中在 v6.13 版本的适配上。<br><br>**原始 patch/问题的内容**：<br>Mark Brown 提出了一个补丁系列，旨在将 Mark Rutland 最近针对 SVE 和 KVM 交互的修复回溯到 v6.13 版本。这些补丁涉及多个方面，包括在激活陷阱时计算 cptr_el2、无条件保存和刷新主机的 FPSIMD/SVE/SME 状态等。<br><br>**之前的讨论要点**：<br>在历史讨论中，补丁的具体内容被详细列出，涵盖了多个修复项。讨论中提到，主机的 SVE VL 可能与客机的最大 SVE VL 不同，尤其是在 VHE（Virtualization Host Extensions）主机模式下。这些修复旨在确保在不同的 KVM 模式下，状态的正确保存和恢复。<br><br>**本周的新讨论、进展或结论**：<br>在本周的讨论中，Mark Rutland 指出，之前提到的 kern_hyp_va() 的添加是不正确的，因为在此时 'host_vcpu' 已经被转换为 hyp VA。这一反馈表明了对补丁的进一步审查和修正需求，强调了在实现细节上的准确性。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-03-12]</span> <span class="email-subject">[PATCH 6.13 0/8] KVM: arm64: Backport of SVE fixes to v6.13</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-03-12]</span> <span class="email-subject">[PATCH 6.13 8/8] KVM: arm64: Eagerly switch ZCR_EL{1,2}</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-19]</span> <span class="email-subject">Re: [PATCH 6.13 8/8] KVM: arm64: Eagerly switch ZCR_EL{1,2}</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Rutland <span class="email-sender">&lt;mark.rutland@arm.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH] KVM: selftests: Fix a couple "prio" signedness bugs</h3>
                </div>

                <div class="thread-meta">
                    <span>2 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-03-21</span>
                </div>

                <div class="ai-summary">
                    本邮件线程讨论了一个针对 KVM 自测试的补丁，旨在修复与 "prio" 变量的符号性相关的错误。<br><br>1. **原始补丁内容**：补丁由 Dan Carpenter 提交，主要修改了 KVM 自测试中的 "prio" 变量类型，将其从 `uint32_t` 更改为 `int`，以确保在断言中 `GUEST_ASSERT(prio >= 0)` 的条件能够正确执行。该补丁修复了两个历史提交中引入的错误。<br><br>2. **之前讨论要点**：在历史讨论中没有具体的邮件记录，但可以推测出，之前的讨论可能集中在如何正确处理 GIC 优先级的类型和断言逻辑上。<br><br>3. **本周的新讨论与进展**：本周的讨论中，Marc Zyngier 对补丁提出了质疑。他认为将 "prio" 变量类型改为 `int` 是错误的，因为根据架构定义，GIC 优先级应为无符号的 8 位值。因此，他认为原测试中使用的类型过宽，而断言本身也没有意义。此讨论表明对补丁的方向存在分歧，可能需要进一步的澄清和调整。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-21]</span> <span class="email-subject">[PATCH] KVM: selftests: Fix a couple "prio" signedness bugs</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Dan Carpenter <span class="email-sender">&lt;dan.carpenter@linaro.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-21]</span> <span class="email-subject">Re: [PATCH] KVM: selftests: Fix a couple "prio" signedness bugs</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH] KVM: arm64: Tear down vGIC on failed vCPU creation</h3>
                </div>

                <div class="thread-meta">
                    <span>2 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-03-14</span>
                </div>

                <div class="ai-summary">
                    本邮件线程讨论了一个针对 KVM（Kernel-based Virtual Machine）在 ARM64 架构下的补丁，主题为“在 vCPU 创建失败时拆除 vGIC”。历史讨论中，Will Deacon 提出了一个补丁，指出在 `kvm_arch_vcpu_create()` 函数中，如果 vCPU 页面无法与虚拟机监控器共享，错误会被返回，但 vGIC vCPU 数据仍然保持初始化状态。这不仅会导致内存泄漏，还可能在处理 redistributor 设备时引发使用后释放（use-after-free）的问题。因此，他建议在出现错误时添加缺失的清理步骤，以确保 vGIC vCPU 结构被正确销毁。<br><br>在本周的新讨论中，Oliver Upton 回复表示已将该补丁应用到下一个版本中，并感谢 Will Deacon 的贡献。这表明该补丁得到了认可并将进入后续的开发流程。整体来看，此次讨论强调了在虚拟化环境中内存管理的重要性，确保在错误情况下的资源清理，以避免潜在的安全问题。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-03-14]</span> <span class="email-subject">[PATCH] KVM: arm64: Tear down vGIC on failed vCPU creation</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Will Deacon <span class="email-sender">&lt;will@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-18]</span> <span class="email-subject">Re: [PATCH] KVM: arm64: Tear down vGIC on failed vCPU creation</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH hyperv-next v6 11/11] PCI: hv: Get vPCI MSI IRQ domain
 from DeviceTree</h3>
                </div>

                <div class="thread-meta">
                    <span>2 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-03-15</span>
                </div>

                <div class="ai-summary">
                    本邮件线程讨论了一个针对 Linux 内核的补丁，主题为“[PATCH hyperv-next v6 11/11] PCI: hv: 从设备树获取 vPCI MSI IRQ 域”。该补丁旨在改进 Hyper-V 环境下的 PCI 设备管理，具体是从设备树中获取虚拟 PCI 中断请求（MSI）域。<br><br>在历史讨论中，Bjorn Helgaas 对该补丁表示认可，并提出了一些小的格式问题，指出参数缩进风格与文件中其他类似情况不一致，建议进行调整。Roman Kisel 是该补丁的提交者，之前的讨论主要集中在补丁的有效性和代码风格的细节上。<br><br>在本周的新讨论中，Roman Kisel 回复了 Bjorn Helgaas 的反馈，表示感谢并承诺将修复提到的空白问题，同时还会移除机器人检测到的未使用变量。这表明补丁在获得认可后，正在进行必要的修改以满足代码规范。<br><br>总体来看，该补丁得到了积极的反馈，并在持续优化中，预计将进一步改善 Linux 内核在 Hyper-V 环境下的性能和稳定性。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-03-15]</span> <span class="email-subject">Re: [PATCH hyperv-next v6 11/11] PCI: hv: Get vPCI MSI IRQ domain
 from DeviceTree</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Bjorn Helgaas <span class="email-sender">&lt;helgaas@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-17]</span> <span class="email-subject">Re: [PATCH hyperv-next v6 11/11] PCI: hv: Get vPCI MSI IRQ domain
 from DeviceTree</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Roman Kisel <span class="email-sender">&lt;romank@linux.microsoft.com&gt;</span></div>
                </div>
            </div>
        </div>

        <div class="category">
            <h2>RFC</h2>

            <div class="thread">
                <div class="thread-header">
                    <h3>[RFC kvmtool 0/9] arm: Drop support for 32-bit kvmtool</h3>
                </div>

                <div class="thread-meta">
                    <span>12 messages</span>
                    <span>4 participants</span>
                    <span>Started: 2025-03-14</span>
                </div>

                <div class="ai-summary">
                    本邮件线程讨论的主题是关于在 kvmtool 中移除对 32 位 ARM 的支持。Oliver Upton 提出了一个补丁集（RFC kvmtool 0/9），建议删除对 32 位 kvmtool 的支持，理由是自 Linux 5.4 版本后，32 位 KVM/arm 的支持已经不再活跃，且使用率极低。尽管如此，32 位客户机在 64 位 KVM 上仍然可以得到支持。<br><br>在历史讨论中，Oliver 强调了 32 位 KVM 的使用几乎已经消亡，且在 5.7 版本中已经停止对 32 位 ARM 内核的支持。参与者们普遍认为，移除 32 位支持是合理的，Marc Zyngier 甚至表示这一决定早该做出，因为维护死代码只会增加开发负担。<br><br>在本周的新讨论中，Alexandru Elisei 表示他将审查这些补丁，并提到自己从未使用过 32 位 kvmtool。Marc Zyngier 也表示支持这一变更，并指出用户可以继续使用旧版本的 kvmtool。Andre Przywara 进一步补充，考虑到 32 位主机支持的边缘化，移除这一功能是可以接受的。<br><br>此外，Alexandru 在尝试应用补丁时遇到了一些技术问题，主要是补丁无法正确应用于某些文件，显示出在删除文件时的错误。整体来看，参与者们对移除 32 位支持的补丁持积极态度，并开始进行代码审查和技术细节讨论。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-03-14]</span> <span class="email-subject">[RFC kvmtool 0/9] arm: Drop support for 32-bit kvmtool</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-03-14]</span> <span class="email-subject">[RFC kvmtool 1/9] Drop support for 32-bit arm</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-03-14]</span> <span class="email-subject">[RFC kvmtool 3/9] arm64: Combine kvm.c</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-03-14]</span> <span class="email-subject">[RFC kvmtool 9/9] arm64: Get rid of the 'arm-common' include directory</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-17]</span> <span class="email-subject">Re: [RFC kvmtool 0/9] arm: Drop support for 32-bit kvmtool</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Alexandru Elisei <span class="email-sender">&lt;alexandru.elisei@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-17]</span> <span class="email-subject">Re: [RFC kvmtool 0/9] arm: Drop support for 32-bit kvmtool</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-17]</span> <span class="email-subject">Re: [RFC kvmtool 0/9] arm: Drop support for 32-bit kvmtool</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-17]</span> <span class="email-subject">Re: [RFC kvmtool 0/9] arm: Drop support for 32-bit kvmtool</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-19]</span> <span class="email-subject">Re: [RFC kvmtool 0/9] arm: Drop support for 32-bit kvmtool</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Andre Przywara <span class="email-sender">&lt;andre.przywara@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-20]</span> <span class="email-subject">Re: [RFC kvmtool 1/9] Drop support for 32-bit arm</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Alexandru Elisei <span class="email-sender">&lt;alexandru.elisei@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-20]</span> <span class="email-subject">Re: [RFC kvmtool 3/9] arm64: Combine kvm.c</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Alexandru Elisei <span class="email-sender">&lt;alexandru.elisei@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-20]</span> <span class="email-subject">Re: [RFC kvmtool 9/9] arm64: Get rid of the 'arm-common' include
 directory</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Alexandru Elisei <span class="email-sender">&lt;alexandru.elisei@arm.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[RFC PATCH v3 0/5] iommu/arm-smmu-v3: Use pinned KVM VMID for stage 2</h3>
                </div>

                <div class="thread-meta">
                    <span>11 messages</span>
                    <span>3 participants</span>
                    <span>Started: 2025-03-19</span>
                </div>

                <div class="ai-summary">
                    本邮件线程讨论了一个名为“[RFC PATCH v3 0/5] iommu/arm-smmu-v3: 使用固定的 KVM VMID 进行二级阶段”的补丁系列，主要针对 ARM SMMU v3 的 IOMMU 驱动进行改进。<br><br>**原始补丁内容**：<br>补丁的核心是引入 KVM VMID 的固定分配，以确保在启用 BTM（广播 TLB 维护）时，SMMU 和 KVM 之间的 VMID 分配能够协调一致，避免因 TLB 无效化导致的错误。<br><br>**之前讨论要点**：<br>在之前的讨论中，补丁的设计考虑了 KVM 和 SMMU 之间的 VMID 关联，确保在 BTM 启用的情况下，CPU 的无效化操作不会影响到不相关的 SMMU TLB 条目。补丁还强调了在 SMMU 中使用 KVM VMID 的必要性，尤其是在嵌套翻译的场景下。<br><br>**本周新讨论与进展**：<br>本周的讨论中，Shameer Kolothum 提出了补丁的具体实现细节，包括去除了通用 KVM API，直接在 KVM ARM 中实现了固定 VMID 的获取和释放。同时，Jason Gunthorpe 对补丁进行了审查，并提出了关于 KVM 指针生命周期管理的建议，强调需要确保 KVM 引用计数在使用期间保持有效。此外，Shameer 还意识到需要对某些函数进行导出，以支持模块化构建。整体来看，本周的讨论集中在补丁的实现细节和潜在的生命周期问题上，推动了补丁的进一步完善。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-19]</span> <span class="email-subject">[RFC PATCH v3 0/5] iommu/arm-smmu-v3: Use pinned KVM VMID for stage 2</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Shameer Kolothum <span class="email-sender">&lt;shameerali.kolothum.thodi@huawei.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-19]</span> <span class="email-subject">[RFC PATCH v3 1/5] KVM: arm64: Introduce support to pin VMIDs</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Shameer Kolothum <span class="email-sender">&lt;shameerali.kolothum.thodi@huawei.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-19]</span> <span class="email-subject">[RFC PATCH v3 2/5] iommufd/device: Associate a kvm pointer to iommufd_device</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Shameer Kolothum <span class="email-sender">&lt;shameerali.kolothum.thodi@huawei.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-19]</span> <span class="email-subject">[RFC PATCH v3 3/5] iommu/arm-smmu-v3-iommufd: Pass in kvm pointer to viommu_alloc</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Shameer Kolothum <span class="email-sender">&lt;shameerali.kolothum.thodi@huawei.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-19]</span> <span class="email-subject">[RFC PATCH v3 4/5] iommu/arm-smmu-v3-iommufd: Use KVM VMID for s2 stage</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Shameer Kolothum <span class="email-sender">&lt;shameerali.kolothum.thodi@huawei.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-19]</span> <span class="email-subject">[RFC PATCH v3 5/5] iommu/arm-smmu-v3: Enable broadcast TLB maintenance</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Shameer Kolothum <span class="email-sender">&lt;shameerali.kolothum.thodi@huawei.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-19]</span> <span class="email-subject">Re: [RFC PATCH v3 2/5] iommufd/device: Associate a kvm pointer to
 iommufd_device</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Jason Gunthorpe <span class="email-sender">&lt;jgg@ziepe.ca&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-19]</span> <span class="email-subject">Re: [RFC PATCH v3 3/5] iommu/arm-smmu-v3-iommufd: Pass in kvm
 pointer to viommu_alloc</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Jason Gunthorpe <span class="email-sender">&lt;jgg@ziepe.ca&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-19]</span> <span class="email-subject">Re: [RFC PATCH v3 4/5] iommu/arm-smmu-v3-iommufd: Use KVM VMID for
 s2 stage</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Jason Gunthorpe <span class="email-sender">&lt;jgg@ziepe.ca&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-20]</span> <span class="email-subject">RE: [RFC PATCH v3 4/5] iommu/arm-smmu-v3-iommufd: Use KVM VMID for s2
 stage</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Shameerali Kolothum Thodi <span class="email-sender">&lt;shameerali.kolothum.thodi@huawei.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-20]</span> <span class="email-subject">Re: [RFC PATCH v3 4/5] iommu/arm-smmu-v3-iommufd: Use KVM VMID for
 s2 stage</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Jason Gunthorpe <span class="email-sender">&lt;jgg@ziepe.ca&gt;</span></div>
                </div>
            </div>
        </div>

        <div class="category">
            <h2>Bug Report</h2>

            <div class="thread">
                <div class="thread-header">
                    <h3>Fast model boot failure with Linux next-20250312</h3>
                </div>

                <div class="thread-meta">
                    <span>4 messages</span>
                    <span>3 participants</span>
                    <span>Started: 2025-03-19</span>
                </div>

                <div class="ai-summary">
                    本邮件线程讨论了在使用 Linux next-20250312 版本时，arm64 Fast Model (FVP-AEMvA) 出现的启动失败问题。<br><br>1. **原始问题**：Naresh Kamboju 报告称，从 Linux next-20250312 开始，FVP-AEMvA 模型在启动时出现回归，导致无法正常启动。通过回归分析，确认这是一个新问题，并且可以重现。该问题与一个特定的提交（[858c7bfcb35e1100b58bb63c9f562d86e09418d9]）有关，该提交启用了 EL2 对 FEAT_PMUv3p9 的要求。<br><br>2. **之前讨论要点**：在本周的讨论中，Mark Rutland 提出了需要确认正在使用的固件版本，以确保其支持新启用的架构特性。如果固件不支持这些特性，内核将在启动早期陷入 EL3 并导致崩溃。<br><br>3. **本周新讨论与进展**：Naresh 提供了当前使用的固件版本信息，并表示需要更新固件以支持新特性。Andre Przywara 进一步指出，当前使用的 v2.9.0 版本较旧，并分享了一个针对 Trusted Firmware-A 的补丁，以启用 PMUv3p9 特性。他建议在补丁的代码审查中留下评论，以加速上游过程。<br><br>总体而言，讨论集中在解决启动失败问题的固件更新和补丁开发上，参与者积极寻求解决方案。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-19]</span> <span class="email-subject">Fast model boot failure with Linux next-20250312</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Naresh Kamboju <span class="email-sender">&lt;naresh.kamboju@linaro.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-19]</span> <span class="email-subject">Re: Fast model boot failure with Linux next-20250312</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Rutland <span class="email-sender">&lt;mark.rutland@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-20]</span> <span class="email-subject">Re: Fast model boot failure with Linux next-20250312</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Naresh Kamboju <span class="email-sender">&lt;naresh.kamboju@linaro.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-21]</span> <span class="email-subject">Re: Fast model boot failure with Linux next-20250312</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Andre Przywara <span class="email-sender">&lt;andre.przywara@arm.com&gt;</span></div>
                </div>
            </div>
        </div>

        <div class="category">
            <h2>GIT PULL</h2>

            <div class="thread">
                <div class="thread-header">
                    <h3>[GIT PULL] KVM/arm64 updates for 6.15</h3>
                </div>

                <div class="thread-meta">
                    <span>5 messages</span>
                    <span>3 participants</span>
                    <span>Started: 2025-03-19</span>
                </div>

                <div class="ai-summary">
                    本邮件线程讨论了 KVM/arm64 在 6.15 版本中的更新，主要由 Oliver Upton 提出并包含多个补丁。<br><br>**原始补丁内容**：补丁主要包括对 KVM/arm64 的一系列更新，具体内容包括：支持 VGICv3 的嵌套虚拟化、去除嵌套虚拟化特性注册掩码、在 Apple 硅上模拟 FEAT_PMUv3、提供一个用于发现 CPU 实现的半虚拟接口、允许用户空间控制特定 CPU 实现的寄存器，以及 pKVM 更新等。<br><br>**之前讨论要点**：在之前的讨论中，补丁已在 -next 分支上进行了较长时间的测试，确保了其稳定性。Oliver 提到补丁是基于较新的 -rc 版本，以处理与 6.14 中修复的冲突。<br><br>**本周新讨论及进展**：本周的讨论主要集中在补丁的合并和修复上。Marc Zyngier 提出了一项补丁以解决合并时出现的构建错误，并得到了 Oliver 的确认和感谢。最终，Paolo Bonzini 确认已成功合并这些更新，整个过程顺利完成。<br><br>总的来说，本周的讨论主要是对补丁合并过程中的细节和修复的确认，确保了 KVM/arm64 的更新能够顺利进行。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-19]</span> <span class="email-subject">[GIT PULL] KVM/arm64 updates for 6.15</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-20]</span> <span class="email-subject">Re: [GIT PULL] KVM/arm64 updates for 6.15</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-20]</span> <span class="email-subject">Re: [GIT PULL] KVM/arm64 updates for 6.15</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-20]</span> <span class="email-subject">Re: [GIT PULL] KVM/arm64 updates for 6.15</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Paolo Bonzini <span class="email-sender">&lt;pbonzini@redhat.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-20]</span> <span class="email-subject">Re: [GIT PULL] KVM/arm64 updates for 6.15</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
                </div>
            </div>
        </div>

        <div class="category">
            <h2>Other</h2>

            <div class="thread">
                <div class="thread-header">
                    <h3>[kvm-unit-tests PATCH v2 0/5] arm64: Change the default QEMU CPU type to "max"</h3>
                </div>

                <div class="thread-meta">
                    <span>19 messages</span>
                    <span>4 participants</span>
                    <span>Started: 2025-03-14</span>
                </div>

                <div class="ai-summary">
                    本邮件线程讨论了针对 KVM 单元测试的一个补丁系列，主要目的是将 arm64 的默认 QEMU CPU 类型更改为 "max"。该补丁系列的 v2 版本包括五个补丁，旨在清理配置标志并改进用户体验。<br><br>在历史讨论中，补丁的背景介绍了 v1 版本的不足之处，并指出了需要将 `--processor` 和 `--qemu-cpu` 选项分开，以便分别配置编译和运行时的 CPU 类型。之前的讨论强调了当前 arm64 默认的 TCG CPU 为较旧的 Cortex-A57，更新为 "max" 可以更好地测试最新的功能。<br><br>在本周的新讨论中，参与者 Eric Auger 对多个补丁进行了审查并表示认可，指出了一些小的改进建议，如调整架构设置的清晰度和帮助文本的准确性。此外，Alexandru Elisei 提出了关于运行时选择 CPU 类型的合理性，强调了在不同测试环境下动态选择默认值的重要性。Andrew Jones 也提出了对补丁的进一步建议，确保默认值的选择与测试环境一致。<br><br>总体来看，本周的讨论集中在对补丁的审查和细节修改上，参与者们普遍支持补丁的方向，并提出了一些优化建议。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-03-14]</span> <span class="email-subject">[kvm-unit-tests PATCH v2 0/5] arm64: Change the default QEMU CPU type to "max"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Jean-Philippe Brucker <span class="email-sender">&lt;jean-philippe@linaro.org&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-03-14]</span> <span class="email-subject">[kvm-unit-tests PATCH v2 1/5] configure: arm64: Don't display 'aarch64' as the default architecture</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Jean-Philippe Brucker <span class="email-sender">&lt;jean-philippe@linaro.org&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-03-14]</span> <span class="email-subject">[kvm-unit-tests PATCH v2 2/5] configure: arm/arm64: Display the correct default processor</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Jean-Philippe Brucker <span class="email-sender">&lt;jean-philippe@linaro.org&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-03-14]</span> <span class="email-subject">[kvm-unit-tests PATCH v2 3/5] arm64: Implement the ./configure --processor option</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Jean-Philippe Brucker <span class="email-sender">&lt;jean-philippe@linaro.org&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-03-14]</span> <span class="email-subject">[kvm-unit-tests PATCH v2 4/5] configure: Add --qemu-cpu option</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Jean-Philippe Brucker <span class="email-sender">&lt;jean-philippe@linaro.org&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-03-14]</span> <span class="email-subject">[kvm-unit-tests PATCH v2 5/5] arm64: Use -cpu max as the default for TCG</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Jean-Philippe Brucker <span class="email-sender">&lt;jean-philippe@linaro.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-17]</span> <span class="email-subject">Re: [kvm-unit-tests PATCH v2 1/5] configure: arm64: Don't display
 'aarch64' as the default architecture</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Eric Auger <span class="email-sender">&lt;eric.auger@redhat.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-17]</span> <span class="email-subject">Re: [kvm-unit-tests PATCH v2 1/5] configure: arm64: Don't display
 'aarch64' as the default architecture</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Eric Auger <span class="email-sender">&lt;eric.auger@redhat.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-17]</span> <span class="email-subject">Re: [kvm-unit-tests PATCH v2 2/5] configure: arm/arm64: Display the
 correct default processor</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Eric Auger <span class="email-sender">&lt;eric.auger@redhat.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-17]</span> <span class="email-subject">Re: [kvm-unit-tests PATCH v2 3/5] arm64: Implement the ./configure
 --processor option</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Eric Auger <span class="email-sender">&lt;eric.auger@redhat.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-17]</span> <span class="email-subject">Re: [kvm-unit-tests PATCH v2 4/5] configure: Add --qemu-cpu option</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Eric Auger <span class="email-sender">&lt;eric.auger@redhat.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-17]</span> <span class="email-subject">Re: [kvm-unit-tests PATCH v2 5/5] arm64: Use -cpu max as the default
 for TCG</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Eric Auger <span class="email-sender">&lt;eric.auger@redhat.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-20]</span> <span class="email-subject">Re: [kvm-unit-tests PATCH v2 4/5] configure: Add --qemu-cpu option</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Alexandru Elisei <span class="email-sender">&lt;alexandru.elisei@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-22]</span> <span class="email-subject">Re: [kvm-unit-tests PATCH v2 1/5] configure: arm64: Don't display
 'aarch64' as the default architecture</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Andrew Jones <span class="email-sender">&lt;andrew.jones@linux.dev&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-22]</span> <span class="email-subject">Re: [kvm-unit-tests PATCH v2 2/5] configure: arm/arm64: Display the
 correct default processor</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Andrew Jones <span class="email-sender">&lt;andrew.jones@linux.dev&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-22]</span> <span class="email-subject">Re: [kvm-unit-tests PATCH v2 4/5] configure: Add --qemu-cpu option</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Andrew Jones <span class="email-sender">&lt;andrew.jones@linux.dev&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-22]</span> <span class="email-subject">Re: [kvm-unit-tests PATCH v2 4/5] configure: Add --qemu-cpu option</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Andrew Jones <span class="email-sender">&lt;andrew.jones@linux.dev&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-22]</span> <span class="email-subject">Re: [kvm-unit-tests PATCH v2 5/5] arm64: Use -cpu max as the default
 for TCG</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Andrew Jones <span class="email-sender">&lt;andrew.jones@linux.dev&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-03-23]</span> <span class="email-subject">Re: [kvm-unit-tests PATCH v2 4/5] configure: Add --qemu-cpu option</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Alexandru Elisei <span class="email-sender">&lt;alexandru.elisei@arm.com&gt;</span></div>
                </div>
            </div>
        </div>

    </div>
</body>
</html>
