<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KVMARM 邮件列表 AI 总结报告</title>
    <style>
        body {
            font-family: 'Courier New', 'Courier', monospace;
            line-height: 1.5;
            max-width: 1200px;
            margin: 0 auto;
            padding: 30px 40px;
            background-color: #ffffff;
            color: #222;
        }
        .container {
            background: #ffffff;
        }
        h1 {
            font-size: 2.2em;
            font-weight: bold;
            color: #000;
            margin-bottom: 0.3em;
            text-align: center;
            border-bottom: 2px solid #000;
            padding-bottom: 15px;
        }
        h2 {
            font-size: 1.6em;
            font-weight: bold;
            color: #000;
            margin-top: 2em;
            margin-bottom: 0.6em;
            border-bottom: 1px solid #333;
            padding-bottom: 8px;
        }
        h3 {
            font-size: 1.2em;
            font-weight: bold;
            color: #111;
            margin-top: 1.5em;
            margin-bottom: 0.5em;
        }
        h4 {
            font-size: 1.05em;
            font-weight: bold;
            color: #333;
            margin-top: 1.2em;
            margin-bottom: 0.5em;
        }
        .meta-info {
            background: #f9f9f9;
            border: 1px solid #ddd;
            padding: 15px 20px;
            margin: 20px 0;
            font-size: 0.95em;
            line-height: 1.6;
        }
        .meta-info p {
            margin: 6px 0;
            color: #444;
        }
        .meta-info strong {
            color: #000;
            font-weight: bold;
        }
        .stats {
            display: table;
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            border: 1px solid #000;
        }
        .stat-card {
            display: table-cell;
            border: 1px solid #000;
            padding: 12px 15px;
            text-align: center;
            background: #fafafa;
        }
        .stat-card h3 {
            margin: 0;
            color: #000;
            font-size: 1.8em;
            font-weight: bold;
            border: none;
            padding: 0;
        }
        .stat-card p {
            margin: 5px 0 0 0;
            color: #444;
            font-size: 0.9em;
            font-weight: normal;
        }
        .category {
            margin: 30px 0;
        }
        .thread {
            margin: 25px 0;
            padding: 15px;
            background: #fafafa;
            border: 1px solid #ccc;
            page-break-inside: avoid;
        }
        .thread-header {
            margin-bottom: 12px;
            border-bottom: 1px solid #ddd;
            padding-bottom: 10px;
        }
        .thread-header h3 {
            font-size: 1.15em;
            font-weight: bold;
            color: #000;
            margin: 0;
        }
        .thread-meta {
            display: block;
            margin: 8px 0 12px 0;
            font-size: 0.9em;
            color: #555;
            font-style: italic;
        }
        .thread-meta span {
            margin-right: 15px;
        }
        .ai-summary {
            background: #fff;
            border-left: 3px solid #666;
            padding: 12px 15px;
            margin: 15px 0;
            line-height: 1.6;
            color: #222;
            font-style: italic;
        }
        .email-list {
            background: #fff;
            border: 1px solid #ccc;
            padding: 10px 15px;
            font-family: 'Courier New', 'Consolas', monospace;
            font-size: 0.88em;
            line-height: 1.5;
            overflow-x: auto;
            margin: 10px 0;
        }
        .email-item {
            margin: 4px 0;
            padding: 2px 0;
            color: #222;
        }
        .email-item.historical {
            background: #f5f5f5;
            border-left: 3px solid #999;
            padding-left: 8px;
            opacity: 0.8;
        }
        .email-item.new {
            background: #fffef0;
            border-left: 3px solid #0066cc;
            padding-left: 8px;
        }
        .email-date {
            color: #0066cc;
            font-weight: bold;
        }
        .email-date.historical {
            color: #666;
        }
        .email-sender {
            color: #c30;
            font-weight: normal;
        }
        .email-subject {
            color: #000;
        }
        .historical-marker {
            color: #999;
            font-size: 0.85em;
            font-style: italic;
        }
        .new-marker {
            color: #0066cc;
            font-size: 0.85em;
            font-weight: bold;
        }
        .archive-link {
            display: inline-block;
            margin: 15px 0;
            padding: 10px 20px;
            background: #333;
            color: #fff;
            text-decoration: none;
            border: 2px solid #000;
            font-weight: bold;
            transition: all 0.2s;
        }
        .archive-link:hover {
            background: #000;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>KVMARM Mailing List Analysis Report</h1>

        <div class="meta-info">
            <p><strong>Generated:</strong> 2025-10-27 09:01</p>
            <p><strong>Time Period:</strong> 2025年2月 第6周 (02/03 - 02/09)</p>
            <p><strong>Total Messages:</strong> 217 | <strong>Total Threads:</strong> 27</p>
            <p style="text-align: center;"><a href="archive.html" class="archive-link">📚 历史归档 Archive</a></p>
        </div>


        <div class="category">
            <h2>PATCH</h2>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v19 00/11] arm64/perf: Enable branch stack sampling</h3>
                </div>

                <div class="thread-meta">
                    <span>31 messages</span>
                    <span>4 participants</span>
                    <span>Started: 2025-02-02</span>
                </div>

                <div class="ai-summary">
                    本邮件线程讨论了一个关于在 arm64 架构上启用分支堆栈采样的补丁系列（PATCH v19 00/11）。该补丁通过 ARMv9.2 架构特性“分支记录缓冲扩展”（BRBE）来实现对分支堆栈采样的支持。<br><br>**补丁内容**：<br>补丁系列的主要目标是为 arm64 的性能监控（perf）添加 BRBE 支持。补丁 1-7 主要是清理和准备工作，补丁 8-11 则实现了 BRBE 的实际支持。补丁 11 详细描述了 BRBE 的工作机制，包括如何记录分支信息、过滤条件和与 KVM 的兼容性。<br><br>**历史讨论要点**：<br>在之前的讨论中，补丁经历了多次重构，参与者对 BRBE 的实现细节进行了深入探讨，特别是如何处理分支记录的过滤和在虚拟化环境中的行为。<br><br>**本周新讨论与进展**：<br>本周的讨论集中在补丁的具体实现和代码审查上。参与者对补丁的各个部分进行了审阅，提出了改进建议，并确认了补丁的逻辑和功能。特别是对 BRBE 在 KVM 客户机中的行为进行了讨论，强调了在客户机中禁用分支生成的必要性。此外，参与者还讨论了如何处理不同类型的分支记录，以及在用户空间和内核空间之间的权限管理。<br><br>总体而言，该补丁系列旨在增强 arm64 架构的性能监控能力，特别是在处理分支事件时的灵活性和准确性。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-02]</span> <span class="email-subject">[PATCH v19 00/11] arm64/perf: Enable branch stack sampling</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Rob Herring (Arm) <span class="email-sender">&lt;robh@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-02]</span> <span class="email-subject">[PATCH v19 01/11] perf: arm_pmuv3: Call kvm_vcpu_pmu_resync_el0()
 before enabling counters</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Rob Herring (Arm) <span class="email-sender">&lt;robh@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-02]</span> <span class="email-subject">[PATCH v19 02/11] perf: arm_pmu: Don't disable counter in
 armpmu_add()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Rob Herring (Arm) <span class="email-sender">&lt;robh@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-02]</span> <span class="email-subject">[PATCH v19 03/11] perf: arm_pmuv3: Don't disable counter in
 armv8pmu_enable_event()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Rob Herring (Arm) <span class="email-sender">&lt;robh@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-02]</span> <span class="email-subject">[PATCH v19 04/11] perf: arm_v7_pmu: Drop obvious comments for
 enabling/disabling counters and interrupts</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Rob Herring (Arm) <span class="email-sender">&lt;robh@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-02]</span> <span class="email-subject">[PATCH v19 05/11] perf: arm_v7_pmu: Don't disable counter in
 (armv7|krait_|scorpion_)pmu_enable_event()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Rob Herring (Arm) <span class="email-sender">&lt;robh@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-02]</span> <span class="email-subject">[PATCH v19 06/11] perf: apple_m1: Don't disable counter in
 m1_pmu_enable_event()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Rob Herring (Arm) <span class="email-sender">&lt;robh@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-02]</span> <span class="email-subject">[PATCH v19 07/11] perf: arm_pmu: Move PMUv3-specific data</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Rob Herring (Arm) <span class="email-sender">&lt;robh@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-02]</span> <span class="email-subject">[PATCH v19 08/11] arm64/sysreg: Add BRBE registers and fields</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Rob Herring (Arm) <span class="email-sender">&lt;robh@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-02]</span> <span class="email-subject">[PATCH v19 09/11] arm64: Handle BRBE booting requirements</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Rob Herring (Arm) <span class="email-sender">&lt;robh@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-02]</span> <span class="email-subject">[PATCH v19 10/11] KVM: arm64: nvhe: Disable branch generation in
 nVHE guests</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Rob Herring (Arm) <span class="email-sender">&lt;robh@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-02]</span> <span class="email-subject">[PATCH v19 11/11] perf: arm_pmuv3: Add support for the Branch
 Record Buffer Extension (BRBE)</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Rob Herring (Arm) <span class="email-sender">&lt;robh@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-03]</span> <span class="email-subject">Re: [PATCH v19 01/11] perf: arm_pmuv3: Call kvm_vcpu_pmu_resync_el0()
 before enabling counters</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Anshuman Khandual <span class="email-sender">&lt;anshuman.khandual@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-03]</span> <span class="email-subject">Re: [PATCH v19 04/11] perf: arm_v7_pmu: Drop obvious comments for
 enabling/disabling counters and interrupts</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Anshuman Khandual <span class="email-sender">&lt;anshuman.khandual@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-03]</span> <span class="email-subject">Re: [PATCH v19 02/11] perf: arm_pmu: Don't disable counter in
 armpmu_add()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Anshuman Khandual <span class="email-sender">&lt;anshuman.khandual@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-03]</span> <span class="email-subject">Re: [PATCH v19 03/11] perf: arm_pmuv3: Don't disable counter in
 armv8pmu_enable_event()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Anshuman Khandual <span class="email-sender">&lt;anshuman.khandual@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-03]</span> <span class="email-subject">Re: [PATCH v19 05/11] perf: arm_v7_pmu: Don't disable counter in
 (armv7|krait_|scorpion_)pmu_enable_event()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Anshuman Khandual <span class="email-sender">&lt;anshuman.khandual@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-03]</span> <span class="email-subject">Re: [PATCH v19 06/11] perf: apple_m1: Don't disable counter in
 m1_pmu_enable_event()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Anshuman Khandual <span class="email-sender">&lt;anshuman.khandual@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-03]</span> <span class="email-subject">Re: [PATCH v19 07/11] perf: arm_pmu: Move PMUv3-specific data</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Anshuman Khandual <span class="email-sender">&lt;anshuman.khandual@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-03]</span> <span class="email-subject">Re: [PATCH v19 08/11] arm64/sysreg: Add BRBE registers and fields</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Anshuman Khandual <span class="email-sender">&lt;anshuman.khandual@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-03]</span> <span class="email-subject">Re: [PATCH v19 09/11] arm64: Handle BRBE booting requirements</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Anshuman Khandual <span class="email-sender">&lt;anshuman.khandual@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-03]</span> <span class="email-subject">Re: [PATCH v19 10/11] KVM: arm64: nvhe: Disable branch generation in
 nVHE guests</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Anshuman Khandual <span class="email-sender">&lt;anshuman.khandual@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-03]</span> <span class="email-subject">Re: [PATCH v19 10/11] KVM: arm64: nvhe: Disable branch generation in
 nVHE guests</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: James Clark <span class="email-sender">&lt;james.clark@linaro.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-03]</span> <span class="email-subject">Re: [PATCH v19 11/11] perf: arm_pmuv3: Add support for the Branch
 Record Buffer Extension (BRBE)</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: James Clark <span class="email-sender">&lt;james.clark@linaro.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-03]</span> <span class="email-subject">Re: [PATCH v19 11/11] perf: arm_pmuv3: Add support for the Branch
 Record Buffer Extension (BRBE)</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Rob Herring <span class="email-sender">&lt;robh@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-04]</span> <span class="email-subject">Re: [PATCH v19 11/11] perf: arm_pmuv3: Add support for the Branch
 Record Buffer Extension (BRBE)</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: James Clark <span class="email-sender">&lt;james.clark@linaro.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-04]</span> <span class="email-subject">Re: [PATCH v19 11/11] perf: arm_pmuv3: Add support for the Branch
 Record Buffer Extension (BRBE)</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Rob Herring <span class="email-sender">&lt;robh@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-05]</span> <span class="email-subject">Re: [PATCH v19 11/11] perf: arm_pmuv3: Add support for the Branch
 Record Buffer Extension (BRBE)</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: James Clark <span class="email-sender">&lt;james.clark@linaro.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-05]</span> <span class="email-subject">Re: [PATCH v19 11/11] perf: arm_pmuv3: Add support for the Branch
 Record Buffer Extension (BRBE)</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: James Clark <span class="email-sender">&lt;james.clark@linaro.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-05]</span> <span class="email-subject">Re: [PATCH v19 11/11] perf: arm_pmuv3: Add support for the Branch
 Record Buffer Extension (BRBE)</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Rob Herring <span class="email-sender">&lt;robh@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-06]</span> <span class="email-subject">Re: [PATCH v19 11/11] perf: arm_pmuv3: Add support for the Branch
 Record Buffer Extension (BRBE)</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: James Clark <span class="email-sender">&lt;james.clark@linaro.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v6 12/43] arm64: RME: Allocate/free RECs to match vCPUs</h3>
                </div>

                <div class="thread-meta">
                    <span>23 messages</span>
                    <span>4 participants</span>
                    <span>Started: 2025-01-29</span>
                </div>

                <div class="ai-summary">
                    在本次邮件讨论中，主要围绕着补丁「[PATCH v6 12/43] arm64: RME: Allocate/free RECs to match vCPUs」展开，该补丁旨在为虚拟CPU（vCPU）分配和释放与之匹配的资源控制器（REC）。历史讨论中，参与者对补丁的细节进行了深入探讨，提出了一些命名和逻辑上的改进建议。例如，Steven Price提到可以重命名函数以避免重复，并指出某些检查在没有RME的系统上是多余的。<br><br>在本周的新讨论中，Suzuki K Poulose 和 Steven Price 等人继续对补丁进行细化，讨论了如何更有效地传递kvm指针，以及在特定函数中使用kvm_is_realm()的必要性。此外，参与者们还对其他相关补丁进行了讨论，如对内存故障处理的逻辑进行了优化，确保在多个vCPU同时访问同一内存区域时的效率。<br><br>总体来看，本周的讨论集中在对补丁的细节优化和逻辑清晰化上，参与者们积极提出建议，推动补丁的完善与实施。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-01-29]</span> <span class="email-subject">Re: [PATCH v6 12/43] arm64: RME: Allocate/free RECs to match vCPUs</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Gavin Shan <span class="email-sender">&lt;gshan@redhat.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-01-30]</span> <span class="email-subject">Re: [PATCH v6 17/43] arm64: RME: Handle realm enter/exit</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Gavin Shan <span class="email-sender">&lt;gshan@redhat.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-01-30]</span> <span class="email-subject">Re: [PATCH v6 19/43] arm64: RME: Allow populating initial contents</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Gavin Shan <span class="email-sender">&lt;gshan@redhat.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-01-30]</span> <span class="email-subject">Re: [PATCH v6 20/43] arm64: RME: Runtime faulting of memory</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Gavin Shan <span class="email-sender">&lt;gshan@redhat.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-01-30]</span> <span class="email-subject">Re: [PATCH v6 12/43] arm64: RME: Allocate/free RECs to match vCPUs</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Steven Price <span class="email-sender">&lt;steven.price@arm.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-02-02]</span> <span class="email-subject">Re: [PATCH v6 22/43] KVM: arm64: Validate register access for a Realm
 VM</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Gavin Shan <span class="email-sender">&lt;gshan@redhat.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-02-02]</span> <span class="email-subject">Re: [PATCH v6 25/43] arm64: Don't expose stolen time for realm guests</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Gavin Shan <span class="email-sender">&lt;gshan@redhat.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-02-02]</span> <span class="email-subject">Re: [PATCH v6 28/43] arm64: rme: Allow checking SVE on VM instance</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Gavin Shan <span class="email-sender">&lt;gshan@redhat.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-02-02]</span> <span class="email-subject">Re: [PATCH v6 27/43] arm64: rme: support RSI_HOST_CALL</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Gavin Shan <span class="email-sender">&lt;gshan@redhat.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-02-02]</span> <span class="email-subject">Re: [PATCH v6 29/43] arm64: RME: Always use 4k pages for realms</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Gavin Shan <span class="email-sender">&lt;gshan@redhat.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-02-02]</span> <span class="email-subject">Re: [PATCH v6 30/43] arm64: rme: Prevent Device mappings for Realms</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Gavin Shan <span class="email-sender">&lt;gshan@redhat.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-03]</span> <span class="email-subject">Re: [PATCH v6 12/43] arm64: RME: Allocate/free RECs to match vCPUs</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Suzuki K Poulose <span class="email-sender">&lt;suzuki.poulose@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-03]</span> <span class="email-subject">Re: [PATCH v6 17/43] arm64: RME: Handle realm enter/exit</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Steven Price <span class="email-sender">&lt;steven.price@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-03]</span> <span class="email-subject">Re: [PATCH v6 12/43] arm64: RME: Allocate/free RECs to match vCPUs</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Steven Price <span class="email-sender">&lt;steven.price@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-03]</span> <span class="email-subject">Re: [PATCH v6 19/43] arm64: RME: Allow populating initial contents</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Steven Price <span class="email-sender">&lt;steven.price@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-06]</span> <span class="email-subject">Re: [PATCH v6 20/43] arm64: RME: Runtime faulting of memory</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Aneesh Kumar K.V <span class="email-sender">&lt;aneesh.kumar@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-07]</span> <span class="email-subject">Re: [PATCH v6 20/43] arm64: RME: Runtime faulting of memory</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Steven Price <span class="email-sender">&lt;steven.price@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-07]</span> <span class="email-subject">Re: [PATCH v6 22/43] KVM: arm64: Validate register access for a Realm
 VM</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Steven Price <span class="email-sender">&lt;steven.price@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-07]</span> <span class="email-subject">Re: [PATCH v6 25/43] arm64: Don't expose stolen time for realm guests</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Steven Price <span class="email-sender">&lt;steven.price@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-07]</span> <span class="email-subject">Re: [PATCH v6 27/43] arm64: rme: support RSI_HOST_CALL</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Steven Price <span class="email-sender">&lt;steven.price@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-07]</span> <span class="email-subject">Re: [PATCH v6 28/43] arm64: rme: Allow checking SVE on VM instance</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Steven Price <span class="email-sender">&lt;steven.price@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-07]</span> <span class="email-subject">Re: [PATCH v6 29/43] arm64: RME: Always use 4k pages for realms</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Steven Price <span class="email-sender">&lt;steven.price@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-07]</span> <span class="email-subject">Re: [PATCH v6 30/43] arm64: rme: Prevent Device mappings for Realms</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Steven Price <span class="email-sender">&lt;steven.price@arm.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH 00/15] arm: rework id register storage</h3>
                </div>

                <div class="thread-meta">
                    <span>22 messages</span>
                    <span>3 participants</span>
                    <span>Started: 2025-02-07</span>
                </div>

                <div class="ai-summary">
                    本邮件线程讨论了针对 ARM 架构的 ID 寄存器存储重构的补丁系列，主要集中在如何改进 CPU 模型的支持。<br><br>1. **原始补丁/问题内容**：<br>   本次补丁系列（[PATCH 00/15]）旨在重构 ARM 的 ID 寄存器存储，提供一个基础架构以便后续构建 CPU 模型支持。补丁包括对 ID 寄存器的存储方式进行修改，使用枚举类型进行索引，并更新生成寄存器描述的脚本。<br><br>2. **之前讨论要点**：<br>   之前的讨论主要围绕如何有效地管理和访问 ID 寄存器，参与者 Cornelia Huck 和 Eric Auger 提出了多项改进，包括推迟对 KVM 可写 ID 寄存器的处理、调整补丁的结构和更新生成脚本。<br><br>3. **本周的新讨论、进展或结论**：<br>   本周的讨论中，参与者们对补丁进行了细节审查，Richard Henderson 提出了对生成文件的管理和类型安全的建议，强调不应在头文件中放置数据，并质疑使用类型转换的做法。此外，他建议直接使用 `read_sys_reg64`，以避免潜在的错误。最后，Henderson 还对补丁的设计提出了更高效的接口建议，减少了对 ID 寄存器数组的线性搜索。<br><br>整体来看，邮件讨论集中在对 ARM ID 寄存器存储的重构及其实现细节的优化，参与者们积极提出改进意见，旨在提升代码的可维护性和性能。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-07]</span> <span class="email-subject">[PATCH 00/15] arm: rework id register storage</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Cornelia Huck <span class="email-sender">&lt;cohuck@redhat.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-07]</span> <span class="email-subject">[PATCH 01/15] arm/cpu: Add sysreg definitions in cpu-sysregs.h</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Cornelia Huck <span class="email-sender">&lt;cohuck@redhat.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-07]</span> <span class="email-subject">[PATCH 02/15] arm/kvm: add accessors for storing host features into idregs</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Cornelia Huck <span class="email-sender">&lt;cohuck@redhat.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-07]</span> <span class="email-subject">[PATCH 03/15] arm/cpu: Store aa64isar0 into the idregs arrays</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Cornelia Huck <span class="email-sender">&lt;cohuck@redhat.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-07]</span> <span class="email-subject">[PATCH 04/15] arm/cpu: Store aa64isar1/2 into the idregs array</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Cornelia Huck <span class="email-sender">&lt;cohuck@redhat.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-07]</span> <span class="email-subject">[PATCH 05/15] arm/cpu: Store aa64pfr0/1 into the idregs array</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Cornelia Huck <span class="email-sender">&lt;cohuck@redhat.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-07]</span> <span class="email-subject">[PATCH 06/15] arm/cpu: Store aa64mmfr0-3 into the idregs array</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Cornelia Huck <span class="email-sender">&lt;cohuck@redhat.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-07]</span> <span class="email-subject">[PATCH 07/15] arm/cpu: Store aa64dfr0/1 into the idregs array</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Cornelia Huck <span class="email-sender">&lt;cohuck@redhat.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-07]</span> <span class="email-subject">[PATCH 08/15] arm/cpu: Store aa64smfr0 into the idregs array</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Cornelia Huck <span class="email-sender">&lt;cohuck@redhat.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-07]</span> <span class="email-subject">[PATCH 09/15] arm/cpu: Store id_isar0-7 into the idregs array</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Cornelia Huck <span class="email-sender">&lt;cohuck@redhat.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-07]</span> <span class="email-subject">[PATCH 10/15] arm/cpu: Store id_mfr0/1 into the idregs array</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Cornelia Huck <span class="email-sender">&lt;cohuck@redhat.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-07]</span> <span class="email-subject">[PATCH 11/15] arm/cpu: Store id_dfr0/1 into the idregs array</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Cornelia Huck <span class="email-sender">&lt;cohuck@redhat.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-07]</span> <span class="email-subject">[PATCH 12/15] arm/cpu: Store id_mmfr0-5 into the idregs array</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Cornelia Huck <span class="email-sender">&lt;cohuck@redhat.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-07]</span> <span class="email-subject">[PATCH 13/15] arm/cpu: Add infra to handle generated ID register definitions</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Cornelia Huck <span class="email-sender">&lt;cohuck@redhat.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-07]</span> <span class="email-subject">[PATCH 14/15] arm/cpu: Add sysreg generation scripts</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Cornelia Huck <span class="email-sender">&lt;cohuck@redhat.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-07]</span> <span class="email-subject">[PATCH 15/15] arm/cpu: Add generated files</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Cornelia Huck <span class="email-sender">&lt;cohuck@redhat.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-07]</span> <span class="email-subject">Re: [PATCH 14/15] arm/cpu: Add sysreg generation scripts</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-07]</span> <span class="email-subject">Re: [PATCH 01/15] arm/cpu: Add sysreg definitions in cpu-sysregs.h</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Richard Henderson <span class="email-sender">&lt;richard.henderson@linaro.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-07]</span> <span class="email-subject">Re: [PATCH 02/15] arm/kvm: add accessors for storing host features
 into idregs</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Richard Henderson <span class="email-sender">&lt;richard.henderson@linaro.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-07]</span> <span class="email-subject">Re: [PATCH 03/15] arm/cpu: Store aa64isar0 into the idregs arrays</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Richard Henderson <span class="email-sender">&lt;richard.henderson@linaro.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-07]</span> <span class="email-subject">Re: [PATCH 02/15] arm/kvm: add accessors for storing host features
 into idregs</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Richard Henderson <span class="email-sender">&lt;richard.henderson@linaro.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-07]</span> <span class="email-subject">Re: [PATCH 15/15] arm/cpu: Add generated files</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Richard Henderson <span class="email-sender">&lt;richard.henderson@linaro.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH 0/3] KVM/arm64: timer fixes for 6.14</h3>
                </div>

                <div class="thread-meta">
                    <span>18 messages</span>
                    <span>4 participants</span>
                    <span>Started: 2025-01-28</span>
                </div>

                <div class="ai-summary">
                    本邮件线程讨论了针对 KVM/arm64 的定时器修复补丁，旨在解决在 6.14 版本中发现的几个问题。<br><br>1. **原始补丁内容**：Marc Zyngier 提出的补丁系列包含三个主要修复，分别是：确保在所有情况下正确地激活后台定时器、避免在 EL2 状态中错误地覆盖 EL1 状态，以及简化 NV 定时器的初始化过程。这些问题主要影响了虚拟化环境中的定时器操作，可能导致系统不稳定。<br><br>2. **之前讨论要点**：在历史讨论中，Marc 提到当前的 NV 定时器代码存在明显的缺陷，尤其是在处理 EL1 定时器仿真时的错误。补丁的目的是修复这些问题，以提高系统的稳定性和性能。<br><br>3. **本周的新讨论与进展**：本周的讨论中，Dmytro Terletskyi 和 Alexander Potapenko 对每个补丁进行了测试并确认其有效性，均表示“测试通过”。此外，Marc 提出了针对 vgic 的一系列新补丁，旨在解决 vgic 在并发情况下的稳定性问题。讨论中提到可能需要对 vgic 进行引用计数，以避免在虚拟 CPU 和 vgic 之间的状态不一致问题。Oliver Upton 也参与了讨论，提出了对当前解决方案的改进建议。<br><br>整体来看，本周的讨论集中在对补丁的测试反馈和对 vgic 稳定性问题的深入探讨上，显示出社区对提高 KVM/arm64 的可靠性和性能的持续关注。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-01-28]</span> <span class="email-subject">[PATCH 0/3] KVM/arm64: timer fixes for 6.14</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-01-28]</span> <span class="email-subject">[PATCH 1/3] KVM: arm64: timer: Always evaluate the need for a soft timer</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-01-28]</span> <span class="email-subject">[PATCH 2/3] KVM: arm64: timer: Correctly handle EL1 timer emulation when !FEAT_ECV</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-01-28]</span> <span class="email-subject">[PATCH 3/3] KVM: arm64: timer: Consolidate NV configuration of virtual timers</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-04]</span> <span class="email-subject">Re: [PATCH 1/3] KVM: arm64: timer: Always evaluate the need for a
 soft timer</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Dmytro Terletskyi <span class="email-sender">&lt;Dmytro_Terletskyi@epam.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-04]</span> <span class="email-subject">Re: [PATCH 2/3] KVM: arm64: timer: Correctly handle EL1 timer
 emulation when !FEAT_ECV</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Dmytro Terletskyi <span class="email-sender">&lt;Dmytro_Terletskyi@epam.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-04]</span> <span class="email-subject">Re: [PATCH 3/3] KVM: arm64: timer: Consolidate NV configuration of
 virtual timers</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Dmytro Terletskyi <span class="email-sender">&lt;Dmytro_Terletskyi@epam.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-06]</span> <span class="email-subject">[PATCH 0/3] KVM: arm64: Assorted vgic fixes for 6.14</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-06]</span> <span class="email-subject">[PATCH 1/3] KVM: arm64: timer: Drop warning on failed interrupt signalling</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-06]</span> <span class="email-subject">[PATCH 2/3] KVM: arm64: vgic: Check for unallocated PPI/SPI arrays</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-06]</span> <span class="email-subject">[PATCH 3/3] KVM: arm64: vgic: Gracefully handle resetting an unallocated interrupt</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-06]</span> <span class="email-subject">Re: [PATCH 1/3] KVM: arm64: timer: Drop warning on failed interrupt signalling</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Alexander Potapenko <span class="email-sender">&lt;glider@google.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-06]</span> <span class="email-subject">Re: [PATCH 2/3] KVM: arm64: vgic: Check for unallocated PPI/SPI arrays</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Alexander Potapenko <span class="email-sender">&lt;glider@google.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-06]</span> <span class="email-subject">Re: [PATCH 3/3] KVM: arm64: vgic: Gracefully handle resetting an
 unallocated interrupt</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Alexander Potapenko <span class="email-sender">&lt;glider@google.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-07]</span> <span class="email-subject">Re: [PATCH 0/3] KVM: arm64: Assorted vgic fixes for 6.14</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-07]</span> <span class="email-subject">Re: [PATCH 0/3] KVM: arm64: Assorted vgic fixes for 6.14</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-07]</span> <span class="email-subject">Re: [PATCH 0/3] KVM: arm64: Assorted vgic fixes for 6.14</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-08]</span> <span class="email-subject">Re: [PATCH 0/3] KVM: arm64: Assorted vgic fixes for 6.14</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v3 00/16] KVM: arm64: Add NV GICv3 support</h3>
                </div>

                <div class="thread-meta">
                    <span>17 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-02-06</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主题是针对 KVM (Kernel-based Virtual Machine) 在 arm64 架构上添加 NV (Nested Virtualization) GICv3 支持的补丁集。补丁的主要目的是增强 KVM 对 GICv3 的支持，特别是在嵌套虚拟化场景下的表现。<br><br>在历史讨论中，Marc Zyngier 提出了多个补丁，主要集中在 GICv3 的寄存器布局、初始化和中断处理等方面。补丁的关键改动包括修复默认中断 ID、在没有虚拟 GICv3 的硬件上失败 KVM 初始化、以及对 GICv3 EL2 寄存器的处理等。<br><br>本周的新讨论中，Marc Zyngier 继续更新补丁，主要包括：<br>1. **补丁 1-16**：涵盖了 GICv3 的寄存器布局、嵌套 GICv3 的仿真、维护中断的处理等多个方面。<br>2. **新进展**：补丁集中的新功能包括允许用户设置 VGIC 维护中断、在嵌套 ERET 时请求 vPE 门铃中断，以及在没有 GICv3 的情况下失败 KVM 初始化等。<br><br>整体来看，这些补丁旨在提升 KVM 在嵌套虚拟化环境下的稳定性和性能，确保 GICv3 的有效支持。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-06]</span> <span class="email-subject">[PATCH v3 00/16] KVM: arm64: Add NV GICv3 support</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-06]</span> <span class="email-subject">[PATCH v3 01/16] arm64: sysreg: Add layout for ICH_HCR_EL2</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-06]</span> <span class="email-subject">[PATCH v3 02/16] arm64: sysreg: Add layout for ICH_VTR_EL2</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-06]</span> <span class="email-subject">[PATCH v3 03/16] arm64: sysreg: Add layout for ICH_MISR_EL2</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-06]</span> <span class="email-subject">[PATCH v3 04/16] KVM: arm64: nv: Load timer before the GIC</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-06]</span> <span class="email-subject">[PATCH v3 05/16] KVM: arm64: nv: Add ICH_*_EL2 registers to vpcu_sysreg</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-06]</span> <span class="email-subject">[PATCH v3 06/16] KVM: arm64: nv: Plumb handling of GICv3 EL2 accesses</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-06]</span> <span class="email-subject">[PATCH v3 07/16] KVM: arm64: nv: Sanitise ICH_HCR_EL2 accesses</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-06]</span> <span class="email-subject">[PATCH v3 08/16] KVM: arm64: nv: Nested GICv3 emulation</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-06]</span> <span class="email-subject">[PATCH v3 09/16] KVM: arm64: nv: Handle L2->L1 transition on interrupt injection</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-06]</span> <span class="email-subject">[PATCH v3 10/16] KVM: arm64: nv: Add Maintenance Interrupt emulation</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-06]</span> <span class="email-subject">[PATCH v3 11/16] KVM: arm64: nv: Respect virtual HCR_EL2.TWx setting</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-06]</span> <span class="email-subject">[PATCH v3 12/16] KVM: arm64: nv: Request vPE doorbell upon nested ERET to L2</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-06]</span> <span class="email-subject">[PATCH v3 13/16] KVM: arm64: nv: Propagate used_lrs between L1 and L0 contexts</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-06]</span> <span class="email-subject">[PATCH v3 14/16] KVM: arm64: nv: Fold GICv3 host trapping requirements into guest setup</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-06]</span> <span class="email-subject">[PATCH v3 15/16] KVM: arm64: nv: Allow userland to set VGIC maintenance IRQ</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-06]</span> <span class="email-subject">[PATCH v3 16/16] KVM: arm64: nv: Fail KVM init if asking for NV without GICv3</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v2 00/14] KVM: arm64: Support FEAT_PMUv3 on Apple hardware</h3>
                </div>

                <div class="thread-meta">
                    <span>15 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-02-03</span>
                </div>

                <div class="ai-summary">
                    本邮件线程讨论了针对 Apple 硬件的 KVM（Kernel-based Virtual Machine）对 PMUv3（Performance Monitoring Unit v3）支持的补丁系列（PATCH v2 00/14）。该补丁旨在增强 KVM 在 Apple M1 和 M2 处理器上的性能监控能力，允许虚拟机（VM）使用 PMUv3 功能。<br><br>历史讨论中，补丁的初步版本（v1）已被提出，主要集中在如何在 Apple 硬件上实现 PMUv3 的仿真。补丁经过测试，确保在 M2 Pro Mac Mini 上与 Debian 和 Windows 客户机兼容。<br><br>本周的新讨论中，Oliver Upton 提交了多个补丁，主要包括：<br>1. **事件过滤和配置**：重构了事件选择和过滤的配置，以支持主机和客户机的事件过滤。<br>2. **PMUv3 事件映射**：增加了将 PMUv3 事件 ID 映射到硬件事件 ID 的辅助函数。<br>3. **PMCEID 计算**：实现了从 PMU 的事件位图计算 PMCEID，以便在虚拟化时提供更好的支持。<br>4. **支持 SW_INCR 事件**：确保无论硬件是否支持 PMUv3，SW_INCR 事件都始终可用。<br>5. **IMPDEF 处理**：在 Apple M 系列硬件上启用 IMPDEF PMUv3 traps，允许 KVM 更好地处理 PMUv3 sysreg 的异常。<br><br>这些补丁的测试均得到了 Janne Grunau 的支持，表明了社区对该功能增强的认可和期待。整体来看，本周的讨论和补丁推动了 KVM 在 Apple 硬件上的性能监控能力的提升。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-03]</span> <span class="email-subject">[PATCH v2 00/14] KVM: arm64: Support FEAT_PMUv3 on Apple hardware</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-03]</span> <span class="email-subject">[PATCH v2 01/14] drivers/perf: apple_m1: Refactor event select/filter configuration</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-03]</span> <span class="email-subject">[PATCH v2 02/14] drivers/perf: apple_m1: Support host/guest event filtering</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-03]</span> <span class="email-subject">[PATCH v2 03/14] drivers/perf: apple_m1: Provide helper for mapping PMUv3 events</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-03]</span> <span class="email-subject">[PATCH v2 04/14] KVM: arm64: Compute PMCEID from arm_pmu's event bitmaps</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-03]</span> <span class="email-subject">[PATCH v2 05/14] KVM: arm64: Always support SW_INCR PMU event</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-03]</span> <span class="email-subject">[PATCH v2 06/14] KVM: arm64: Remap PMUv3 events onto hardware</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-03]</span> <span class="email-subject">[PATCH v2 07/14] KVM: arm64: Use a cpucap to determine if system supports FEAT_PMUv3</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-03]</span> <span class="email-subject">[PATCH v2 08/14] KVM: arm64: Drop kvm_arm_pmu_available static key</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-03]</span> <span class="email-subject">[PATCH v2 09/14] KVM: arm64: Use guard() to cleanup usage of arm_pmus_lock</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-03]</span> <span class="email-subject">[PATCH v2 10/14] KVM: arm64: Move PMUVer filtering into KVM code</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-03]</span> <span class="email-subject">[PATCH v2 11/14] KVM: arm64: Compute synthetic sysreg ESR for Apple PMUv3 traps</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-03]</span> <span class="email-subject">[PATCH v2 12/14] KVM: arm64: Advertise PMUv3 if IMPDEF traps are present</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-03]</span> <span class="email-subject">[PATCH v2 13/14] KVM: arm64: Provide 1 event counter on IMPDEF hardware</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-03]</span> <span class="email-subject">[PATCH v2 14/14] arm64: Enable IMP DEF PMUv3 traps on Apple M*</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH 1/2] perf: arm_pmuv3: Remove cyclical dependency with kvm_host.h</h3>
                </div>

                <div class="thread-meta">
                    <span>11 messages</span>
                    <span>4 participants</span>
                    <span>Started: 2025-02-04</span>
                </div>

                <div class="ai-summary">
                    本邮件线程讨论了与 ARM PMU 和 KVM 相关的两个补丁（patch），主要集中在消除循环依赖和改善代码结构。<br><br>1. **原始补丁内容**：<br>   - 第一个补丁（PATCH 1/2）旨在消除 `kvm_host.h` 和 `arm_pmuv3.h` 之间的循环依赖。由于 `kvm_host.h` 包含了 `arm_pmuv3.h`，而后者又反过来依赖于前者，导致编译时出现混乱。补丁通过将 `kvm_host.h` 的部分功能移至 `arm_pmuv3.h` 来打破这一循环。<br><br>2. **之前讨论要点**：<br>   - 参与者对补丁的必要性表示支持，认为消除循环依赖是合理的。然而，有人提出不应将 KVM 相关的函数移至非 KVM 头文件中，建议为 KVM 和 PMU 之间的接口创建单独的头文件，以便于未来扩展。<br><br>3. **本周的新讨论与进展**：<br>   - 本周的讨论中，补丁得到了积极的反馈，参与者认为改善头文件的结构是有益的。Oliver Upton 认为虽然补丁的主要目的是消除循环依赖，但同时也改善了头文件的可用性。此外，Quentin Perret 提出了针对 pKVM 的两个补丁，旨在解决权限故障和 MMU 通知之间的竞争问题，这些补丁也得到了认可并已被应用。<br><br>总体来看，本周的讨论集中在代码结构优化和对 pKVM 的支持上，显示出社区对改进 ARM PMU 和 KVM 相关代码的积极态度。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-04]</span> <span class="email-subject">[PATCH 1/2] perf: arm_pmuv3: Remove cyclical dependency with kvm_host.h</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Colton Lewis <span class="email-sender">&lt;coltonlewis@google.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-04]</span> <span class="email-subject">[PATCH 2/2] perf: arm_pmuv3: Uninvert dependency between {asm,perf}/arm_pmuv3.h</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Colton Lewis <span class="email-sender">&lt;coltonlewis@google.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-04]</span> <span class="email-subject">Re: [PATCH 1/2] perf: arm_pmuv3: Remove cyclical dependency with
 kvm_host.h</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-05]</span> <span class="email-subject">Re: [PATCH 2/2] perf: arm_pmuv3: Uninvert dependency between
 {asm,perf}/arm_pmuv3.h</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-05]</span> <span class="email-subject">Re: [PATCH 1/2] perf: arm_pmuv3: Remove cyclical dependency with kvm_host.h</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Colton Lewis <span class="email-sender">&lt;coltonlewis@google.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-05]</span> <span class="email-subject">Re: [PATCH 2/2] perf: arm_pmuv3: Uninvert dependency between {asm,perf}/arm_pmuv3.h</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Colton Lewis <span class="email-sender">&lt;coltonlewis@google.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-07]</span> <span class="email-subject">[PATCH 0/2] Fixes for pKVM NP-guest support</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Quentin Perret <span class="email-sender">&lt;qperret@google.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-07]</span> <span class="email-subject">[PATCH 1/2] KVM: arm64: Improve error handling from check_host_shared_guest()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Quentin Perret <span class="email-sender">&lt;qperret@google.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-07]</span> <span class="email-subject">[PATCH 2/2] KVM: arm64: Simplify np-guest hypercalls</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Quentin Perret <span class="email-sender">&lt;qperret@google.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-07]</span> <span class="email-subject">Re: [PATCH 0/2] Fixes for pKVM NP-guest support</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-09]</span> <span class="email-subject">Re: [PATCH 0/2] Fixes for pKVM NP-guest support</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v6 0/4] KVM: arm64: Errata management for VM Live migration</h3>
                </div>

                <div class="thread-meta">
                    <span>11 messages</span>
                    <span>4 participants</span>
                    <span>Started: 2025-02-05</span>
                </div>

                <div class="ai-summary">
                    本邮件线程讨论了针对 KVM（Kernel-based Virtual Machine）在 ARM64 平台上进行虚拟机实时迁移的错误管理的补丁集（PATCH v6 0/4）。该补丁集的主要目的是通过引入新的超调用（hypercall）来支持在迁移过程中处理与 CPU 相关的错误。<br><br>**原始补丁/问题内容**：<br>补丁集的核心在于通过超调用来检索目标 CPU 实现的信息，以便在虚拟机迁移时能够正确处理与 CPU MIDR/REVIDR 值相关的错误。这是因为在 ARM64 平台上，许多错误的解决方案依赖于这些值，而在不同平台间迁移时可能会出现不兼容的问题。<br><br>**之前讨论要点**：<br>在之前的讨论中，参与者们探讨了如何实现这些超调用以支持错误管理，并对补丁的不同版本进行了反馈和修改。补丁的演变过程包括对超调用的定义、版本匹配和错误处理的改进。<br><br>**本周的新讨论与进展**：<br>本周的讨论主要集中在补丁的具体实现和潜在问题上。参与者对补丁的有效性表示关注，尤其是在固件支持和跨平台迁移的上下文中。Catalin Marinas 和 Marc Zyngier 提出了对固件依赖性的担忧，指出如果固件不支持相应的错误处理，可能会导致迁移失败。此外，Oliver Upton 强调了超调用的用户空间控制的重要性，指出不能无条件地向用户空间暴露所有超调用。这些讨论表明，尽管补丁在技术上是一个进步，但在实际应用中仍需谨慎考虑固件和用户空间的交互。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-05]</span> <span class="email-subject">[PATCH v6 0/4] KVM: arm64: Errata management for VM Live migration</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Shameer Kolothum <span class="email-sender">&lt;shameerali.kolothum.thodi@huawei.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-05]</span> <span class="email-subject">[PATCH v6 1/4] arm64: Modify _midr_range() functions to read MIDR/REVIDR internally</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Shameer Kolothum <span class="email-sender">&lt;shameerali.kolothum.thodi@huawei.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-05]</span> <span class="email-subject">[PATCH v6 2/4] KVM: arm64: Introduce hypercall support for retrieving target implementations</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Shameer Kolothum <span class="email-sender">&lt;shameerali.kolothum.thodi@huawei.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-05]</span> <span class="email-subject">[PATCH v6 3/4] KVM: arm64: Report all the KVM/arm64-specific hypercalls</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Shameer Kolothum <span class="email-sender">&lt;shameerali.kolothum.thodi@huawei.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-05]</span> <span class="email-subject">[PATCH v6 4/4] arm64: paravirt: Enable errata based on implementation CPUs</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Shameer Kolothum <span class="email-sender">&lt;shameerali.kolothum.thodi@huawei.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-07]</span> <span class="email-subject">Re: [PATCH v6 4/4] arm64: paravirt: Enable errata based on
 implementation CPUs</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Catalin Marinas <span class="email-sender">&lt;catalin.marinas@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-07]</span> <span class="email-subject">Re: [PATCH v6 4/4] arm64: paravirt: Enable errata based on implementation CPUs</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-07]</span> <span class="email-subject">Re: [PATCH v6 4/4] arm64: paravirt: Enable errata based on
 implementation CPUs</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Catalin Marinas <span class="email-sender">&lt;catalin.marinas@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-07]</span> <span class="email-subject">Re: [PATCH v6 4/4] arm64: paravirt: Enable errata based on implementation CPUs</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-07]</span> <span class="email-subject">Re: [PATCH v6 3/4] KVM: arm64: Report all the KVM/arm64-specific
 hypercalls</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-07]</span> <span class="email-subject">Re: [PATCH v6 3/4] KVM: arm64: Report all the KVM/arm64-specific
 hypercalls</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v2 0/3] KVM/arm64: timer fixes for 6.14</h3>
                </div>

                <div class="thread-meta">
                    <span>8 messages</span>
                    <span>3 participants</span>
                    <span>Started: 2025-02-04</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主题是针对 KVM/arm64 的定时器修复，主要涉及三个补丁（PATCH v2 0/3），旨在解决定时器代码中的一些问题，以提高性能和稳定性。<br><br>1. **原始补丁内容**：补丁系列主要修复了 NV 定时器代码的几个关键问题，包括确保在所有情况下正确设置后台定时器、避免将 EL1 状态错误地写入 EL2 状态、以及简化模拟定时器的处理。<br><br>2. **之前讨论要点**：在之前的讨论中，Marc Zyngier 指出当前的定时器实现存在一些不理想之处，特别是在处理 EL1 和 EL2 定时器状态时的逻辑错误。参与者 Volodymyr Babchuk 和 Wei-Lin Chang 提出了具体的错误报告，促使对代码进行修正。<br><br>3. **本周的新讨论与进展**：本周的讨论中，Marc Zyngier 提交了三个补丁并详细说明了每个补丁的修复内容。Dmytro Terletskyi 对所有补丁进行了测试并确认其有效性，Oliver Upton 进行了代码审核。最终，Marc Zyngier 确认已将这些补丁应用到修复分支中，标志着这些问题的解决。<br><br>整体来看，此次讨论有效推动了 KVM/arm64 定时器代码的改进，确保了更好的性能和兼容性。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-04]</span> <span class="email-subject">[PATCH v2 0/3] KVM/arm64: timer fixes for 6.14</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-04]</span> <span class="email-subject">[PATCH v2 1/3] KVM: arm64: timer: Always evaluate the need for a soft timer</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-04]</span> <span class="email-subject">[PATCH v2 2/3] KVM: arm64: timer: Correctly handle EL1 timer emulation when !FEAT_ECV</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-04]</span> <span class="email-subject">[PATCH v2 3/3] KVM: arm64: timer: Don't adjust the EL2 virtual timer offset</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-04]</span> <span class="email-subject">Re: [PATCH v2 1/3] KVM: arm64: timer: Always evaluate the need for a
 soft timer</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Dmytro Terletskyi <span class="email-sender">&lt;Dmytro_Terletskyi@epam.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-04]</span> <span class="email-subject">Re: [PATCH v2 2/3] KVM: arm64: timer: Correctly handle EL1 timer
 emulation when !FEAT_ECV</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Dmytro Terletskyi <span class="email-sender">&lt;Dmytro_Terletskyi@epam.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-04]</span> <span class="email-subject">Re: [PATCH v2 0/3] KVM/arm64: timer fixes for 6.14</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-04]</span> <span class="email-subject">Re: [PATCH v2 0/3] KVM/arm64: timer fixes for 6.14</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH V2 0/7] arm64/boot: Enable EL2 requirements for FEAT_PMUv3p9</h3>
                </div>

                <div class="thread-meta">
                    <span>8 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-02-03</span>
                </div>

                <div class="ai-summary">
                    本邮件线程讨论的主题是针对 ARM64 架构的补丁系列，旨在为 FEAT_PMUv3p9 特性启用 EL2 的要求。该补丁系列包含七个补丁，主要涉及在 EL2 中实现细粒度的陷阱控制，以支持 PMICNTR_EL0、PMICFILTR_EL0 和 PMUACR_EL1 等寄存器的访问。<br><br>在历史讨论中，Anshuman Khandual 提到，之前的讨论中 Rob Herring 提到过 FEAT_FGT2 基于的陷阱控制需求，这些寄存器目前已在内核中使用。补丁系列基于 v6.14-rc1，并对工具系统寄存器进行了更新，确保与最新的 DDI0601 2024-12 定义保持一致。<br><br>本周的新讨论中，Anshuman Khandual 提交了补丁的 V2 版本，包含了对七个补丁的具体实现，逐步添加了 HDFGRTR2_EL2、HDFGWTR2_EL2、HFGITR2_EL2 和 HFGRTR2_EL2 等寄存器的字段定义。此外，补丁还增加了一个新的初始化函数 `__init_el2_fgt2()`，用于设置与 FEAT_FGT2 相关的寄存器，以确保在 EL2 中能够正确访问 PMU 寄存器。所有补丁均获得了相关人员的审核和测试，显示出积极的进展。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-03]</span> <span class="email-subject">[PATCH V2 0/7] arm64/boot: Enable EL2 requirements for FEAT_PMUv3p9</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Anshuman Khandual <span class="email-sender">&lt;anshuman.khandual@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-03]</span> <span class="email-subject">[PATCH V2 1/7] arm64/sysreg: Update register fields for ID_AA64MMFR0_EL1</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Anshuman Khandual <span class="email-sender">&lt;anshuman.khandual@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-03]</span> <span class="email-subject">[PATCH V2 2/7] arm64/sysreg: Add register fields for HDFGRTR2_EL2</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Anshuman Khandual <span class="email-sender">&lt;anshuman.khandual@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-03]</span> <span class="email-subject">[PATCH V2 3/7] arm64/sysreg: Add register fields for HDFGWTR2_EL2</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Anshuman Khandual <span class="email-sender">&lt;anshuman.khandual@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-03]</span> <span class="email-subject">[PATCH V2 4/7] arm64/sysreg: Add register fields for HFGITR2_EL2</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Anshuman Khandual <span class="email-sender">&lt;anshuman.khandual@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-03]</span> <span class="email-subject">[PATCH V2 5/7] arm64/sysreg: Add register fields for HFGRTR2_EL2</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Anshuman Khandual <span class="email-sender">&lt;anshuman.khandual@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-03]</span> <span class="email-subject">[PATCH V2 6/7] arm64/sysreg: Add register fields for HFGWTR2_EL2</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Anshuman Khandual <span class="email-sender">&lt;anshuman.khandual@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-03]</span> <span class="email-subject">[PATCH V2 7/7] arm64/boot: Enable EL2 requirements for FEAT_PMUv3p9</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Anshuman Khandual <span class="email-sender">&lt;anshuman.khandual@arm.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v5 0/4] KVM: arm64: Errata management for VM Live migration</h3>
                </div>

                <div class="thread-meta">
                    <span>5 messages</span>
                    <span>3 participants</span>
                    <span>Started: 2025-01-24</span>
                </div>

                <div class="ai-summary">
                    本邮件线程讨论了针对 KVM（内核虚拟机）在 ARM64 架构下的虚拟机实时迁移的错误管理（Errata management）相关的补丁（PATCH v5 0/4）。该补丁的主要内容包括：添加了一个超调用（hypercall）以检索支持的目标实现 CPU 的版本和数量，检查 KVM 超调用服务的可用性，以及对补丁 2 和 4 进行了小幅修改。<br><br>在之前的讨论中，Shameer Kolothum 提到他已根据 Marc 的意见对补丁进行了更新，并提供了 QEMU 的测试分支链接。讨论的重点在于如何处理 MIDR 和 REVIDR 寄存器的只读（RO）访问问题，Sebastian Ott 提出了在迁移过程中，若这些寄存器的状态发生变化，将会影响虚拟机的迁移能力。<br><br>在本周的新讨论中，Sebastian 和 Marc 继续探讨了如何处理这些寄存器的问题。Sebastian 表示希望能对这些寄存器的行为进行修改，而 Marc 则建议在保留当前行为的前提下，尽量消除剩余的不变寄存器，并指出不需要对 MIDR_EL1 进行陷阱处理。整体来看，讨论集中在如何在保持兼容性的同时，改进虚拟机迁移的可靠性。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-01-24]</span> <span class="email-subject">[PATCH v5 0/4] KVM: arm64: Errata management for VM Live migration</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Shameer Kolothum <span class="email-sender">&lt;shameerali.kolothum.thodi@huawei.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-04]</span> <span class="email-subject">Re: [PATCH v5 0/4] KVM: arm64: Errata management for VM Live
 migration</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sebastian Ott <span class="email-sender">&lt;sebott@redhat.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-04]</span> <span class="email-subject">Re: [PATCH v5 0/4] KVM: arm64: Errata management for VM Live migration</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-04]</span> <span class="email-subject">Re: [PATCH v5 0/4] KVM: arm64: Errata management for VM Live
 migration</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sebastian Ott <span class="email-sender">&lt;sebott@redhat.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-04]</span> <span class="email-subject">Re: [PATCH v5 0/4] KVM: arm64: Errata management for VM Live migration</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH] KVM: arm64: nv: Set ISTATUS for emulated timers, If timer expired</h3>
                </div>

                <div class="thread-meta">
                    <span>4 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-02-07</span>
                </div>

                <div class="ai-summary">
                    本邮件线程讨论了一个关于 KVM（Kernel-based Virtual Machine）在 arm64 架构下的补丁，主要内容是设置 ISTATUS 以处理模拟定时器的过期情况。补丁的目的是确保在虚拟机运行前，正确管理与 NV（Non-Volatile）相关的特性。<br><br>在之前的讨论中，参与者指出了在虚拟机迁移过程中可能出现的问题，特别是在特性集的限制和 ID 寄存器字段的处理上。Marc Zyngier 提到，修改不支持的特性字段可能导致恢复失败，因此需要重新思考如何管理这些字段。<br><br>本周的新讨论中，Oliver Upton 和 Marc Zyngier 继续探讨如何利用 vCPU 特性标志来描述 NV，并讨论了在初始化后，ID 寄存器应如何反映虚拟机实际支持的特性。Marc 强调，用户空间在 KVM_ARM_VCPU_INIT 后看到的 ID 寄存器必须准确描述将被尊重的特性集，避免在 KVM_RUN 时进行特性掩蔽，以确保用户空间能够正确保存和恢复状态。<br><br>总体而言，讨论集中在如何更好地管理虚拟机特性和确保用户空间的预期一致性上，特别是在 NV 支持的上下文中。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-07]</span> <span class="email-subject">Re: [PATCH] KVM: arm64: nv: Set ISTATUS for emulated timers, If timer expired</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-07]</span> <span class="email-subject">Re: [PATCH] KVM: arm64: nv: Set ISTATUS for emulated timers, If
 timer expired</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-07]</span> <span class="email-subject">Re: [PATCH] KVM: arm64: nv: Set ISTATUS for emulated timers, If timer expired</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-07]</span> <span class="email-subject">Re: [PATCH] KVM: arm64: nv: Set ISTATUS for emulated timers, If
 timer expired</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v4 09/18] KVM: arm64: Introduce __pkvm_vcpu_{load,put}()</h3>
                </div>

                <div class="thread-meta">
                    <span>4 messages</span>
                    <span>3 participants</span>
                    <span>Started: 2025-02-03</span>
                </div>

                <div class="ai-summary">
                    本邮件线程讨论了一个关于 KVM（Kernel-based Virtual Machine）在 arm64 架构下的补丁，具体是引入了 `__pkvm_vcpu_{load,put}()` 函数。该补丁的目的是改善 pKVM 模式下的虚拟 CPU 加载和卸载功能。<br><br>在之前的讨论中，参与者们提到当前主线版本在 LibreTech Le Potato 板上运行 `arch_timer_edge_cases` 自测时出现崩溃，经过二分查找，确定是由该补丁引起的内核恐慌。崩溃日志显示了具体的错误信息，表明系统在处理虚拟化时遇到了问题。<br><br>本周的新讨论中，Mark Brown 提到已经发布了修复补丁，但这将导致该机器停止在受保护模式下运行 KVM，尽管这本来就不是预期的功能。Oliver Upton 和 Quentin Perret 也参与了讨论，确认了修复的必要性，并指出之前的尝试并不完整。总体来看，当前的进展是针对崩溃问题的修复，但也伴随着对功能的限制。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-03]</span> <span class="email-subject">Re: [PATCH v4 09/18] KVM: arm64: Introduce __pkvm_vcpu_{load,put}()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-03]</span> <span class="email-subject">Re: [PATCH v4 09/18] KVM: arm64: Introduce __pkvm_vcpu_{load,put}()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-04]</span> <span class="email-subject">Re: [PATCH v4 09/18] KVM: arm64: Introduce __pkvm_vcpu_{load,put}()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-05]</span> <span class="email-subject">Re: [PATCH v4 09/18] KVM: arm64: Introduce __pkvm_vcpu_{load,put}()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Quentin Perret <span class="email-sender">&lt;qperret@google.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v2] KVM: arm64: Remove cyclical dependency in arm_pmuv3.h</h3>
                </div>

                <div class="thread-meta">
                    <span>3 messages</span>
                    <span>3 participants</span>
                    <span>Started: 2025-02-06</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主题是关于 KVM（Kernel-based Virtual Machine）在 arm64 架构下的一个补丁，旨在消除 `arm_pmuv3.h` 中的循环依赖问题。<br><br>**原始补丁内容**：<br>补丁的主要目的是解决 `asm/kvm_host.h` 和 `asm/arm_pmuv3.h` 之间的循环依赖。具体来说，`asm/kvm_host.h` 包含了 `asm/arm_pmu.h`，而后者又包含了 `perf/arm_pmuv3.h`，最终又回到 `asm/kvm_host.h`，导致编译时出现混乱。补丁通过创建一个新的头文件 `asm/kvm_pmu.h`，将必要的声明移入其中，从而打破了这一循环。<br><br>**之前的讨论要点**：<br>在之前的讨论中，Colton Lewis 提到，当前的循环依赖使得在 `arm_pmuv3.h` 中使用某些宏（如 `kvm_call_hyp*`）变得不可能，尽管相关的头文件已经被包含。Marc Zyngier 对此表示了不同意见，认为不应随意使用 `asm/kvm_host.h`，并质疑将 PMU 相关的内容分成两个头文件的合理性。<br><br>**本周的新讨论和进展**：<br>本周的讨论中，Colton Lewis 提交了补丁的第二版，强调通过新头文件的方式解决了循环依赖问题。然而，Marc Zyngier 对补丁的设计提出了质疑，要求提供更清晰的理由来解释各个文件的内容分配。此外，内核测试机器人报告了补丁在编译时出现的错误，提示需要进一步修正。整体来看，尽管补丁尝试解决问题，但仍需改进和澄清设计思路。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-06]</span> <span class="email-subject">[PATCH v2] KVM: arm64: Remove cyclical dependency in arm_pmuv3.h</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Colton Lewis <span class="email-sender">&lt;coltonlewis@google.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-06]</span> <span class="email-subject">Re: [PATCH v2] KVM: arm64: Remove cyclical dependency in arm_pmuv3.h</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-07]</span> <span class="email-subject">Re: [PATCH v2] KVM: arm64: Remove cyclical dependency in arm_pmuv3.h</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: kernel test robot <span class="email-sender">&lt;lkp@intel.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v1] arm64: head.S: Do not trap access to MPAMSM_EL1</h3>
                </div>

                <div class="thread-meta">
                    <span>3 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-02-05</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主题是关于一个针对 ARM64 架构的补丁，旨在防止对 MPAMSM_EL1 寄存器的访问被捕获。补丁的具体内容是确保在 MPAM2_EL2 的 Bit 50（EnMPAMSM）设置为 1，从而禁用对 MPAMSM_EL1 的捕获。<br><br>在之前的讨论中，参与者们提到 MPAM（内存性能监控架构）在内核中的支持尚未完全实现，因此对 MPAMSM_EL1 寄存器的访问可能存在问题。Marc Zyngier 提出疑问，询问内核中是否有使用该寄存器的迹象，并指出在没有完整的 MPAM 支持框架的情况下，直接启用对该寄存器的访问可能会引发问题。<br><br>本周的讨论中，Fuad Tabba 对 Marc 的疑问进行了回应，确认内核中尚未实现 MPAM 支持，并表示这项补丁的工作可能更适合与 MPAM 支持的整体开发一起进行，暗示 James 可能正在进行相关工作。整体来看，本周的讨论主要集中在补丁的必要性和 MPAM 支持的现状上。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-05]</span> <span class="email-subject">[PATCH v1] arm64: head.S: Do not trap access to MPAMSM_EL1</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Fuad Tabba <span class="email-sender">&lt;tabba@google.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-05]</span> <span class="email-subject">Re: [PATCH v1] arm64: head.S: Do not trap access to MPAMSM_EL1</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-06]</span> <span class="email-subject">Re: [PATCH v1] arm64: head.S: Do not trap access to MPAMSM_EL1</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Fuad Tabba <span class="email-sender">&lt;tabba@google.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH V2] mm/ptdump: Drop GENERIC_PTDUMP</h3>
                </div>

                <div class="thread-meta">
                    <span>3 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-02-05</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主题是关于一个补丁（PATCH V2），其内容为删除 `GENERIC_PTDUMP` 配置选项。该补丁的主要目的是简化代码结构，因为 `GENERIC_PTDUMP` 并不保护任何代码，而只是用于平台对核心 `ptdump` 的订阅。补丁建议直接使用 `PTDUMP_CORE` 来替代 `GENERIC_PTDUMP`。<br><br>在之前的讨论中，参与者对 `GENERIC_PTDUMP` 和 `PTDUMP_CORE` 的关系进行了深入分析。Mark Rutland 指出，`GENERIC_PTDUMP` 代表架构使用通用的 `ptdump` 代码，而 `PTDUMP_CORE` 则表示实际构建核心 `ptdump` 代码。他认为，删除 `GENERIC_PTDUMP` 是合理的，因为各架构可以自行选择是否支持 `PTDUMP_CORE`。<br><br>本周的新讨论中，Anshuman Khandual 进一步澄清了补丁的意图，并提到可能需要引入 `ARCH_HAS_CORE_PTDUMP` 来更清晰地表示平台的选择。此外，他还指出了在某些配置中未确保平台已通过 `GENERIC_PTDUMP` 进行选择的问题，表示将会对此进行分离处理。<br><br>总体来看，本周的讨论围绕补丁的合理性和实现细节展开，参与者对如何优化配置选项提出了建设性的意见。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-05]</span> <span class="email-subject">[PATCH V2] mm/ptdump: Drop GENERIC_PTDUMP</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Anshuman Khandual <span class="email-sender">&lt;anshuman.khandual@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-05]</span> <span class="email-subject">Re: [PATCH V2] mm/ptdump: Drop GENERIC_PTDUMP</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Rutland <span class="email-sender">&lt;mark.rutland@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-06]</span> <span class="email-subject">Re: [PATCH V2] mm/ptdump: Drop GENERIC_PTDUMP</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Anshuman Khandual <span class="email-sender">&lt;anshuman.khandual@arm.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH] KVM: arm64: Fix nested S2 MMU structures reallocation</h3>
                </div>

                <div class="thread-meta">
                    <span>3 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-02-04</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主题是关于修复 KVM（Kernel-based Virtual Machine）在 ARM64 架构下嵌套 S2 MMU 结构重新分配时的问题。原始的补丁旨在解决在动态分配的 s2_mmu 结构数组中，如果初始化失败且发生了内存重新分配，可能导致 KVM 结构中仍保留旧指针的问题。补丁通过提前分配指针并在初始化时使用它来避免此问题。<br><br>在之前的讨论中，补丁的作者 Marc Zyngier 提到，修复了在内存重新分配过程中可能导致的指针失效问题，并确保在初始化失败时不会影响 KVM 结构的完整性。<br><br>在本周的新讨论中，Alexander Potapenko 对补丁进行了测试，并确认其有效性。Marc Zyngier 随后表示已将该补丁应用于修复列表，并感谢参与者的贡献。最终，这个补丁被正式提交并记录为修复版本，解决了嵌套 S2 MMU 结构的内存管理问题。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-04]</span> <span class="email-subject">[PATCH] KVM: arm64: Fix nested S2 MMU structures reallocation</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-04]</span> <span class="email-subject">Re: [PATCH] KVM: arm64: Fix nested S2 MMU structures reallocation</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Alexander Potapenko <span class="email-sender">&lt;glider@google.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-04]</span> <span class="email-subject">Re: [PATCH] KVM: arm64: Fix nested S2 MMU structures reallocation</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v5 3/5] arm64/hwcap: Describe 2024 dpISA extensions to
 userspace</h3>
                </div>

                <div class="thread-meta">
                    <span>2 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-02-07</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主题是关于一个针对 ARM64 架构的补丁（PATCH v5 3/5），旨在描述 2024 年 dpISA 扩展对用户空间的影响。补丁的主要内容是更新硬件能力标志（hwcap），以便在用户空间正确反映新特性。<br><br>在历史讨论中，补丁的背景信息并未详细提供，因此我们无法得知之前的具体讨论要点。然而，本周的讨论中，Mark Rutland 提到在使用 CONFIG_ARM64_SME 配置时，该补丁导致构建失败，原因是缺少一些必要的定义。他指出了多个未声明的标志和字段，表明补丁中对硬件能力的定义不完整。<br><br>本周的进展包括 Rutland 提到他已经为这些问题提交了修复，并且该修复已被 Will 合并。此外，他还确认了某些特性在架构更新中被移除，因此在补丁应用时未能捕捉到这些遗漏。Rutland 表示将进一步发送修复，以确保补丁的完整性和功能性。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-07]</span> <span class="email-subject">Re: [PATCH v5 3/5] arm64/hwcap: Describe 2024 dpISA extensions to
 userspace</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Rutland <span class="email-sender">&lt;mark.rutland@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-07]</span> <span class="email-subject">Re: [PATCH v5 3/5] arm64/hwcap: Describe 2024 dpISA extensions to
 userspace</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v2] KVM: arm64: Remove cyclical dependency in arm_pmuv3.h</h3>
                </div>

                <div class="thread-meta">
                    <span>2 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-02-06</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主题是关于 KVM（Kernel-based Virtual Machine）在 arm64 架构下的一个补丁，旨在消除 `arm_pmuv3.h` 中的循环依赖问题。<br><br>**原始补丁内容**：<br>补丁的目标是移除 `asm/kvm_host.h` 在 `asm/arm_pmuv3.h` 中的包含，以解决由于循环依赖导致的编译错误。当前的包含关系使得编译器在处理相关宏时产生混淆，导致开发者在调试时遇到困难。<br><br>**之前讨论要点**：<br>在之前的讨论中，参与者一致认为 `asm/kvm_host.h` 不应被包含在 `asm/arm_pmuv3.h` 中，且循环依赖是一个严重的问题。Colton Lewis 提出了一种解决方案，即通过将 `asm/kvm_host.h` 移出 `asm/arm_pmuv3.h` 来打破循环依赖，同时确保 `arm_pmuv3.c` 仍能访问所需的声明。<br><br>**本周的新讨论与进展**：<br>本周的讨论中，Marc Zyngier 对 Colton 的提议表示反对，认为应提供一个更全面的解决方案，而不是简单的修补。他建议将接口与内部实现的包含文件分开，并提出了自己的重构方案，强调需要清晰的定义和结构。Marc 还提供了一个新的代码重构链接，展示了他对问题的解决思路。<br><br>总体来看，本周的讨论集中在如何更有效地解决循环依赖问题上，参与者对补丁的方向和实现方式进行了深入的探讨。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-06]</span> <span class="email-subject">Re: [PATCH v2] KVM: arm64: Remove cyclical dependency in arm_pmuv3.h</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Colton Lewis <span class="email-sender">&lt;coltonlewis@google.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-07]</span> <span class="email-subject">Re: [PATCH v2] KVM: arm64: Remove cyclical dependency in arm_pmuv3.h</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH] KVM: arm64: Fail protected mode init if no vgic hardware is present</h3>
                </div>

                <div class="thread-meta">
                    <span>2 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-02-03</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主题是关于 KVM（Kernel-based Virtual Machine）在 arm64 架构下的一个补丁，旨在解决在没有 VGIC（虚拟通用中断控制器）硬件的情况下初始化保护模式时可能出现的问题。<br><br>**原始补丁内容**：该补丁的核心是，如果系统未实现 VGICv3，KVM 初始化将失败。因为保护模式假设至少存在 VGICv3，而在 GICv2 硬件上运行保护模式可能导致内核崩溃。<br><br>**之前讨论要点**：在历史讨论中，未提及具体的补丁内容，但可以推测出该问题的严重性，特别是在保护模式下，缺乏适当的 VGIC 硬件支持会导致系统不稳定。<br><br>**本周的新讨论与进展**：Oliver Upton 提出了补丁，并详细描述了问题及其解决方案。Marc Zyngier 随后确认已将该补丁应用于修复列表，并表示感谢。这表明该补丁得到了认可，并将被纳入后续的内核版本中。<br><br>总体而言，此次讨论强调了 KVM 在 arm64 架构下对 VGIC 硬件支持的重要性，并通过补丁解决了潜在的系统崩溃风险。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-03]</span> <span class="email-subject">[PATCH] KVM: arm64: Fail protected mode init if no vgic hardware is present</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-04]</span> <span class="email-subject">Re: [PATCH] KVM: arm64: Fail protected mode init if no vgic hardware is present</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v2] KVM: arm64: Remove cyclical dependency in arm_pmuv3.h</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-02-07</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主题是关于一个针对 KVM（Kernel-based Virtual Machine）在 arm64 架构下的补丁，旨在消除 `arm_pmuv3.h` 文件中的循环依赖。该补丁的主要内容是通过重新组织代码来解决依赖问题，从而提高代码的可维护性。<br><br>在历史讨论中，虽然没有具体的邮件记录，但可以推测该补丁的提出是基于对现有代码结构的审视，目的是为了优化和简化代码依赖关系。<br><br>在本周的新讨论中，参与者 Colton Lewis 对 Marc Zyngier 的观点表示赞同，并承认将代码移动并不复杂。他表示，虽然最初的意图是尽量减少改动，但他认识到需要更好地处理代码结构问题，并愿意学习如何更有效地进行代码修改。他最终同意删除 `kvm/arm_pmu.h`，以便更好地解决循环依赖的问题。<br><br>总的来说，本周的讨论表明参与者对补丁的理解和支持，强调了代码重构的重要性和必要性。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-07]</span> <span class="email-subject">Re: [PATCH v2] KVM: arm64: Remove cyclical dependency in arm_pmuv3.h</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Colton Lewis <span class="email-sender">&lt;coltonlewis@google.com&gt;</span></div>
                </div>
            </div>
        </div>

        <div class="category">
            <h2>RFC</h2>

            <div class="thread">
                <div class="thread-header">
                    <h3>[RFC PATCH 0/2] Add NV Selftest cases</h3>
                </div>

                <div class="thread-meta">
                    <span>9 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-02-06</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论主题为“添加 NV 自测试用例”，主要涉及对 KVM（Kernel-based Virtual Machine）在 ARM64 架构下的自测试代码的修改和扩展。<br><br>**原始 patch/问题内容**：<br>本次 patch 集包含两个部分：第一部分是添加一个用于在 vEL2（虚拟 EL2）上下文中运行的客人 Hypervisor 测试；第二部分是测试在启用 NV2 的情况下，访问 VNCR 映射寄存器的功能。<br><br>**之前讨论要点**：<br>在历史讨论中，参与者们探讨了如何在 KVM 中实现嵌套虚拟化，并讨论了测试用例的设计思路。Ganapatrao Kulkarni 提出了初步的 patch，旨在获取早期反馈并进一步明确需求。<br><br>**本周的新讨论、进展或结论**：<br>本周的讨论主要集中在对 patch 的具体实现和测试用例的有效性上。Marc Zyngier 提出了一些关键问题，强调测试的有效性应基于寄存器访问的架构规则，而不仅仅是能否访问寄存器。他建议在测试中考虑客人配置和预期结果，以确保测试的准确性。此外，Ganapatrao 表示将对现有测试进行修改，以支持在 vEL2 中运行，并计划在后续版本中发布更新。整体来看，讨论强调了对测试用例的严谨性和准确性的重视，表明 NV 功能尚未准备好合并。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-06]</span> <span class="email-subject">[RFC PATCH 0/2] Add NV Selftest cases</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Ganapatrao Kulkarni <span class="email-sender">&lt;gankulkarni@os.amperecomputing.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-06]</span> <span class="email-subject">[RFC PATCH 1/2] KVM: arm64: nv: selftests: Add guest hypervisor test</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Ganapatrao Kulkarni <span class="email-sender">&lt;gankulkarni@os.amperecomputing.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-06]</span> <span class="email-subject">[RFC PATCH 2/2] KVM: arm64: nv: selftests: Access VNCR mapped registers</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Ganapatrao Kulkarni <span class="email-sender">&lt;gankulkarni@os.amperecomputing.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-06]</span> <span class="email-subject">Re: [RFC PATCH 0/2] Add NV Selftest cases</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Ganapatrao Kulkarni <span class="email-sender">&lt;gankulkarni@os.amperecomputing.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-06]</span> <span class="email-subject">Re: [RFC PATCH 2/2] KVM: arm64: nv: selftests: Access VNCR mapped registers</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-06]</span> <span class="email-subject">Re: [RFC PATCH 1/2] KVM: arm64: nv: selftests: Add guest hypervisor test</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-07]</span> <span class="email-subject">Re: [RFC PATCH 1/2] KVM: arm64: nv: selftests: Add guest hypervisor
 test</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Ganapatrao Kulkarni <span class="email-sender">&lt;gankulkarni@os.amperecomputing.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-07]</span> <span class="email-subject">Re: [RFC PATCH 1/2] KVM: arm64: nv: selftests: Add guest hypervisor test</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-07]</span> <span class="email-subject">Re: [RFC PATCH 1/2] KVM: arm64: nv: selftests: Add guest hypervisor
 test</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Ganapatrao Kulkarni <span class="email-sender">&lt;gankulkarni@os.amperecomputing.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[RFC PATCH v2 0/4] PMU partitioning driver support</h3>
                </div>

                <div class="thread-meta">
                    <span>5 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-02-08</span>
                </div>

                <div class="ai-summary">
                    本邮件线程讨论了针对 ARM PMUv3 驱动的 PMU 分区支持的 RFC PATCH v2，共包含四个补丁。该补丁系列的主要目的是通过利用 MDCR_EL2.HPMN 寄存器字段，将 PMU 计数器分为两个独立的范围，从而允许 KVM 客户机直接访问部分 PMU 功能，降低性能监控的开销。<br><br>在历史讨论中，Colton Lewis 提到该功能的实现仍需进一步完善，因此目前以 RFC 形式发布。补丁的主要内容包括：<br>1. **补丁内容**：引入了一个模块参数 `reserved_host_counters`，用于设置 MDCR_EL2.HPMN 寄存器，以便将计数器分配给主机和客户机。补丁还确保驱动在 VHE 模式下编译，并对相关代码进行了重组和文档化。<br>2. **之前讨论要点**：讨论中提到，动态配置该参数在运行时可能存在风险，因为需要确保没有计数器在使用中，以安全地重新编程 HPMN。<br><br>在本周的新讨论中，Colton Lewis 提供了补丁的更新版本，主要包括：<br>- 对补丁进行了重组和修正，确保与 KVM 的兼容性。<br>- 讨论了如何在分区模式下管理计数器的访问权限，确保客户机只能访问其可用的计数器。<br>- 进一步完善了代码，增加了对分区状态的检查，以确保在分区模式下的正确行为。<br><br>总的来说，本周的讨论集中在补丁的细节优化和对 KVM 的适配上，推动了 PMU 分区功能的实现进程。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-08]</span> <span class="email-subject">[RFC PATCH v2 0/4] PMU partitioning driver support</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Colton Lewis <span class="email-sender">&lt;coltonlewis@google.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-08]</span> <span class="email-subject">[RFC PATCH v2 1/4] perf: arm_pmuv3: Generalize counter bitmasks</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Colton Lewis <span class="email-sender">&lt;coltonlewis@google.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-08]</span> <span class="email-subject">[RFC PATCH v2 2/4] perf: arm_pmuv3: Introduce module param to
 partition the PMU</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Colton Lewis <span class="email-sender">&lt;coltonlewis@google.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-08]</span> <span class="email-subject">[RFC PATCH v2 3/4] perf: arm_pmuv3: Keep out of guest counter partition</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Colton Lewis <span class="email-sender">&lt;coltonlewis@google.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-08]</span> <span class="email-subject">[RFC PATCH v2 4/4] KVM: arm64: Make guests see only counters they can access</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Colton Lewis <span class="email-sender">&lt;coltonlewis@google.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[RFC PATCH 1/4] perf: arm_pmuv3: Introduce module param to
 partition the PMU</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-02-03</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主题是关于在 ARM PMU（性能监控单元）中引入模块参数以实现 PMU 的分区。当前的补丁（RFC PATCH 1/4）旨在解决如何在 EL1（异常级别1）中有效利用 PMU 分区的问题。<br><br>在历史讨论中，尚未有相关的补丁或深入讨论，因此本邮件主要集中在本周的新进展上。Colton Lewis 提出，实施这一功能在 EL1 中比预期复杂，因为一旦 HPMN（硬件性能监控网络）生效，主机使用的上限计数器范围只能在 EL2 中写入。这意味着涉及上限计数器的任何寄存器操作都需要通过超调用（hypercall）来实现。为了避免这一复杂性，Colton 建议在主机中完全不使用此功能，而仅在加载客户机时启用。<br><br>此外，尽管存在 VHE（虚拟化高效）模式与 nVHE（非虚拟化高效）模式之间的功能差异，Oliver 认为在此情况下将 PMU 分区限制为仅适用于 VHE 模式可能是合理的。整体来看，本周的讨论主要集中在实现 PMU 分区的技术挑战及其在不同异常级别下的适用性。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-03]</span> <span class="email-subject">Re: [RFC PATCH 1/4] perf: arm_pmuv3: Introduce module param to
 partition the PMU</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Colton Lewis <span class="email-sender">&lt;coltonlewis@google.com&gt;</span></div>
                </div>
            </div>
        </div>

        <div class="category">
            <h2>Question</h2>

            <div class="thread">
                <div class="thread-header">
                    <h3>Question about lock_all_vcpus</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-02-06</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主题是关于 KVM 在 ARM 架构下的 `lock_all_vcpus` 函数的使用及其引发的问题。<br><br>1. **原始问题**：Maxim Levitsky 提出了一个关于 `lock_all_vcpus` 函数的疑问。该函数在 KVM 的 ARM 实现中使用，主要用于初始化，但在最近的 CI 测试中出现了错误，提示 "MAX_LOCK_DEPTH too low"，显示当前的最大锁深度为 48，而虚拟 CPU 的数量可能达到数百，导致锁的深度超出限制。<br><br>2. **之前的讨论要点**：虽然邮件中没有提供详细的历史讨论，但提到在 x86 架构中，类似的情况通过确保用户空间在创建或运行第一个虚拟 CPU 之前调用相关函数，从而避免了对 `lock_all_vcpus` 的需求。此外，x86 最近进行了许多清理工作，以确保用户空间不会在虚拟 CPU 运行后更改 CPUID。<br><br>3. **本周的新讨论与进展**：Maxim 询问是否有可能消除 `lock_all_vcpus` 的使用以避免此问题，或者是否可以将其排除在锁依赖验证器之外。他希望能得到关于此问题的进一步讨论和解决方案。<br><br>总体而言，本周的讨论集中在如何处理 `lock_all_vcpus` 函数引发的锁深度问题，以及在 ARM 和 x86 架构下的不同处理方式。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-06]</span> <span class="email-subject">Question about lock_all_vcpus</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Maxim Levitsky <span class="email-sender">&lt;mlevitsk@redhat.com&gt;</span></div>
                </div>
            </div>
        </div>

        <div class="category">
            <h2>GIT PULL</h2>

            <div class="thread">
                <div class="thread-header">
                    <h3>[GIT PULL] KVM/arm64 fixes for 6.14, take #1</h3>
                </div>

                <div class="thread-meta">
                    <span>2 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-02-04</span>
                </div>

                <div class="ai-summary">
                    本邮件主题为“KVM/arm64 fixes for 6.14, take #1”，主要讨论了针对 Linux 内核 6.14 版本的 KVM/arm64 修复补丁。<br><br>1. **原始 patch/问题的内容**：本次补丁集包含多个修复，主要针对在合并窗口中引入的代码所暴露的问题，包括定时器、调试和保护模式等方面的修复。补丁的详细信息已在邮件中提供。<br><br>2. **之前的讨论要点**：本邮件没有提供历史讨论的内容，因此无法总结之前的讨论要点。<br><br>3. **本周的新讨论、进展或结论**：本周的讨论中，Marc Zyngier 提交了 KVM/arm64 的修复补丁，涵盖了多个方面的改进，包括清理 BSS、调试寄存器的所有权传播、处理保护模式的初始化失败情况等。Paolo Bonzini 对补丁进行了确认并表示已完成处理，表明补丁将被合并。<br><br>总体来看，本周的讨论集中在对 KVM/arm64 修复补丁的提交和确认上，修复内容涉及多个关键功能的稳定性和兼容性。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-04]</span> <span class="email-subject">[GIT PULL] KVM/arm64 fixes for 6.14, take #1</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-06]</span> <span class="email-subject">Re: [GIT PULL] KVM/arm64 fixes for 6.14, take #1</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Paolo Bonzini <span class="email-sender">&lt;pbonzini@redhat.com&gt;</span></div>
                </div>
            </div>
        </div>

        <div class="category">
            <h2>Other</h2>

            <div class="thread">
                <div class="thread-header">
                    <h3>[kvm-unit-tests PATCH] arm: pmu: Actually use counter 0 in test_event_counter_config()</h3>
                </div>

                <div class="thread-meta">
                    <span>3 messages</span>
                    <span>3 participants</span>
                    <span>Started: 2025-02-03</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主题是关于 KVM 单元测试中 ARM PMU（性能监控单元）相关的一个补丁。补丁的主要内容是修正 `test_event_counter_config()` 函数中对事件计数器的使用，确保在测试中一致地使用计数器 0，而不是错误地使用计数器 1。这一问题在大多数实现中可能被忽视，因为通常有多个事件计数器，但在 Apple 硅的 KVM PMUv3 模拟中，仅能提供一个事件计数器。<br><br>在之前的讨论中，未提及具体问题，但补丁的背景是基于对现有代码的审查，发现了使用计数器 1 的错误。补丁通过修改代码，确保测试条件与硬件限制相符，从而使测试在 Apple 硅上能够成功通过。<br><br>本周的新进展包括补丁的审查和合并。Eric Auger 对补丁进行了审核并表示感谢，确认了修复的必要性。随后，Andrew Jones 宣布补丁已被合并。这表明该问题得到了及时的关注和解决，增强了 KVM 在特定硬件上的测试可靠性。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-03]</span> <span class="email-subject">[kvm-unit-tests PATCH] arm: pmu: Actually use counter 0 in test_event_counter_config()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-04]</span> <span class="email-subject">Re: [kvm-unit-tests PATCH] arm: pmu: Actually use counter 0 in
 test_event_counter_config()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Eric Auger <span class="email-sender">&lt;eric.auger@redhat.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-02-04]</span> <span class="email-subject">Re: [kvm-unit-tests PATCH] arm: pmu: Actually use counter 0 in
 test_event_counter_config()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Andrew Jones <span class="email-sender">&lt;andrew.jones@linux.dev&gt;</span></div>
                </div>
            </div>
        </div>

    </div>
</body>
</html>
