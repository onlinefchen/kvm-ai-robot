<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KVMARM 邮件列表 AI 总结报告</title>
    <style>
        body {
            font-family: 'Courier New', 'Courier', monospace;
            line-height: 1.5;
            max-width: 1200px;
            margin: 0 auto;
            padding: 30px 40px;
            background-color: #ffffff;
            color: #222;
        }
        .container {
            background: #ffffff;
        }
        h1 {
            font-size: 2.2em;
            font-weight: bold;
            color: #000;
            margin-bottom: 0.3em;
            text-align: center;
            border-bottom: 2px solid #000;
            padding-bottom: 15px;
        }
        h2 {
            font-size: 1.6em;
            font-weight: bold;
            color: #000;
            margin-top: 2em;
            margin-bottom: 0.6em;
            border-bottom: 1px solid #333;
            padding-bottom: 8px;
        }
        h3 {
            font-size: 1.2em;
            font-weight: bold;
            color: #111;
            margin-top: 1.5em;
            margin-bottom: 0.5em;
        }
        h4 {
            font-size: 1.05em;
            font-weight: bold;
            color: #333;
            margin-top: 1.2em;
            margin-bottom: 0.5em;
        }
        .meta-info {
            background: #f9f9f9;
            border: 1px solid #ddd;
            padding: 15px 20px;
            margin: 20px 0;
            font-size: 0.95em;
            line-height: 1.6;
        }
        .meta-info p {
            margin: 6px 0;
            color: #444;
        }
        .meta-info strong {
            color: #000;
            font-weight: bold;
        }
        .stats {
            display: table;
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            border: 1px solid #000;
        }
        .stat-card {
            display: table-cell;
            border: 1px solid #000;
            padding: 12px 15px;
            text-align: center;
            background: #fafafa;
        }
        .stat-card h3 {
            margin: 0;
            color: #000;
            font-size: 1.8em;
            font-weight: bold;
            border: none;
            padding: 0;
        }
        .stat-card p {
            margin: 5px 0 0 0;
            color: #444;
            font-size: 0.9em;
            font-weight: normal;
        }
        .category {
            margin: 30px 0;
        }
        .thread {
            margin: 25px 0;
            padding: 15px;
            background: #fafafa;
            border: 1px solid #ccc;
            page-break-inside: avoid;
        }
        .thread-header {
            margin-bottom: 12px;
            border-bottom: 1px solid #ddd;
            padding-bottom: 10px;
        }
        .thread-header h3 {
            font-size: 1.15em;
            font-weight: bold;
            color: #000;
            margin: 0;
        }
        .thread-meta {
            display: block;
            margin: 8px 0 12px 0;
            font-size: 0.9em;
            color: #555;
            font-style: italic;
        }
        .thread-meta span {
            margin-right: 15px;
        }
        .ai-summary {
            background: #fff;
            border-left: 3px solid #666;
            padding: 12px 15px;
            margin: 15px 0;
            line-height: 1.6;
            color: #222;
            font-style: italic;
        }
        .email-list {
            background: #fff;
            border: 1px solid #ccc;
            padding: 10px 15px;
            font-family: 'Courier New', 'Consolas', monospace;
            font-size: 0.88em;
            line-height: 1.5;
            overflow-x: auto;
            margin: 10px 0;
        }
        .email-item {
            margin: 4px 0;
            padding: 2px 0;
            color: #222;
        }
        .email-date {
            color: #0066cc;
            font-weight: bold;
        }
        .email-sender {
            color: #c30;
            font-weight: normal;
        }
        .email-subject {
            color: #000;
        }
        .archive-link {
            display: inline-block;
            margin: 15px 0;
            padding: 10px 20px;
            background: #333;
            color: #fff;
            text-decoration: none;
            border: 2px solid #000;
            font-weight: bold;
            transition: all 0.2s;
        }
        .archive-link:hover {
            background: #000;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>KVMARM Mailing List Analysis Report</h1>

        <div class="meta-info">
            <p><strong>Generated:</strong> 2025-10-21 20:10</p>
            <p><strong>Time Period:</strong> 2025年9月 第37周 (09/08 - 09/14)</p>
            <p><strong>Total Messages:</strong> 209 | <strong>Total Threads:</strong> 63</p>
            <p style="text-align: center;"><a href="archive.html" class="archive-link">📚 历史归档 Archive</a></p>
        </div>


        <div class="category">
            <h2>PATCH</h2>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v6 00/11] Direct Map Removal Support for guest_memfd</h3>
                </div>

                <div class="thread-meta">
                    <span>15 messages</span>
                    <span>3 participants</span>
                    <span>Started: 2025-09-12</span>
                </div>

                <div class="ai-summary">
                    该邮件线程讨论了针对 KVM 的 guest_memfd 功能的补丁系列，主要集中在支持从主机内核的直接映射中移除虚拟机来宾内存，以防止 Spectre 风格的攻击。补丁系列包括 11 个补丁，旨在增强 guest_memfd 的安全性，尤其是在处理敏感数据时。<br><br>关键技术要点包括：<br>1. **直接映射移除**：通过将 guest_memfd 的内存从主机的直接映射中移除，确保内核页表不包含指向来宾内存的条目，从而阻止潜在的投机性读取。<br>2. **新标志和功能**：引入了 `GUEST_MEMFD_FLAG_NO_DIRECT_MAP` 标志，允许用户在创建 guest_memfd 时指定不使用直接映射。此外，增加了对相关自测试的支持，以验证新功能的有效性。<br>3. **错误处理和优化**：修复了错误处理逻辑，并对相关函数进行了重命名和优化，以提高代码的可读性和维护性。<br><br>讨论的结论是，补丁得到了参与者的认可，尽管有一些小的改进建议，但整体设计和实现被认为是合理的。待解决的问题包括确保在直接映射移除的情况下，内存释放时能够正确恢复映射条目。整体来看，这一系列补丁增强了 KVM 的安全性，特别是在处理敏感内存时。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-12]</span> <span class="email-subject">[PATCH v6 00/11] Direct Map Removal Support for guest_memfd</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Roy, Patrick <span class="email-sender">&lt;roypat@amazon.co.uk&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-12]</span> <span class="email-subject">[PATCH v6 01/11] filemap: Pass address_space mapping to
 ->free_folio()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Roy, Patrick <span class="email-sender">&lt;roypat@amazon.co.uk&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-12]</span> <span class="email-subject">[PATCH v6 02/11] arch: export set_direct_map_valid_noflush to KVM
 module</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Roy, Patrick <span class="email-sender">&lt;roypat@amazon.co.uk&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-12]</span> <span class="email-subject">[PATCH v6 03/11] mm: introduce AS_NO_DIRECT_MAP</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Roy, Patrick <span class="email-sender">&lt;roypat@amazon.co.uk&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-12]</span> <span class="email-subject">[PATCH v6 04/11] KVM: guest_memfd: Add stub for
 kvm_arch_gmem_invalidate</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Roy, Patrick <span class="email-sender">&lt;roypat@amazon.co.uk&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-12]</span> <span class="email-subject">[PATCH v6 05/11] KVM: guest_memfd: Add flag to remove from direct map</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Roy, Patrick <span class="email-sender">&lt;roypat@amazon.co.uk&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-12]</span> <span class="email-subject">[PATCH v6 06/11] KVM: selftests: load elf via bounce buffer</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Roy, Patrick <span class="email-sender">&lt;roypat@amazon.co.uk&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-12]</span> <span class="email-subject">[PATCH v6 07/11] KVM: selftests: set KVM_MEM_GUEST_MEMFD in
 vm_mem_add() if guest_memfd != -1</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Roy, Patrick <span class="email-sender">&lt;roypat@amazon.co.uk&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-12]</span> <span class="email-subject">[PATCH v6 08/11] KVM: selftests: Add guest_memfd based
 vm_mem_backing_src_types</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Roy, Patrick <span class="email-sender">&lt;roypat@amazon.co.uk&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-12]</span> <span class="email-subject">[PATCH v6 09/11] KVM: selftests: stuff vm_mem_backing_src_type into
 vm_shape</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Roy, Patrick <span class="email-sender">&lt;roypat@amazon.co.uk&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-12]</span> <span class="email-subject">[PATCH v6 10/11] KVM: selftests: cover GUEST_MEMFD_FLAG_NO_DIRECT_MAP
 in existing selftests</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Roy, Patrick <span class="email-sender">&lt;roypat@amazon.co.uk&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-12]</span> <span class="email-subject">[PATCH v6 11/11] KVM: selftests: Test guest execution from direct map
 removed gmem</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Roy, Patrick <span class="email-sender">&lt;roypat@amazon.co.uk&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-12]</span> <span class="email-subject">Re: [PATCH v6 01/11] filemap: Pass address_space mapping to
 ->free_folio()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Pedro Falcato <span class="email-sender">&lt;pfalcato@suse.de&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-14]</span> <span class="email-subject">Re: [PATCH v6 03/11] mm: introduce AS_NO_DIRECT_MAP</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mike Rapoport <span class="email-sender">&lt;rppt@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-14]</span> <span class="email-subject">Re: [PATCH v6 05/11] KVM: guest_memfd: Add flag to remove from
 direct map</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mike Rapoport <span class="email-sender">&lt;rppt@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH 00/11] KVM: arm64: nv: Align feature limitations with current state of support</h3>
                </div>

                <div class="thread-meta">
                    <span>14 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-09-12</span>
                </div>

                <div class="ai-summary">
                    本邮件线程主要讨论了针对 KVM（Kernel-based Virtual Machine）在 arm64 架构下的非虚拟化（NV）虚拟机的特性限制的补丁系列。参与者 Oliver Upton 提出了 11 个补丁，旨在调整当前对 NV VM 支持的特性掩码，以更准确地反映实际支持的功能。<br><br>关键技术要点包括：<br>1. 将特性掩码转换为拒绝列表（denylist），明确列出不支持的特性，以提高文档的清晰度。<br>2. 修复了对 FEAT_DoubleLock 特性的错误声明，确保只在支持的硬件上显示相应特性。<br>3. 逐步解除对多个特性的掩蔽，例如 FEAT_DF2、FEAT_RASv1p1 和 FEAT_ECBHB，以便在 NV VM 中正确暴露这些功能。<br><br>讨论的主要结论是，随着 NV 支持的合并，调整特性限制的逻辑是合适的，未来应继续关注如何在不限制 MMU 和 TLB 行为的情况下扩展功能支持。此外，邮件中提到了一些待解决的问题，如如何处理未来可能出现的新特性及其对现有实现的影响。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-12]</span> <span class="email-subject">[PATCH 00/11] KVM: arm64: nv: Align feature limitations with current state of support</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-12]</span> <span class="email-subject">[PATCH 01/11] KVM: arm64: nv: Convert masks to denylists in limit_nv_id_reg()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-12]</span> <span class="email-subject">[PATCH 02/11] KVM: arm64: nv: Don't erroneously claim FEAT_DoubleLock for NV VMs</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-12]</span> <span class="email-subject">[PATCH 03/11] KVM: arm64: nv: Expose FEAT_DF2 to NV-enabled VMs</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-12]</span> <span class="email-subject">[PATCH 04/11] KVM: arm64: nv: Expose FEAT_RASv1p1 via RAS_frac</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-12]</span> <span class="email-subject">[PATCH 05/11] KVM: arm64: nv: Expose FEAT_ECBHB to NV-enabled VMs</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-12]</span> <span class="email-subject">[PATCH 06/11] KVM: arm64: nv: Expose FEAT_AFP to NV-enabled VMs</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-12]</span> <span class="email-subject">[PATCH 07/11] KVM: arm64: nv: Exclude guest's TWED configuration when TWE isn't set</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-12]</span> <span class="email-subject">[PATCH 08/11] KVM: arm64: nv: Expose FEAT_TWED to NV-enabled VMs</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-12]</span> <span class="email-subject">[PATCH 09/11] KVM: arm64: nv: Advertise FEAT_SpecSEI to NV-enabled VMs</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-12]</span> <span class="email-subject">[PATCH 10/11] KVM: arm64: nv: Advertise FEAT_TIDCP1 to NV-enabled VMs</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-12]</span> <span class="email-subject">[PATCH 11/11] KVM: arm64: nv: Expose up to FEAT_Debugv8p8 to NV-enabled VMs</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-12]</span> <span class="email-subject">Re: [PATCH 00/11] KVM: arm64: nv: Align feature limitations with current state of support</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-12]</span> <span class="email-subject">Re: [PATCH 00/11] KVM: arm64: nv: Align feature limitations with
 current state of support</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v16 0/6] KVM: arm64: Provide guest support for GCS</h3>
                </div>

                <div class="thread-meta">
                    <span>14 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-09-12</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主题是针对 KVM（内核虚拟机）在 arm64 架构下对受保护控制栈（GCS）功能的支持。GCS 旨在通过硬件保护返回地址栈，增强对返回导向编程（ROP）攻击的防护，并简化应用程序的调用栈收集。<br><br>关键技术要点包括：<br>1. GCS 通过维护一个受保护的栈，限制用户空间对 GCS 指针的直接写入，并在函数调用和返回时进行栈操作的验证。<br>2. 该补丁系列实现了对 KVM 客户端的 GCS 管理，包括 GCS 寄存器的上下文切换和异常处理。<br>3. 讨论中提到的主要变更包括对 GCS 指令的陷阱管理、在异常进入时设置 PSTATE.EXLOCK，以及在嵌套客户机中模拟 ERET 的行为。<br><br>讨论的结论和待解决的问题包括：<br>- 需要确保 GCS 寄存器的访问器正确实现，以避免在虚拟机上下文中出现错误。<br>- 参与者对异常返回的处理逻辑提出了质疑，认为现有代码可能无法正确处理异常路径，建议增加相应的测试以验证功能的完整性。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-12]</span> <span class="email-subject">[PATCH v16 0/6] KVM: arm64: Provide guest support for GCS</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-12]</span> <span class="email-subject">[PATCH v16 1/6] arm64/gcs: Ensure FGTs for EL1 GCS instructions
 are disabled</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-12]</span> <span class="email-subject">[PATCH v16 2/6] KVM: arm64: Manage GCS access and registers for
 guests</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-12]</span> <span class="email-subject">[PATCH v16 3/6] KVM: arm64: Set PSTATE.EXLOCK when entering an
 exception</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-12]</span> <span class="email-subject">[PATCH v16 4/6] KVM: arm64: Validate GCS exception lock when
 emulating ERET</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-12]</span> <span class="email-subject">[PATCH v16 5/6] KVM: arm64: Allow GCS to be enabled for guests</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-12]</span> <span class="email-subject">[PATCH v16 6/6] KVM: selftests: arm64: Add GCS registers to
 get-reg-list</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-12]</span> <span class="email-subject">Re: [PATCH v16 2/6] KVM: arm64: Manage GCS access and registers for guests</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-12]</span> <span class="email-subject">Re: [PATCH v16 4/6] KVM: arm64: Validate GCS exception lock when emulating ERET</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-12]</span> <span class="email-subject">Re: [PATCH v16 2/6] KVM: arm64: Manage GCS access and registers for
 guests</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-12]</span> <span class="email-subject">Re: [PATCH v16 2/6] KVM: arm64: Manage GCS access and registers for
 guests</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-12]</span> <span class="email-subject">Re: [PATCH v16 2/6] KVM: arm64: Manage GCS access and registers for guests</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-12]</span> <span class="email-subject">Re: [PATCH v16 5/6] KVM: arm64: Allow GCS to be enabled for guests</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-12]</span> <span class="email-subject">Re: [PATCH v16 6/6] KVM: selftests: arm64: Add GCS registers to get-reg-list</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v4 0/9] KVM: arm64: Reserve pKVM VM handle during initial VM setup</h3>
                </div>

                <div class="thread-meta">
                    <span>12 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-09-09</span>
                </div>

                <div class="ai-summary">
                    本邮件线程讨论了一个针对 KVM（Kernel-based Virtual Machine）在 ARM64 架构下的补丁系列，主要集中在 pKVM（Protected KVM）虚拟机句柄的初始化和管理上。补丁的核心内容是修复在虚拟机创建过程中，pKVM 句柄的分配时机不当的问题，导致在非保护模式下创建和销毁虚拟机时出现故障。<br><br>关键技术要点包括：<br>1. 将 pKVM 句柄的创建时机从虚拟机的第一次 vCPU 运行阶段提前到主机初始化虚拟机时，以确保在任何子系统触发 MMU 通知之前，句柄已有效分配。<br>2. 引入了新的超调用接口，分离了虚拟机句柄的预留和初始化过程，以便于更灵活的虚拟机生命周期管理。<br>3. 进行了代码重构和文档修正，以提高代码的可读性和维护性，消除潜在的混淆。<br><br>讨论的主要结论是，补丁经过测试后修复了之前版本中的问题，确保了 pKVM 的稳定性和正确性。参与者一致认为这些改动是必要的，并且在未来的开发中将继续关注 pKVM 的进一步优化和问题解决。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-09]</span> <span class="email-subject">[PATCH v4 0/9] KVM: arm64: Reserve pKVM VM handle during initial VM setup</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Fuad Tabba <span class="email-sender">&lt;tabba@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-09]</span> <span class="email-subject">[PATCH v4 1/9] KVM: arm64: Add build-time check for duplicate
 DECLARE_REG use</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Fuad Tabba <span class="email-sender">&lt;tabba@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-09]</span> <span class="email-subject">[PATCH v4 2/9] KVM: arm64: Rename pkvm.enabled to pkvm.is_protected</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Fuad Tabba <span class="email-sender">&lt;tabba@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-09]</span> <span class="email-subject">[PATCH v4 3/9] KVM: arm64: Rename 'host_kvm' to 'kvm' in pKVM host code</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Fuad Tabba <span class="email-sender">&lt;tabba@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-09]</span> <span class="email-subject">[PATCH v4 4/9] KVM: arm64: Clarify comments to distinguish pKVM mode
 from protected VMs</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Fuad Tabba <span class="email-sender">&lt;tabba@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-09]</span> <span class="email-subject">[PATCH v4 5/9] KVM: arm64: Decouple hyp VM creation state from its handle</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Fuad Tabba <span class="email-sender">&lt;tabba@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-09]</span> <span class="email-subject">[PATCH v4 6/9] KVM: arm64: Separate allocation and insertion of pKVM
 VM table entries</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Fuad Tabba <span class="email-sender">&lt;tabba@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-09]</span> <span class="email-subject">[PATCH v4 7/9] KVM: arm64: Consolidate pKVM hypervisor VM
 initialization logic</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Fuad Tabba <span class="email-sender">&lt;tabba@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-09]</span> <span class="email-subject">[PATCH v4 8/9] KVM: arm64: Introduce separate hypercalls for pKVM VM
 reservation and initialization</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Fuad Tabba <span class="email-sender">&lt;tabba@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-09]</span> <span class="email-subject">[PATCH v4 9/9] KVM: arm64: Reserve pKVM handle during pkvm_init_host_vm()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Fuad Tabba <span class="email-sender">&lt;tabba@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-09]</span> <span class="email-subject">Re: [PATCH v4 0/9] KVM: arm64: Reserve pKVM VM handle during initial
 VM setup</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-10]</span> <span class="email-subject">Re: [PATCH v4 0/9] KVM: arm64: Reserve pKVM VM handle during initial
 VM setup</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Fuad Tabba <span class="email-sender">&lt;tabba@google.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v2 0/3] KVM: arm64: make EL2 feature fields writable in ID_AA64MMFR1_EL1</h3>
                </div>

                <div class="thread-meta">
                    <span>12 messages</span>
                    <span>3 participants</span>
                    <span>Started: 2025-09-09</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主要技术问题是关于在 KVM 的 arm64 架构中，使 EL2 特性字段（VH、TWED、HCX）可由用户空间写入，以确保虚拟机在支持不同特性的主机之间的实时迁移兼容性。Jinqian Yang 提出了三个补丁，分别允许用户空间降级这三个特性。<br><br>关键技术要点包括：<br>1. 降级特性字段的实现，允许用户空间将这些字段的值从高降至低。<br>2. 讨论中提到的对特性依赖关系的担忧，尤其是 FEAT_HCX 的禁用可能影响其他约20个特性。<br>3. Oliver Upton 提出了对 VH 字段的非可写性进行澄清的建议，并指出在某些情况下，使字段可写可能导致用户 API 行为混乱。<br><br>讨论的主要结论是，尽管允许 HCX 和 TWED 字段的降级是有益的，特别是在虚拟机迁移时，但 VH 字段将保持非可写状态，以避免潜在的复杂性和不一致性。接下来的补丁版本（v3）将反映这些修改。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-09]</span> <span class="email-subject">[PATCH v2 0/3] KVM: arm64: make EL2 feature fields writable in ID_AA64MMFR1_EL1</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Jinqian Yang <span class="email-sender">&lt;yangjinqian1@huawei.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-09]</span> <span class="email-subject">[PATCH v2 1/3] KVM: arm64: Make ID_AA64MMFR1_EL1.HCX writable from userspace</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Jinqian Yang <span class="email-sender">&lt;yangjinqian1@huawei.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-09]</span> <span class="email-subject">[PATCH v2 2/3] KVM: arm64: Make ID_AA64MMFR1_EL1.TWED writable from userspace</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Jinqian Yang <span class="email-sender">&lt;yangjinqian1@huawei.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-09]</span> <span class="email-subject">[PATCH v2 3/3] KVM: arm64: Make ID_AA64MMFR1_EL1.VH writable from userspace</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Jinqian Yang <span class="email-sender">&lt;yangjinqian1@huawei.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-08]</span> <span class="email-subject">Re: [PATCH v2 3/3] KVM: arm64: Make ID_AA64MMFR1_EL1.VH writable
 from userspace</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-09]</span> <span class="email-subject">Re: [PATCH v2 0/3] KVM: arm64: make EL2 feature fields writable in
 ID_AA64MMFR1_EL1</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-09]</span> <span class="email-subject">Re: [PATCH v2 1/3] KVM: arm64: Make ID_AA64MMFR1_EL1.HCX writable
 from userspace</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-09]</span> <span class="email-subject">Re: [PATCH v2 1/3] KVM: arm64: Make ID_AA64MMFR1_EL1.HCX writable from userspace</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-09]</span> <span class="email-subject">Re: [PATCH v2 1/3] KVM: arm64: Make ID_AA64MMFR1_EL1.HCX writable
 from userspace</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-10]</span> <span class="email-subject">Re: [PATCH v2 3/3] KVM: arm64: Make ID_AA64MMFR1_EL1.VH writable from
 userspace</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Jinqian Yang <span class="email-sender">&lt;yangjinqian1@huawei.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-10]</span> <span class="email-subject">Re: [PATCH v2 0/3] KVM: arm64: make EL2 feature fields writable in
 ID_AA64MMFR1_EL1</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Jinqian Yang <span class="email-sender">&lt;yangjinqian1@huawei.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-10]</span> <span class="email-subject">Re: [PATCH v2 1/3] KVM: arm64: Make ID_AA64MMFR1_EL1.HCX writable
 from userspace</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Jinqian Yang <span class="email-sender">&lt;yangjinqian1@huawei.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH 0/6] KVM ARM64 pre_fault_memory</h3>
                </div>

                <div class="thread-meta">
                    <span>10 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-09-11</span>
                </div>

                <div class="ai-summary">
                    该邮件线程主要讨论了针对 KVM ARM64 的 KVM_PRE_FAULT_MEMORY 功能的补丁系列，旨在减少执行过程中的阶段2故障，特别是在内存密集型应用的后拷贝迁移场景中。补丁系列包含六个部分，主要内容包括：为 ARM64 添加预故障内存支持、修复自测中的未对齐 mmap 分配问题、以及更新测试以支持 ARM64。<br><br>关键技术要点包括：<br>1. 引入了新的页面遍历标志 KVM_PGTABLE_WALK_PRE_FAULT，用于标识预故障请求。<br>2. 在处理内存故障时，修改了 gmem_abort 和 user_mem_abort 函数，以便在预故障情况下跳过写和执行故障的判断。<br>3. 更新了自测代码，使其能够在不同的内存后备类型下运行，并确保 mmap 大小与底层页面大小对齐。<br><br>讨论的主要结论是，虽然补丁在功能上是合理的，但在处理 EAGAIN 错误时的重试机制引发了一些争议。参与者 Oliver Upton 提出了对现有错误处理逻辑的改进建议，认为应当简化预故障处理的复杂性，并建议更新用户API文档以避免误导。整体来看，补丁系列在功能实现上得到了认可，但在实现细节上仍需进一步讨论和优化。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-11]</span> <span class="email-subject">[PATCH 0/6] KVM ARM64 pre_fault_memory</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Jack Thomson <span class="email-sender">&lt;jackabt.amazon@gmail.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-11]</span> <span class="email-subject">[PATCH 1/6] KVM: arm64: Add __gmem_abort and __user_mem_abort</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Jack Thomson <span class="email-sender">&lt;jackabt.amazon@gmail.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-11]</span> <span class="email-subject">[PATCH 2/6] KVM: arm64: Add KVM_PGTABLE_WALK_PRE_FAULT walk flag</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Jack Thomson <span class="email-sender">&lt;jackabt.amazon@gmail.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-11]</span> <span class="email-subject">[PATCH 3/6] KVM: arm64: Add pre_fault_memory implementation</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Jack Thomson <span class="email-sender">&lt;jackabt.amazon@gmail.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-11]</span> <span class="email-subject">[PATCH 4/6] KVM: selftests: Fix unaligned mmap allocations</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Jack Thomson <span class="email-sender">&lt;jackabt.amazon@gmail.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-11]</span> <span class="email-subject">[PATCH 5/6] KVM: selftests: Enable pre_fault_memory_test for arm64</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Jack Thomson <span class="email-sender">&lt;jackabt.amazon@gmail.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-11]</span> <span class="email-subject">[PATCH 6/6] KVM: selftests: Add option for different backing in pre-fault tests</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Jack Thomson <span class="email-sender">&lt;jackabt.amazon@gmail.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-11]</span> <span class="email-subject">Re: [PATCH 1/6] KVM: arm64: Add __gmem_abort and __user_mem_abort</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-11]</span> <span class="email-subject">Re: [PATCH 3/6] KVM: arm64: Add pre_fault_memory implementation</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-11]</span> <span class="email-subject">Re: [PATCH 0/6] KVM ARM64 pre_fault_memory</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH 0/2] arm: add kvm-psci-version vcpu property</h3>
                </div>

                <div class="thread-meta">
                    <span>9 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-09-11</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主题是为 ARM 架构的 KVM 添加一个新的 vcpu 属性 `kvm-psci-version`，以便请求特定的 PSCI 版本。该补丁系列由 Sebastian Ott 提出，主要包括两个补丁：一是为新的 PSCI 版本添加常量，二是实现 `kvm-psci-version` 属性的功能。<br><br>关键技术要点包括：<br>1. 新增的 `kvm-psci-version` 属性允许用户覆盖 KVM 默认的 PSCI 版本（在内核 v6.13 中为 PSCI v1.3），支持的版本包括 0.1、0.2、1.0、1.1、1.2 和 1.3。<br>2. 该属性的引入主要是为了支持在不同主机内核版本之间的迁移，特别是在源和目标内核的 PSCI 版本不一致时，避免迁移失败。<br><br>讨论的结论是，虽然当前的 QEMU 可以处理一些版本差异，但在某些情况下（如从新内核迁移到旧内核），可能会出现问题。因此，使用 `kvm-psci-version` 属性可以更灵活地管理 PSCI 版本，从而提高迁移的成功率。此外，参与者还提到了一些其他补丁，旨在解决更广泛的向后兼容性问题。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-11]</span> <span class="email-subject">[PATCH 0/2] arm: add kvm-psci-version vcpu property</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sebastian Ott <span class="email-sender">&lt;sebott@redhat.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-11]</span> <span class="email-subject">[PATCH 1/2] target/arm/kvm: add constants for new PSCI versions</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sebastian Ott <span class="email-sender">&lt;sebott@redhat.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-11]</span> <span class="email-subject">[PATCH 2/2] target/arm/kvm: add kvm-psci-version vcpu property</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sebastian Ott <span class="email-sender">&lt;sebott@redhat.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-11]</span> <span class="email-subject">Re: [PATCH 0/2] arm: add kvm-psci-version vcpu property</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Peter Maydell <span class="email-sender">&lt;peter.maydell@linaro.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-11]</span> <span class="email-subject">Re: [PATCH 0/2] arm: add kvm-psci-version vcpu property</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sebastian Ott <span class="email-sender">&lt;sebott@redhat.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-11]</span> <span class="email-subject">Re: [PATCH 0/2] arm: add kvm-psci-version vcpu property</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Peter Maydell <span class="email-sender">&lt;peter.maydell@linaro.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-11]</span> <span class="email-subject">Re: [PATCH 0/2] arm: add kvm-psci-version vcpu property</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sebastian Ott <span class="email-sender">&lt;sebott@redhat.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-11]</span> <span class="email-subject">Re: [PATCH 0/2] arm: add kvm-psci-version vcpu property</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Peter Maydell <span class="email-sender">&lt;peter.maydell@linaro.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-11]</span> <span class="email-subject">Re: [PATCH 0/2] arm: add kvm-psci-version vcpu property</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sebastian Ott <span class="email-sender">&lt;sebott@redhat.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v6 04/24] tracing: Add reset to trace remotes</h3>
                </div>

                <div class="thread-meta">
                    <span>8 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-09-08</span>
                </div>

                <div class="ai-summary">
                    在本次邮件讨论中，主要围绕一个补丁内容展开，即在追踪系统中添加重置功能（reset）以支持远程追踪。参与者Vincent Donnefort和Steven Rostedt就如何命名和实现这一功能进行了深入探讨。<br><br>关键技术要点包括：<br>1. 对于“reset”文件的命名，Steven建议使用“reset”以避免用户在查看文件时产生混淆，而Vincent则认为保持与现有追踪接口一致更为重要。<br>2. 讨论了如何处理追踪文件的读取问题，包括在读取时可能出现的数据损坏，以及如何确保读取操作的安全性。<br>3. 提出了对现有迭代器代码的潜在缺陷的修复建议，以确保在读取追踪事件时不会被写入操作干扰。<br><br>讨论的结论是，虽然当前的实现可能存在一些问题，但可以通过改进迭代器和维护页面顺序来增强功能。双方一致认为在未来可能需要实现非消耗性读取，以便在系统崩溃时能够进行数据转储。整体来看，虽然存在一些技术挑战，但参与者对实现这一功能持积极态度，并计划进一步完善代码。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-08]</span> <span class="email-subject">Re: [PATCH v6 04/24] tracing: Add reset to trace remotes</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Steven Rostedt <span class="email-sender">&lt;rostedt@goodmis.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-09]</span> <span class="email-subject">Re: [PATCH v6 04/24] tracing: Add reset to trace remotes</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Vincent Donnefort <span class="email-sender">&lt;vdonnefort@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-09]</span> <span class="email-subject">Re: [PATCH v6 04/24] tracing: Add reset to trace remotes</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Steven Rostedt <span class="email-sender">&lt;rostedt@goodmis.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-09]</span> <span class="email-subject">Re: [PATCH v6 04/24] tracing: Add reset to trace remotes</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Vincent Donnefort <span class="email-sender">&lt;vdonnefort@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-09]</span> <span class="email-subject">Re: [PATCH v6 04/24] tracing: Add reset to trace remotes</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Steven Rostedt <span class="email-sender">&lt;rostedt@goodmis.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-09]</span> <span class="email-subject">Re: [PATCH v6 04/24] tracing: Add reset to trace remotes</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Steven Rostedt <span class="email-sender">&lt;rostedt@goodmis.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-10]</span> <span class="email-subject">Re: [PATCH v6 04/24] tracing: Add reset to trace remotes</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Vincent Donnefort <span class="email-sender">&lt;vdonnefort@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-10]</span> <span class="email-subject">Re: [PATCH v6 04/24] tracing: Add reset to trace remotes</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Steven Rostedt <span class="email-sender">&lt;rostedt@goodmis.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH RESEND v7 4/6] arm64: futex: refactor futex atomic
 operation</h3>
                </div>

                <div class="thread-meta">
                    <span>5 messages</span>
                    <span>3 participants</span>
                    <span>Started: 2025-09-11</span>
                </div>

                <div class="ai-summary">
                    在这次邮件列表讨论中，主要聚焦于一个针对 ARM64 架构的 futex 原子操作的补丁（PATCH RESEND v7 4/6）。参与者们讨论了如何重构 `__llsc_futext_atomic_##op()` 函数，以提高代码的可读性和维护性。<br><br>关键技术要点包括：<br>1. 将 `oval` 参数从 `arch_futex_atomic_op_inuser()` 传递到 `__llsc_futext_atomic_##op()`，以增强代码的可读性。<br>2. Catalin Marinas 提到补丁的整体结构良好，并指出在第六个补丁中将会使用 `__futex_*` 函数来区分不同的操作方式（如 LLSC 和 CAS）。<br>3. 对于函数命名的讨论，Catalin 最初建议保留原名，但后来意识到自己的理解有误，认为补丁整体上是合理的。<br><br>讨论的结论是，补丁在技术上是可行的，且得到了参与者的认可。尽管有关于命名和参数传递的不同看法，但最终没有提出重大问题。整体上，邮件讨论促进了对补丁的深入理解和优化建议。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-11]</span> <span class="email-subject">Re: [PATCH RESEND v7 4/6] arm64: futex: refactor futex atomic
 operation</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Will Deacon <span class="email-sender">&lt;will@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-11]</span> <span class="email-subject">Re: [PATCH RESEND v7 4/6] arm64: futex: refactor futex atomic
 operation</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Yeoreum Yun <span class="email-sender">&lt;yeoreum.yun@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-12]</span> <span class="email-subject">Re: [PATCH RESEND v7 4/6] arm64: futex: refactor futex atomic
 operation</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Catalin Marinas <span class="email-sender">&lt;catalin.marinas@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-12]</span> <span class="email-subject">Re: [PATCH RESEND v7 4/6] arm64: futex: refactor futex atomic
 operation</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Catalin Marinas <span class="email-sender">&lt;catalin.marinas@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-12]</span> <span class="email-subject">Re: [PATCH RESEND v7 4/6] arm64: futex: refactor futex atomic
 operation</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Catalin Marinas <span class="email-sender">&lt;catalin.marinas@arm.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH 0/2] KVM: arm64: Revert resched fixes for stage-2 destruction</h3>
                </div>

                <div class="thread-meta">
                    <span>5 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-09-10</span>
                </div>

                <div class="ai-summary">
                    本邮件线程主要讨论了对 KVM（内核虚拟机）在 arm64 架构下的两个补丁进行回退的提议。参与者 Oliver Upton 提出，由于在当前开发周期中，关于重新调度修复的稳定性尚未得到保证，因此回退这两个补丁是较好的选择，以便为改进版本留出更多时间进行测试。<br><br>关键技术要点包括：<br>1. 回退的补丁分别是“在销毁阶段 2 页表时根据需要重新调度”和“拆分 kvm_pgtable_stage2_destroy()”。<br>2. 通过 syzkaller 工具发现了多个与这些补丁相关的 bug，尝试修复未能解决问题，且新引入的内存安全问题使得调度器停滞的潜在风险相对较小。<br><br>讨论的结论是，回退这两个补丁将有助于开发团队重新评估和改进相关功能，待未来有更稳定的修复方案时再进行合并。邮件最后确认了回退操作已被应用。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-10]</span> <span class="email-subject">[PATCH 0/2] KVM: arm64: Revert resched fixes for stage-2 destruction</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-10]</span> <span class="email-subject">[PATCH 1/2] Revert "KVM: arm64: Reschedule as needed when destroying the stage-2 page-tables"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-10]</span> <span class="email-subject">[PATCH 2/2] Revert "KVM: arm64: Split kvm_pgtable_stage2_destroy()"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-10]</span> <span class="email-subject">[PATCH] bad bad bad</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-10]</span> <span class="email-subject">Re: (subset) [PATCH 0/2] KVM: arm64: Revert resched fixes for stage-2 destruction</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v6 03/24] tracing: Introduce trace remotes</h3>
                </div>

                <div class="thread-meta">
                    <span>5 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-09-08</span>
                </div>

                <div class="ai-summary">
                    该邮件线程主要讨论了一个关于 Linux 内核追踪功能的补丁，具体是引入了“trace remotes”功能。参与者主要是 Steven Rostedt 和 Vincent Donnefort，他们围绕补丁中的代码实现进行了深入的技术讨论。<br><br>关键技术要点包括：<br>1. 对于代码中使用的“魔法数字”，Steven 提出应使用 `struct_size` 函数来代替，以提高代码的可读性和安全性。<br>2. 对于分配的页面，Vincent 解释了其用途，并承诺在代码中添加更多注释以便理解。<br>3. Steven 关注到在 `trace_remote_register()` 函数中缺少 kerneldoc 头部，建议添加以明确参数的含义和要求。<br>4. 讨论了如何确保分配的描述符与 CPU 掩码相匹配，以及是否需要添加一个 `desc_size` 参数来防止溢出。<br><br>讨论的结论是，虽然补丁的基本功能得到了认可，但仍需改进代码的可读性和注释，以确保后续开发者能够理解和维护。同时，关于如何处理分配大小的问题仍需进一步探讨，确保系统的稳定性和安全性。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-08]</span> <span class="email-subject">Re: [PATCH v6 03/24] tracing: Introduce trace remotes</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Steven Rostedt <span class="email-sender">&lt;rostedt@goodmis.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-09]</span> <span class="email-subject">Re: [PATCH v6 03/24] tracing: Introduce trace remotes</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Vincent Donnefort <span class="email-sender">&lt;vdonnefort@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-09]</span> <span class="email-subject">Re: [PATCH v6 03/24] tracing: Introduce trace remotes</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Steven Rostedt <span class="email-sender">&lt;rostedt@goodmis.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-09]</span> <span class="email-subject">Re: [PATCH v6 03/24] tracing: Introduce trace remotes</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Vincent Donnefort <span class="email-sender">&lt;vdonnefort@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-09]</span> <span class="email-subject">Re: [PATCH v6 03/24] tracing: Introduce trace remotes</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Steven Rostedt <span class="email-sender">&lt;rostedt@goodmis.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v3 9/9] KVM: arm64: Reserve pKVM handle during
 pkvm_init_host_vm()</h3>
                </div>

                <div class="thread-meta">
                    <span>5 messages</span>
                    <span>3 participants</span>
                    <span>Started: 2025-09-08</span>
                </div>

                <div class="ai-summary">
                    该邮件线程主要讨论了一个针对 KVM（Kernel-based Virtual Machine）在 ARM64 架构上引入的补丁，具体是关于在 `pkvm_init_host_vm()` 函数中保留 pKVM 句柄的问题。参与者们报告了在多个 nVHE（Non-Virtual Hypervisor Extension）平台上运行 KVM 自测时出现的失败，错误信息显示在标准 nVHE 模式下无法初始化虚拟机，导致 KVM 创建失败。<br><br>关键技术要点包括：<br>1. 该补丁的引入导致在某些平台上 KVM 自测失败，尤其是在 nVHE 模式下。<br>2. 在启用 pKVM 的情况下，相关平台似乎能够正常工作，但在标准模式下则出现了问题。<br>3. 参与者通过 bisect 方法确认了导致问题的具体提交。<br><br>讨论的结论是，参与者们一致认为需要对该补丁进行修复，并决定在问题明确之前将该补丁从 -next 分支中移除。Fuad Tabba 和 Mark Brown 表示将尽快提供修复方案。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-08]</span> <span class="email-subject">Re: [PATCH v3 9/9] KVM: arm64: Reserve pKVM handle during
 pkvm_init_host_vm()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-08]</span> <span class="email-subject">Re: [PATCH v3 9/9] KVM: arm64: Reserve pKVM handle during pkvm_init_host_vm()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Fuad Tabba <span class="email-sender">&lt;tabba@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-08]</span> <span class="email-subject">Re: [PATCH v3 9/9] KVM: arm64: Reserve pKVM handle during
 pkvm_init_host_vm()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-08]</span> <span class="email-subject">Re: [PATCH v3 9/9] KVM: arm64: Reserve pKVM handle during pkvm_init_host_vm()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Fuad Tabba <span class="email-sender">&lt;tabba@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-08]</span> <span class="email-subject">Re: [PATCH v3 9/9] KVM: arm64: Reserve pKVM handle during pkvm_init_host_vm()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v3 0/2] KVM: arm64: make EL2 feature fields writable in ID_AA64MMFR1_EL1</h3>
                </div>

                <div class="thread-meta">
                    <span>4 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-09-11</span>
                </div>

                <div class="ai-summary">
                    本邮件线程主要讨论了针对 KVM（Kernel-based Virtual Machine）在 arm64 架构下的一个补丁，目的是使 EL2 特性字段（如 TWED 和 HCX）在 ID_AA64MMFR1_EL1 中可由用户空间写入，以确保在特性支持不一致的主机之间进行虚拟机的实时迁移时的兼容性。<br><br>关键技术要点包括：<br>1. 用户空间可以将 EL2 特性字段的值从高降到低，但不能将其提升。<br>2. VH 字段仍然保持为不可写，以避免在 VHE 模式下引发不一致性。<br>3. 补丁版本更新中，增加了对 TWED 和 HCX 字段的降级支持，并添加了相应的自测用例。<br><br>讨论的主要结论是，尽管补丁在非嵌套情况下得到了认可，但仍存在对可写字段的潜在混淆和用户空间行为的不确定性。Marc Zyngier 提出了将整个寄存器视为 RES0 的建议，以简化 KVM 代码并避免复杂的用户空间接口行为。Oliver Upton 也表达了对此问题的关注，强调了特性依赖关系的管理和用户空间的合理性。整体来看，补丁的实施仍需解决关于可写性和用户空间行为的一些疑虑。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-11]</span> <span class="email-subject">[PATCH v3 0/2] KVM: arm64: make EL2 feature fields writable in ID_AA64MMFR1_EL1</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Jinqian Yang <span class="email-sender">&lt;yangjinqian1@huawei.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-11]</span> <span class="email-subject">[PATCH v3 1/2] KVM: arm64: Make ID_AA64MMFR1_EL1.{HCX, TWED} writable from userspace</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Jinqian Yang <span class="email-sender">&lt;yangjinqian1@huawei.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-11]</span> <span class="email-subject">[PATCH v3 2/2] KVM: arm64: selftests: Test writes to ID_AA64MMFR1_EL1.{HCX, TWED}</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Jinqian Yang <span class="email-sender">&lt;yangjinqian1@huawei.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-12]</span> <span class="email-subject">Re: [PATCH v3 1/2] KVM: arm64: Make ID_AA64MMFR1_EL1.{HCX, TWED}
 writable from userspace</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH RESEND v7 6/6] arm64: futex: support futex with FEAT_LSUI</h3>
                </div>

                <div class="thread-meta">
                    <span>4 messages</span>
                    <span>3 participants</span>
                    <span>Started: 2025-09-11</span>
                </div>

                <div class="ai-summary">
                    本邮件线程主要讨论了针对 ARM64 架构的 futex 实现的补丁，特别是支持使用新指令 FEAT_LSUI 的情况。参与者们围绕如何在 futex 操作中有效利用原子操作（atomic_op）展开了技术讨论。<br><br>关键技术要点包括：<br>1. **补丁目的**：补丁旨在在不改变现有行为的前提下，移除对 PSTATE 的更改，以支持新的原子操作指令。<br>2. **原子操作选择**：讨论中提到使用 CAS（Compare And Swap）指令可能比现有的独占操作（exclusives）更合适，但也指出了实现上的复杂性，尤其是在处理 64 位值时。<br>3. **代码优化建议**：Catalin Marinas 提出可以去掉某些不必要的函数调用，认为在支持 LSUI 的硬件上，这些调用是多余的。<br><br>讨论的结论是，尽管补丁的初衷是保持现有行为，但在实现细节上仍需考虑如何更有效地利用新指令。参与者们对补丁的方向表示认可，但也意识到在实现过程中可能面临的复杂性和潜在的行为变化。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-11]</span> <span class="email-subject">Re: [PATCH RESEND v7 6/6] arm64: futex: support futex with FEAT_LSUI</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Will Deacon <span class="email-sender">&lt;will@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-11]</span> <span class="email-subject">Re: [PATCH RESEND v7 6/6] arm64: futex: support futex with FEAT_LSUI</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Yeoreum Yun <span class="email-sender">&lt;yeoreum.yun@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-12]</span> <span class="email-subject">Re: [PATCH RESEND v7 6/6] arm64: futex: support futex with FEAT_LSUI</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Catalin Marinas <span class="email-sender">&lt;catalin.marinas@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-12]</span> <span class="email-subject">Re: [PATCH RESEND v7 6/6] arm64: futex: support futex with FEAT_LSUI</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Catalin Marinas <span class="email-sender">&lt;catalin.marinas@arm.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v4 5/7] arm64: Add support for FEAT_{LS64, LS64_V}</h3>
                </div>

                <div class="thread-meta">
                    <span>4 messages</span>
                    <span>3 participants</span>
                    <span>Started: 2025-09-08</span>
                </div>

                <div class="ai-summary">
                    在此次邮件讨论中，主要围绕着对 ARM64 架构中 FEAT_{LS64, LS64_V} 特性的支持进行技术探讨。Yicong Yang 提出了一个补丁，旨在为 ARM64 处理器添加对这两个特性的支持，主要用于用户空间驱动程序直接与硬件交互。<br><br>关键技术要点包括：<br>1. FEAT_LS64_V 仅适用于存储操作，因此不需要提及加载操作。<br>2. 讨论了在访问不支持的内存位置时，如何处理数据异常（DABT）以及如何向用户空间报告错误，确保在发生异常时能够正确地传递 SIGBUS 信号。<br>3. 用户空间驱动程序需要能够识别其设备是否支持 LS64 特性，并请求相应的目标内存。<br><br>讨论的结论是，虽然当前的设计允许用户空间直接使用这些指令，但存在潜在的风险，因为如果物理内存位置不支持这些指令，可能会导致不明确的行为。因此，参与者们认为需要一种机制来安全地暴露支持这些指令的内存区域，以避免将不安全的接口直接暴露给用户空间。Jonathan Cameron 提出了对如何实现这一机制的进一步思考。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-08]</span> <span class="email-subject">Re: [PATCH v4 5/7] arm64: Add support for FEAT_{LS64, LS64_V}</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Will Deacon <span class="email-sender">&lt;will@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-09]</span> <span class="email-subject">Re: [PATCH v4 5/7] arm64: Add support for FEAT_{LS64, LS64_V}</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Yicong Yang <span class="email-sender">&lt;yangyicong@huawei.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-11]</span> <span class="email-subject">Re: [PATCH v4 5/7] arm64: Add support for FEAT_{LS64, LS64_V}</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Will Deacon <span class="email-sender">&lt;will@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-12]</span> <span class="email-subject">Re: [PATCH v4 5/7] arm64: Add support for FEAT_{LS64, LS64_V}</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Jonathan Cameron <span class="email-sender">&lt;jonathan.cameron@huawei.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH] PMCR_EL0.N is RAZ/WI. At least a build failes in Ubuntu
 22.04 LTS. Remove the set function.</h3>
                </div>

                <div class="thread-meta">
                    <span>4 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-09-12</span>
                </div>

                <div class="ai-summary">
                    本邮件线程主要讨论了一个关于 Linux 内核中 PMCR_EL0.N 寄存器的补丁问题。参与者 Itaru Kitayama 提出了一个补丁，旨在解决在 Ubuntu 22.04 LTS 中出现的构建失败问题，认为由于 PMCR_EL0.N 是 RAZ/WI（读为零，写无效），因此应删除相关的设置函数。<br><br>关键技术要点包括：<br>1. PMCR_EL0.N 寄存器的写入行为在不同版本的 Ubuntu 中存在差异，导致构建失败。<br>2. Itaru 提出删除设置函数以解决构建问题，但未能清晰说明补丁的具体修复内容和必要性。<br>3. Marc Zyngier 对补丁的有效性表示质疑，认为需要更详细的解释和讨论，而不是简单删除代码。<br><br>讨论的结论是，Itaru 最终决定放弃该补丁，但 Marc 强调希望能够进一步探讨所发现的问题，以便找到合适的解决方案。这表明在技术讨论中，清晰的沟通和详细的背景信息对于推动问题解决至关重要。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-12]</span> <span class="email-subject">[PATCH] PMCR_EL0.N is RAZ/WI. At least a build failes in Ubuntu
 22.04 LTS. Remove the set function.</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Itaru Kitayama <span class="email-sender">&lt;itaru.kitayama@linux.dev&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-12]</span> <span class="email-subject">Re: [PATCH] PMCR_EL0.N is RAZ/WI. At least a build failes in Ubuntu 22.04 LTS. Remove the set function.</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-12]</span> <span class="email-subject">Re: [PATCH] PMCR_EL0.N is RAZ/WI. At least a build failes in Ubuntu 22.04 LTS. Remove the set function.</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Itaru Kitayama <span class="email-sender">&lt;itaru.kitayama@gmail.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-12]</span> <span class="email-subject">Re: [PATCH] PMCR_EL0.N is RAZ/WI. At least a build failes in Ubuntu 22.04 LTS. Remove the set function.</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v7 RESEND 5/6] arm64: futex: small optimisation for
 __llsc_futex_atomic_set()</h3>
                </div>

                <div class="thread-meta">
                    <span>3 messages</span>
                    <span>3 participants</span>
                    <span>Started: 2025-09-11</span>
                </div>

                <div class="ai-summary">
                    本邮件线程讨论了一个针对 ARM64 架构的 futex 相关补丁，主要内容是对 `__llsc_futex_atomic_set()` 函数进行小幅优化。参与者包括 Will Deacon、Yeoreum Yun 和 Catalin Marinas。<br><br>讨论的关键技术问题是该补丁是否真的能带来性能提升，参与者对其有效性表示怀疑。Will Deacon 首先提出，该优化可能并没有实质性的改进，且增加了新的汇编代码块，可能会影响代码的可维护性。Yeoreum Yun 也表示对该补丁的必要性没有强烈的看法，认为如果从可维护性角度来看不佳，可以考虑放弃该补丁。Catalin Marinas 最后建议，除非能够证明有明显的性能提升，否则应暂时搁置该补丁。<br><br>总体来看，邮件讨论的结论是该补丁在当前情况下可能并不值得实施，主要问题是缺乏明确的性能收益和对可维护性的潜在负面影响。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-11]</span> <span class="email-subject">Re: [PATCH v7 RESEND 5/6] arm64: futex: small optimisation for
 __llsc_futex_atomic_set()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Will Deacon <span class="email-sender">&lt;will@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-11]</span> <span class="email-subject">Re: [PATCH v7 RESEND 5/6] arm64: futex: small optimisation for
 __llsc_futex_atomic_set()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Yeoreum Yun <span class="email-sender">&lt;yeoreum.yun@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-12]</span> <span class="email-subject">Re: [PATCH v7 RESEND 5/6] arm64: futex: small optimisation for
 __llsc_futex_atomic_set()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Catalin Marinas <span class="email-sender">&lt;catalin.marinas@arm.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH] KVM: arm64: nv: Exclude guest's TWED configuration when TWE isn't set</h3>
                </div>

                <div class="thread-meta">
                    <span>3 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-09-09</span>
                </div>

                <div class="ai-summary">
                    本邮件线程讨论了一个关于 KVM（Kernel-based Virtual Machine）在 ARM64 架构下的补丁，主要内容是排除当 TWE（Trap Wake Event）未设置时，来宾的 TWED（Trap Wake Event Debug）配置。Oliver Upton 提出了补丁，指出 KVM 在处理来宾的 TWEDEL 和 TWEDEn 值时，未考虑到 WFE（Wait For Event）陷阱被禁用的情况，这可能导致主机期望的陷阱被延迟。因此，补丁建议在 TWE 未设置时，从最终值中排除这些字段。<br><br>Marc Zyngier 对此提出疑问，认为在当前的实现中，TWED 应该被完全移除，因此 HCR_EL2 的相关位应为保留位（RES0）。他询问是否还有其他方式让来宾设置这些位。Oliver 随后承认自己未检查限制，并表示将会在后续版本中放宽这些限制。<br><br>讨论的关键要点在于如何正确处理来宾的 TWED 配置，以避免影响主机的陷阱处理。最终的结论是，Oliver 将会根据讨论结果修改补丁，并在后续版本中进行更新。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-09]</span> <span class="email-subject">[PATCH] KVM: arm64: nv: Exclude guest's TWED configuration when TWE isn't set</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-09]</span> <span class="email-subject">Re: [PATCH] KVM: arm64: nv: Exclude guest's TWED configuration when TWE isn't set</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-09]</span> <span class="email-subject">Re: [PATCH] KVM: arm64: nv: Exclude guest's TWED configuration when
 TWE isn't set</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v2 0/2] Dump instructions on panic for pKVM/nvhe</h3>
                </div>

                <div class="thread-meta">
                    <span>3 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-09-09</span>
                </div>

                <div class="ai-summary">
                    本邮件线程主要讨论了针对 pKVM 和 nvhe 的内核补丁，旨在实现内核崩溃时转储故障指令的功能，以便于调试内存损坏问题。补丁分为两个部分：第一个补丁为 nvhe 添加了崩溃时的指令转储支持，利用内核代码读取和转储故障指令；第二个补丁则为 pKVM 提供类似支持，涉及更为基础的更改，因为在 pKVM 中，虚拟机监控器的代码始终以只读方式映射在主机的第二阶段。<br><br>关键技术要点包括：<br>1. 在 nvhe 中，崩溃时可以直接转储故障指令，而在 pKVM 中则需要处理虚拟机监控器的映射问题。<br>2. 通过将虚拟机监控器的文本段设置为只读，内核能够在崩溃时提取调试信息。<br>3. 该补丁系列经过了测试和审查，确保了功能的可靠性。<br><br>讨论的主要结论是，补丁有效地增强了内核在处理虚拟化环境中的崩溃时的调试能力，尽管在实现过程中需要解决一些寄存器使用和汇编代码的挑战。整体而言，补丁为未来的调试和故障排查提供了更好的支持。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-09]</span> <span class="email-subject">[PATCH v2 0/2] Dump instructions on panic for pKVM/nvhe</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mostafa Saleh <span class="email-sender">&lt;smostafa@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-09]</span> <span class="email-subject">[PATCH v2 1/2] KVM: arm64: Dump instruction on hyp panic</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mostafa Saleh <span class="email-sender">&lt;smostafa@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-09]</span> <span class="email-subject">[PATCH v2 2/2] KVM: arm64: Map hyp text as RO and dump instr on panic</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mostafa Saleh <span class="email-sender">&lt;smostafa@google.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH V4 1/2] arm64/sysreg: Update TCR_EL1 register</h3>
                </div>

                <div class="thread-meta">
                    <span>3 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-09-08</span>
                </div>

                <div class="ai-summary">
                    本邮件线程主要讨论了针对 ARM64 架构的 TCR_EL1 寄存器的更新补丁。参与者 Anshuman Khandual 提出了一个补丁，旨在清理和更新与 TCR_EL1 寄存器相关的定义。Mark Brown 对该补丁进行了审查，并表示支持，认为清理冗余定义的工作可以作为一个独立的补丁，但并不是特别重要。<br><br>关键技术要点包括：<br>1. TCR_EL1 寄存器的更新和相关定义的清理。<br>2. SYS_TCR_EL1 的定义被提议从头文件（asm/sysreg.h）中移除，并考虑将其作为单独的补丁提交。<br><br>讨论的主要结论是，虽然清理冗余定义可以作为独立补丁处理，但当前的补丁已得到认可，参与者对补丁的内容表示满意。待解决的问题主要是如何更有效地管理和提交代码中的冗余定义。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-08]</span> <span class="email-subject">Re: [PATCH V4 1/2] arm64/sysreg: Update TCR_EL1 register</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-09]</span> <span class="email-subject">Re: [PATCH V4 1/2] arm64/sysreg: Update TCR_EL1 register</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Anshuman Khandual <span class="email-sender">&lt;anshuman.khandual@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-09]</span> <span class="email-subject">Re: [PATCH V4 1/2] arm64/sysreg: Update TCR_EL1 register</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH] KVM: arm64: vgic: fix incorrect spinlock API usage</h3>
                </div>

                <div class="thread-meta">
                    <span>3 messages</span>
                    <span>3 participants</span>
                    <span>Started: 2025-09-07</span>
                </div>

                <div class="ai-summary">
                    在本邮件线程中，主要讨论了一个针对 KVM（Kernel-based Virtual Machine）在 arm64 架构下的 vgic（虚拟中断控制器）代码的补丁。Alok Tiwari 提出了一个修复，主要是将函数 vgic_flush_lr_state() 中错误使用的低级 API _raw_spin_unlock() 替换为正确的 raw_spin_unlock()。低级 API 不应直接使用，使用通用的内核自旋锁 API 可以确保 vgic 代码中的锁定语义正确，符合内核的锁定规范。<br><br>邮件中提到的关键技术要点包括：低级 API 的不当使用可能导致潜在的锁定问题，而通过使用标准的自旋锁 API 可以避免这种情况。补丁的修复也与之前的提交（8fa3adb8c6be）相关联。<br><br>讨论的结论是，Marc Zyngier 对补丁表示认可，并提出了一些小的修改建议，Alok Tiwari 表示会根据这些建议提交补丁的第二版。整体来看，此次讨论强调了代码中锁定机制的正确性和一致性的重要性。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-07]</span> <span class="email-subject">[PATCH] KVM: arm64: vgic: fix incorrect spinlock API usage</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Alok Tiwari <span class="email-sender">&lt;alok.a.tiwari@oracle.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-08]</span> <span class="email-subject">Re: [PATCH] KVM: arm64: vgic: fix incorrect spinlock API usage</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-08]</span> <span class="email-subject">Re: [External] : Re: [PATCH] KVM: arm64: vgic: fix incorrect spinlock
 API usage</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: ALOK TIWARI <span class="email-sender">&lt;alok.a.tiwari@oracle.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v4 0/5] initialize SCTRL2_ELx</h3>
                </div>

                <div class="thread-meta">
                    <span>3 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-09-08</span>
                </div>

                <div class="ai-summary">
                    本邮件线程主要讨论了针对 ARM64 架构中 SCTRL2_ELx 寄存器的初始化及其相关文档的补丁内容。Dave Martin 提出了一个补丁，旨在更新 `booting.rst` 文档，以明确 FEAT_SCTLR2 特性对异常级别配置的要求，特别是在 EL3 和 EL1 的情况下，需初始化特定的控制寄存器位。<br><br>关键技术要点包括：<br>1. 对于支持 SCTLR2_ELx 的 CPU，文档中明确了在 EL3 和 EL1 环境下需要初始化的寄存器位。<br>2. Dave Martin 强调了在内核引导时，所有 CPU 必须在相同的异常级别下进入内核。<br><br>讨论的结论是，Yeoreum Yun 确认了补丁内容的准确性，并表示将其纳入下一系列补丁中。同时，双方同意在后续版本中进一步检查和确认补丁的细节。整体来看，邮件讨论围绕着文档的完善和代码的验证展开，确保了内核启动过程中的寄存器配置符合要求。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-08]</span> <span class="email-subject">Re: [PATCH v4 0/5] initialize SCTRL2_ELx</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Dave Martin <span class="email-sender">&lt;Dave.Martin@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-08]</span> <span class="email-subject">Re: [PATCH v4 0/5] initialize SCTRL2_ELx</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Yeoreum Yun <span class="email-sender">&lt;yeoreum.yun@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-08]</span> <span class="email-subject">Re: [PATCH v4 0/5] initialize SCTRL2_ELx</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Dave Martin <span class="email-sender">&lt;Dave.Martin@arm.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH RESEND v7 0/6] support FEAT_LSUI and apply it on futex
 atomic ops</h3>
                </div>

                <div class="thread-meta">
                    <span>2 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-09-11</span>
                </div>

                <div class="ai-summary">
                    本邮件列表讨论的主要技术问题是关于支持 FEAT_LSUI 特性并将其应用于 futex 原子操作的补丁。参与者 Yeoreum Yun 提出在最新的 Arm 架构文档中找不到关于 FEAT_LSUI 的详细信息，询问该特性的相关资料应查阅何处。Will Deacon 回应指出，目前该特性仅在公开的 XML 文档中可用，预计到年底会有 Arm 架构文档的正式发布，但目前仍在私有的 2024 架构规范中，情况并不理想。<br><br>关键技术要点包括：<br>1. FEAT_LSUI 特性对 futex 原子操作的支持。<br>2. 当前关于 FEAT_LSUI 的信息仅限于公开的 XML 文档，缺乏详细的官方文档支持。<br><br>讨论的结论是，参与者对 FEAT_LSUI 的详细信息和官方文档的缺乏表示关注，并决定等待正式文档的发布，以便更好地理解和实现该特性。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-11]</span> <span class="email-subject">Re: [PATCH RESEND v7 0/6] support FEAT_LSUI and apply it on futex
 atomic ops</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Will Deacon <span class="email-sender">&lt;will@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-11]</span> <span class="email-subject">Re: [PATCH RESEND v7 0/6] support FEAT_LSUI and apply it on futex
 atomic ops</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Catalin Marinas <span class="email-sender">&lt;catalin.marinas@arm.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v6 15/24] KVM: arm64: Support unaligned fixmap in the
 pKVM hyp</h3>
                </div>

                <div class="thread-meta">
                    <span>2 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-09-10</span>
                </div>

                <div class="ai-summary">
                    该邮件列表讨论的主要技术问题是关于支持在 pKVM hyp 中处理未对齐的 fixmap 的补丁。这是一个针对 ARM64 架构的 KVM（Kernel-based Virtual Machine）改进，旨在提升虚拟化性能和兼容性。<br><br>在讨论中，Steven Rostedt 提到希望 ARM KVM 的开发者能够对该补丁的第二部分进行审查。他表示已经完成了对补丁的初步审查，并建议 Vincent Donnefort 发布新版本，但仍希望能得到架构专家的反馈。这表明该补丁在技术细节上可能需要进一步的验证和改进。<br><br>讨论的关键要点包括：<br>1. 对未对齐 fixmap 的支持是提升 ARM64 KVM 性能的重要步骤。<br>2. 需要更多来自架构团队的输入，以确保补丁的有效性和兼容性。<br><br>目前的讨论结论是，虽然初步审查已完成，但仍需架构专家的进一步反馈，以便对补丁进行优化和完善。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-10]</span> <span class="email-subject">Re: [PATCH v6 15/24] KVM: arm64: Support unaligned fixmap in the
 pKVM hyp</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Steven Rostedt <span class="email-sender">&lt;rostedt@goodmis.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-10]</span> <span class="email-subject">Re: [PATCH v6 15/24] KVM: arm64: Support unaligned fixmap in the
 pKVM hyp</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Vincent Donnefort <span class="email-sender">&lt;vdonnefort@google.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v6 10/24] tracing: Introduce simple_ring_buffer</h3>
                </div>

                <div class="thread-meta">
                    <span>2 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-09-09</span>
                </div>

                <div class="ai-summary">
                    本邮件线程主要讨论了一个关于 Linux 内核追踪功能的补丁，具体是引入 `simple_ring_buffer` 的实现。参与者 Steven Rostedt 和 Vincent Donnefort 就代码的格式、逻辑结构以及潜在的错误处理进行了深入的交流。<br><br>关键技术要点包括：<br>1. 代码注释应遵循 80 列限制，以提高可读性。<br>2. 对于可能的循环结构，建议增加失败检查机制，以防止在链表损坏时导致无限循环。<br>3. 提出在更新过程中添加标志，以避免在缓冲区缺失时触发错误退出。<br><br>讨论的结论是，`simple_ring_buffer` 不需要处理不同上下文（如正常内核、软中断、IRQ 等），这简化了实现的复杂性。然而，仍需关注代码的健壮性和可读性，确保在未来的使用中不会出现潜在问题。整体来看，补丁的方向得到了认可，但在细节上仍需进一步完善。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-09]</span> <span class="email-subject">Re: [PATCH v6 10/24] tracing: Introduce simple_ring_buffer</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Steven Rostedt <span class="email-sender">&lt;rostedt@goodmis.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-10]</span> <span class="email-subject">Re: [PATCH v6 10/24] tracing: Introduce simple_ring_buffer</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Vincent Donnefort <span class="email-sender">&lt;vdonnefort@google.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v6 06/24] tracing: Add events to trace remotes</h3>
                </div>

                <div class="thread-meta">
                    <span>2 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-09-09</span>
                </div>

                <div class="ai-summary">
                    该邮件线程主要讨论了一个关于 Linux 内核追踪功能的补丁，具体是向追踪远程事件添加事件的实现。参与者 Steven Rostedt 对补丁中的实现提出了建议，认为应该使用 `ring_buffer_event_data(rb_evt)` 函数来处理事件数据，而不是直接暴露内部细节。<br><br>关键技术要点包括：<br>1. 使用 `ring_buffer_event_data()` 可以更好地管理事件数据，尤其是在事件数据较大时，可以避免直接使用数组的复杂性。<br>2. 讨论中提到的补丁在某些情况下总是使用 `array[1]`，这意味着在处理事件时可能存在潜在的灵活性不足。<br><br>讨论的结论是，尽管补丁在某些方面是可行的，但仍需改进，建议使用辅助函数来处理事件数据，以提高代码的可维护性和清晰度。待解决的问题是如何在补丁中更好地实现这一点，以避免直接操作内部数据结构。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-09]</span> <span class="email-subject">Re: [PATCH v6 06/24] tracing: Add events to trace remotes</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Steven Rostedt <span class="email-sender">&lt;rostedt@goodmis.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-09]</span> <span class="email-subject">Re: [PATCH v6 06/24] tracing: Add events to trace remotes</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Steven Rostedt <span class="email-sender">&lt;rostedt@goodmis.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v4 03/28] KVM: arm64: pkvm: Add pkvm_time_get()</h3>
                </div>

                <div class="thread-meta">
                    <span>2 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-09-09</span>
                </div>

                <div class="ai-summary">
                    该邮件线程主要讨论了在 KVM（Kernel-based Virtual Machine）中为 ARM64 架构添加 `pkvm_time_get()` 函数的相关补丁。讨论的核心问题是如何有效获取和提供架构定时器的频率。<br><br>关键技术要点包括：<br>1. Will Deacon 提出，依赖 CNTFRQ（计数器频率寄存器）并不可行，应该由主机在架构定时器驱动成功探测后提供频率。<br>2. Marc Zyngier 进一步指出，若 CNTFRQ_EL0（EL0 级别的计数器频率寄存器）未正确设置，可能会导致 KVM 无法正常工作。他表示可以选择在此情况下禁用 KVM，或依赖设备树提供时钟频率。<br><br>讨论的结论是，当前的设计对 CNTFRQ_EL0 的依赖存在问题，且在其未正确配置的情况下，支持虚拟机的能力受到限制。参与者一致认为应考虑更可靠的方式来处理此类情况，以确保 KVM 的稳定性和功能性。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-09]</span> <span class="email-subject">Re: [PATCH v4 03/28] KVM: arm64: pkvm: Add pkvm_time_get()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Will Deacon <span class="email-sender">&lt;will@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-09]</span> <span class="email-subject">Re: [PATCH v4 03/28] KVM: arm64: pkvm: Add pkvm_time_get()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH 1/2] KVM: arm64: Dump instruction on hyp panic</h3>
                </div>

                <div class="thread-meta">
                    <span>2 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-09-08</span>
                </div>

                <div class="ai-summary">
                    该邮件线程主要讨论了一个针对 KVM（Kernel-based Virtual Machine）在 arm64 架构下的补丁，内容涉及在 hypervisor panic 时如何处理指令转储的问题。参与者 Mostafa Saleh 提出了对现有函数的担忧，认为该函数可能会被用于从用户空间转储指令，因为它仅接受一个地址作为参数。<br><br>Will Deacon 提出了几个建议以改进该函数的安全性和功能性，包括保持函数名称不变、将用户模式的寄存器调用内联到 __die() 函数中，以及在 dump_kernel_instr() 中检查地址是否有效（即是否为 TTBR1 地址）。这些建议旨在确保函数的使用不会引发安全隐患。<br><br>最终，Mostafa Saleh 表示接受 Will 的建议，并计划根据讨论的内容更新补丁版本。这一讨论的结论是，虽然补丁的初步设计是合理的，但需要进一步的修改以增强其安全性，确保不会误用。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-08]</span> <span class="email-subject">Re: [PATCH 1/2] KVM: arm64: Dump instruction on hyp panic</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Will Deacon <span class="email-sender">&lt;will@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-09]</span> <span class="email-subject">Re: [PATCH 1/2] KVM: arm64: Dump instruction on hyp panic</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mostafa Saleh <span class="email-sender">&lt;smostafa@google.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v3 0/3] arm64: sysreg: Fix sysreg field definitions and
 generation script</h3>
                </div>

                <div class="thread-meta">
                    <span>2 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-09-09</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主要技术问题是对 ARM64 架构下的 sysreg 字段定义和生成脚本的修复。参与者 Fuad Tabba 指出，当前的 sysreg 定义文件存在多个错误，包括 Enum Security 中 NSACR_RFR 的值设置错误（应为 0b0010 而非 0b0001），以及 DoubleLock 和 EIESB 的符号定义错误（应分别为有符号和无符号）。此外，文件中还有一些冗余定义（如 RCWSMASK_EL1），虽然这些冗余定义本身并不错误，但会增加生成头文件的代码量，并可能引发未来的错误。<br><br>为了解决这些问题，Fuad 提出了三个补丁：修复和整理 sysreg 字段定义、纠正 EIESB 和 DoubleLock 的符号定义，并在 sysreg 头文件生成脚本中添加验证检查，以减少未来出现类似错误的可能性。<br><br>讨论的结论是，当前的补丁有效地修复了已识别的问题，并通过增加验证机制来提高代码的可靠性。待解决的问题包括如何进一步完善验证机制，以捕获更多潜在错误。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-09]</span> <span class="email-subject">[PATCH v3 0/3] arm64: sysreg: Fix sysreg field definitions and
 generation script</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Fuad Tabba <span class="email-sender">&lt;tabba@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-09]</span> <span class="email-subject">Re: [PATCH v3 0/3] arm64: sysreg: Fix sysreg field definitions and
 generation script</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Fuad Tabba <span class="email-sender">&lt;tabba@google.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH] KVM: arm64: Fix parameter ordering for VBAR_EL1 assignment</h3>
                </div>

                <div class="thread-meta">
                    <span>2 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-09-08</span>
                </div>

                <div class="ai-summary">
                    本邮件列表讨论的主题是针对 KVM（Kernel-based Virtual Machine）在 arm64 架构下的一个补丁，主要修复了 VBAR_EL1（向量基址寄存器）的参数顺序问题。参与者 Fuad Tabba 指出，现有代码在调用 `__vcpu_assign_sys_reg()` 函数时，错误地将寄存器 ID 和赋值参数的顺序颠倒，导致 vCPU 的值与客体的值不一致，进而影响异常处理的地址。<br><br>关键技术要点包括：修正后的函数调用确保在挂起异常之前，及时从客体读取 VBAR_EL1 的实时值并更新 vCPU 的值。这一修复确保了 vCPU 的值与客体一致，从而在恢复客体时能够正确处理异常。<br><br>讨论的结论是，Fuad 提出的补丁已被应用于修复中，确保了 KVM 在处理未定义异常时的正确性。邮件中没有提及其他待解决的问题，表明该补丁的实施已得到认可。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-08]</span> <span class="email-subject">[PATCH] KVM: arm64: Fix parameter ordering for VBAR_EL1 assignment</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Fuad Tabba <span class="email-sender">&lt;tabba@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-08]</span> <span class="email-subject">Re: [PATCH] KVM: arm64: Fix parameter ordering for VBAR_EL1 assignment</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v2] KVM: arm64: Remove stage 2 read fault check</h3>
                </div>

                <div class="thread-meta">
                    <span>2 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-09-08</span>
                </div>

                <div class="ai-summary">
                    在这次邮件讨论中，主要关注的是针对 KVM（Kernel-based Virtual Machine）在 arm64 架构下的一个补丁，内容是移除阶段 2 的读取故障检查。参与者 Wei-Lin Chang 提出，非 NV（Non-Virtualization）情况下，映射阶段 2 时总是授予读取权限，因此进行读取权限检查没有实际意义。而在 NV 客户端的情况下，影子阶段 2 可能会有非可读的映射，因此在这种情况下也不应进行读取故障检查。基于这些理由，建议直接移除该检查。<br><br>补丁的关键技术要点包括：<br>1. 移除对阶段 2 读取故障的检查，简化代码逻辑。<br>2. 该补丁经过了 Oliver Upton 和 Marc Zyngier 的建议，确保了对不同虚拟化场景的适应性。<br><br>最终讨论的结论是，该补丁已被接受并应用于修复版本，标志着对 KVM arm64 的改进。没有提出新的待解决问题，表明此次修改得到了参与者的共识。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-08]</span> <span class="email-subject">[PATCH v2] KVM: arm64: Remove stage 2 read fault check</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Wei-Lin Chang <span class="email-sender">&lt;r09922117@csie.ntu.edu.tw&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-08]</span> <span class="email-subject">Re: [PATCH v2] KVM: arm64: Remove stage 2 read fault check</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v2] KVM: arm64: vgic: fix incorrect spinlock API usage</h3>
                </div>

                <div class="thread-meta">
                    <span>2 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-09-08</span>
                </div>

                <div class="ai-summary">
                    在本次邮件讨论中，主要关注的是对 KVM（Kernel-based Virtual Machine）在 arm64 架构下的 VGIC（虚拟中断控制器）代码中的一个补丁。补丁的核心问题是修复了函数 `vgic_flush_lr_state()` 中对自旋锁 API 的错误使用，具体是将 `_raw_spin_unlock()` 替换为正确的 `raw_spin_unlock()`。前者是一个低级内部 API，不应直接使用，而后者则确保了 VGIC 代码中的正确锁定语义。<br><br>技术要点包括：<br>1. `_raw_spin_unlock()` 的不当使用可能导致锁定语义错误，从而影响系统的稳定性和性能。<br>2. 此次补丁修复了这一问题，并得到了 Marc Zyngier 的确认（Acked-by）。<br><br>讨论的结论是，补丁已被应用于修复分支，确保了代码的正确性和可靠性。此问题的解决有助于提升 KVM 在 arm64 平台上的表现，确保虚拟化环境中的中断处理更加稳定。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-08]</span> <span class="email-subject">[PATCH v2] KVM: arm64: vgic: fix incorrect spinlock API usage</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Alok Tiwari <span class="email-sender">&lt;alok.a.tiwari@oracle.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-08]</span> <span class="email-subject">Re: [PATCH v2] KVM: arm64: vgic: fix incorrect spinlock API usage</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH RESEND v7 2/6] KVM: arm64: expose FEAT_LSUI to guest</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-09-12</span>
                </div>

                <div class="ai-summary">
                    在这封邮件中，讨论的主要技术问题是关于在 KVM（Kernel-based Virtual Machine）中向虚拟机（guest）暴露 FEAT_LSUI 特性，具体是针对 arm64 架构的实现。该补丁的目的是使虚拟机能够利用该特性，从而提升其性能和功能。<br><br>关键的技术要点包括：<br>1. FEAT_LSUI 是 ARM 架构中的一个特性，允许更高效的加载和存储操作。<br>2. 通过将该特性暴露给虚拟机，能够改善虚拟化环境中的内存访问效率。<br>3. 该补丁经过了审查，得到了 Catalin Marinas 的认可，表明其在技术上是可行的。<br><br>讨论的结论是，该补丁已经获得初步的审查通过，但仍需进一步的测试和验证，以确保在不同的虚拟化场景下能够稳定运行。待解决的问题包括如何在各种硬件和软件环境中进行全面的兼容性测试。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-12]</span> <span class="email-subject">Re: [PATCH RESEND v7 2/6] KVM: arm64: expose FEAT_LSUI to guest</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Catalin Marinas <span class="email-sender">&lt;catalin.marinas@arm.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH RESEND v7 3/6] arm64: Kconfig: add LSUI Kconfig</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-09-12</span>
                </div>

                <div class="ai-summary">
                    该邮件讨论的主要技术问题是针对 ARM64 架构的 Kconfig 文件中添加 LSUI（Load and Store Unsigned Integer）支持的补丁。参与者 Yeoreum Yun 提出了对补丁主题的改进建议，指出可以更清晰地表述为“检测工具链对 LSUI 的支持”。他还提到，binutils 2.45 版本已经添加了对 LSUI 的支持。<br><br>在技术要点方面，邮件中提到的关键内容包括对 Kconfig 的修改，以及对补丁格式的细微建议，如在“help”部分添加两个空格的缩进。Catalin Marinas 对该补丁表示认可，并给予了“Reviewed-by”的标记，表明他认为补丁整体上是可以接受的。<br><br>讨论的结论是，补丁在技术上是合理的，但在主题表述和格式上有待改进。当前没有提出其他待解决的问题，主要集中在补丁的清晰度和格式规范上。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-12]</span> <span class="email-subject">Re: [PATCH RESEND v7 3/6] arm64: Kconfig: add LSUI Kconfig</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Catalin Marinas <span class="email-sender">&lt;catalin.marinas@arm.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH RESEND v7 1/6] arm64: cpufeature: add FEAT_LSUI</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-09-12</span>
                </div>

                <div class="ai-summary">
                    在这封邮件中，讨论的主要技术问题是关于 ARM64 架构中的 CPU 特性检测，具体是添加对 FEAT_LSUI 的支持。Yeoreum Yun 提出了一个补丁，旨在增强 CPU 特性检测功能。<br><br>关键的技术要点包括：补丁的核心内容是简化描述，建议将原有的冗长解释替换为更直接的表述，即“添加对 FEAT_LSUI 的 CPU 特性检测”，以避免重复解释 PSTATE.PAN 的内容。这种简化有助于提高补丁的可读性和理解度。<br><br>讨论的结论是，Catalin Marinas 对该补丁进行了审核并给予了认可（Reviewed-by），表明该补丁在技术上是可行的，但尚未提及是否存在其他待解决的问题或进一步的修改建议。整体来看，此次讨论集中在补丁的表述清晰度上，为后续的提交和应用奠定了基础。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-12]</span> <span class="email-subject">Re: [PATCH RESEND v7 1/6] arm64: cpufeature: add FEAT_LSUI</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Catalin Marinas <span class="email-sender">&lt;catalin.marinas@arm.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v4 22/28] iommu/arm-smmu-v3-kvm: Emulate CMDQ for host</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-09-12</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主要技术问题是关于在 KVM 环境下模拟 ARM SMMU v3 的 CMDQ（Command Queue）功能。参与者 Mostafa Saleh 提出了对数据结构映射的思考，特别是如何在虚拟化环境中确保数据一致性和性能。<br><br>关键技术要点包括：理想情况下，虚拟化监控程序（hypervisor）所影射的数据结构应在主机和虚拟机中都以正常写回（normal-WB）缓存方式映射，以避免一致性问题并提升性能。然而，Will Deacon 指出，如果实际的 SMMU 硬件不支持一致性，就无法实现这一点。当前缺乏机制来区分不同类型的结构（如 STEs 和 CMDQ 的一致性与 CD 和 Stage-1 页表的不一致性），因此必须将主机填充的影射结构视为与主机直接由硬件使用的结构相同。<br><br>讨论结论是，针对这些影射结构，可能需要在 EL2 使用非缓存映射，或者在访问时进行缓存维护操作（CMOs），以确保数据的一致性和正确性。这一问题尚待进一步解决。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-12]</span> <span class="email-subject">Re: [PATCH v4 22/28] iommu/arm-smmu-v3-kvm: Emulate CMDQ for host</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Will Deacon <span class="email-sender">&lt;will@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v4 15/28] iommu/arm-smmu-v3: Load the driver later in KVM
 mode</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-09-12</span>
                </div>

                <div class="ai-summary">
                    该邮件讨论了关于在 KVM 模式下延迟加载 ARM SMMU v3 驱动的问题，主要涉及补丁 [PATCH v4 15/28]。参与者 Mostafa Saleh 提出当前的实现方式较为复杂，因为需要根据 CONFIG_ARM_SMMU_V3_PKVM 的不同配置来处理初始化顺序。Will Deacon 建议，如果驱动在虚拟机监控程序（hypervisor）未启动时尝试探测，可以返回 -EPROBE_DEFER 错误，以简化处理逻辑。<br><br>关键技术要点包括：<br>1. 驱动加载的初始化顺序与 KVM 模式的关系。<br>2. 使用 -EPROBE_DEFER 错误处理机制来优化驱动探测过程。<br><br>讨论的主要结论是，当前的实现方式可能导致复杂性增加，建议采用更简化的错误处理方式，以确保驱动在适当的时机加载，待解决的问题是如何有效地实施这一建议并验证其对系统稳定性的影响。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-12]</span> <span class="email-subject">Re: [PATCH v4 15/28] iommu/arm-smmu-v3: Load the driver later in KVM
 mode</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Will Deacon <span class="email-sender">&lt;will@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v4 14/28] iommu/arm-smmu-v3: Add KVM mode in the driver</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-09-12</span>
                </div>

                <div class="ai-summary">
                    该邮件讨论的主要技术问题是关于在 ARM SMMU v3 驱动中添加 KVM 模式的补丁。参与者 Mostafa Saleh 提出了一种改进建议，认为不应将 IOMMU carveout 的大小硬编码在驱动中，而是应该设定一个默认大小，并在驱动探测时让其告知所需的实际大小。这样可以在未使用的部分释放回主机，或者如果驱动请求的大小超过可用空间，则返回错误。<br><br>关键技术要点包括：<br>1. 提议通过动态方式管理 IOMMU carveout 的大小，以提高灵活性。<br>2. 讨论了在驱动探测阶段获取所需资源的可能性，避免资源浪费。<br><br>讨论的结论是，虽然当前的实现方式可能存在局限性，但需要进一步探讨如何有效地管理 IOMMU carveout 的大小，以便更好地支持 KVM 模式。待解决的问题是如何实现这一动态管理机制，以及在实现过程中可能遇到的挑战。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-12]</span> <span class="email-subject">Re: [PATCH v4 14/28] iommu/arm-smmu-v3: Add KVM mode in the driver</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Will Deacon <span class="email-sender">&lt;will@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v6 16/24] KVM: arm64: Add clock support for the pKVM hyp</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-09-12</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主要技术问题是为 KVM（Kernel-based Virtual Machine）在 arm64 架构中添加时钟支持，具体针对 pKVM hyp（Hypervisor）。参与者 Will Deacon 提出了该补丁的潜在用途，尽管原评论指出该功能主要用于调试，但他认为它也可以有效解决嵌套 SMMU（System Memory Management Unit）系列中的 cmdq 超时问题，并且可以避免在驱动代码中频繁调整时钟频率。<br><br>关键技术要点包括：<br>1. pKVM hyp 的时钟支持可以提高调试效率，并在处理 cmdq 超时时提供便利。<br>2. 通过该补丁，开发者可以减少对时钟频率的手动干预，简化代码维护。<br><br>讨论的结论是，尽管补丁最初设计为调试工具，但其实际应用价值更广泛，尤其是在嵌套 SMMU 的上下文中。待解决的问题是如何进一步验证该补丁在实际应用中的有效性和稳定性。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-12]</span> <span class="email-subject">Re: [PATCH v6 16/24] KVM: arm64: Add clock support for the pKVM hyp</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Will Deacon <span class="email-sender">&lt;will@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v3 0/3] arm64: sysreg: Fix sysreg field definitions and generation script</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-09-11</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主要内容是关于对 ARM64 架构下系统寄存器（sysreg）字段定义及生成脚本的修复和改进。邮件中提到的补丁包括三个主要部分：<br><br>1. **修复和整理 sysreg 字段定义**：第一个补丁对 sysreg 字段的定义进行了修正和整理，以确保其准确性和一致性。<br>2. **修正 EIESB 和 DoubleLock 的符号定义**：第二个补丁针对 EIESB 和 DoubleLock 的符号定义进行了修正，以消除潜在的错误。<br>3. **为 sysreg 头文件生成脚本添加验证检查**：第三个补丁在生成 sysreg 头文件的脚本中加入了验证检查，以提高生成过程的可靠性。<br><br>讨论的关键技术要点包括对 sysreg 字段定义的准确性、符号定义的正确性以及生成脚本的健壮性。邮件的结论是这些补丁已被应用到 ARM64 的开发分支中，表明这些问题得到了有效解决。当前没有提出待解决的问题，显示出讨论的顺利进展。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-11]</span> <span class="email-subject">Re: [PATCH v3 0/3] arm64: sysreg: Fix sysreg field definitions and generation script</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Will Deacon <span class="email-sender">&lt;will@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v2 5/7] entry: Rename "kvm" entry code assets to "virt"
 to genericize APIs</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-09-10</span>
                </div>

                <div class="ai-summary">
                    该邮件讨论的主要技术问题是关于将 Linux 内核中的 "kvm" 入口代码资产重命名为 "virt"，以实现 API 的通用化。此补丁旨在提高代码的可读性和可维护性，使其更好地适应虚拟化相关的功能。<br><br>关键的技术要点包括：<br>1. 通过重命名，增强了代码的通用性，使其不仅限于 KVM（Kernel-based Virtual Machine），而是适用于更广泛的虚拟化场景。<br>2. 该补丁得到了 Joel Fernandes 的认可，表明其在 RCU（Read-Copy-Update）部分的实现得到了审查和批准。<br><br>讨论的结论是，该补丁在技术上是合理的，并且得到了相关人员的支持。然而，邮件中没有提到具体的待解决问题，暗示该补丁可能会在未来的版本中被合并。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-10]</span> <span class="email-subject">Re: [PATCH v2 5/7] entry: Rename "kvm" entry code assets to "virt"
 to genericize APIs</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Joel Fernandes <span class="email-sender">&lt;joelagnelf@nvidia.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v6 07/24] tracing: Add events/ root files to trace
 remotes</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-09-09</span>
                </div>

                <div class="ai-summary">
                    在这封邮件中，讨论的主要技术问题是关于在 Linux 内核跟踪系统中添加事件和根文件的补丁。参与者 Vincent Donnefort 提出了一个补丁，旨在改进跟踪功能，但 Steven Rostedt 对补丁的设计提出了疑问，特别是关于是否应该支持读取功能。<br><br>关键的技术要点包括：<br>1. 当前的跟踪缓冲区状态可以通过三个值表示：0 表示全部禁用，1 表示全部启用，X 表示部分启用和部分禁用。<br>2. Steven 对补丁中的某些设计选择表示困惑，特别是提到的状态值 0200 的含义。<br><br>讨论的结论是，虽然补丁的初衷是改善跟踪功能，但在实现细节上仍存在疑问，特别是关于如何有效地表示和读取跟踪状态。待解决的问题是，是否应该增加读取功能以更清晰地反映跟踪状态，以及如何处理不同的启用状态。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-09]</span> <span class="email-subject">Re: [PATCH v6 07/24] tracing: Add events/ root files to trace
 remotes</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Steven Rostedt <span class="email-sender">&lt;rostedt@goodmis.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v4 16/28] iommu/arm-smmu-v3-kvm: Create array for hyp SMMUv3</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-09-09</span>
                </div>

                <div class="ai-summary">
                    在这封邮件中，讨论的主要技术问题是针对 ARM SMMU v3 的 KVM 支持进行补丁更新，具体是创建一个用于 HYP 模式的 SMMUv3 数组。参与者 Mostafa Saleh 提出了几个代码改进建议，包括使用格式说明符 %pOF 来打印设备树节点，确保 mmio_size 使用 size_t 类型并采用格式说明符 %zx，以及对错误信息的语言进行对齐，使其与内核驱动中的 "MMIO region too small (%pr)\n" 一致。<br><br>关键的技术要点包括：<br>1. 提高代码的可读性和一致性，确保错误信息的输出格式与现有内核驱动保持一致。<br>2. 讨论了是否应该使用 kvm_err 代替 pr_err，以便更好地反映错误上下文。<br><br>主要的讨论结论是，参与者对补丁的方向表示认可，但仍需进一步讨论使用 kvm_err 的必要性，以确保错误处理的最佳实践。整体上，这个补丁旨在增强 ARM SMMU v3 在 KVM 环境下的稳定性和可维护性。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-09]</span> <span class="email-subject">Re: [PATCH v4 16/28] iommu/arm-smmu-v3-kvm: Create array for hyp SMMUv3</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Daniel Mentz <span class="email-sender">&lt;danielmentz@google.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v2 0/7] Drivers: hv: Fix NEED_RESCHED_LAZY and use common
 APIs</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-09-09</span>
                </div>

                <div class="ai-summary">
                    在这封邮件中，讨论的主要技术问题是关于针对 Hyper-V 驱动程序的补丁，具体是修复 `NEED_RESCHED_LAZY` 的问题并使用通用 API。补丁的版本为 v2，共包含 7 个部分。<br><br>关键的技术要点包括：<br>1. 修复 `NEED_RESCHED_LAZY` 的实现，以提高调度的效率和准确性。<br>2. 引入通用 API，以简化代码并提高可维护性，减少重复代码的出现。<br><br>讨论的结论是，补丁已经完成，参与者 Sean Christopherson 对 Wei Liu 的指正表示感谢，表明问题得到了有效解决。邮件中没有提及其他待解决的问题，显示出此次补丁的实施是顺利的。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-09]</span> <span class="email-subject">Re: [PATCH v2 0/7] Drivers: hv: Fix NEED_RESCHED_LAZY and use common
 APIs</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Wei Liu <span class="email-sender">&lt;wei.liu@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v4 10/28] KVM: arm64: iommu: Shadow host stage-2 page
 table</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-09-09</span>
                </div>

                <div class="ai-summary">
                    在这封邮件中，讨论的主要技术问题是关于 KVM（Kernel-based Virtual Machine）在 ARM64 架构下的 IOMMU（输入输出内存管理单元）实现，特别是涉及到影子主机阶段2页表的补丁内容。参与者 Mostafa Saleh 提出了对当前实现的疑问，指出 PKVM_HOST_MEM_PROT 和 PKVM_HOST_MMIO_PROT 之间的区别仅在于执行权限，而两者在阶段2中都是可缓存的，这意味着主机应在阶段1中设置更严格的内存类型。<br><br>关键技术要点包括：1) 在 CPU 方面，PKVM_HOST_MEM_PROT 和 PKVM_HOST_MMIO_PROT 的权限差异；2) SMMU（系统内存管理单元）中对 IOMMU_MMIO 的处理；3) 是否有必要在阶段2中主动映射 MMIO 区域。<br><br>讨论的结论是，当前的实现可能存在冗余，参与者建议可以简化代码逻辑，质疑在阶段2中映射 MMIO 区域的必要性。待解决的问题是，是否确实需要在此处设置 IOMMU_MMIO，以及如何优化现有的实现以提高效率。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-09]</span> <span class="email-subject">Re: [PATCH v4 10/28] KVM: arm64: iommu: Shadow host stage-2 page
 table</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Will Deacon <span class="email-sender">&lt;will@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v4 07/28] iommu/arm-smmu-v3: Move TLB range invalidation
 into a macro</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-09-09</span>
                </div>

                <div class="ai-summary">
                    在这封邮件中，讨论的主要技术问题是关于将 ARM SMMU v3 的 TLB 范围失效操作从宏定义迁移到静态内联函数的提议。参与者 Mostafa Saleh 提出了这个补丁，并指出当前的宏定义实现比较复杂。Will Deacon 对此表示关注，并建议考虑使用内联函数来替代宏定义，以提高代码的可读性和可维护性。<br><br>关键的技术要点包括：当前的实现使用宏定义，可能导致代码可读性差；内联函数可以提供更好的类型检查和调试支持，可能是更优的选择。Will Deacon 提到他也在尝试对 CPU 端的类似宏进行替换，显示出对代码清晰度的重视。<br><br>讨论的结论是，虽然当前的宏定义实现存在问题，但是否采用内联函数仍需进一步探讨，尚未达成一致。待解决的问题包括如何在不影响性能的情况下，平衡代码的可读性和复杂性。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-09]</span> <span class="email-subject">Re: [PATCH v4 07/28] iommu/arm-smmu-v3: Move TLB range invalidation
 into a macro</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Will Deacon <span class="email-sender">&lt;will@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v4 06/28] iommu/arm-smmu-v3: Split code with hyp</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-09-09</span>
                </div>

                <div class="ai-summary">
                    在这封邮件中，讨论的主要技术问题是关于 ARM SMMU v3 代码的组织和命名，尤其是与 Hypervisor 相关的部分。参与者 Mostafa Saleh 提出了建议，认为由于该代码同时链接到内核和 Hypervisor 对象，应该去掉文件名中的 "-hyp" 部分，建议将其命名为 "arm-smmu-v3-lib.c"。<br><br>关键的技术要点包括：<br>1. 文件命名的合理性与一致性，确保文件名能够准确反映其功能和用途。<br>2. 代码的组织结构，如何在内核和 Hypervisor 之间有效管理和共享代码。<br><br>讨论的主要结论是，参与者对文件命名的建议表示认可，并鼓励大家提出更多的意见和建议（“让我们开始讨论吧！”）。目前尚未达成最终决定，仍需进一步的讨论和共识。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-09]</span> <span class="email-subject">Re: [PATCH v4 06/28] iommu/arm-smmu-v3: Split code with hyp</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Will Deacon <span class="email-sender">&lt;will@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v4 02/28] KVM: arm64: Donate MMIO to the hypervisor</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-09-09</span>
                </div>

                <div class="ai-summary">
                    该邮件讨论了一个关于 KVM（Kernel-based Virtual Machine）在 arm64 架构下的补丁，主题为“将 MMIO（内存映射输入输出）捐赠给虚拟机监控器”。主要参与者是 Will Deacon 和 Mostafa Saleh。<br><br>讨论的技术问题集中在补丁中对 MMIO 页框号（pfn）的处理。Mostafa Saleh 提出在进行 MMIO 页框号的所有权检查之前，应该首先确认该 pfn 是否确实为 MMIO。具体来说，他建议在检查 pte（页表项）之前，需确保以下几点：<br>1. pfn 是 MMIO。<br>2. pfn 被虚拟机监控器（hyp）拥有。<br>3. 主机上没有其他映射在该 pfn 上。<br><br>此外，Will Deacon 询问该代码是否可能在来宾环境中被触发，特别是在执行 pkvm_pgtable_stage2_destroy() 时是否会遇到 MMIO 保护的 pte。<br><br>讨论的关键要点包括对 MMIO 页框号的验证流程和潜在的代码路径问题。当前的结论是需要进一步明确 MMIO 页框号的处理逻辑，以避免在虚拟机和主机之间的资源冲突。待解决的问题包括如何确保在不同情况下对 pfn 的正确处理。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-09]</span> <span class="email-subject">Re: [PATCH v4 02/28] KVM: arm64: Donate MMIO to the hypervisor</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Will Deacon <span class="email-sender">&lt;will@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v4 01/28] KVM: arm64: Add a new function to donate memory
 with prot</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-09-09</span>
                </div>

                <div class="ai-summary">
                    在这封邮件中，讨论的主要技术问题是关于在 KVM（Kernel-based Virtual Machine）中为 arm64 架构添加一个新函数以捐赠内存时的权限处理。Mostafa Saleh 提出了一个建议，询问是否应该强制将权限设置为 KVM_PGTABLE_PROT_RW，并在不符合时发出警告。<br><br>关键的技术要点包括：<br>1. 讨论的函数涉及内存捐赠的权限管理，特别是与内存类型相关的权限设置。<br>2. Mostafa Saleh 提出的建议是通过 WARN_ON 宏来确保权限为 KVM_PGTABLE_PROT_RW，而不是允许其他权限组合。<br><br>主要的讨论结论是，Will Deacon 认为应该保留当前的行为，因为此次更改的动机主要是关于内存类型，而不是权限。因此，强制将权限限制为 KVM_PGTABLE_PROT_RW 可能并不合适。待解决的问题是如何在不影响现有功能的情况下，合理地处理内存捐赠的权限设置。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-09]</span> <span class="email-subject">Re: [PATCH v4 01/28] KVM: arm64: Add a new function to donate memory
 with prot</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Will Deacon <span class="email-sender">&lt;will@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v6 02/24] ring-buffer: Introduce ring-buffer remotes</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-09-08</span>
                </div>

                <div class="ai-summary">
                    该邮件讨论的主要技术问题是关于 Linux 内核中环形缓冲区（ring-buffer）远程访问的补丁内容。Vincent Donnefort 提出了对补丁中函数命名的建议，认为如果某个函数涉及内存分配，函数名中应包含“alloc”字样，以提高代码的可读性和一致性。他以 `#define ring_buffer_alloc_remote(remote)` 为例，指出当前命名不够明确。<br><br>在技术要点方面，Steven Rostedt 提出了优化建议，认为可以通过使用 `guard(raw_spinlock)(&cpu_buffer->reader_lock);` 来替代某些代码，从而避免不必要的解锁操作，这样可以提高代码的效率和安全性。<br><br>讨论的结论是，参与者一致认为需要对函数命名进行改进，以反映其实际功能。同时，关于锁的管理和代码优化的建议也得到了认可，但具体的实现细节仍需进一步探讨和确认。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-08]</span> <span class="email-subject">Re: [PATCH v6 02/24] ring-buffer: Introduce ring-buffer remotes</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Steven Rostedt <span class="email-sender">&lt;rostedt@goodmis.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v15 4/6] KVM: arm64: Set PSTATE.EXLOCK when entering an exception</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-09-08</span>
                </div>

                <div class="ai-summary">
                    在这封邮件中，讨论的主要技术问题是关于 KVM（Kernel-based Virtual Machine）在 ARM64 架构中处理异常时的 PSTATE.EXLOCK 设置。Marc Zyngier 提出了一个补丁，旨在确保在进入异常时正确设置 PSTATE.EXLOCK，以提高系统的稳定性和性能。<br><br>关键的技术要点包括：<br>1. PSTATE.EXLOCK 是 ARM 架构中一个重要的状态位，影响异常处理的行为。<br>2. 当前的实现中，只有在 NV（Non-Volatile）情况下需要模拟 ERET（异常返回），这表明在其他情况下可能存在优化的空间。<br><br>讨论的结论是，虽然补丁的提出是为了改善异常处理，但在实现细节上还有进一步的优化和讨论空间。特别是关于 ARM 文档中章节编号的建议，表明参与者对文档的准确性和一致性有关注。整体来看，补丁的方向是正确的，但仍需进一步验证和讨论。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-08]</span> <span class="email-subject">Re: [PATCH v15 4/6] KVM: arm64: Set PSTATE.EXLOCK when entering an exception</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v11 0/6] KVM: arm64: Support FF-A 1.2</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-09-08</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主要内容是关于对 KVM（Kernel-based Virtual Machine）在 arm64 架构上支持 FF-A（Firmware Framework for Arm）1.2 版本的补丁，邮件中包含了一个补丁系列（PATCH v11 0/6）。参与者 Will Deacon 表示对补丁的内容感到满意，并提到如果 Marc 也同意，这个补丁将会通过 kvmarm 树进行合并。<br><br>关键的技术要点包括：<br>1. FF-A 1.2 的支持将增强 KVM 在 arm64 平台上的功能，提升虚拟化性能和兼容性。<br>2. 补丁经过多次迭代，已经解决了之前的反馈和问题，显示出开发团队对代码质量和功能完整性的重视。<br><br>讨论的结论是，补丁在技术上得到了认可，下一步需要等待 Marc 的确认，以便最终合并到主线代码中。当前没有提出新的待解决问题，表明该补丁已接近完成状态。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-08]</span> <span class="email-subject">Re: [PATCH v11 0/6] KVM: arm64: Support FF-A 1.2</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Will Deacon <span class="email-sender">&lt;will@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v11 2/6] KVM: arm64: Use SMCCC 1.2 for FF-A
 initialization and in host handler</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-09-08</span>
                </div>

                <div class="ai-summary">
                    该邮件讨论的主要技术问题是关于在 KVM（Kernel-based Virtual Machine）中对 ARM64 架构的 FF-A（Firmware Framework for Arm）初始化的补丁，具体是使用 SMCCC（Secure Monitor Call Convention）1.2 版本。补丁的目标是优化虚拟化环境下的固件调用，确保更高效的资源管理和安全性。<br><br>关键技术要点包括：<br>1. 引入 SMCCC 1.2 以支持更先进的固件调用机制。<br>2. 通过改进 FF-A 的初始化过程，提升 KVM 在 ARM64 平台上的性能和安全性。<br>3. 该补丁的实现涉及对现有代码的调整，以适应新的调用约定。<br><br>讨论的结论是，Will Deacon 对该补丁表示认可（Acked-by），表明该补丁已经得到了初步的审查和支持。目前没有提及待解决的问题，暗示该补丁在技术上是可行的，可能会进入后续的合并流程。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-08]</span> <span class="email-subject">Re: [PATCH v11 2/6] KVM: arm64: Use SMCCC 1.2 for FF-A
 initialization and in host handler</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Will Deacon <span class="email-sender">&lt;will@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v2] KVM: arm64: ptdump: Don't test PTE_VALID alongside
 other attributes</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-09-08</span>
                </div>

                <div class="ai-summary">
                    该邮件讨论了一个针对 KVM（Kernel-based Virtual Machine）在 arm64 架构下的补丁，主题为“ptdump: 不要在测试其他属性时同时测试 PTE_VALID”。邮件中提到的技术问题主要集中在如何优化页表条目（PTE）的有效性检查，以提高性能和准确性。<br><br>关键技术要点包括：<br>1. 补丁旨在简化 PTE 的验证过程，避免在检查其他属性时额外测试 PTE_VALID，从而减少不必要的复杂性。<br>2. 该补丁的提出者 Wei-Lin Chang 认为这种修改将有助于提升 KVM 的整体效率。<br><br>讨论的结论是，补丁得到了 Will Deacon 的认可，并预计将由 Oliver 或 Marc 通过 kvmarm 树进行处理。当前没有提出的待解决问题，表明该补丁在技术上得到了支持并将继续推进。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-08]</span> <span class="email-subject">Re: [PATCH v2] KVM: arm64: ptdump: Don't test PTE_VALID alongside
 other attributes</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Will Deacon <span class="email-sender">&lt;will@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH kvmtool v3 0/6] arm64: Nested virtualization support</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-09-08</span>
                </div>

                <div class="ai-summary">
                    在这封邮件中，讨论的主要技术问题是关于对 KVM 工具的补丁支持，特别是针对 ARM64 架构的嵌套虚拟化功能。邮件的发件人 Will Deacon 提到 Andre Przywara 是否计划根据 Alexandru 提出的未解决的评论重新修改补丁。<br><br>关键的技术要点包括：<br>1. ARM64 架构的嵌套虚拟化支持是当前补丁的核心内容，可能涉及到虚拟机管理程序（hypervisor）和虚拟机之间的交互。<br>2. 需要对之前的补丁进行修改，以解决评论者提出的技术问题和改进建议。<br><br>讨论的结论是，Andre 需要考虑 Alexandru 的反馈，并决定是否重新提交补丁以解决这些问题。当前的状态显示出对补丁质量的重视，以及对嵌套虚拟化功能的进一步完善的需求。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-08]</span> <span class="email-subject">Re: [PATCH kvmtool v3 0/6] arm64: Nested virtualization support</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Will Deacon <span class="email-sender">&lt;will@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH 2/2] KVM: arm64: Map hyp text as RO and dump instr on
 panic</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-09-08</span>
                </div>

                <div class="ai-summary">
                    在这封邮件中，主要讨论了一个针对 KVM（Kernel-based Virtual Machine）在 arm64 架构下的补丁，内容是将 hyp（hypervisor）文本区域映射为只读（RO），并在系统崩溃时转储指令以便于调试。补丁的目的是提高系统的安全性和可维护性。<br><br>关键技术要点包括：<br>1. 将 hyp 文本区域设置为只读，可以防止恶意代码的注入和执行，增强系统的安全性。<br>2. 在系统崩溃时能够转储指令，有助于开发者进行故障排查和分析，提升系统的稳定性。<br><br>讨论的结论是，该补丁得到了参与者 Will Deacon 的认可（Acked），表明其在技术上是可行的，且没有明显的问题需要解决。整体来看，此补丁有助于提升 KVM 的安全性和可调试性。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-08]</span> <span class="email-subject">Re: [PATCH 2/2] KVM: arm64: Map hyp text as RO and dump instr on
 panic</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Will Deacon <span class="email-sender">&lt;will@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v4 4/7] arm64: Provide basic EL2 setup for FEAT_{LS64,
 LS64_V} usage at EL0/1</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-09-08</span>
                </div>

                <div class="ai-summary">
                    该邮件讨论了针对 ARM64 架构的一个补丁，主要内容是为 EL0 和 EL1 层提供基本的 EL2 设置，以支持 FEAT_{LS64, LS64_V} 特性。参与者 Yicong Yang 提出了补丁，得到了 Will Deacon 的认可（Acked-by），表明该补丁得到了初步的支持。<br><br>关键技术要点包括：<br>1. EL2 设置的基本框架，为后续的特性实现奠定基础。<br>2. FEAT_{LS64, LS64_V} 特性在 EL0 和 EL1 层的应用，可能涉及到虚拟化性能和安全性方面的改进。<br><br>讨论的结论是，该补丁得到了认可，但邮件中没有提及具体的待解决问题，表明该补丁可能已准备好进入下一步的审查或合并阶段。整体来看，此次讨论集中于补丁的有效性和对 ARM64 虚拟化特性的支持。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-08]</span> <span class="email-subject">Re: [PATCH v4 4/7] arm64: Provide basic EL2 setup for FEAT_{LS64,
 LS64_V} usage at EL0/1</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Will Deacon <span class="email-sender">&lt;will@kernel.org&gt;</span></div>
                </div>
            </div>
        </div>

        <div class="category">
            <h2>RFC</h2>

            <div class="thread">
                <div class="thread-header">
                    <h3>[RFC PATCH v1 34/38] coco: guest: arm64: Validate mmio range
 found in the interface report</h3>
                </div>

                <div class="thread-meta">
                    <span>6 messages</span>
                    <span>5 participants</span>
                    <span>Started: 2025-09-10</span>
                </div>

                <div class="ai-summary">
                    本邮件线程主要讨论了在 ARM64 虚拟化环境中验证 MMIO（内存映射输入输出）范围的问题，尤其是在处理 MSI-X 表、PBA（中断路由表）和非 TEE（可信执行环境）区域时的挑战。参与者 Arto Merilainen 提出了在 BAR（基址寄存器）稀疏的情况下，接口报告可能包含多个具有相同范围 ID 的范围，这导致 RSI_VDEV_VALIDATE_MAPPING 的验证失败，因为不同范围的物理地址可能不匹配。<br><br>关键技术要点包括：1) 接口报告的解析需要了解设备的寄存器布局，自动验证和重映射可能无法实现；2) 驱动程序在设备被接受后才加载，因此在验证接口报告时可能面临缺失 MSI-X 表和 PBA 范围的问题；3) 需要在通用操作系统代码中实现新的 TSM（可信服务管理）操作，以便正确处理 BAR 范围的验证。<br><br>讨论的主要结论是，当前的验证机制存在缺陷，需改进以确保驱动程序不会错误映射不安全的 MMIO 区域。同时，建议构建通用基础设施来处理 MSI-X 的特殊情况，以便更好地支持虚拟化环境中的设备管理。待解决的问题包括如何在不依赖设备驱动的情况下，准确验证和映射 MMIO 范围。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-10]</span> <span class="email-subject">Re: [RFC PATCH v1 34/38] coco: guest: arm64: Validate mmio range
 found in the interface report</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Arto Merilainen <span class="email-sender">&lt;amerilainen@nvidia.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-10]</span> <span class="email-subject">Re: [RFC PATCH v1 34/38] coco: guest: arm64: Validate mmio range
 found in the interface report</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Jason Gunthorpe <span class="email-sender">&lt;jgg@ziepe.ca&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-11]</span> <span class="email-subject">Re: [RFC PATCH v1 34/38] coco: guest: arm64: Validate mmio range
 found in the interface report</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Aneesh Kumar K.V <span class="email-sender">&lt;aneesh.kumar@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-11]</span> <span class="email-subject">Re: [RFC PATCH v1 34/38] coco: guest: arm64: Validate mmio range
 found in the interface report</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Alexey Kardashevskiy <span class="email-sender">&lt;aik@amd.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-11]</span> <span class="email-subject">Re: [RFC PATCH v1 34/38] coco: guest: arm64: Validate mmio range
 found in the interface report</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Jason Gunthorpe <span class="email-sender">&lt;jgg@ziepe.ca&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-11]</span> <span class="email-subject">Re: [RFC PATCH v1 34/38] coco: guest: arm64: Validate mmio range
 found in the interface report</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: dan.j.williams <span class="email-sender">&lt;dan.j.williams@intel.com&gt;</span></div>
                </div>
            </div>
        </div>

        <div class="category">
            <h2>Bug Report</h2>

            <div class="thread">
                <div class="thread-header">
                    <h3>[syzbot] [kvmarm?] [kvm?] WARNING: locking bug in vgic_put_irq</h3>
                </div>

                <div class="thread-meta">
                    <span>2 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-09-09</span>
                </div>

                <div class="ai-summary">
                    本邮件线程主要讨论了在 KVM（Kernel-based Virtual Machine）环境下，针对 ARM 架构的 VGIC（虚拟通用中断控制器）相关的锁定错误问题。具体而言，邮件中提到的补丁旨在修复 `vgic_put_irq` 函数中的锁定错误。<br><br>关键技术要点包括：<br>1. 补丁的目的是修复 VGIC 中的锁定机制，以提高系统的稳定性和性能。<br>2. syzbot 尝试测试该补丁，但在构建和启动虚拟机时遇到了连接超时的问题，导致测试失败。<br>3. 邮件中提供了详细的构建日志，显示了在构建过程中使用的工具链和环境配置。<br><br>讨论的结论是，尽管补丁的目标明确，但由于测试失败，尚未验证补丁的有效性。参与者需要进一步调查连接超时的原因，并确保补丁能够成功应用和测试，以解决 VGIC 中的锁定问题。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-09]</span> <span class="email-subject">Re: [syzbot] [kvmarm?] [kvm?] WARNING: locking bug in vgic_put_irq</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-09]</span> <span class="email-subject">Re: [syzbot] [kvmarm?] [kvm?] WARNING: locking bug in vgic_put_irq</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: syzbot <span class="email-sender">&lt;syzbot+cef594105ac7e60c6d93@syzkaller.appspotmail.com&gt;</span></div>
                </div>
            </div>
        </div>

        <div class="category">
            <h2>GIT PULL</h2>

            <div class="thread">
                <div class="thread-header">
                    <h3>[GIT PULL] KVM/arm64 changes for 6.17, round #3</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-09-10</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论了 KVM/arm64 在 6.17 版本中的最终修复集，主要由 Oliver Upton 提交。邮件中提到，针对在销毁阶段 2 页表时出现的 RCU 阻塞问题，已撤回之前的一些修复，因其存在引用计数和使用后释放（UAF）问题，初步的解决方案未能奏效。<br><br>关键技术要点包括：<br>1. 在释放 PGD 时使嵌套 MMU 无效，以避免在 MMU 通知时出现警告。<br>2. 修复 TLB 匹配过程及 TLB 无效化范围，以更好地管理 VCNR 伪 TLB。<br>3. 解决了 SPE 错误地分析来宾的情况，并修正了 VHE 系统中主机 MDCR_EL2 的保存和恢复。<br>4. 改进了 VGIC LPIs 的锁定顺序，避免了锁嵌套的问题。<br><br>讨论的主要结论是，虽然进行了一系列修复，但仍需进一步解决 RCU 和引用计数相关的问题，以确保系统的稳定性和性能。整体来看，KVM/arm64 的修复工作仍在持续推进中。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-10]</span> <span class="email-subject">[GIT PULL] KVM/arm64 changes for 6.17, round #3</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
                </div>
            </div>
        </div>

        <div class="category">
            <h2>Discussion</h2>

            <div class="thread">
                <div class="thread-header">
                    <h3>[kvm-unit-tests PATCH] arm64: mte: Fix MTE granule mask</h3>
                </div>

                <div class="thread-meta">
                    <span>3 messages</span>
                    <span>3 participants</span>
                    <span>Started: 2025-09-08</span>
                </div>

                <div class="ai-summary">
                    在这次邮件讨论中，主要关注的是对 ARM64 架构下 MTE（Memory Tagging Extension）粒度掩码的修复补丁。参与者 Alexandru Elisei 和 Vladimir Murzin 详细讨论了 MTE_GRANULE_MASK 的使用及其变更对掩码生成的影响。<br><br>关键技术要点包括：在补丁应用之前，MTE_GRANULE_MASK 的生成结果为 0x0fff_ffff_ffff_ffff，导致掩码未能正确屏蔽逻辑标签；而在补丁应用后，掩码变为 0xf0ff_ffff_ffff_ffff，成功屏蔽了逻辑标签，确保了正确性。Alexandru 还询问了如何发现这个问题，Vladimir 以“肉眼观察”作为回应，表明问题的显著性。<br><br>讨论的结论是，补丁已被审核并合并，修复了 MTE 粒度掩码的问题，确保了 ARM64 架构下 MTE 的正确性。整体来看，邮件讨论清晰地阐明了技术细节和修复过程，确保了代码的可靠性。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-08]</span> <span class="email-subject">Re: [kvm-unit-tests PATCH] arm64: mte: Fix MTE granule mask</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Alexandru Elisei <span class="email-sender">&lt;alexandru.elisei@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-08]</span> <span class="email-subject">Re: [kvm-unit-tests PATCH] arm64: mte: Fix MTE granule mask</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Vladimir Murzin <span class="email-sender">&lt;vladimir.murzin@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-08]</span> <span class="email-subject">Re: [kvm-unit-tests PATCH] arm64: mte: Fix MTE granule mask</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Andrew Jones <span class="email-sender">&lt;andrew.jones@linux.dev&gt;</span></div>
                </div>
            </div>
        </div>

        <div class="category">
            <h2>Other</h2>

            <div class="thread">
                <div class="thread-header">
                    <h3>[syzbot] [kvmarm?] KASAN: invalid-access Read in __kvm_pgtable_walk</h3>
                </div>

                <div class="thread-meta">
                    <span>3 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-09-09</span>
                </div>

                <div class="ai-summary">
                    在此次邮件讨论中，主要关注的是在 KVM ARM 虚拟化环境中，KASAN（Kernel Address Sanitizer）检测到的内存访问错误。具体问题出现在 `__kvm_pgtable_walk` 函数中，报告显示在访问特定内存地址时发生了无效访问，导致内核崩溃。<br><br>技术要点包括：<br>1. 错误发生在 ARM64 架构的 KVM 页表处理代码中，涉及到的函数包括 `__kvm_pgtable_visit` 和 `__kvm_pgtable_walk`。<br>2. 报告中提供了详细的调用栈和内存状态信息，显示出错误的内存地址及其相关的物理页面状态。<br>3. 提到的错误可能与内存标签（memory tag）和指针标签（pointer tag）不匹配有关。<br><br>讨论的结论是，尽管 Oliver Upton 提出了一个补丁进行修复，但经过测试后，问题依然存在，KASAN 仍然报告无效访问。这表明当前的修复措施未能解决根本问题，后续需要进一步分析和调试以找到有效的解决方案。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-09]</span> <span class="email-subject">[syzbot] [kvmarm?] KASAN: invalid-access Read in __kvm_pgtable_walk</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: syzbot <span class="email-sender">&lt;syzbot+31156cb24a340d8e2c05@syzkaller.appspotmail.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-09]</span> <span class="email-subject">Re: [syzbot] [kvmarm?] KASAN: invalid-access Read in
 __kvm_pgtable_walk</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-09]</span> <span class="email-subject">Re: [syzbot] [kvmarm?] KASAN: invalid-access Read in __kvm_pgtable_walk</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: syzbot <span class="email-sender">&lt;syzbot+31156cb24a340d8e2c05@syzkaller.appspotmail.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[syzbot] [kvmarm?] kernel panic: Unhandled exception</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-09-09</span>
                </div>

                <div class="ai-summary">
                    在本邮件讨论中，syzbot报告了一个在KVM ARM64环境下的内核崩溃问题，具体表现为“未处理的异常”导致内核恐慌。该问题出现在合并了kvm-arm64/ffa-1.2分支的最新提交（9c642e6226e3）中。崩溃的详细信息和堆栈跟踪显示，问题可能与虚拟机的初始化过程有关，特别是在调用`pkvm_init_host_vm`和`kvm_arch_init_vm`时。<br><br>关键技术要点包括：<br>1. 崩溃发生在ARM64架构的KVM模块中，涉及到虚拟机创建和设备注册的锁机制。<br>2. 日志中提到可能存在不一致的锁状态，提示存在潜在的死锁风险。<br>3. 提供了多个调试资源，包括控制台输出、内核配置和可下载的镜像文件，方便开发者进行进一步分析。<br><br>讨论的主要结论是，开发者需要调查并修复此问题，确保在虚拟机初始化过程中锁的使用是安全的。此外，建议在修复后在提交中添加相应的标签以便追踪。当前，尚未明确解决方案，开发者需要进一步分析崩溃日志以定位问题根源。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-09]</span> <span class="email-subject">[syzbot] [kvmarm?] kernel panic: Unhandled exception</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: syzbot <span class="email-sender">&lt;syzbot+d173b3985bd6b9487fa1@syzkaller.appspotmail.com&gt;</span></div>
                </div>
            </div>
        </div>

    </div>
</body>
</html>
