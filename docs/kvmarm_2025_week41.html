<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KVMARM 邮件列表 AI 总结报告</title>
    <style>
        body {
            font-family: 'Courier New', 'Courier', monospace;
            line-height: 1.5;
            max-width: 1200px;
            margin: 0 auto;
            padding: 30px 40px;
            background-color: #ffffff;
            color: #222;
        }
        .container {
            background: #ffffff;
        }
        h1 {
            font-size: 2.2em;
            font-weight: bold;
            color: #000;
            margin-bottom: 0.3em;
            text-align: center;
            border-bottom: 2px solid #000;
            padding-bottom: 15px;
        }
        h2 {
            font-size: 1.6em;
            font-weight: bold;
            color: #000;
            margin-top: 2em;
            margin-bottom: 0.6em;
            border-bottom: 1px solid #333;
            padding-bottom: 8px;
        }
        h3 {
            font-size: 1.2em;
            font-weight: bold;
            color: #111;
            margin-top: 1.5em;
            margin-bottom: 0.5em;
        }
        h4 {
            font-size: 1.05em;
            font-weight: bold;
            color: #333;
            margin-top: 1.2em;
            margin-bottom: 0.5em;
        }
        .meta-info {
            background: #f9f9f9;
            border: 1px solid #ddd;
            padding: 15px 20px;
            margin: 20px 0;
            font-size: 0.95em;
            line-height: 1.6;
        }
        .meta-info p {
            margin: 6px 0;
            color: #444;
        }
        .meta-info strong {
            color: #000;
            font-weight: bold;
        }
        .stats {
            display: table;
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            border: 1px solid #000;
        }
        .stat-card {
            display: table-cell;
            border: 1px solid #000;
            padding: 12px 15px;
            text-align: center;
            background: #fafafa;
        }
        .stat-card h3 {
            margin: 0;
            color: #000;
            font-size: 1.8em;
            font-weight: bold;
            border: none;
            padding: 0;
        }
        .stat-card p {
            margin: 5px 0 0 0;
            color: #444;
            font-size: 0.9em;
            font-weight: normal;
        }
        .category {
            margin: 30px 0;
        }
        .thread {
            margin: 25px 0;
            padding: 15px;
            background: #fafafa;
            border: 1px solid #ccc;
            page-break-inside: avoid;
        }
        .thread-header {
            margin-bottom: 12px;
            border-bottom: 1px solid #ddd;
            padding-bottom: 10px;
        }
        .thread-header h3 {
            font-size: 1.15em;
            font-weight: bold;
            color: #000;
            margin: 0;
        }
        .thread-meta {
            display: block;
            margin: 8px 0 12px 0;
            font-size: 0.9em;
            color: #555;
            font-style: italic;
        }
        .thread-meta span {
            margin-right: 15px;
        }
        .ai-summary {
            background: #fff;
            border-left: 3px solid #666;
            padding: 12px 15px;
            margin: 15px 0;
            line-height: 1.6;
            color: #222;
            font-style: italic;
        }
        .email-list {
            background: #fff;
            border: 1px solid #ccc;
            padding: 10px 15px;
            font-family: 'Courier New', 'Consolas', monospace;
            font-size: 0.88em;
            line-height: 1.5;
            overflow-x: auto;
            margin: 10px 0;
        }
        .email-item {
            margin: 4px 0;
            padding: 2px 0;
            color: #222;
        }
        .email-item.historical {
            background: #f5f5f5;
            border-left: 3px solid #999;
            padding-left: 8px;
            opacity: 0.8;
        }
        .email-item.new {
            background: #fffef0;
            border-left: 3px solid #0066cc;
            padding-left: 8px;
        }
        .email-date {
            color: #0066cc;
            font-weight: bold;
        }
        .email-date.historical {
            color: #666;
        }
        .email-sender {
            color: #c30;
            font-weight: normal;
        }
        .email-subject {
            color: #000;
        }
        .historical-marker {
            color: #999;
            font-size: 0.85em;
            font-style: italic;
        }
        .new-marker {
            color: #0066cc;
            font-size: 0.85em;
            font-weight: bold;
        }
        .archive-link {
            display: inline-block;
            margin: 15px 0;
            padding: 10px 20px;
            background: #333;
            color: #fff;
            text-decoration: none;
            border: 2px solid #000;
            font-weight: bold;
            transition: all 0.2s;
        }
        .archive-link:hover {
            background: #000;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>KVMARM Mailing List Analysis Report</h1>

        <div class="meta-info">
            <p><strong>Generated:</strong> 2025-10-27 13:01</p>
            <p><strong>Time Period:</strong> 2025年10月 第41周 (10/06 - 10/12)</p>
            <p><strong>Total Messages:</strong> 149 | <strong>Total Threads:</strong> 27</p>
            <p style="text-align: center;"><a href="archive.html" class="archive-link">📚 历史归档 Archive</a></p>
        </div>


        <div class="category">
            <h2>PATCH</h2>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v12 00/12] KVM: guest_memfd: Add NUMA mempolicy support</h3>
                </div>

                <div class="thread-meta">
                    <span>33 messages</span>
                    <span>4 participants</span>
                    <span>Started: 2025-10-07</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主题是关于 KVM 的 guest_memfd 功能的 NUMA 内存策略支持的补丁系列（PATCH v12 00/12）。该补丁旨在增强 KVM 中的 guest_memfd 功能，以便支持 NUMA-aware 的内存分配。<br><br>**原始补丁/问题的内容**：<br>补丁系列的核心是为 guest_memfd 添加 NUMA 内存策略支持，允许虚拟机监控器（VMM）在分配内存时考虑 NUMA 结构。补丁包括对现有代码的重构和功能增强，以便更好地支持 NUMA 策略。<br><br>**之前讨论要点**：<br>在历史讨论中，开发者们探讨了如何实现 NUMA 策略的支持，特别是如何通过 inode 结构来存储内存策略信息，以及如何在 mmap 操作中使用这些策略。讨论还涉及到对现有代码的重命名和清理，以提高代码的可读性和可维护性。<br><br>**本周的新讨论、进展或结论**：<br>本周的讨论主要集中在补丁的具体实现和细节上，包括：<br>1. 对结构体和函数的重命名，以避免混淆。<br>2. 增加了对 NUMA 策略的支持，包括通过 vm_ops 接口实现对内存的映射和策略的设置。<br>3. 讨论了如何在自测中验证 NUMA 策略的有效性，并添加了相关的测试用例。<br>4. 参与者们对补丁的各个部分进行了审查和反馈，确认了补丁的方向和实现细节。<br><br>整体来看，本周的讨论推动了 NUMA 策略支持的实现进展，并为后续的代码合并奠定了基础。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-07]</span> <span class="email-subject">[PATCH v12 00/12] KVM: guest_memfd: Add NUMA mempolicy support</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-07]</span> <span class="email-subject">[PATCH v12 01/12] KVM: guest_memfd: Rename "struct kvm_gmem" to
 "struct gmem_file"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-07]</span> <span class="email-subject">[PATCH v12 02/12] KVM: guest_memfd: Add macro to iterate over
 gmem_files for a mapping/inode</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-07]</span> <span class="email-subject">[PATCH v12 03/12] KVM: guest_memfd: Use guest mem inodes instead of
 anonymous inodes</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-07]</span> <span class="email-subject">[PATCH v12 04/12] KVM: guest_memfd: Add slab-allocated inode cache</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-07]</span> <span class="email-subject">[PATCH v12 05/12] KVM: guest_memfd: Enforce NUMA mempolicy using
 shared policy</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-07]</span> <span class="email-subject">[PATCH v12 06/12] KVM: selftests: Define wrappers for common syscalls
 to assert success</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-07]</span> <span class="email-subject">[PATCH v12 07/12] KVM: selftests: Report stacktraces SIGBUS, SIGSEGV,
 SIGILL, and SIGFPE by default</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-07]</span> <span class="email-subject">[PATCH v12 08/12] KVM: selftests: Add additional equivalents to
 libnuma APIs in KVM's numaif.h</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-07]</span> <span class="email-subject">[PATCH v12 09/12] KVM: selftests: Use proper uAPI headers to pick up
 mempolicy.h definitions</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-07]</span> <span class="email-subject">[PATCH v12 10/12] KVM: selftests: Add helpers to probe for NUMA
 support, and multi-node systems</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-07]</span> <span class="email-subject">[PATCH v12 11/12] KVM: selftests: Add guest_memfd tests for mmap and
 NUMA policy support</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-07]</span> <span class="email-subject">[PATCH v12 12/12] KVM: guest_memfd: Add gmem_inode.flags field
 instead of using i_private</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-08]</span> <span class="email-subject">Re: [PATCH v12 01/12] KVM: guest_memfd: Rename "struct kvm_gmem" to
 "struct gmem_file"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Garg, Shivank <span class="email-sender">&lt;shivankg@amd.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-08]</span> <span class="email-subject">Re: [PATCH v12 02/12] KVM: guest_memfd: Add macro to iterate over
 gmem_files for a mapping/inode</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Garg, Shivank <span class="email-sender">&lt;shivankg@amd.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-09]</span> <span class="email-subject">Re: [PATCH v12 00/12] KVM: guest_memfd: Add NUMA mempolicy support</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Ackerley Tng <span class="email-sender">&lt;ackerleytng@google.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-09]</span> <span class="email-subject">Re: [PATCH v12 01/12] KVM: guest_memfd: Rename "struct kvm_gmem" to
 "struct gmem_file"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Ackerley Tng <span class="email-sender">&lt;ackerleytng@google.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-09]</span> <span class="email-subject">Re: [PATCH v12 02/12] KVM: guest_memfd: Add macro to iterate over
 gmem_files for a mapping/inode</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Ackerley Tng <span class="email-sender">&lt;ackerleytng@google.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-09]</span> <span class="email-subject">Re: [PATCH v12 04/12] KVM: guest_memfd: Add slab-allocated inode cache</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Ackerley Tng <span class="email-sender">&lt;ackerleytng@google.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-09]</span> <span class="email-subject">Re: [PATCH v12 06/12] KVM: selftests: Define wrappers for common
 syscalls to assert success</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Ackerley Tng <span class="email-sender">&lt;ackerleytng@google.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-09]</span> <span class="email-subject">Re: [PATCH v12 05/12] KVM: guest_memfd: Enforce NUMA mempolicy using
 shared policy</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Ackerley Tng <span class="email-sender">&lt;ackerleytng@google.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-09]</span> <span class="email-subject">Re: [PATCH v12 04/12] KVM: guest_memfd: Add slab-allocated inode cache</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Ackerley Tng <span class="email-sender">&lt;ackerleytng@google.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-09]</span> <span class="email-subject">Re: [PATCH v12 07/12] KVM: selftests: Report stacktraces SIGBUS,
 SIGSEGV, SIGILL, and SIGFPE by default</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Ackerley Tng <span class="email-sender">&lt;ackerleytng@google.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-09]</span> <span class="email-subject">Re: [PATCH v12 08/12] KVM: selftests: Add additional equivalents to
 libnuma APIs in KVM's numaif.h</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Ackerley Tng <span class="email-sender">&lt;ackerleytng@google.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-09]</span> <span class="email-subject">Re: [PATCH v12 11/12] KVM: selftests: Add guest_memfd tests for mmap
 and NUMA policy support</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Ackerley Tng <span class="email-sender">&lt;ackerleytng@google.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-10]</span> <span class="email-subject">Re: [PATCH v12 00/12] KVM: guest_memfd: Add NUMA mempolicy support</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Garg, Shivank <span class="email-sender">&lt;shivankg@amd.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-10]</span> <span class="email-subject">Re: [PATCH v12 05/12] KVM: guest_memfd: Enforce NUMA mempolicy using
 shared policy</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Garg, Shivank <span class="email-sender">&lt;shivankg@amd.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-10]</span> <span class="email-subject">Re: [PATCH v12 01/12] KVM: guest_memfd: Rename "struct kvm_gmem" to
 "struct gmem_file"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: David Hildenbrand <span class="email-sender">&lt;david@redhat.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-10]</span> <span class="email-subject">Re: [PATCH v12 00/12] KVM: guest_memfd: Add NUMA mempolicy support</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Ackerley Tng <span class="email-sender">&lt;ackerleytng@google.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-10]</span> <span class="email-subject">Re: [PATCH v12 09/12] KVM: selftests: Use proper uAPI headers to pick
 up mempolicy.h definitions</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Ackerley Tng <span class="email-sender">&lt;ackerleytng@google.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-10]</span> <span class="email-subject">Re: [PATCH v12 05/12] KVM: guest_memfd: Enforce NUMA mempolicy using
 shared policy</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-10]</span> <span class="email-subject">Re: [PATCH v12 05/12] KVM: guest_memfd: Enforce NUMA mempolicy using
 shared policy</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Ackerley Tng <span class="email-sender">&lt;ackerleytng@google.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-13]</span> <span class="email-subject">Re: [PATCH v12 05/12] KVM: guest_memfd: Enforce NUMA mempolicy using
 shared policy</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Garg, Shivank <span class="email-sender">&lt;shivankg@amd.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v7 03/12] mm: introduce AS_NO_DIRECT_MAP</h3>
                </div>

                <div class="thread-meta">
                    <span>13 messages</span>
                    <span>5 participants</span>
                    <span>Started: 2025-09-24</span>
                </div>

                <div class="ai-summary">
                    在本次邮件讨论中，Patrick Roy 提出了一个补丁（PATCH v7 03/12），旨在引入 AS_NO_DIRECT_MAP，用于处理直接映射条目未设置为存在的情况，主要应用于 secretmem 映射（memfd_secret()）及未来的 guest_memfd 配置。<br><br>在历史讨论中，参与者们围绕补丁的实现细节进行了深入探讨。特别是关于 KVM 的 guest_memfd，讨论了在直接映射操作后是否需要执行 TLB 刷新。部分成员认为，TLB 刷新会显著影响性能，尤其是在处理大量页面时，可能导致高达 40 倍的页面故障延迟。尽管有成员对不执行 TLB 刷新的安全性表示担忧，但最终达成共识，认为在确保安全性和可预测性的前提下，应该优先考虑性能。<br><br>在本周的新讨论中，Patrick 提到他因国际搬迁而延迟回复。他提出了一种新的思路，即在执行 TLB 刷新时，可以采用批量处理和延迟执行的方式，以提高性能。例如，可以在每处理 512 个分配页面后进行一次 TLB 刷新，同时设置一个时间限制，以确保即使在长时间没有分配的情况下也能及时刷新。经过初步测试，这种批量刷新方法在性能上接近于完全不执行 TLB 刷新的方案，但仍需进一步优化。整体来看，讨论围绕如何在性能与安全之间找到平衡展开。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-09-24]</span> <span class="email-subject">[PATCH v7 03/12] mm: introduce AS_NO_DIRECT_MAP</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Patrick Roy <span class="email-sender">&lt;patrick.roy@campus.lmu.de&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-09-24]</span> <span class="email-subject">[PATCH v7 04/12] KVM: guest_memfd: Add stub for
 kvm_arch_gmem_invalidate</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Roy, Patrick <span class="email-sender">&lt;roypat@amazon.co.uk&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-09-24]</span> <span class="email-subject">[PATCH v7 06/12] KVM: guest_memfd: add module param for disabling TLB
 flushing</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Roy, Patrick <span class="email-sender">&lt;roypat@amazon.co.uk&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-09-25]</span> <span class="email-subject">Re: [PATCH v7 06/12] KVM: guest_memfd: add module param for disabling
 TLB flushing</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Dave Hansen <span class="email-sender">&lt;dave.hansen@intel.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-09-25]</span> <span class="email-subject">Re: [PATCH v7 06/12] KVM: guest_memfd: add module param for disabling
 TLB flushing</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: David Hildenbrand <span class="email-sender">&lt;david@redhat.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-09-25]</span> <span class="email-subject">Re: [PATCH v7 06/12] KVM: guest_memfd: add module param for disabling
 TLB flushing</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Dave Hansen <span class="email-sender">&lt;dave.hansen@intel.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-09-25]</span> <span class="email-subject">Re: [PATCH v7 06/12] KVM: guest_memfd: add module param for disabling
 TLB flushing</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: David Hildenbrand <span class="email-sender">&lt;david@redhat.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-09-26]</span> <span class="email-subject">Re: [PATCH v7 06/12] KVM: guest_memfd: add module param for disabling
 TLB flushing</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Patrick Roy <span class="email-sender">&lt;patrick.roy@linux.dev&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-09-26]</span> <span class="email-subject">Re: [PATCH v7 06/12] KVM: guest_memfd: add module param for
 disabling TLB flushing</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Will Deacon <span class="email-sender">&lt;will@kernel.org&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-09-26]</span> <span class="email-subject">Re: [PATCH v7 06/12] KVM: guest_memfd: add module param for disabling
 TLB flushing</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: David Hildenbrand <span class="email-sender">&lt;david@redhat.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-09-27]</span> <span class="email-subject">Re: [PATCH v7 06/12] KVM: guest_memfd: add module param for disabling
 TLB flushing</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Patrick Roy <span class="email-sender">&lt;patrick.roy@linux.dev&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-09-29]</span> <span class="email-subject">Re: [PATCH v7 06/12] KVM: guest_memfd: add module param for disabling
 TLB flushing</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: David Hildenbrand <span class="email-sender">&lt;david@redhat.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-11]</span> <span class="email-subject">Re: [PATCH v7 06/12] KVM: guest_memfd: add module param for disabling
 TLB flushing</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Patrick Roy <span class="email-sender">&lt;patrick.roy@linux.dev&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH] KVM: arm64: Check cpu_has_spe() before initializing PMSCR_EL1 in VHE</h3>
                </div>

                <div class="thread-meta">
                    <span>9 messages</span>
                    <span>5 participants</span>
                    <span>Started: 2025-10-07</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主题是关于 KVM 在 arm64 架构下的一个补丁，旨在修复在 VHE 模式下初始化 PMSCR_EL1 时可能导致的启动问题。原始补丁（commit efad60e46057）在 VHE 模式下将 PMSCR_EL1 初始化为 0，导致 KVM 启动卡住。Mukesh Ojha 提出在初始化前检查 CPU 是否支持 SPE（Sampling Profiling Extension），以避免影响不支持该特性的 CPU。<br><br>在之前的讨论中，参与者对补丁的合理性和实现细节进行了探讨，Oliver Upton 指出补丁中对 cpu_has_spe() 的引用不够清晰，并质疑为何在某些情况下 SPE 不可用。Marc Zyngier 则认为这可能是固件的问题，并建议检查固件的实现。<br><br>本周的新讨论中，Mukesh 对补丁进行了修正，承认写入 SYS_PMSCR 导致了问题，并表示将根据 nVHE 的处理方式进行检查。Leo Yan 强调如果固件不修复，将无法在 Linux 内核中使用 Arm SPE，并同意应用该补丁以解决启动问题。Suzuki K Poulose 补充了关于控制 SPE 可访问性的架构背景，指出这是为了处理 errata 问题。<br><br>总体而言，讨论集中在补丁的合理性、实现细节及其对固件问题的影响上，参与者达成了一致意见，认为该补丁是必要的。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-07]</span> <span class="email-subject">[PATCH] KVM: arm64: Check cpu_has_spe() before initializing PMSCR_EL1 in VHE</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mukesh Ojha <span class="email-sender">&lt;mukesh.ojha@oss.qualcomm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-07]</span> <span class="email-subject">Re: [PATCH] KVM: arm64: Check cpu_has_spe() before initializing
 PMSCR_EL1 in VHE</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-08]</span> <span class="email-subject">Re: [PATCH] KVM: arm64: Check cpu_has_spe() before initializing PMSCR_EL1 in VHE</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-08]</span> <span class="email-subject">Re: [PATCH] KVM: arm64: Check cpu_has_spe() before initializing
 PMSCR_EL1 in VHE</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mukesh Ojha <span class="email-sender">&lt;mukesh.ojha@oss.qualcomm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-08]</span> <span class="email-subject">Re: [PATCH] KVM: arm64: Check cpu_has_spe() before initializing
 PMSCR_EL1 in VHE</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Leo Yan <span class="email-sender">&lt;leo.yan@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-08]</span> <span class="email-subject">Re: [PATCH] KVM: arm64: Check cpu_has_spe() before initializing
 PMSCR_EL1 in VHE</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mukesh Ojha <span class="email-sender">&lt;mukesh.ojha@oss.qualcomm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-08]</span> <span class="email-subject">Re: [PATCH] KVM: arm64: Check cpu_has_spe() before initializing
 PMSCR_EL1 in VHE</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Leo Yan <span class="email-sender">&lt;leo.yan@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-08]</span> <span class="email-subject">Re: [PATCH] KVM: arm64: Check cpu_has_spe() before initializing
 PMSCR_EL1 in VHE</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-09]</span> <span class="email-subject">Re: [PATCH] KVM: arm64: Check cpu_has_spe() before initializing
 PMSCR_EL1 in VHE</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Suzuki K Poulose <span class="email-sender">&lt;suzuki.poulose@arm.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v3 0/9] KVM Selftest Runner</h3>
                </div>

                <div class="thread-meta">
                    <span>7 messages</span>
                    <span>3 participants</span>
                    <span>Started: 2025-09-30</span>
                </div>

                <div class="ai-summary">
                    本邮件线程讨论了 KVM 自测试运行器的补丁系列（PATCH v3 0/9），旨在改进 KVM 自测试的执行方式。该补丁系列从最初的 15 个补丁减少到 9 个，主要目的是提供一个更灵活、易用的自测试运行器，允许用户选择单个测试用例或多个测试用例的目录进行执行，并在终端上以彩色输出测试结果。<br><br>在历史讨论中，参与者 Vipin Sharma 介绍了补丁的背景和目标，强调了自测试运行器的设计旨在简化 KVM 自测试的执行过程，并提供了 README 文件以指导用户使用。<br><br>本周的新讨论中，Brendan Jackman 提出了对补丁的具体问题，包括该运行器与现有 kselftest 基础设施的关系，以及它是否会影响自测试的数据模型。Sean Christopherson 进一步阐述了该运行器的设计理念，强调其独立于 KVM 的实现，但会根据 KVM 社区的需求进行调整。Vipin Sharma 也补充了该运行器的优势，包括提高测试覆盖率和执行速度，鼓励社区共享有趣的测试组合。<br><br>总体来看，本周的讨论集中在补丁的具体实现细节及其与现有测试框架的兼容性上，参与者们对如何更好地整合和优化 KVM 自测试运行器进行了深入探讨。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-09-30]</span> <span class="email-subject">[PATCH v3 0/9] KVM Selftest Runner</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Vipin Sharma <span class="email-sender">&lt;vipinsh@google.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-09-30]</span> <span class="email-subject">[PATCH v3 1/9] KVM: selftest: Create KVM selftest runner</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Vipin Sharma <span class="email-sender">&lt;vipinsh@google.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-09-30]</span> <span class="email-subject">[PATCH v3 9/9] KVM: selftests: Provide README.rst for KVM selftests runner</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Vipin Sharma <span class="email-sender">&lt;vipinsh@google.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-10]</span> <span class="email-subject">Re: [PATCH v3 1/9] KVM: selftest: Create KVM selftest runner</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Brendan Jackman <span class="email-sender">&lt;jackmanb@google.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-10]</span> <span class="email-subject">Re: [PATCH v3 9/9] KVM: selftests: Provide README.rst for KVM
 selftests runner</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Brendan Jackman <span class="email-sender">&lt;jackmanb@google.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-10]</span> <span class="email-subject">Re: [PATCH v3 9/9] KVM: selftests: Provide README.rst for KVM
 selftests runner</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-10]</span> <span class="email-subject">Re: [PATCH v3 9/9] KVM: selftests: Provide README.rst for KVM
 selftests runner</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Vipin Sharma <span class="email-sender">&lt;vipinsh@google.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH] arm64: Revamp HCR_EL2.E2H RES1 detection</h3>
                </div>

                <div class="thread-meta">
                    <span>7 messages</span>
                    <span>4 participants</span>
                    <span>Started: 2025-10-09</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主题是关于对 ARM64 架构中 HCR_EL2.E2H RES1 检测机制的改进。Marc Zyngier 提出的补丁旨在解决在某些 CPU 上（如 Neoverse V2）无法可靠检测 VHE-only 配置的问题。当前的检测方法存在局限性，尤其是在某些 CPU 不实现 FEAT_FGT 的情况下，ID_AA64MMFR4_EL1 的访问是否能触发 EL2 是不确定的。<br><br>补丁的核心是替换现有的 RAO/WI 测试，采用一种新的序列，通过 EL1 和 EL2 之间的 VHE 寄存器重映射来更可靠地检测 CPU 的行为。这一改进不仅解决了 NV 客户端的问题，还为不完全遵循架构规范的 CPU 提供了更可靠的检测方法。<br><br>本周的讨论中，Mark Rutland 对补丁的注释提出了建议，并表示支持该补丁的应用。Jan Kotas 进行了测试，确认在 Neoverse-V2 机器上效果良好。Oliver Upton 也表示希望将此补丁发送到稳定版本，并愿意处理回溯工作。最后，Mark Rutland 提到计划将相关补丁回溯到早期内核版本，以支持在具有 RES1 行为的硬件上运行稳定版本。整体来看，补丁得到了积极的反馈和支持。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-09]</span> <span class="email-subject">[PATCH] arm64: Revamp HCR_EL2.E2H RES1 detection</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-09]</span> <span class="email-subject">Re: [PATCH] arm64: Revamp HCR_EL2.E2H RES1 detection</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Rutland <span class="email-sender">&lt;mark.rutland@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-09]</span> <span class="email-subject">Re: [PATCH] arm64: Revamp HCR_EL2.E2H RES1 detection</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-09]</span> <span class="email-subject">Re: [PATCH] arm64: Revamp HCR_EL2.E2H RES1 detection</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Jan Kotas <span class="email-sender">&lt;jank@cadence.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-09]</span> <span class="email-subject">Re: [PATCH] arm64: Revamp HCR_EL2.E2H RES1 detection</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-10]</span> <span class="email-subject">Re: [PATCH] arm64: Revamp HCR_EL2.E2H RES1 detection</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-10]</span> <span class="email-subject">Re: [PATCH] arm64: Revamp HCR_EL2.E2H RES1 detection</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Rutland <span class="email-sender">&lt;mark.rutland@arm.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH 0/3] arm64/sysreg: Introduce Feat descriptor and generated
 ICH_VMCR_EL2 support</h3>
                </div>

                <div class="thread-meta">
                    <span>7 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-10-07</span>
                </div>

                <div class="ai-summary">
                    本邮件线程讨论了针对 ARM64 架构的系统寄存器（sysreg）描述框架的改进，主要集中在引入特征描述符（Feat descriptor）和生成 ICH_VMCR_EL2 寄存器的支持。<br><br>**原始 patch/问题的内容**：<br>本次补丁系列（共三部分）旨在引入特征特定的字段编码，迁移 vGIC-v3 代码以使用生成的 ICH_VMCR_EL2 定义。第一个补丁引入 Feat descriptor，使得 sysreg 定义可以根据架构特性变化；第二个补丁添加 ICH_VMCR_EL2 的生成描述；第三个补丁更新 KVM vGIC-v3 实现以使用生成的 ICH_VMCR_EL2 定义。<br><br>**之前讨论要点**：<br>在历史讨论中，参与者讨论了如何通过 Feat descriptor 来支持不同架构特性下的寄存器字段布局。讨论中提到，现有的系统寄存器字段布局不仅受特性影响，还可能受到其他因素的影响（如 ESR_ELx）。因此，如何设计一个灵活的描述语法以适应未来的扩展成为一个重要议题。<br><br>**本周的新讨论、进展或结论**：<br>本周的讨论中，Sascha Bischoff 提出了补丁的具体实现细节，并回应了 Mark Brown 对 Feat descriptor 命名和实现的建议。Sascha 同意在未来版本中考虑更通用的命名方式，并表示将确保对不完整定义的检查。此外，讨论中还涉及了如何处理可能的嵌套特性条件，以及如何在语法上保持灵活性，以便于未来的扩展。整体来看，补丁的实现已获得积极反馈，且没有功能性变化。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-07]</span> <span class="email-subject">[PATCH 0/3] arm64/sysreg: Introduce Feat descriptor and generated
 ICH_VMCR_EL2 support</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sascha Bischoff <span class="email-sender">&lt;Sascha.Bischoff@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-07]</span> <span class="email-subject">[PATCH 3/3] KVM: arm64: gic-v3: Switch vGIC-v3 to use generated
 ICH_VMCR_EL2</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sascha Bischoff <span class="email-sender">&lt;Sascha.Bischoff@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-07]</span> <span class="email-subject">[PATCH 2/3] arm64/sysreg: Add ICH_VMCR_EL2</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sascha Bischoff <span class="email-sender">&lt;Sascha.Bischoff@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-07]</span> <span class="email-subject">[PATCH 1/3] arm64/sysreg: Support feature-specific fields with 'Feat'
 descriptor</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sascha Bischoff <span class="email-sender">&lt;Sascha.Bischoff@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-07]</span> <span class="email-subject">Re: [PATCH 1/3] arm64/sysreg: Support feature-specific fields with
 'Feat' descriptor</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-09]</span> <span class="email-subject">Re: [PATCH 1/3] arm64/sysreg: Support feature-specific fields with
 'Feat' descriptor</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sascha Bischoff <span class="email-sender">&lt;Sascha.Bischoff@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-09]</span> <span class="email-subject">Re: [PATCH 1/3] arm64/sysreg: Support feature-specific fields with
 'Feat' descriptor</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v2 1/4] arm64/sysreg: Fix checks for incomplete sysreg
 definitions</h3>
                </div>

                <div class="thread-meta">
                    <span>5 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-10-09</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主题是针对 ARM64 系统寄存器的修复和扩展，主要涉及到一个补丁系列的更新。<br><br>1. **原始补丁内容**：第一个补丁（[PATCH v2 1/4]）修复了对不完整系统寄存器定义的检查，之前的检查条件为 `next_bit > 0`，但这会遗漏未定义位0的情况。修复后改为 `next_bit >= 0`，并将 `next_bit` 在映射中设置为 -1 以匹配新的检查条件。<br><br>2. **之前讨论要点**：在之前的讨论中，补丁系列的目标是引入前缀描述符以支持条件字段编码，并迁移 vGIC-v3 代码以使用生成的 ICH_VMCR_EL2 定义。第一个补丁的修复确保了生成器能够正确识别所有位的定义。<br><br>3. **本周的新讨论与进展**：本周的讨论中，Sascha Bischoff 提出了多个补丁，第二个补丁引入了前缀描述符，允许根据特性定义不同的字段编码；第三个补丁添加了 ICH_VMCR_EL2 寄存器，支持 GICv3 和 GICv5 的不同字段编码；最后一个补丁更新了 KVM vGIC-v3 实现，使用生成的 ICH_VMCR_EL2 定义，确保功能一致性。整体来看，这些补丁为 ARM64 系统寄存器的管理提供了更灵活的支持。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-09]</span> <span class="email-subject">[PATCH v2 1/4] arm64/sysreg: Fix checks for incomplete sysreg
 definitions</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sascha Bischoff <span class="email-sender">&lt;Sascha.Bischoff@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-09]</span> <span class="email-subject">[PATCH v2 0/4] arm64/sysreg: Introduce Prefix descriptor and
 generated ICH_VMCR_EL2 support</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sascha Bischoff <span class="email-sender">&lt;Sascha.Bischoff@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-09]</span> <span class="email-subject">[PATCH v2 4/4] KVM: arm64: gic-v3: Switch vGIC-v3 to use generated
 ICH_VMCR_EL2</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sascha Bischoff <span class="email-sender">&lt;Sascha.Bischoff@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-09]</span> <span class="email-subject">[PATCH v2 2/4] arm64/sysreg: Support feature-specific fields with
 'Prefix' descriptor</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sascha Bischoff <span class="email-sender">&lt;Sascha.Bischoff@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-09]</span> <span class="email-subject">[PATCH v2 3/4] arm64/sysreg: Add ICH_VMCR_EL2</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sascha Bischoff <span class="email-sender">&lt;Sascha.Bischoff@arm.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v10 03/43] arm64: RME: Add SMC definitions for calling the RMM</h3>
                </div>

                <div class="thread-meta">
                    <span>5 messages</span>
                    <span>3 participants</span>
                    <span>Started: 2025-10-01</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主题是关于在 arm64 架构下，为 RMM（Realm Management Monitor）添加 SMC（Secure Monitor Call）定义的补丁（[PATCH v10 03/43]）。补丁的目的是为了规范 KVM（Kernel-based Virtual Machine）与 RMM 之间的交互，特别是在处理 GIC（Generic Interrupt Controller）状态时。<br><br>在历史讨论中，参与者们探讨了 KVM 是否应该受到 RMM 的限制，特别是关于 TALL0、TALL1 和 TC 位的使用。Marc Zyngier 和 Steven Price 之间的争论集中在 RMM 是否有权控制中断的捕获，以及这种控制是否合理。Steven Price 认为，RMM 不应干预 KVM 的中断管理，而 Marc Zyngier 则强调 RMM 需要对捕获行为有一定的控制，以保护自身。<br><br>在本周的新讨论中，Suzuki K Poulose 提出了 RMM 设计的保守性，认为当前的控制集可能不足以让主机有效管理 Realm 的 VGIC。他建议如果现有控制不够，可以向 RMM 规范反馈，以便在未来版本中进行扩展。他提到新捕获可能会被报告为 "sysreg" 访问，类似于已暴露的 ICC_DIR 和 ICC_SGIxR。<br><br>综上所述，讨论围绕 RMM 与 KVM 之间的控制权和交互展开，当前补丁旨在改善这一点，但仍需进一步的规范和反馈。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-10-01]</span> <span class="email-subject">Re: [PATCH v10 03/43] arm64: RME: Add SMC definitions for calling the RMM</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-10-01]</span> <span class="email-subject">Re: [PATCH v10 03/43] arm64: RME: Add SMC definitions for calling the
 RMM</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Steven Price <span class="email-sender">&lt;steven.price@arm.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-10-01]</span> <span class="email-subject">Re: [PATCH v10 03/43] arm64: RME: Add SMC definitions for calling the RMM</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-10-01]</span> <span class="email-subject">Re: [PATCH v10 03/43] arm64: RME: Add SMC definitions for calling the
 RMM</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Steven Price <span class="email-sender">&lt;steven.price@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-08]</span> <span class="email-subject">Re: [PATCH v10 03/43] arm64: RME: Add SMC definitions for calling the
 RMM</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Suzuki K Poulose <span class="email-sender">&lt;suzuki.poulose@arm.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[STABLE 5.15.y] [PATCH] KVM: arm64: Fix softirq masking in FPSIMD register saving sequence</h3>
                </div>

                <div class="thread-meta">
                    <span>4 messages</span>
                    <span>3 participants</span>
                    <span>Started: 2025-10-03</span>
                </div>

                <div class="ai-summary">
                    本邮件线程讨论的主题是针对 KVM（内核虚拟机）在 arm64 架构下的一个补丁，旨在修复在 FPSIMD（浮点 SIMD）寄存器保存序列中软中断（softirq）屏蔽的问题。<br><br>**原始补丁内容**：<br>补丁标题为“Fix softirq masking in FPSIMD register saving sequence”，其目的是解决由于不当回退导致的内核 BUG。在之前的提交中，确保在 FPSIMD 寄存器保存操作期间禁用和启用软中断。然而，这一修复可能导致死锁，因为在重新启用软中断时，待处理的软中断可能会在持有锁的情况下被处理。<br><br>**之前讨论要点**：<br>Will Deacon 提到，虽然原始问题得以解决，但新问题的出现需要进一步处理。他建议在保存 FPSIMD 寄存器时同时禁用硬中断，以避免潜在的死锁情况。<br><br>**本周新讨论与进展**：<br>Greg Kroah-Hartman 在本周的邮件中确认，补丁已被成功添加到 5.15-stable 树中，并感谢参与者的贡献。这表明该补丁已获得认可并进入稳定版本，预计将改善相关的内核稳定性问题。<br><br>总的来说，本次讨论围绕着 KVM 在 arm64 上的软中断处理进行了深入探讨，最终达成了将修复补丁纳入稳定版本的共识。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-10-03]</span> <span class="email-subject">[STABLE 5.15.y] [PATCH] KVM: arm64: Fix softirq masking in FPSIMD register saving sequence</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Will Deacon <span class="email-sender">&lt;will@kernel.org&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-10-03]</span> <span class="email-subject">Re: [STABLE 5.15.y] [PATCH] KVM: arm64: Fix softirq masking in
 FPSIMD register saving sequence</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Will Deacon <span class="email-sender">&lt;will@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-06]</span> <span class="email-subject">Re: [STABLE 5.15.y] [PATCH] KVM: arm64: Fix softirq masking in
 FPSIMD register saving sequence</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Greg KH <span class="email-sender">&lt;gregkh@linuxfoundation.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-06]</span> <span class="email-subject">Patch "KVM: arm64: Fix softirq masking in FPSIMD register saving sequence" has been added to the 5.15-stable tree</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: gregkh <span class="email-sender">&lt;gregkh@linuxfoundation.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v2 0/2] arm64: Replace __ASSEMBLY__ with __ASSEMBLER__ in headers</h3>
                </div>

                <div class="thread-meta">
                    <span>3 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-10-10</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主题是关于对 ARM64 架构头文件中宏定义的修改，主要是将 `__ASSEMBLY__` 替换为 `__ASSEMBLER__`。原始的补丁（PATCH v2 0/2）旨在消除在用户空间和内核空间代码中使用这两个宏时可能引起的混淆。<br><br>在历史讨论中，参与者指出 `__ASSEMBLY__` 仅由内核的 Makefile 定义，而 `__ASSEMBLER__` 则是 GCC 和 Clang 编译器在编译汇编代码时自动定义的。为了避免未来的混淆，建议统一使用 `__ASSEMBLER__`。之前的讨论中，类似的清理工作已经在其他架构（如 x86、parisc 等）中完成。<br><br>本周的新讨论中，Thomas Huth 提出了两个具体的补丁：第一个补丁针对用户空间 API（uapi）头文件，第二个补丁针对非用户空间头文件。补丁已被分开处理，以便于审查，并且已在 linux-next 上进行了重基和冲突修复。Thomas 认为，之前在 x86 架构上进行的类似更改没有引发用户空间的问题，因此对 ARM64 的修改也应该是安全的。他请求将这两个补丁合并到 ARM64 的代码树中。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-10]</span> <span class="email-subject">[PATCH v2 0/2] arm64: Replace __ASSEMBLY__ with __ASSEMBLER__ in headers</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Thomas Huth <span class="email-sender">&lt;thuth@redhat.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-10]</span> <span class="email-subject">[PATCH v2 1/2] arm64: Replace __ASSEMBLY__ with __ASSEMBLER__ in uapi headers</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Thomas Huth <span class="email-sender">&lt;thuth@redhat.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-10]</span> <span class="email-subject">[PATCH v2 2/2] arm64: Replace __ASSEMBLY__ with __ASSEMBLER__ in non-uapi headers</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Thomas Huth <span class="email-sender">&lt;thuth@redhat.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v5 32/44] KVM: x86/pmu: Disable interception of select PMU
 MSRs for mediated vPMUs</h3>
                </div>

                <div class="thread-meta">
                    <span>3 messages</span>
                    <span>3 participants</span>
                    <span>Started: 2025-09-26</span>
                </div>

                <div class="ai-summary">
                    本邮件线程讨论了一个针对 KVM（Kernel-based Virtual Machine）的补丁，主题为“禁用对选择性 PMU（性能监控单元）MSR（模型特定寄存器）的拦截，以支持中介虚拟 PMU”。该补丁旨在解决在某些情况下，AMD 处理器的全局 MSR 在虚拟机中缺失，但仍然使用与主机能力相同数量的计数器的问题。<br><br>在历史讨论中，参与者 Sean Christopherson 指出，虽然全局控制不可用，但并不意味着所有情况下都需要拦截 RDPMC（读取性能监控计数器）指令。Sandipan Das 进一步探讨了 Intel 处理器的情况，认为虽然主机有固定计数器，但这与当前讨论的 kvm_pmu_has_perf_global_ctrl() 函数并不直接相关。<br><br>在本周的新讨论中，Mi, Dapeng 提出了对函数命名的建议，认为 kvm_need_pmc_intercept() 这个名称可能会误导用户，建议将其更名为 kvm_need_global_intercept()，以更准确地反映其功能。整体来看，补丁得到了积极的反馈，且讨论集中在函数命名的清晰性上。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-09-26]</span> <span class="email-subject">Re: [PATCH v5 32/44] KVM: x86/pmu: Disable interception of select PMU
 MSRs for mediated vPMUs</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sandipan Das <span class="email-sender">&lt;sandidas@amd.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-10-01]</span> <span class="email-subject">Re: [PATCH v5 32/44] KVM: x86/pmu: Disable interception of select PMU
 MSRs for mediated vPMUs</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-09]</span> <span class="email-subject">Re: [PATCH v5 32/44] KVM: x86/pmu: Disable interception of select PMU
 MSRs for mediated vPMUs</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mi, Dapeng <span class="email-sender">&lt;dapeng1.mi@linux.intel.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH] KVM: arm64: selftests: Actually enable IRQs in vgic_lpi_stress</h3>
                </div>

                <div class="thread-meta">
                    <span>2 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-10-07</span>
                </div>

                <div class="ai-summary">
                    本邮件线程讨论了一个针对 KVM（Kernel-based Virtual Machine）在 arm64 架构下的自测试补丁，主题为“[PATCH] KVM: arm64: selftests: Actually enable IRQs in vgic_lpi_stress”。该补丁的主要内容是修复 vgic_lpi_stress 测试中未启用中断（IRQs）的问题，确保在测试期间，来宾能够正确处理低优先级中断（LPIs）。<br><br>在历史讨论中，虽然没有具体的邮件记录，但可以推测该问题的存在可能影响了测试的完整性和准确性。补丁的作者 Oliver Upton 指出，尽管中断传输在测试中仍然会发生，但为了测试的完整性，必须启用 IRQs。<br><br>在本周的新讨论中，Oliver Upton 提交了补丁，并在代码中添加了一行以启用本地中断。随后，参与者 Zenghui Yu 对该补丁进行了审核，并表示支持，确认其有效性。这表明补丁得到了认可，并可能会被合并到主线代码中。整体来看，本周的讨论推动了补丁的审查和确认过程，标志着对 KVM 测试的改进。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-07]</span> <span class="email-subject">[PATCH] KVM: arm64: selftests: Actually enable IRQs in vgic_lpi_stress</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-08]</span> <span class="email-subject">Re: [PATCH] KVM: arm64: selftests: Actually enable IRQs in
 vgic_lpi_stress</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Zenghui Yu <span class="email-sender">&lt;zenghui.yu@linux.dev&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH 15/34] KVM: Add KVM_CREATE_GUEST_MEMFD ioctl() for
 guest-specific backing memory</h3>
                </div>

                <div class="thread-meta">
                    <span>2 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-10-03</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主题是关于 KVM（内核虚拟机）中添加 `KVM_CREATE_GUEST_MEMFD` ioctl() 的补丁，旨在为特定于客体的后备内存提供支持。<br><br>在历史讨论中，Nikita Kalyazin 提出了该补丁，并引用了 Paolo Bonzini 的观点，讨论了是否仍然需要对客体内存的某些限制进行保留。Bonzini 认为，若客体内存可被宿主访问，则可以考虑取消这些限制，特别是在支持基于脏页跟踪的差异内存快照（如 Firecracker 中）或实时迁移时。他通过实验去除了相关检查，成功生成了差异快照并从中恢复了 Firecracker 虚拟机。<br><br>在本周的新讨论中，Sean Christopherson 对于使用 `guest_memfd` 进行脏日志记录的可行性表示乐观，认为对于非 CoCo 虚拟机来说，这种方法应该可以正常工作。他提到，可能需要在用户空间显式列举支持情况，并警告 KVM 中可能存在的一些假设，但总体上，这一功能应能顺利实现。<br><br>总结来看，讨论围绕着如何优化 KVM 对客体内存的管理，尤其是通过新的 ioctl() 接口来提升虚拟机的性能与灵活性。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-10-03]</span> <span class="email-subject">Re: [PATCH 15/34] KVM: Add KVM_CREATE_GUEST_MEMFD ioctl() for
 guest-specific backing memory</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Nikita Kalyazin <span class="email-sender">&lt;kalyazin@amazon.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-07]</span> <span class="email-subject">Re: [PATCH 15/34] KVM: Add KVM_CREATE_GUEST_MEMFD ioctl() for
 guest-specific backing memory</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[STABLE 6.6.y] [PATCH] KVM: arm64: Fix softirq masking in FPSIMD register saving sequence</h3>
                </div>

                <div class="thread-meta">
                    <span>2 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-10-03</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主题是关于修复 KVM（Kernel-based Virtual Machine）在 arm64 架构下 FPSIMD（Floating Point SIMD）寄存器保存序列中的软中断屏蔽问题。<br><br>**原始 patch/问题内容**：<br>历史讨论中，Will Deacon 提出了一个补丁，旨在修复由于错误回溯导致的内核 BUG。该补丁确保在 FPSIMD 寄存器保存操作期间禁用和启用软中断。然而，这个修复虽然解决了原有问题，却可能导致死锁，因为重新启用软中断时会在持有锁的情况下处理待处理的软中断。<br><br>**之前讨论要点**：<br>在历史讨论中，补丁的背景被详细阐述，指出了之前的补丁（28b82be094e2）虽然修复了 BUG，但引入了新的问题。讨论中提到的死锁情况和相关的调用栈信息，强调了需要进一步修复的必要性。<br><br>**本周的新讨论、进展或结论**：<br>在本周的新讨论中，Greg Kroah-Hartman 通知大家，补丁“Fix softirq masking in FPSIMD register saving sequence”已被添加到 6.6-stable 分支中。这意味着该补丁已被正式接受并将应用于稳定版本，进一步推动了问题的解决。邮件中还提到，如果有人认为该补丁不应被添加到稳定树，可以向相关邮箱反馈。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-10-03]</span> <span class="email-subject">[STABLE 6.6.y] [PATCH] KVM: arm64: Fix softirq masking in FPSIMD register saving sequence</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Will Deacon <span class="email-sender">&lt;will@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-06]</span> <span class="email-subject">Patch "KVM: arm64: Fix softirq masking in FPSIMD register saving sequence" has been added to the 6.6-stable tree</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: gregkh <span class="email-sender">&lt;gregkh@linuxfoundation.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[STABLE 6.1.y] [PATCH] KVM: arm64: Fix softirq masking in FPSIMD register saving sequence</h3>
                </div>

                <div class="thread-meta">
                    <span>2 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-10-03</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主题是关于修复 KVM（Kernel-based Virtual Machine）在 arm64 架构下的 FPSIMD（浮点 SIMD）寄存器保存序列中的软中断屏蔽问题。<br><br>**原始 patch/问题内容**：<br>Will Deacon 提出的补丁旨在修复由于错误的上游提交回溯而导致的内核 BUG()。之前的提交确保在 FPSIMD 寄存器保存操作中禁用和启用软中断，但这可能导致死锁，因为重新启用软中断时会处理待处理的软中断，而此时可能已经持有锁。<br><br>**之前讨论要点**：<br>历史讨论中提到，虽然原始问题得以解决，但新的问题是当软中断被重新启用时，可能会导致死锁情况。补丁的目标是通过在保存 FPSIMD 寄存器时禁用硬中断来进一步解决此问题。<br><br>**本周的新讨论、进展或结论**：<br>在本周的更新中，Greg Kroah-Hartman 通知大家该补丁已被添加到 6.1-stable 树中，补丁文件名为 `kvm-arm64-fix-softirq-masking-in-fpsimd-register-saving-sequence.patch`。他还表示，如果有人认为该补丁不应被加入稳定树，可以联系相关邮件列表。<br><br>总体来看，这次讨论的重点在于修复 KVM 在处理 FPSIMD 寄存器时的软中断问题，并已成功将修复补丁应用于稳定版本。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-10-03]</span> <span class="email-subject">[STABLE 6.1.y] [PATCH] KVM: arm64: Fix softirq masking in FPSIMD register saving sequence</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Will Deacon <span class="email-sender">&lt;will@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-06]</span> <span class="email-subject">Patch "KVM: arm64: Fix softirq masking in FPSIMD register saving sequence" has been added to the 6.1-stable tree</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: gregkh <span class="email-sender">&lt;gregkh@linuxfoundation.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH] KVM: arm64: selftests: Sync ID_AA64PFR1, MPIDR, CLIDR in guest</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-10-12</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主题是关于 KVM（Kernel-based Virtual Machine）在 arm64 架构下的自测试（selftests）中，确保在虚拟机（guest）中同步特定寄存器的更新。具体的补丁（patch）由 Zenghui Yu 提出，目的是在虚拟机中同步 ID_AA64PFR1、MPIDR 和 CLIDR 寄存器，以确保虚拟机能够正确读取到写入的值。<br><br>在本周的新讨论中，Zenghui Yu 提出了补丁的具体实现，增加了三行代码以同步这三个寄存器。补丁修改了 `set_id_regs.c` 文件，确保在执行虚拟机代码时，这些寄存器的值能够被正确同步。<br><br>由于本邮件没有提供历史讨论的内容，无法总结之前的讨论要点。总体来看，本周的进展集中在补丁的提出与实现，旨在提高 KVM 在 arm64 架构下的自测试准确性。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-12]</span> <span class="email-subject">[PATCH] KVM: arm64: selftests: Sync ID_AA64PFR1, MPIDR, CLIDR in guest</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Zenghui Yu <span class="email-sender">&lt;zenghui.yu@linux.dev&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v2] KVM: arm64: Guard PMSCR_EL1 initialization with SPE presence check</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-10-10</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主题是关于 KVM（Kernel-based Virtual Machine）在 ARM64 架构下对 PMSCR_EL1（Profiling Monitor Control Register）的初始化问题。原始的补丁（PATCH v2）旨在通过检查 SPE（Statistical Profiling Extension）的存在性来保护 PMSCR_EL1 的初始化，以避免在 VHE（Virtualization Host Extensions）模式下引发系统启动挂起的问题。<br><br>在历史讨论中，补丁的背景是 Commit efad60e46057，指出在某些平台上，未能适当检查 PMSCR_EL1 的初始化会导致系统在启动时挂起，因为 EL3 并未将 Profiling Buffer 的访问权限委托给非安全世界。为了解决这一问题，补丁提出在初始化 PMSCR_EL1 时，仅对支持 SPE 的 CPU 进行操作。<br><br>本周的新讨论中，Mukesh Ojha 提出了补丁的具体实现细节，包括新增的辅助函数 `cpu_has_spe()`，用于检查 CPU 是否支持 SPE 及其在非安全 EL1 中的可用性。此外，补丁还对提交日志进行了重新措辞，并重用了现有的主机数据标志设置函数。此次更新确保了只有在 SPE 可用的 CPU 上进行 PMSCR_EL1 的初始化，从而避免了在不支持 SPE 的平台上出现启动失败的问题。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-10]</span> <span class="email-subject">[PATCH v2] KVM: arm64: Guard PMSCR_EL1 initialization with SPE presence check</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mukesh Ojha <span class="email-sender">&lt;mukesh.ojha@oss.qualcomm.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH 2/2] KVM: arm64: selftests: Cover ID_AA64ISAR3_EL1 in
 set_id_regs</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-10-10</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主题是关于一个针对 KVM（Kernel-based Virtual Machine）在 arm64 架构下的自测试补丁，具体是补丁编号为 [PATCH 2/2]，其目的是在 `set_id_regs` 函数中覆盖 ID_AA64ISAR3_EL1 寄存器。<br><br>在历史讨论中，未提及具体的补丁内容或相关的背景信息，因此没有提供额外的上下文。<br><br>在本周的新讨论中，Zenghui Yu 对补丁进行了回复，指出除了该补丁之外，似乎在同步某些寄存器（如 ID_AA64PFR1、MPIDR 和 CLIDR）到虚拟机时存在遗漏。这意味着在确保虚拟机能够正确读取到写入值方面，可能需要进一步的改进。<br><br>总结而言，本周的讨论主要集中在补丁的有效性和虚拟机寄存器同步问题上，强调了在实现过程中需要注意的细节。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-10]</span> <span class="email-subject">Re: [PATCH 2/2] KVM: arm64: selftests: Cover ID_AA64ISAR3_EL1 in
 set_id_regs</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Zenghui Yu <span class="email-sender">&lt;zenghui.yu@linux.dev&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH] KVM: arm64: selftests: Allocate vcpus with correct size</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-10-08</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主题是关于 KVM（Kernel-based Virtual Machine）在 arm64 架构下的自测试中，针对 vcpu 数组的内存分配进行修正的补丁（patch）。<br><br>1. **原始 patch/问题的内容**：补丁的核心在于修正 vcpus 数组的内存分配方式。当前的实现使用了错误的大小分配，导致分配的内存过大。具体来说，原本的代码使用 `nr_cpus * sizeof(struct kvm_vcpu)` 进行分配，而实际应为 `nr_cpus * sizeof(struct kvm_vcpu *)`，因为 vcpus 数组存储的是指向 `struct kvm_vcpu` 的指针。<br><br>2. **之前的讨论要点**：本邮件没有提供历史讨论的内容，因此无法总结之前的讨论要点。<br><br>3. **本周的新讨论、进展或结论**：本周的讨论由 Zenghui Yu 提出，提交了上述补丁以修正内存分配问题。补丁已经在代码中进行了相应的修改，并且通过测试确认了分配的正确性。邮件中包含了具体的代码修改，显示了从错误的内存分配到正确分配的变化。<br><br>总的来说，这次讨论集中在优化 KVM arm64 自测试中的内存管理，确保 vcpu 数组的内存分配更加合理和高效。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-08]</span> <span class="email-subject">[PATCH] KVM: arm64: selftests: Allocate vcpus with correct size</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Zenghui Yu <span class="email-sender">&lt;zenghui.yu@linux.dev&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH] KVM: arm64: gic-v3: Only set ICH_HCR traps for v2-on-v3 or v3
 guests</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-10-07</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主题是关于 KVM 在 arm64 架构下的 GICv3 处理，特别是如何在不同类型的虚拟机（guest）中设置 ICH_HCR traps 的问题。<br><br>**原始 patch/问题内容**：<br>Sascha Bischoff 提出的补丁旨在优化 GICv3 硬件上对 ICH_HCR_EL2 traps 的设置。该补丁指出，只有在运行 GICv2-on-GICv3 或 GICv3 类型的虚拟机时，才需要设置这些 traps。对于 GICv2 本地虚拟机，这些 traps 并不适用。<br><br>**之前讨论要点**：<br>由于邮件中没有历史讨论的内容，无法提供之前讨论的要点。<br><br>**本周的新讨论、进展或结论**：<br>在本周的邮件中，Sascha 详细说明了补丁的实现逻辑，强调了在处理虚拟机时，需谨慎更新 union 状态以避免数据损坏。他指出，如果当前运行的虚拟机不兼容（如 GICv2 在 GICv3 硬件上），则应提前退出设置过程；而在 GICv2 虚拟机上则需无条件设置 traps。补丁的代码更新了 `vgic-v3.c` 文件，增加了对虚拟机类型的检查，以确保只在适用的情况下设置 traps。该补丁已由 Sascha 提交，等待进一步的审查和反馈。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-07]</span> <span class="email-subject">[PATCH] KVM: arm64: gic-v3: Only set ICH_HCR traps for v2-on-v3 or v3
 guests</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sascha Bischoff <span class="email-sender">&lt;Sascha.Bischoff@arm.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH] Documentation: KVM: Update GICv3 docs for GICv5 hosts</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-10-07</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主题是关于更新 KVM 文档，以支持在 GICv5 主机上运行 GICv3 虚拟机的相关信息。具体而言，Sascha Bischoff 提出了一个补丁，旨在更新 GICv3 的文档，以反映 GICv5 主机对 GICv3 客户机的支持。<br><br>在本周的新讨论中，Sascha 提到 GICv5 主机可以选择性地支持 FEAT_GCIE_LEGACY 特性，这使得在 GICv5 硬件上能够运行基于 GICv3 的虚拟机。因此，文档需要更新，以明确指出创建 GICv3 客户机设备需要一个 GICv3 主机，或者是支持 FEAT_GCIE_LEGACY 的 GICv5 主机。<br><br>补丁的具体内容包括对文档的修改，增加了对 GICv5 主机支持 GICv3 客户机的说明，确保用户能够理解在不同硬件环境下的配置要求。这一更新有助于提升 KVM 的文档准确性和可用性。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-07]</span> <span class="email-subject">[PATCH] Documentation: KVM: Update GICv3 docs for GICv5 hosts</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sascha Bischoff <span class="email-sender">&lt;Sascha.Bischoff@arm.com&gt;</span></div>
                </div>
            </div>
        </div>

        <div class="category">
            <h2>RFC</h2>

            <div class="thread">
                <div class="thread-header">
                    <h3>[RFC PATCH v1 11/38] KVM: arm64: CCA: register host tsm platform
 device</h3>
                </div>

                <div class="thread-meta">
                    <span>10 messages</span>
                    <span>4 participants</span>
                    <span>Started: 2025-10-10</span>
                </div>

                <div class="ai-summary">
                    本邮件线程讨论了一个名为“[RFC PATCH v1 11/38] KVM: arm64: CCA: register host tsm platform device”的补丁，旨在为KVM的ARM64架构注册一个虚拟平台设备（faux device）。该补丁的目的是触发kmod用户空间模块加载，以便在保密计算环境中提供必要的元数据。<br><br>在历史讨论中，参与者们探讨了虚拟设备的用途和实现细节，指出当前的代码缺少必要的设备ID和匹配逻辑，导致其无法正常工作。Greg KH提到，缺乏TSM驱动程序使得CCA虚拟机无法确认其运行在保密计算环境中，这对通用发行版内核造成了问题。<br><br>在本周的新讨论中，Jeremy Linton和Greg KH等人对补丁的实现提出了质疑，认为不应将虚拟设备用于此目的，建议使用更合适的sysfs用户API。Jason Gunthorpe指出，当前的实现虽然不理想，但由于缺乏其他可靠的早期指示，暂时选择了这个方案。最终，Dan Williams提到可以为系统提供一个简单的属性，以便系统能够区分主机和客户侧的TSM，从而改善系统的保密虚拟机检测。<br><br>整体来看，讨论集中在如何更合理地实现和使用虚拟设备，以确保系统的稳定性和功能性。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-10]</span> <span class="email-subject">Re: [RFC PATCH v1 11/38] KVM: arm64: CCA: register host tsm platform
 device</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Jeremy Linton <span class="email-sender">&lt;jeremy.linton@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-10]</span> <span class="email-subject">Re: [RFC PATCH v1 11/38] KVM: arm64: CCA: register host tsm platform
 device</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Greg KH <span class="email-sender">&lt;gregkh@linuxfoundation.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-10]</span> <span class="email-subject">Re: [RFC PATCH v1 11/38] KVM: arm64: CCA: register host tsm platform
 device</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Jason Gunthorpe <span class="email-sender">&lt;jgg@ziepe.ca&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-10]</span> <span class="email-subject">Re: [RFC PATCH v1 11/38] KVM: arm64: CCA: register host tsm platform
 device</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Jeremy Linton <span class="email-sender">&lt;jeremy.linton@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-10]</span> <span class="email-subject">Re: [RFC PATCH v1 11/38] KVM: arm64: CCA: register host tsm platform
 device</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Jeremy Linton <span class="email-sender">&lt;jeremy.linton@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-10]</span> <span class="email-subject">Re: [RFC PATCH v1 11/38] KVM: arm64: CCA: register host tsm platform
 device</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Jason Gunthorpe <span class="email-sender">&lt;jgg@ziepe.ca&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-10]</span> <span class="email-subject">Re: [RFC PATCH v1 11/38] KVM: arm64: CCA: register host tsm platform
 device</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Greg KH <span class="email-sender">&lt;gregkh@linuxfoundation.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-10]</span> <span class="email-subject">Re: [RFC PATCH v1 11/38] KVM: arm64: CCA: register host tsm platform
 device</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Jeremy Linton <span class="email-sender">&lt;jeremy.linton@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-10]</span> <span class="email-subject">Re: [RFC PATCH v1 11/38] KVM: arm64: CCA: register host tsm platform
 device</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: dan.j.williams <span class="email-sender">&lt;dan.j.williams@intel.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-10]</span> <span class="email-subject">Re: [RFC PATCH v1 11/38] KVM: arm64: CCA: register host tsm platform
 device</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Jason Gunthorpe <span class="email-sender">&lt;jgg@ziepe.ca&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[RFC PATCH v1 11/38] KVM: arm64: CCA: register host tsm
 platform device</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-10-09</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主题是关于 KVM（Kernel-based Virtual Machine）在 arm64 架构下的一个补丁，具体是 RFC PATCH v1 11/38，内容涉及注册主机 TSM（TrustZone Security Monitor）平台设备。<br><br>在本周的讨论中，参与者 Aneesh Kumar K.V 提到他在切换到 faux_device 模型后遇到的问题，即如何根据设备分配功能的可用性自动加载客机和主机 TSM 驱动程序。他指出，之前的平台设备提供了一种清晰的抽象，使得自动加载变得简单明了。<br><br>本周的讨论主要集中在如何处理设备驱动的自动加载问题，反映出在新模型下，驱动程序的管理和加载机制面临的挑战。虽然没有新的补丁或解决方案被提出，但这一问题的讨论为后续的开发提供了重要的背景信息。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-09]</span> <span class="email-subject">Re: [RFC PATCH v1 11/38] KVM: arm64: CCA: register host tsm
 platform device</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Aneesh Kumar K.V <span class="email-sender">&lt;aneesh.kumar@kernel.org&gt;</span></div>
                </div>
            </div>
        </div>

        <div class="category">
            <h2>Bug Report</h2>

            <div class="thread">
                <div class="thread-header">
                    <h3>Saving and restoring state of a KVM VM using GICv2 fails</h3>
                </div>

                <div class="thread-meta">
                    <span>2 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-10-10</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主题是关于使用 GICv2 时 KVM 虚拟机状态保存和恢复失败的问题。<br><br>**原始问题**：<br>Peter Maydell 在测试 KVM 虚拟机的状态保存和恢复时发现，虽然虚拟机运行正常且状态保存成功，但在尝试加载状态时出现错误。具体错误信息显示，QEMU 在尝试设置某个寄存器时失败，原因是 KVM 对寄存器的值与预期不符，特别是 GIC 字段的设置导致了问题。<br><br>**之前讨论要点**：<br>在之前的讨论中，Peter 认为问题出在内核代码中，特别是在 `kvm_finalize_sys_regs()` 函数中，内核只在虚拟 CPU 首次运行时清除 GIC 字段。由于状态保存发生在虚拟 CPU 运行后，保存的数据中 GIC 字段被设置为 0，而加载操作则在一个全新的虚拟机上进行，导致内核认为 GIC 字段应为 1，从而导致失败。<br><br>**本周的新讨论与进展**：<br>Marc Zyngier 进一步确认了该问题在上游代码中也存在，并指出需要进行几项更改：允许对 `ID_PFR1_EL1.GIC` 的写入，管理 `ID_{AA64PFR0,PFR1}_EL1.GIC` 的一致性，并在没有内核 GIC 的情况下保留“最终化”处理。Marc 表示将在稍后发布修复补丁，并提到这一问题自 6.12 版本引入以来，32/64 位特性匹配存在偏差，可能还有其他潜在问题。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-10]</span> <span class="email-subject">Saving and restoring state of a KVM VM using GICv2 fails</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Peter Maydell <span class="email-sender">&lt;peter.maydell@linaro.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-12]</span> <span class="email-subject">Re: Saving and restoring state of a KVM VM using GICv2 fails</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
                </div>
            </div>
        </div>

        <div class="category">
            <h2>Discussion</h2>

            <div class="thread">
                <div class="thread-header">
                    <h3>KVM NV + SVE host OS warning</h3>
                </div>

                <div class="thread-meta">
                    <span>17 messages</span>
                    <span>3 participants</span>
                    <span>Started: 2025-09-25</span>
                </div>

                <div class="ai-summary">
                    在本邮件讨论中，主题为“KVM NV + SVE主机操作系统警告”。历史讨论中，Marc Zyngier指出警告是由于在存在待处理异常时递增程序计数器（PC），这是一种严重的错误。Jan Kotas表示他尝试应用了一个补丁，但在不同的内核版本上遇到了不同的问题，Marc和Oliver则提供了建议和补丁。<br><br>本周的新讨论中，Jan Kotas最终进行了验证，应用了“不要递增PC”的补丁，虽然修复了错误信息，但来宾操作系统未能启动。他在6.17版本上又应用了Oliver的补丁，发现访问ZCR_EL2时出现异常。经过进一步调试，Jan发现来宾操作系统在设置CPTR_EL2时出现问题，Marc指出这是由于硬件版本不支持某些功能，导致无法正确处理。<br><br>最终，Marc提出了一个补丁以禁止在不支持的硬件上运行VHE来宾，并建议Jan测试这个补丁。Jan反馈说在应用补丁后，来宾操作系统成功启动，并初始化了SVE功能。讨论中，参与者们对补丁的有效性进行了确认，并计划继续跟进相关问题。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-09-25]</span> <span class="email-subject">Re: KVM NV + SVE host OS warning</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-09-25]</span> <span class="email-subject">Re: KVM NV + SVE host OS warning</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Jan Kotas <span class="email-sender">&lt;jank@cadence.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-09-25]</span> <span class="email-subject">Re: KVM NV + SVE host OS warning</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-09-25]</span> <span class="email-subject">Re: KVM NV + SVE host OS warning</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-07]</span> <span class="email-subject">Re: KVM NV + SVE host OS warning</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Jan Kotas <span class="email-sender">&lt;jank@cadence.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-07]</span> <span class="email-subject">Re: KVM NV + SVE host OS warning</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-08]</span> <span class="email-subject">Re: KVM NV + SVE host OS warning</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Jan Kotas <span class="email-sender">&lt;jank@cadence.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-08]</span> <span class="email-subject">Re: KVM NV + SVE host OS warning</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Jan Kotas <span class="email-sender">&lt;jank@cadence.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-08]</span> <span class="email-subject">Re: KVM NV + SVE host OS warning</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-08]</span> <span class="email-subject">Re: KVM NV + SVE host OS warning</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Jan Kotas <span class="email-sender">&lt;jank@cadence.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-08]</span> <span class="email-subject">Re: KVM NV + SVE host OS warning</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-08]</span> <span class="email-subject">Re: KVM NV + SVE host OS warning</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Jan Kotas <span class="email-sender">&lt;jank@cadence.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-08]</span> <span class="email-subject">Re: KVM NV + SVE host OS warning</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-09]</span> <span class="email-subject">Re: KVM NV + SVE host OS warning</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Jan Kotas <span class="email-sender">&lt;jank@cadence.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-09]</span> <span class="email-subject">Re: KVM NV + SVE host OS warning</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-09]</span> <span class="email-subject">Re: KVM NV + SVE host OS warning</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Jan Kotas <span class="email-sender">&lt;jank@cadence.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-09]</span> <span class="email-subject">Re: KVM NV + SVE host OS warning</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[kvm-unit-tests PATCH v2 2/4] x86: Better backtraces for leaf
 functions</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-10-10</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主题是关于一个针对 x86 架构的补丁，旨在改善叶子函数的回溯信息。该补丁属于 kvm-unit-tests 项目，版本为 PATCH v2 2/4。<br><br>在历史讨论中，并没有提供具体的背景信息或之前的讨论内容，因此我们无法了解该补丁的详细背景或先前的争议。<br><br>在本周的新讨论中，参与者 Mathias Krause 提出了请求，希望 Paolo 能对该补丁进行评论，以便 ARM 和 AArch64 的修复不再受到阻碍，并希望这个补丁系列能够尽快合并。这表明该补丁的合并对于后续 ARM 和 AArch64 的开发工作具有重要影响。<br><br>总结而言，本周的讨论集中在加快补丁审查和合并的进程上，以促进后续相关工作的进行。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-10]</span> <span class="email-subject">Re: [kvm-unit-tests PATCH v2 2/4] x86: Better backtraces for leaf
 functions</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mathias Krause <span class="email-sender">&lt;minipli@grsecurity.net&gt;</span></div>
                </div>
            </div>
        </div>

        <div class="category">
            <h2>Other</h2>

            <div class="thread">
                <div class="thread-header">
                    <h3>HCR_EL2 GET_ONE_REG value difference</h3>
                </div>

                <div class="thread-meta">
                    <span>8 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-10-10</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主题是关于 HCR_EL2 寄存器的值差异，主要涉及 KVM_GET_ONE_REG 的返回值与在虚拟机中通过 MRS 指令读取的值之间的不同。<br><br>在本周的讨论中，Jan Kotas 提出了在进行 NV 调试时发现的 HCR_EL2 值差异，他通过 KVM_GET_ONE_REG 获取的值为 0x30480000000，而在虚拟机中执行 MRS 指令后得到的值为 0x100030080000000。Jan 表示他检查了编码，并确认其正确性，但对这种差异感到困惑。<br><br>Marc Zyngier 回应了 Jan 的问题，指出虚拟机可以随意写入 HCR_EL2 寄存器，且 GET_ONE_REG 返回的是经过处理的寄存器视图，反映了特定配置下的有效值。他强调了这种“消毒”处理的必要性，以确保从 KVM 中获取的数据是可靠的。Jan 赞同这一观点，并建议在内核文档中增加关于消毒的说明，以帮助开发者理解这一特性。<br><br>本周的讨论进展表明，参与者达成了一致，即当前的行为是合理且有价值的，能够帮助调试和比较虚拟机与硬件的行为差异。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-10]</span> <span class="email-subject">HCR_EL2 GET_ONE_REG value difference</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Jan Kotas <span class="email-sender">&lt;jank@cadence.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-10]</span> <span class="email-subject">Re: HCR_EL2 GET_ONE_REG value difference</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-10]</span> <span class="email-subject">Re: HCR_EL2 GET_ONE_REG value difference</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Jan Kotas <span class="email-sender">&lt;jank@cadence.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-10]</span> <span class="email-subject">Re: HCR_EL2 GET_ONE_REG value difference</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-10]</span> <span class="email-subject">Re: HCR_EL2 GET_ONE_REG value difference</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Jan Kotas <span class="email-sender">&lt;jank@cadence.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-10]</span> <span class="email-subject">Re: HCR_EL2 GET_ONE_REG value difference</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-10]</span> <span class="email-subject">Re: HCR_EL2 GET_ONE_REG value difference</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Jan Kotas <span class="email-sender">&lt;jank@cadence.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-10]</span> <span class="email-subject">Re: HCR_EL2 GET_ONE_REG value difference</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
                </div>
            </div>
        </div>

    </div>
</body>
</html>
