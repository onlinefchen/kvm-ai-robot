<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KVMARM 邮件列表 AI 总结报告</title>
    <style>
        body {
            font-family: 'Courier New', 'Courier', monospace;
            line-height: 1.5;
            max-width: 1200px;
            margin: 0 auto;
            padding: 30px 40px;
            background-color: #ffffff;
            color: #222;
        }
        .container {
            background: #ffffff;
        }
        h1 {
            font-size: 2.2em;
            font-weight: bold;
            color: #000;
            margin-bottom: 0.3em;
            text-align: center;
            border-bottom: 2px solid #000;
            padding-bottom: 15px;
        }
        h2 {
            font-size: 1.6em;
            font-weight: bold;
            color: #000;
            margin-top: 2em;
            margin-bottom: 0.6em;
            border-bottom: 1px solid #333;
            padding-bottom: 8px;
        }
        h3 {
            font-size: 1.2em;
            font-weight: bold;
            color: #111;
            margin-top: 1.5em;
            margin-bottom: 0.5em;
        }
        h4 {
            font-size: 1.05em;
            font-weight: bold;
            color: #333;
            margin-top: 1.2em;
            margin-bottom: 0.5em;
        }
        .meta-info {
            background: #f9f9f9;
            border: 1px solid #ddd;
            padding: 15px 20px;
            margin: 20px 0;
            font-size: 0.95em;
            line-height: 1.6;
        }
        .meta-info p {
            margin: 6px 0;
            color: #444;
        }
        .meta-info strong {
            color: #000;
            font-weight: bold;
        }
        .stats {
            display: table;
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            border: 1px solid #000;
        }
        .stat-card {
            display: table-cell;
            border: 1px solid #000;
            padding: 12px 15px;
            text-align: center;
            background: #fafafa;
        }
        .stat-card h3 {
            margin: 0;
            color: #000;
            font-size: 1.8em;
            font-weight: bold;
            border: none;
            padding: 0;
        }
        .stat-card p {
            margin: 5px 0 0 0;
            color: #444;
            font-size: 0.9em;
            font-weight: normal;
        }
        .category {
            margin: 30px 0;
        }
        .thread {
            margin: 25px 0;
            padding: 15px;
            background: #fafafa;
            border: 1px solid #ccc;
            page-break-inside: avoid;
        }
        .thread-header {
            margin-bottom: 12px;
            border-bottom: 1px solid #ddd;
            padding-bottom: 10px;
        }
        .thread-header h3 {
            font-size: 1.15em;
            font-weight: bold;
            color: #000;
            margin: 0;
        }
        .thread-meta {
            display: block;
            margin: 8px 0 12px 0;
            font-size: 0.9em;
            color: #555;
            font-style: italic;
        }
        .thread-meta span {
            margin-right: 15px;
        }
        .ai-summary {
            background: #fff;
            border-left: 3px solid #666;
            padding: 12px 15px;
            margin: 15px 0;
            line-height: 1.6;
            color: #222;
            font-style: italic;
        }
        .email-list {
            background: #fff;
            border: 1px solid #ccc;
            padding: 10px 15px;
            font-family: 'Courier New', 'Consolas', monospace;
            font-size: 0.88em;
            line-height: 1.5;
            overflow-x: auto;
            margin: 10px 0;
        }
        .email-item {
            margin: 4px 0;
            padding: 2px 0;
            color: #222;
        }
        .email-date {
            color: #0066cc;
            font-weight: bold;
        }
        .email-sender {
            color: #c30;
            font-weight: normal;
        }
        .email-subject {
            color: #000;
        }
        .archive-link {
            display: inline-block;
            margin: 15px 0;
            padding: 10px 20px;
            background: #333;
            color: #fff;
            text-decoration: none;
            border: 2px solid #000;
            font-weight: bold;
            transition: all 0.2s;
        }
        .archive-link:hover {
            background: #000;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>KVMARM Mailing List Analysis Report</h1>

        <div class="meta-info">
            <p><strong>Generated:</strong> 2025-10-21 20:55</p>
            <p><strong>Time Period:</strong> 2025年10月 第42周 (10/13 - 10/19)</p>
            <p><strong>Total Messages:</strong> 126 | <strong>Total Threads:</strong> 32</p>
            <p style="text-align: center;"><a href="archive.html" class="archive-link">📚 历史归档 Archive</a></p>
        </div>


        <div class="category">
            <h2>PATCH</h2>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v3 00/25] KVM: x86/mmu: TDX post-populate cleanups</h3>
                </div>

                <div class="thread-meta">
                    <span>28 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-10-16</span>
                </div>

                <div class="ai-summary">
                    该邮件线程主要讨论了针对 KVM（Kernel-based Virtual Machine）中 TDX（Trusted Domain Extensions）相关功能的清理和改进补丁。补丁的核心内容包括对 TDX 的后填充路径进行清理，以解决 KVM 内部和 gmem 之间的锁定问题，并确保在执行相关操作时的互斥性。<br><br>关键技术要点包括：<br>1. 强制要求使用 `kvm_arch_vcpu_unlocked_ioctl()`，并将其重命名为 `kvm_arch_vcpu_unlocked_ioctl()`，以便在 TDX vCPU 子 ioctl 中使用。<br>2. 引入新的 API `kvm_tdp_mmu_map_private_pfn()`，用于在 TDX 的后填充钩子中将私有 pfn 映射到 TDP MMU。<br>3. 移除不必要的检查和冗余代码，简化了 TDX 的内存管理逻辑。<br>4. 引入新的宏和类来处理锁的获取和释放，以减少代码重复并提高可读性。<br><br>讨论的主要结论是，补丁在确保功能正确性的同时，提升了代码的可维护性和可读性。待解决的问题包括确保所有相关锁的正确使用以及在未来可能的功能扩展中保持代码的整洁性。整体上，这些改进将为 KVM 的 TDX 支持提供更稳健的基础。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-10-16]</span> <span class="email-subject">[PATCH v3 00/25] KVM: x86/mmu: TDX post-populate cleanups</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-16]</span> <span class="email-subject">[PATCH v3 01/25] KVM: Make support for kvm_arch_vcpu_async_ioctl() mandatory</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-16]</span> <span class="email-subject">[PATCH v3 02/25] KVM: Rename kvm_arch_vcpu_async_ioctl() to kvm_arch_vcpu_unlocked_ioctl()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-16]</span> <span class="email-subject">[PATCH v3 03/25] KVM: TDX: Drop PROVE_MMU=y sanity check on
 to-be-populated mappings</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-16]</span> <span class="email-subject">[PATCH v3 04/25] KVM: x86/mmu: Add dedicated API to map guest_memfd
 pfn into TDP MMU</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-16]</span> <span class="email-subject">[PATCH v3 05/25] Revert "KVM: x86/tdp_mmu: Add a helper function to
 walk down the TDP MMU"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-16]</span> <span class="email-subject">[PATCH v3 06/25] KVM: x86/mmu: Rename kvm_tdp_map_page() to kvm_tdp_page_prefault()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-16]</span> <span class="email-subject">[PATCH v3 07/25] KVM: TDX: Drop superfluous page pinning in S-EPT management</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-16]</span> <span class="email-subject">[PATCH v3 08/25] KVM: TDX: Return -EIO, not -EINVAL, on a
 KVM_BUG_ON() condition</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-16]</span> <span class="email-subject">[PATCH v3 09/25] KVM: TDX: Fold tdx_sept_drop_private_spte() into tdx_sept_remove_private_spte()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-16]</span> <span class="email-subject">[PATCH v3 10/25] KVM: x86/mmu: Drop the return code from kvm_x86_ops.remove_external_spte()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-16]</span> <span class="email-subject">[PATCH v3 11/25] KVM: TDX: Avoid a double-KVM_BUG_ON() in tdx_sept_zap_private_spte()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-16]</span> <span class="email-subject">[PATCH v3 12/25] KVM: TDX: Use atomic64_dec_return() instead of a
 poor equivalent</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-16]</span> <span class="email-subject">[PATCH v3 13/25] KVM: TDX: Fold tdx_mem_page_record_premap_cnt() into
 its sole caller</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-16]</span> <span class="email-subject">[PATCH v3 14/25] KVM: TDX: Bug the VM if extended the initial
 measurement fails</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-16]</span> <span class="email-subject">[PATCH v3 15/25] KVM: TDX: ADD pages to the TD image while populating
 mirror EPT entries</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-16]</span> <span class="email-subject">[PATCH v3 16/25] KVM: TDX: Fold tdx_sept_zap_private_spte() into tdx_sept_remove_private_spte()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-16]</span> <span class="email-subject">[PATCH v3 17/25] KVM: TDX: Combine KVM_BUG_ON + pr_tdx_error() into TDX_BUG_ON()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-16]</span> <span class="email-subject">[PATCH v3 18/25] KVM: TDX: Derive error argument names from the local
 variable names</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-16]</span> <span class="email-subject">[PATCH v3 19/25] KVM: TDX: Assert that mmu_lock is held for write
 when removing S-EPT entries</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-16]</span> <span class="email-subject">[PATCH v3 20/25] KVM: TDX: Add macro to retry SEAMCALLs when forcing
 vCPUs out of guest</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-16]</span> <span class="email-subject">[PATCH v3 21/25] KVM: TDX: Add tdx_get_cmd() helper to get and
 validate sub-ioctl command</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-16]</span> <span class="email-subject">[PATCH v3 22/25] KVM: TDX: Convert INIT_MEM_REGION and INIT_VCPU to
 "unlocked" vCPU ioctl</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-16]</span> <span class="email-subject">[PATCH v3 23/25] KVM: TDX: Use guard() to acquire kvm->lock in tdx_vm_ioctl()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-16]</span> <span class="email-subject">[PATCH v3 24/25] KVM: TDX: Guard VM state transitions with "all" the locks</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-16]</span> <span class="email-subject">[PATCH v3 25/25] KVM: TDX: Fix list_add corruption during vcpu_load()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-17]</span> <span class="email-subject">Re: [PATCH v3 01/25] KVM: Make support for
 kvm_arch_vcpu_async_ioctl() mandatory</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Claudio Imbrenda <span class="email-sender">&lt;imbrenda@linux.ibm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-17]</span> <span class="email-subject">Re: [PATCH v3 02/25] KVM: Rename kvm_arch_vcpu_async_ioctl() to
 kvm_arch_vcpu_unlocked_ioctl()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Claudio Imbrenda <span class="email-sender">&lt;imbrenda@linux.ibm.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v13 00/12] KVM: guest_memfd: Add NUMA mempolicy support</h3>
                </div>

                <div class="thread-meta">
                    <span>27 messages</span>
                    <span>4 participants</span>
                    <span>Started: 2025-10-16</span>
                </div>

                <div class="ai-summary">
                    本邮件线程主要讨论了一个针对 KVM（内核虚拟机）的补丁系列，旨在为 guest_memfd 添加 NUMA（非统一内存访问）内存策略支持。补丁的核心内容包括对 guest_memfd 的 inode 结构进行改进，以便更好地支持 NUMA 策略，并通过实现 vm_ops 来增强内存分配的灵活性。<br><br>技术要点包括：<br>1. 引入了 gmem_inode 结构，专门用于存储与 NUMA 策略相关的内存元数据。<br>2. 实现了 mmap() 和 mbind() 的支持，使虚拟机监控程序（VMM）能够更精细地控制内存分配。<br>3. 增强了自测试功能，确保 NUMA 策略的正确应用和验证。<br>4. 进行了多次重命名和代码清理，以提高代码的可读性和可维护性。<br><br>讨论的结论是，尽管补丁在功能上是可行的，但仍需进行一些测试以确保 cpuset_do_page_mem_spread() 的行为得到验证。此外，参与者一致同意在没有测试的情况下合并补丁，但强调后续需要补充相关测试。整体上，补丁系列得到了积极的反馈，并被认为是向前迈出的一步。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-10-16]</span> <span class="email-subject">[PATCH v13 00/12] KVM: guest_memfd: Add NUMA mempolicy support</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-16]</span> <span class="email-subject">[PATCH v13 01/12] KVM: guest_memfd: Rename "struct kvm_gmem" to
 "struct gmem_file"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-16]</span> <span class="email-subject">[PATCH v13 02/12] KVM: guest_memfd: Add macro to iterate over
 gmem_files for a mapping/inode</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-16]</span> <span class="email-subject">[PATCH v13 03/12] KVM: guest_memfd: Use guest mem inodes instead of
 anonymous inodes</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-16]</span> <span class="email-subject">[PATCH v13 04/12] KVM: guest_memfd: Add slab-allocated inode cache</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-16]</span> <span class="email-subject">[PATCH v13 05/12] KVM: guest_memfd: Enforce NUMA mempolicy using
 shared policy</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-16]</span> <span class="email-subject">[PATCH v13 06/12] KVM: selftests: Define wrappers for common syscalls
 to assert success</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-16]</span> <span class="email-subject">[PATCH v13 07/12] KVM: selftests: Report stacktraces SIGBUS, SIGSEGV,
 SIGILL, and SIGFPE by default</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-16]</span> <span class="email-subject">[PATCH v13 08/12] KVM: selftests: Add additional equivalents to
 libnuma APIs in KVM's numaif.h</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-16]</span> <span class="email-subject">[PATCH v13 09/12] KVM: selftests: Use proper uAPI headers to pick up
 mempolicy.h definitions</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-16]</span> <span class="email-subject">[PATCH v13 10/12] KVM: selftests: Add helpers to probe for NUMA
 support, and multi-node systems</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-16]</span> <span class="email-subject">[PATCH v13 11/12] KVM: selftests: Add guest_memfd tests for mmap and
 NUMA policy support</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-16]</span> <span class="email-subject">[PATCH v13 12/12] KVM: guest_memfd: Add gmem_inode.flags field
 instead of using i_private</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-16]</span> <span class="email-subject">Re: [PATCH v13 00/12] KVM: guest_memfd: Add NUMA mempolicy support</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Miguel Ojeda <span class="email-sender">&lt;miguel.ojeda.sandonis@gmail.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-16]</span> <span class="email-subject">Re: [PATCH v13 00/12] KVM: guest_memfd: Add NUMA mempolicy support</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-16]</span> <span class="email-subject">Re: [PATCH v13 00/12] KVM: guest_memfd: Add NUMA mempolicy support</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Miguel Ojeda <span class="email-sender">&lt;miguel.ojeda.sandonis@gmail.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-16]</span> <span class="email-subject">Re: [PATCH v13 00/12] KVM: guest_memfd: Add NUMA mempolicy support</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Ackerley Tng <span class="email-sender">&lt;ackerleytng@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-17]</span> <span class="email-subject">Re: [PATCH v13 00/12] KVM: guest_memfd: Add NUMA mempolicy support</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Miguel Ojeda <span class="email-sender">&lt;miguel.ojeda.sandonis@gmail.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-17]</span> <span class="email-subject">Re: [PATCH v13 01/12] KVM: guest_memfd: Rename "struct kvm_gmem" to
 "struct gmem_file"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Garg, Shivank <span class="email-sender">&lt;shivankg@amd.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-17]</span> <span class="email-subject">Re: [PATCH v13 02/12] KVM: guest_memfd: Add macro to iterate over
 gmem_files for a mapping/inode</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Garg, Shivank <span class="email-sender">&lt;shivankg@amd.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-17]</span> <span class="email-subject">Re: [PATCH v13 06/12] KVM: selftests: Define wrappers for common
 syscalls to assert success</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Garg, Shivank <span class="email-sender">&lt;shivankg@amd.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-17]</span> <span class="email-subject">Re: [PATCH v13 07/12] KVM: selftests: Report stacktraces SIGBUS,
 SIGSEGV, SIGILL, and SIGFPE by default</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Garg, Shivank <span class="email-sender">&lt;shivankg@amd.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-17]</span> <span class="email-subject">Re: [PATCH v13 08/12] KVM: selftests: Add additional equivalents to
 libnuma APIs in KVM's numaif.h</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Garg, Shivank <span class="email-sender">&lt;shivankg@amd.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-17]</span> <span class="email-subject">Re: [PATCH v13 09/12] KVM: selftests: Use proper uAPI headers to pick
 up mempolicy.h definitions</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Garg, Shivank <span class="email-sender">&lt;shivankg@amd.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-17]</span> <span class="email-subject">Re: [PATCH v13 12/12] KVM: guest_memfd: Add gmem_inode.flags field
 instead of using i_private</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Garg, Shivank <span class="email-sender">&lt;shivankg@amd.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-17]</span> <span class="email-subject">Re: [PATCH v13 09/12] KVM: selftests: Use proper uAPI headers to pick
 up mempolicy.h definitions</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-17]</span> <span class="email-subject">Re: [PATCH v13 00/12] KVM: guest_memfd: Add NUMA mempolicy support</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v2 0/4] KVM ARM64 pre_fault_memory</h3>
                </div>

                <div class="thread-meta">
                    <span>6 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-10-13</span>
                </div>

                <div class="ai-summary">
                    本邮件线程讨论了针对 KVM ARM64 的 KVM_PRE_FAULT_MEMORY 特性的补丁系列，该特性之前仅在 x86 上可用。此补丁旨在减少执行期间的阶段 2 故障，尤其在内存密集型应用的后复制迁移场景中，能够显著降低延迟。<br><br>主要技术要点包括：<br>1. 第一个补丁实现了 ARM64 上的 KVM_PRE_FAULT_MEMORY ioctl 支持。<br>2. 第二个补丁修复了自测中的未对齐 mmap 分配问题。<br>3. 第三个和第四个补丁分别更新和扩展了 pre_fault_memory_test，以支持 ARM64 和不同的虚拟机内存后备类型。<br>4. 讨论中提到的关键改动包括不再将预故障标志传递给 user_mem_abort()，并对相关的文档进行了更新。<br><br>讨论的结论和待解决的问题包括：<br>- Suzuki K Poulose 提出是否需要考虑超出请求范围的故障问题，尤其是在使用 hugetlbfs 支持的情况下，这可能影响测量或导致“预故障”失败。<br>- 他建议可以通过传递页面大小作为输入参数来限制用于阶段 2 映射的 vma 页面大小。<br>- 另外，他还提到是否可以使用 ESR_ELx_EC_DABT_LOW 来处理数据中止。<br><br>总体来看，该补丁系列为 ARM64 的 KVM 提供了重要的功能增强，但仍需进一步讨论和解决一些潜在问题。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-10-13]</span> <span class="email-subject">[PATCH v2 0/4] KVM ARM64 pre_fault_memory</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Jack Thomson <span class="email-sender">&lt;jackabt.amazon@gmail.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-13]</span> <span class="email-subject">[PATCH v2 1/4] KVM: arm64: Add pre_fault_memory implementation</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Jack Thomson <span class="email-sender">&lt;jackabt.amazon@gmail.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-13]</span> <span class="email-subject">[PATCH v2 2/4] KVM: selftests: Fix unaligned mmap allocations</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Jack Thomson <span class="email-sender">&lt;jackabt.amazon@gmail.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-13]</span> <span class="email-subject">[PATCH v2 3/4] KVM: selftests: Enable pre_fault_memory_test for arm64</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Jack Thomson <span class="email-sender">&lt;jackabt.amazon@gmail.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-13]</span> <span class="email-subject">[PATCH v2 4/4] KVM: selftests: Add option for different backing in pre-fault tests</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Jack Thomson <span class="email-sender">&lt;jackabt.amazon@gmail.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-16]</span> <span class="email-subject">Re: [PATCH v2 1/4] KVM: arm64: Add pre_fault_memory implementation</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Suzuki K Poulose <span class="email-sender">&lt;suzuki.poulose@arm.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v4 0/3] VMM can handle guest SEA via KVM_EXIT_ARM_SEA</h3>
                </div>

                <div class="thread-meta">
                    <span>5 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-10-13</span>
                </div>

                <div class="ai-summary">
                    该邮件线程主要讨论了一个针对 KVM（内核虚拟机）在处理 ARM 架构下的同步外部中止（SEA）事件的补丁集。当前，当主机的 APEI（高级平台错误接口）无法处理 SEA 时，KVM 会直接向虚拟 CPU 注入异步 SError，这通常会导致客人内核崩溃。提议的解决方案是将 SEA 重定向到 VMM（虚拟机监控器），从而优雅地处理可恢复的未更正内存错误（UER），并允许 VMM 采取措施来限制错误影响的范围。<br><br>关键技术要点包括：<br>1. 新增了用户空间可见的功能 KVM_CAP_ARM_SEA_TO_USER，允许用户在 VM 创建时启用此功能。<br>2. 引入了 KVM_EXIT_ARM_SEA 作为新的退出原因，提供关于 SEA 的详细信息，包括异常状态寄存器（ESR）值和故障的虚拟及物理地址。<br>3. VMM 可以通过 KVM_SET_VCPU_EVENTS API 注入 SEA 事件，允许 VM 继续运行，限制错误影响。<br><br>讨论的主要结论是，这一补丁集提供了一种更灵活的方式来处理 SEA 事件，减少了因内存错误导致的 VM 崩溃风险，同时也增强了用户空间对错误处理的控制能力。待解决的问题包括确保所有平台都能支持这一新特性，并进行必要的测试和文档更新。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-10-13]</span> <span class="email-subject">[PATCH v4 0/3] VMM can handle guest SEA via KVM_EXIT_ARM_SEA</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Jiaqi Yan <span class="email-sender">&lt;jiaqiyan@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-13]</span> <span class="email-subject">[PATCH v4 1/3] KVM: arm64: VM exit to userspace to handle SEA</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Jiaqi Yan <span class="email-sender">&lt;jiaqiyan@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-13]</span> <span class="email-subject">[PATCH v4 2/3] KVM: selftests: Test for KVM_EXIT_ARM_SEA</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Jiaqi Yan <span class="email-sender">&lt;jiaqiyan@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-13]</span> <span class="email-subject">[PATCH v4 3/3] Documentation: kvm: new UAPI for handling SEA</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Jiaqi Yan <span class="email-sender">&lt;jiaqiyan@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-13]</span> <span class="email-subject">Re: [PATCH v4 3/3] Documentation: kvm: new UAPI for handling SEA</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Randy Dunlap <span class="email-sender">&lt;rdunlap@infradead.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v7 14/28] tracing: Add a trace remote module for testing</h3>
                </div>

                <div class="thread-meta">
                    <span>4 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-10-16</span>
                </div>

                <div class="ai-summary">
                    本邮件线程主要讨论了一个针对 Linux 内核的补丁，内容是增加一个用于测试的远程跟踪模块。参与者主要是 Steven Rostedt 和 Vincent Donnefort。<br><br>在讨论中，Steven Rostedt 提出了在构建该模块时遇到的多个未定义符号错误，具体包括与简单环形缓冲区和远程跟踪相关的函数。这些错误表明模块在编译时缺少必要的符号定义，导致构建失败。Vincent Donnefort 随后建议在配置中检查是否启用了 CONFIG_REMOTE_TEST，并表示需要导出相关符号以解决问题。<br><br>最终，Rostedt 表示他会在假期后继续处理该补丁，并询问 Donnefort 是否需要提交新的版本。讨论的关键点在于如何解决构建过程中的符号未定义问题，以及确保测试模块的正确配置和符号导出。<br><br>目前，待解决的问题包括如何正确导出符号以及是否需要提交新的补丁版本。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-10-16]</span> <span class="email-subject">Re: [PATCH v7 14/28] tracing: Add a trace remote module for testing</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Steven Rostedt <span class="email-sender">&lt;rostedt@goodmis.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-16]</span> <span class="email-subject">Re: [PATCH v7 14/28] tracing: Add a trace remote module for testing</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Steven Rostedt <span class="email-sender">&lt;rostedt@goodmis.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-17]</span> <span class="email-subject">Re: [PATCH v7 14/28] tracing: Add a trace remote module for testing</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Vincent Donnefort <span class="email-sender">&lt;vdonnefort@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-17]</span> <span class="email-subject">Re: [PATCH v7 14/28] tracing: Add a trace remote module for testing</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Steven Rostedt <span class="email-sender">&lt;rostedt@goodmis.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH 0/3] set_id_regs cleanup</h3>
                </div>

                <div class="thread-meta">
                    <span>4 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-10-14</span>
                </div>

                <div class="ai-summary">
                    本邮件线程主要讨论了对 `set_id_regs` 代码的清理和改进，涉及到 ARM64 架构的 KVM 自测代码的几个补丁。参与者 Ben Horgan 提出了三个补丁，具体内容如下：<br><br>1. **补丁内容**：<br>   - 移除 `ARM64_FEATURE_FIELD_BITS` 定义，并更新相关代码以确保其逻辑不再依赖于该定义。<br>   - 修改 `test_guest_reg_read()` 函数，使其在测试计数中被正确统计。<br>   - 在 `test_clidr()` 函数中修复了对缓存层级的迭代，使其考虑所有 7 个可能的层级。<br><br>2. **关键技术要点**：<br>   - `ARM64_FEATURE_FIELD_BITS` 的移除是因为其在逻辑上不再适用，且没有其他使用者。<br>   - 通过更新测试代码，确保所有测试都能被正确计数和执行，提升了测试的准确性和完整性。<br>   - 修复了缓存层级检查中的逻辑错误，确保测试覆盖了所有可能的情况。<br><br>3. **讨论结论与待解决问题**：<br>   - 目前的补丁已解决了代码中的一些冗余和潜在错误，提升了代码的可读性和可维护性。<br>   - 参与者未提出其他待解决的问题，表明此次补丁的实施是相对顺利的，未来可能需要关注其他潜在的代码清理或优化机会。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-10-14]</span> <span class="email-subject">[PATCH 0/3] set_id_regs cleanup</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Ben Horgan <span class="email-sender">&lt;ben.horgan@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-14]</span> <span class="email-subject">[PATCH 1/3] KVM: arm64: selftests: Count test_guest_reg_read() as a test</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Ben Horgan <span class="email-sender">&lt;ben.horgan@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-14]</span> <span class="email-subject">[PATCH 2/3] KVM: arm64: selftests: Remove ARM64_FEATURE_FIELD_BITS and its last user</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Ben Horgan <span class="email-sender">&lt;ben.horgan@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-14]</span> <span class="email-subject">[PATCH 3/3] KVM: arm64: selftests: Consider all 7 possible levels of cache</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Ben Horgan <span class="email-sender">&lt;ben.horgan@arm.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH] KVM: arm64: selftests: Sync ID_AA64PFR1, MPIDR, CLIDR in
 guest</h3>
                </div>

                <div class="thread-meta">
                    <span>4 messages</span>
                    <span>3 participants</span>
                    <span>Started: 2025-10-13</span>
                </div>

                <div class="ai-summary">
                    本邮件线程主要讨论了针对 KVM（Kernel-based Virtual Machine）在 arm64 架构下的自测试补丁，内容涉及同步 ID_AA64PFR1、MPIDR 和 CLIDR 寄存器在虚拟机中的状态。参与者包括 Ben Horgan、Zenghui Yu 和 Marc Zyngier。<br><br>关键技术要点包括：<br>1. Zenghui Yu 提出的补丁已成功应用，编号为 9a7f87eb587da49993f47f44c4c5535d8de76750。<br>2. Ben Horgan 建议在 `test_guest_reg_read()` 函数中添加测试结果输出，以便更好地报告测试状态，并建议增加测试数量。<br>3. 讨论中提到，寄存器的顺序没有技术限制，但希望在视觉上与其他测试保持一致。<br><br>讨论的结论是补丁已被接受并应用，但仍需考虑 Ben Horgan 的建议，以增强测试的可读性和一致性。整体来看，邮件线程展现了团队对补丁的积极反馈和对测试质量的关注。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-10-13]</span> <span class="email-subject">Re: [PATCH] KVM: arm64: selftests: Sync ID_AA64PFR1, MPIDR, CLIDR in
 guest</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Ben Horgan <span class="email-sender">&lt;ben.horgan@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-13]</span> <span class="email-subject">Re: [PATCH] KVM: arm64: selftests: Sync ID_AA64PFR1, MPIDR, CLIDR in
 guest</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Ben Horgan <span class="email-sender">&lt;ben.horgan@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-13]</span> <span class="email-subject">Re: [PATCH] KVM: arm64: selftests: Sync ID_AA64PFR1, MPIDR, CLIDR in guest</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-14]</span> <span class="email-subject">Re: [PATCH] KVM: arm64: selftests: Sync ID_AA64PFR1, MPIDR, CLIDR in
 guest</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Zenghui Yu <span class="email-sender">&lt;yuzenghui@huawei.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH 0/3] KVM: arm64: Fix handling of ID_PFR1_EL1.GIC</h3>
                </div>

                <div class="thread-meta">
                    <span>4 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-10-13</span>
                </div>

                <div class="ai-summary">
                    该邮件线程主要讨论了针对 KVM（Kernel-based Virtual Machine）在 ARM64 架构下处理 ID_PFR1_EL1.GIC 寄存器的补丁。参与者 Marc Zyngier 提到，Peter 报告了在恢复 GICv2 虚拟机时出现的问题，指出 ID_PFR1_EL1.GIC 寄存器不可写，而其 64 位等效寄存器是可写的。这一问题在 6.12 版本中被引入。<br><br>讨论的关键技术要点包括：<br>1. 使 ID_PFR1_EL1.GIC 寄存器可写，以便在虚拟机恢复时能够正确处理。<br>2. 在配置 GICv3 时，直接设置 ID_AA64PFR0_EL1 和 ID_PFR1_EL1 的 GIC 字段，避免在运行时进行清除操作。<br>3. 限制对 ID 寄存器的运行时清除，确保仅在没有内核 GIC 的特殊情况下进行。<br><br>最终讨论的结论是，通过这些补丁，Marc 成功地在其设备上保存和恢复了 GICv2 虚拟机，表明补丁有效解决了报告的问题。待解决的问题主要是确保在不同 GIC 配置下的寄存器处理逻辑的正确性。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-10-13]</span> <span class="email-subject">[PATCH 0/3] KVM: arm64: Fix handling of ID_PFR1_EL1.GIC</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-13]</span> <span class="email-subject">[PATCH 1/3] KVM: arm64: Make ID_PFR1_EL1.GIC writable</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-13]</span> <span class="email-subject">[PATCH 2/3] KVM: arm64: Set ID_{AA64PFR0,PFR1}_EL1.GIC when GICv3 is configured</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-13]</span> <span class="email-subject">[PATCH 3/3] KVM: arm64: Limit clearing of ID_{AA64PFR0,PFR1}_EL1.GIC to userspace irqchip</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH V6 0/3] arm64/sysreg: Clean up TCR_EL1 field macros</h3>
                </div>

                <div class="thread-meta">
                    <span>4 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-10-13</span>
                </div>

                <div class="ai-summary">
                    本邮件线程主要讨论了对 ARM64 架构中 TCR_EL1 字段宏的清理和重构，涉及三个补丁的内容。Anshuman Khandual 提出了将分散在 ARM64 平台代码和 KVM 实现中的 TCR_EL1 字段宏整合到 KVM 头文件（asm/kvm_arm.h）中，以便于后续的使用和维护。补丁的主要目标是通过更新所需的寄存器字段定义，清理冗余的宏定义，同时确保不引入功能性变化。<br><br>关键技术要点包括：<br>1. 将 TCR_XXX 宏从 pgtable-hwdef.h 移动到 kvm_arm.h，以支持 KVM 的持续使用。<br>2. 使用工具 sysreg 格式的字段替换 TCR_NFD[0|1]，以便于后续的维护和清理。<br>3. 所有的 TCR_EL1 字段宏在代码中进行了统一替换，确保一致性。<br><br>讨论的结论是，此次清理工作不会影响现有功能，但需要确保所有相关的宏和定义在 KVM 中的正确使用。待解决的问题包括在未来可能的宏定义更新中，如何保持与现有代码的兼容性和一致性。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-10-13]</span> <span class="email-subject">[PATCH V6 0/3] arm64/sysreg: Clean up TCR_EL1 field macros</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Anshuman Khandual <span class="email-sender">&lt;anshuman.khandual@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-13]</span> <span class="email-subject">[PATCH V6 1/3] tools: header: arm64: Replace TCR_NFD[0|1] with TCR_EL1_NFD[0|1]</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Anshuman Khandual <span class="email-sender">&lt;anshuman.khandual@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-13]</span> <span class="email-subject">[PATCH V6 2/3] arm64/sysreg: Replace TCR_EL1 field macros</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Anshuman Khandual <span class="email-sender">&lt;anshuman.khandual@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-13]</span> <span class="email-subject">[PATCH V6 3/3] KVM: arm64: Move inside all required TCR_XXX macros</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Anshuman Khandual <span class="email-sender">&lt;anshuman.khandual@arm.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH] KVM: selftests: fix ITS collection target addresses in vgic_lpi_stress</h3>
                </div>

                <div class="thread-meta">
                    <span>2 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-10-17</span>
                </div>

                <div class="ai-summary">
                    本邮件线程讨论了一个针对 KVM（内核虚拟机）的补丁，旨在修复 vgic_lpi_stress 测试中 ITS（中断翻译服务）集合目标地址的映射问题。当前实现中，vgic_lpi_stress 将 vCPU ID 作为目标地址传递给 its_send_mapc_cmd() 函数，但该函数实际上期望接收的是 vCPU 的 redistributor 地址。这导致所有 vCPU ID 在位移操作后都变为 0，从而使得所有中断都被错误地发送到 vCPU 0，影响了多 vCPU 测试的有效性。<br><br>补丁通过在将 vCPU ID 传递给 its_encode_target() 之前，先将其左移 16 位来修复这个问题。经过测试，补丁成功地使得每个集合的目标 vCPU 和集合 ID 在日志中正确显示，确保了中断能够被正确分发到相应的 vCPU。<br><br>讨论的关键要点包括：<br>1. 识别了目标地址参数的错误使用，明确了其应为 redistributor 地址而非 vCPU ID。<br>2. 提出了通过位移修正来解决问题的有效方案。<br><br>最终，补丁得到了认可，修复了当前的功能缺陷，确保了多 vCPU 测试的正确性。邮件中没有提及其他待解决的问题。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-10-17]</span> <span class="email-subject">[PATCH] KVM: selftests: fix ITS collection target addresses in vgic_lpi_stress</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Maximilian Dittgen <span class="email-sender">&lt;mdittgen@amazon.de&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-17]</span> <span class="email-subject">Re: [PATCH] KVM: selftests: fix ITS collection target addresses in vgic_lpi_stress</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v5 32/44] KVM: x86/pmu: Disable interception of select PMU
 MSRs for mediated vPMUs</h3>
                </div>

                <div class="thread-meta">
                    <span>2 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-10-15</span>
                </div>

                <div class="ai-summary">
                    在此次邮件讨论中，主要关注的是针对 KVM（内核虚拟机）中与性能监控单元（PMU）相关的补丁，特别是禁用对某些 PMU MSRs（模型特定寄存器）的拦截，以支持虚拟化的 vPMUs（虚拟性能监控单元）。参与者 Sean Christopherson 和 Dapeng Mi 针对函数命名进行了讨论，Sean 对现有的 `kvm_need_pmc_intercept()` 表达了不满，认为其命名不够清晰，而 `kvm_need_global_intercept()` 则与 `kvm_need_perf_global_ctrl_intercept()` 太过相似。<br><br>Dapeng 提出了一个新命名建议，即 `kvm_need_any_pmc_intercept()`，以更好地反映其功能。最终，Sean 对这个新名称表示认可，认为这个建议是可行的。<br><br>讨论的关键要点在于如何更好地命名函数，以提高代码的可读性和维护性。虽然讨论没有涉及具体的技术实现细节，但明确了对函数命名的关注和改进方向。待解决的问题主要是如何在代码中实施这一命名更改，并确保其在功能上的一致性。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-10-15]</span> <span class="email-subject">Re: [PATCH v5 32/44] KVM: x86/pmu: Disable interception of select PMU
 MSRs for mediated vPMUs</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-16]</span> <span class="email-subject">Re: [PATCH v5 32/44] KVM: x86/pmu: Disable interception of select PMU
 MSRs for mediated vPMUs</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mi, Dapeng <span class="email-sender">&lt;dapeng1.mi@linux.intel.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v12 05/12] KVM: guest_memfd: Enforce NUMA mempolicy using
 shared policy</h3>
                </div>

                <div class="thread-meta">
                    <span>2 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-10-13</span>
                </div>

                <div class="ai-summary">
                    在邮件列表的讨论中，主要集中在对 KVM（内核虚拟机）中 `guest_memfd` 的补丁内容，特别是如何通过共享策略来强制执行 NUMA（非统一内存访问）内存策略。参与者们讨论了代码的清晰性和命名的合理性，尤其是通过直接使用 `mpol_shared_policy_lookup()` 来简化代码，使其更易于理解。<br><br>关键技术要点包括：<br>1. 通过直接调用 `mpol_shared_policy_lookup()`，减少了冗余代码，提升了代码的可读性。<br>2. 讨论了函数命名的合理性，认为去掉“index”后缀的命名方式更为简洁且不易引起混淆。<br>3. 强调了在内存策略查找时，返回 NULL 以指示未设置显式策略的重要性，这符合内核 ABI 的要求。<br><br>讨论的主要结论是，代码的简化和命名的优化能够提高维护性，且参与者们一致认为当前的改进是有效的。待解决的问题主要集中在进一步优化函数命名和确保代码逻辑的清晰性。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-10-13]</span> <span class="email-subject">Re: [PATCH v12 05/12] KVM: guest_memfd: Enforce NUMA mempolicy using
 shared policy</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Garg, Shivank <span class="email-sender">&lt;shivankg@amd.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-15]</span> <span class="email-subject">Re: [PATCH v12 05/12] KVM: guest_memfd: Enforce NUMA mempolicy using
 shared policy</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH] arm64: Revamp HCR_EL2.E2H RES1 detection</h3>
                </div>

                <div class="thread-meta">
                    <span>2 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-10-13</span>
                </div>

                <div class="ai-summary">
                    该邮件线程主要讨论了针对 ARM64 架构的 HCR_EL2.E2H RES1 检测的补丁。Marc Zyngier 提出了一个补丁，并在邮件中确认该补丁已被应用于修复列表。Catalin Marinas 对该补丁表示认可并给予了支持。<br><br>关键技术要点包括：<br>1. HCR_EL2.E2H 是 ARM64 架构中用于处理异常的控制寄存器，RES1 的检测对于确保系统的稳定性和安全性至关重要。<br>2. 该补丁的提交标识为 "ca88ecdce5f51874a7c151809bd2c936ee0d3805"，表明其已被正式记录并应用。<br><br>讨论的结论是，该补丁已获得认可并成功应用，没有提出进一步的争议或待解决的问题。整体来看，此次讨论顺利，表明了对 ARM64 架构改进的积极态度。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-10-13]</span> <span class="email-subject">Re: [PATCH] arm64: Revamp HCR_EL2.E2H RES1 detection</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Catalin Marinas <span class="email-sender">&lt;catalin.marinas@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-14]</span> <span class="email-subject">Re: [PATCH] arm64: Revamp HCR_EL2.E2H RES1 detection</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH 00/10] KVM: selftests: Convert to kernel-style types</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-10-17</span>
                </div>

                <div class="ai-summary">
                    本邮件线程主要讨论了一个关于 KVM（内核虚拟机）自测试的补丁系列，主题为将自测试代码转换为内核风格的类型。该补丁包含十个部分，旨在提高代码的一致性和可读性。<br><br>关键技术要点包括：<br>1. 自测试代码的类型转换，遵循内核的编码规范，以便于维护和理解。<br>2. 提高代码的可移植性和可重用性，减少潜在的错误。<br>3. 讨论中提到的补丁版本更新，表明参与者对补丁的进一步改进持开放态度。<br><br>讨论的结论是，参与者 Sean Christopherson 表达了希望继续推进该补丁的意愿，并询问下一步的行动计划，表示愿意根据需要重新生成补丁版本。当前尚未明确下一步的具体方向，待进一步的反馈和建议。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-10-17]</span> <span class="email-subject">Re: [PATCH 00/10] KVM: selftests: Convert to kernel-style types</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: David Matlack <span class="email-sender">&lt;dmatlack@google.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v11 00/42] arm64: Support for Arm CCA in KVM</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-10-17</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主要技术问题是针对 ARM64 架构在 KVM 中支持 Arm CCA（Confidential Computing Architecture）的补丁系列（v11）。参与者 Steven Price 提到，尽管已经更新了补丁，但仍有一些重要的变更需要解决，特别是在用户 API（uAPI）方面的调整。讨论的关键技术要点包括：<br><br>1. **用户 API 的调整**：新的 uAPI 将更接近于“正常”的 KVM，而不是直接暴露底层操作。这意味着虚拟机监控器（VMM）只需进行最小的修改来支持 CCA，且 KVM 将处理设置 realm 的顺序要求。<br>   <br>2. **PMU 和 GIC 处理问题**：当前 PMU 处理存在限制，无法在 realm 执行时维护 PMU 计数器，这影响了溢出中断的功能。此外，GIC 的处理也过于严格，限制了主机设置陷阱位的能力，这可能会影响未来硬件解决方案的实现。<br><br>3. **代码更新**：补丁中包括了符号命名的修正、硬件特性检查的增强、CAPs 的允许列表以及对 vgic 处理的修复等多项更新。<br><br>讨论的结论是，虽然补丁已更新，但由于 uAPI 的重大变更和其他技术问题，仍需时间进行原型开发和细节完善。参与者希望大家能耐心等待后续版本的推出。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-10-17]</span> <span class="email-subject">[PATCH v11 00/42] arm64: Support for Arm CCA in KVM</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Steven Price <span class="email-sender">&lt;steven.price@arm.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH] KVM: arm64: Check the untrusted offset in FF-A memory share</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-10-17</span>
                </div>

                <div class="ai-summary">
                    该邮件讨论了针对 KVM（Kernel-based Virtual Machine）在 arm64 架构下的 FF-A（Firmware Framework for Arm）内存共享的一个补丁。补丁的主要目的是验证从主机内核传递过来的偏移量，以防止在超管（hypervisor）中发生越界访问（OOB access）。具体来说，补丁检查了偏移量是否在一个安全范围内，防止设置一个过大的值（例如大于 U32_MAX - sizeof(struct ffa_composite_mem_region) 的值）。<br><br>关键技术要点包括：<br>1. 在内存传输函数中添加了对偏移量的检查，确保其不会导致溢出。<br>2. 使用了 `check_add_overflow` 函数来验证偏移量与结构体大小的和是否安全。<br><br>讨论的结论是，该补丁有效地增强了内存访问的安全性，防止了潜在的参数无效问题。当前的补丁已完成并提交，但仍需关注是否有其他潜在的边界情况未被考虑。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-10-17]</span> <span class="email-subject">[PATCH] KVM: arm64: Check the untrusted offset in FF-A memory share</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sebastian Ene <span class="email-sender">&lt;sebastianene@google.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v3] KVM: arm64: Check range args for pKVM mem transitions</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-10-16</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主题是针对 KVM（Kernel-based Virtual Machine）在 ARM64 架构下的 pKVM 内存转换过程中，增加对范围参数的检查，以防止潜在的溢出问题。当前的实现缺乏对主机发出的范围的验证，可能导致结束边界溢出，从而使后续检查失效。<br><br>关键技术要点包括：<br>1. 引入了 `pfn_range_is_valid()` 函数，确保物理页帧号（PFN）范围在物理地址范围内，并且能够有效防止溢出。<br>2. 在多个 pKVM 内存转换函数中增加了对范围的检查，确保在使用来自不可信源的 PFN 和页面数量（nr_pages）之前进行验证。<br><br>讨论的主要结论是，虽然 `host_unshare_guest` 转换已经通过其他机制进行了保护，但仍需确保所有相关函数都能有效防止溢出问题。待解决的问题包括如何进一步完善这些检查，以确保系统的安全性和稳定性。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-10-16]</span> <span class="email-subject">[PATCH v3] KVM: arm64: Check range args for pKVM mem transitions</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Vincent Donnefort <span class="email-sender">&lt;vdonnefort@google.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH] arm64: Revamp HCR_EL2.E2H RES1 detection</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-10-14</span>
                </div>

                <div class="ai-summary">
                    在这封邮件中，讨论的主要技术问题是关于对 ARM64 架构中 HCR_EL2.E2H RES1 检测的补丁进行改进。参与者 Marc Zyngier 表示他接受了该补丁，但没有将其标记为稳定版本（Cc: stable），原因是他对该补丁的自动回溯到稳定版本的可靠性表示怀疑，并指出相关的依赖链也不在稳定版本中。<br><br>关键的技术要点包括：<br>1. HCR_EL2.E2H RES1 的检测机制需要进行修订，以确保在 ARM64 架构中能够正确处理。<br>2. Marc Zyngier 对补丁的接受表明了对其潜在价值的认可，但同时也强调了对稳定性和依赖关系的关注。<br><br>讨论的结论是，虽然补丁被接受，但在将其推广到稳定版本之前，仍需进一步验证其可靠性和依赖性。Marc Zyngier 表示愿意提供帮助，以确保补丁能够安全地进入稳定版本。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-10-14]</span> <span class="email-subject">Re: [PATCH] arm64: Revamp HCR_EL2.E2H RES1 detection</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH] KVM: arm64: selftests: Allocate vcpus with correct size</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-10-13</span>
                </div>

                <div class="ai-summary">
                    该邮件讨论的主要技术问题是关于 KVM（Kernel-based Virtual Machine）在 arm64 架构下的自测试（selftests）中，虚拟 CPU（vcpus）分配时的大小问题。参与者 Zenghui Yu 提出了一个补丁，旨在修复 vcpus 分配时未使用正确大小的问题。<br><br>关键技术要点包括：<br>1. 补丁的提交标识为 2192d348c0aa0cc2e7249dc3709f21bfe0a0170c，主要针对 arm64 架构的 KVM 自测试。<br>2. 正确的 vcpus 大小分配对于确保虚拟化环境的稳定性和性能至关重要。<br><br>讨论的结论是，补丁已被应用于修复列表中，表明问题得到了认可并已采取措施进行解决。当前没有提到其他待解决的问题，表明该补丁在技术上得到了积极的反馈。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-10-13]</span> <span class="email-subject">Re: [PATCH] KVM: arm64: selftests: Allocate vcpus with correct size</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH] KVM: arm64: gic-v3: Only set ICH_HCR traps for v2-on-v3 or v3 guests</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-10-13</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主要技术问题是关于 KVM（Kernel-based Virtual Machine）在 arm64 架构下的 GICv3（通用中断控制器版本3）实现。具体而言，补丁内容涉及仅在 v2-on-v3 或 v3 客户机中设置 ICH_HCR（中断控制器硬件配置寄存器）陷阱。<br><br>关键技术要点包括：<br>1. 该补丁旨在优化 GICv3 的中断处理，确保只有在特定的虚拟机配置下才会启用相关的陷阱设置，从而提高系统的稳定性和性能。<br>2. 通过限制陷阱的设置，减少不必要的中断处理开销，有助于提升虚拟化环境的效率。<br><br>讨论的结论是，该补丁已被应用于修复列表，表明开发者对该改动的认可和采纳。当前没有提出待解决的问题，表明该补丁的实施是顺利的。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-10-13]</span> <span class="email-subject">Re: [PATCH] KVM: arm64: gic-v3: Only set ICH_HCR traps for v2-on-v3 or v3 guests</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH] Documentation: KVM: Update GICv3 docs for GICv5 hosts</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-10-13</span>
                </div>

                <div class="ai-summary">
                    在此次邮件讨论中，主要关注的技术问题是针对 KVM（Kernel-based Virtual Machine）文档的更新，特别是关于 GICv3（通用中断控制器版本3）在 GICv5（版本5）主机上的应用。Sascha Bischoff 提出了一个补丁，旨在更新相关文档，以确保其与 GICv5 的兼容性。<br><br>关键技术要点包括：<br>1. GICv5 是对 GICv3 的增强，提供了更好的中断管理功能。<br>2. 更新文档的目的是为了帮助开发者和用户更好地理解在 GICv5 环境下如何使用 KVM。<br><br>讨论的结论是，该补丁已被 Marc Zyngier 接受并应用于修复列表，表明文档更新得到了认可并将被纳入正式文档中。目前没有提及待解决的问题，表明此次更新的过程相对顺利。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-10-13]</span> <span class="email-subject">Re: [PATCH] Documentation: KVM: Update GICv3 docs for GICv5 hosts</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH] KVM: arm64: selftests: Actually enable IRQs in vgic_lpi_stress</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-10-13</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主要技术问题是关于 KVM（Kernel-based Virtual Machine）在 arm64 架构下的自测试，特别是针对 vgic_lpi_stress 测试中 IRQ（中断请求）的启用。邮件中提到的补丁旨在修复之前未能正确启用 IRQ 的问题，从而确保测试的准确性和有效性。<br><br>关键技术要点包括：<br>1. 提交的补丁（commit d5e6310a0d996493b1af9f3eeec418350523388b）实际启用了 vgic_lpi_stress 测试中的 IRQ。<br>2. 这一修复被认为是必要的，以提高测试的可靠性和覆盖面。<br><br>主要讨论结论是，补丁已被应用于修复中，表明该问题得到了及时处理。邮件中没有提及其他待解决的问题，显示出此次讨论较为简洁，主要集中在补丁的应用和确认上。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-10-13]</span> <span class="email-subject">Re: [PATCH] KVM: arm64: selftests: Actually enable IRQs in vgic_lpi_stress</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH 0/2] KVM: arm64: nv: FGT traps of MDSCR_EL1</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-10-13</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主要技术问题是关于 KVM（Kernel-based Virtual Machine）在 arm64 架构下处理 MDSCR_EL1 寄存器的 FGT（Fault Generation Traps）相关补丁。邮件中提到的两个补丁分别是：<br><br>1. **补丁 1/2**：在 vcpu_load() 函数中计算每个虚拟 CPU 的 FGT。<br>2. **补丁 2/2**：在可用时使用 MDSCR_EL1 的 FGT 写入陷阱。<br><br>关键技术要点包括，补丁的目的是优化 KVM 在处理虚拟 CPU 时对 FGT 的管理，确保在虚拟化环境中能够有效利用 MDSCR_EL1 寄存器的功能，从而提高系统的性能和稳定性。<br><br>讨论的结论是，这些补丁已被应用于修复分支，表明开发者对这些改动的认可和接受。此外，邮件中未提及任何待解决的问题，表明当前的补丁已经满足了技术需求。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-10-13]</span> <span class="email-subject">Re: [PATCH 0/2] KVM: arm64: nv: FGT traps of MDSCR_EL1</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH 00/13] KVM: arm64: De-specialise the timer UAPI</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-10-13</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主题是关于对 KVM（内核虚拟机）在 arm64 架构下的定时器用户接口（UAPI）进行去专业化的补丁集，共包含 13 个补丁。主要技术问题集中在如何简化和改进定时器的用户空间访问，尤其是针对非虚拟化硬件扩展（nVHE）环境下的定时器操作。<br><br>关键技术要点包括：<br>1. 隐藏 CNTHV_*_EL2 寄存器，以防止用户空间直接访问。<br>2. 引入 `timer_context_to_vcpu()` 辅助函数，优化定时器上下文的管理。<br>3. 将定时器相关的用户空间访问器移至通用基础设施，以提高代码的可维护性和可复用性。<br>4. 解决嵌套虚拟化中的 WFxT 处理问题，确保定时器功能的正确性。<br><br>讨论的结论是，这些补丁已被应用于修复中，表明开发者对改进定时器用户接口的认可。然而，仍需关注在不同虚拟化配置下的自测试和依赖关系，以确保系统的稳定性和兼容性。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-10-13]</span> <span class="email-subject">Re: [PATCH 00/13] KVM: arm64: De-specialise the timer UAPI</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v2] KVM: arm64: Guard PMSCR_EL1 initialization with SPE presence check</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-10-13</span>
                </div>

                <div class="ai-summary">
                    该邮件讨论的主要技术问题是关于 KVM（Kernel-based Virtual Machine）在 arm64 架构下的 PMSCR_EL1 寄存器初始化过程。具体而言，补丁内容是对 PMSCR_EL1 的初始化进行了保护，确保只有在存在 SPE（Statistical Profiling Extension）时才进行初始化。这一改动旨在提高系统的稳定性和兼容性，避免在不支持 SPE 的环境中出现潜在的错误。<br><br>关键的技术要点包括：<br>1. PMSCR_EL1 寄存器的初始化与 SPE 的存在性检查相结合，确保系统在适当的硬件条件下运行。<br>2. 该补丁已被应用于修复集，表明其经过审查并被认为是必要的改进。<br><br>讨论的结论是，补丁已成功应用，表明开发者对该改动的认可。目前没有提及待解决的问题，表明该补丁的实施是顺利的。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-10-13]</span> <span class="email-subject">Re: [PATCH v2] KVM: arm64: Guard PMSCR_EL1 initialization with SPE presence check</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v2] KVM: arm64: nv: Optimize unmapping of shadow S2-MMU tables</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-10-12</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主要技术问题是针对 KVM（内核虚拟机）在 arm64 架构下优化影子 S2-MMU（第二级内存管理单元）表的解除映射过程。当前的实现中，解除映射一个规范的 IPA（中间物理地址）范围时，会触发 L1 S2-MMU 和所有活动的 L2 S2-MMU 表的失效，导致需要遍历整个 L1 地址空间，造成性能严重下降，尤其是在大规模系统中，可能引发软锁死。<br><br>为了解决这一问题，补丁引入了一种基于 maple-tree 的查找机制，记录规范 IPA 到影子 IPA 的映射关系。这样，在解除映射时，可以仅针对部分或完全映射的影子 IPA 进行失效，避免了全地址空间的遍历，从而减少 CPU 的不必要工作和降低延迟。<br><br>该补丁经过 Christoph Lameter 的审核，并在 v1 版本的基础上进行了重构和修正。虽然补丁已解决了主要性能问题，但仍需关注在不同场景下的映射一致性和潜在的边界情况，以确保系统的稳定性和性能优化。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-10-12]</span> <span class="email-subject">[PATCH v2] KVM: arm64: nv: Optimize unmapping of shadow S2-MMU tables</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Ganapatrao Kulkarni <span class="email-sender">&lt;gankulkarni@os.amperecomputing.com&gt;</span></div>
                </div>
            </div>
        </div>

        <div class="category">
            <h2>RFC</h2>

            <div class="thread">
                <div class="thread-header">
                    <h3>[RFC PATCH v1 11/38] KVM: arm64: CCA: register host tsm
 platform device</h3>
                </div>

                <div class="thread-meta">
                    <span>9 messages</span>
                    <span>4 participants</span>
                    <span>Started: 2025-10-15</span>
                </div>

                <div class="ai-summary">
                    在这次邮件讨论中，主要围绕KVM（Kernel-based Virtual Machine）在arm64架构下的CCA（Common Control Architecture）中注册主机TSM（TrustZone Secure Monitor）平台设备的问题展开。参与者讨论了如何使用auxiliary_device来处理多个依赖的小驱动，以及如何确定其父设备。<br><br>关键技术要点包括：<br>1. **父设备的定义**：讨论中提到，auxiliary_device需要一个真实的父设备，通常是共享资源的设备。如果没有这样的设备，可以创建虚假的设备。<br>2. **PSCI接口**：Jason Gunthorpe指出，PSCI（Power State Coordination Interface）接口是通过设备树（DT）或ACPI发现的，并且可以用来创建平台设备以支持子系统的绑定。<br>3. **固件设备的使用**：Greg KH强调，如果存在真实的固件设备，应直接使用它作为平台设备，而不是创建虚假设备。<br><br>讨论的结论是，当前PSCI接口并不总是获得平台设备，修复这一问题将简化后续的子系统绑定过程。此外，James Bottomley提到，可能需要实现自己的总线，以便更好地管理虚拟设备的发现和绑定，而不是滥用现有总线。整体上，参与者达成共识，建议优先使用真实的固件设备，并考虑未来的总线实现。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-10-15]</span> <span class="email-subject">Re: [RFC PATCH v1 11/38] KVM: arm64: CCA: register host tsm
 platform device</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Aneesh Kumar K.V <span class="email-sender">&lt;aneesh.kumar@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-15]</span> <span class="email-subject">Re: [RFC PATCH v1 11/38] KVM: arm64: CCA: register host tsm platform
 device</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Greg KH <span class="email-sender">&lt;gregkh@linuxfoundation.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-15]</span> <span class="email-subject">Re: [RFC PATCH v1 11/38] KVM: arm64: CCA: register host tsm platform
 device</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Jason Gunthorpe <span class="email-sender">&lt;jgg@ziepe.ca&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-15]</span> <span class="email-subject">Re: [RFC PATCH v1 11/38] KVM: arm64: CCA: register host tsm platform
 device</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Greg KH <span class="email-sender">&lt;gregkh@linuxfoundation.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-15]</span> <span class="email-subject">Re: [RFC PATCH v1 11/38] KVM: arm64: CCA: register host tsm platform
 device</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Jason Gunthorpe <span class="email-sender">&lt;jgg@ziepe.ca&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-15]</span> <span class="email-subject">Re: [RFC PATCH v1 11/38] KVM: arm64: CCA: register host tsm platform
 device</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Greg KH <span class="email-sender">&lt;gregkh@linuxfoundation.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-15]</span> <span class="email-subject">Re: [RFC PATCH v1 11/38] KVM: arm64: CCA: register host tsm
 platform device</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: James Bottomley <span class="email-sender">&lt;James.Bottomley@HansenPartnership.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-15]</span> <span class="email-subject">Re: [RFC PATCH v1 11/38] KVM: arm64: CCA: register host tsm platform
 device</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Greg KH <span class="email-sender">&lt;gregkh@linuxfoundation.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-15]</span> <span class="email-subject">Re: [RFC PATCH v1 11/38] KVM: arm64: CCA: register host tsm platform
 device</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Jason Gunthorpe <span class="email-sender">&lt;jgg@ziepe.ca&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[RFC PATCH v1 11/38] KVM: arm64: CCA: register host tsm platform
 device</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-10-13</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主要技术问题是关于在 KVM（Kernel-based Virtual Machine）中为 arm64 架构注册主机 TSM（Trusted Secure Module）平台设备的补丁。参与者 Jeremy Linton 和 Jason Gunthorpe 针对如何在不同硬件平台上实现这一功能进行了探讨。<br><br>关键技术要点包括：当前的实现方式依赖于特定硬件平台，导致代码中出现多个条件编译指令（#ifdef），这使得代码的可维护性降低。Jason Gunthorpe 提出，理想情况下，应该创建一个通用的 sysfs 节点，以反映虚拟机的能力，从而避免在代码中使用特定于硬件的命名和路径。<br><br>讨论的结论是，应该寻求一种更统一的方式来处理不同硬件平台的兼容性问题，以简化代码结构并提高可读性。目前尚未解决的问题是如何设计这个通用的 sysfs 节点，以及如何在不影响现有功能的情况下实现这一目标。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-10-13]</span> <span class="email-subject">Re: [RFC PATCH v1 11/38] KVM: arm64: CCA: register host tsm platform
 device</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Jeremy Linton <span class="email-sender">&lt;jeremy.linton@arm.com&gt;</span></div>
                </div>
            </div>
        </div>

        <div class="category">
            <h2>Bug Report</h2>

            <div class="thread">
                <div class="thread-header">
                    <h3>Saving and restoring state of a KVM VM using GICv2 fails</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-10-12</span>
                </div>

                <div class="ai-summary">
                    该邮件讨论了在使用 GICv2 时，KVM 虚拟机的状态保存和恢复过程中出现的问题。主要问题是 ID_AA64PFR0_EL1.GIC 可以被写入，而 ID_PFR1_EL1.GIC 却不允许写入，导致两者之间的同步问题。<br><br>关键技术要点包括：<br>1. 需要允许对 ID_PFR1_EL1.GIC 的写入操作。<br>2. 在创建内核中的 GIC 时，需要对 ID_{AA64PFR0,PFR1}_EL1.GIC 进行管理。<br>3. 对于没有内核 GIC 的情况，保留“最终处理”的机制。<br><br>讨论中提到，当前的处理方式在主机不支持 AArch32 时将所有非 AA64 的 ID 寄存器视为 RAZ/WI，这一方面是可以接受的。然而，32/64 位特性匹配的问题已经存在一段时间，可能还存在其他潜在问题。<br><br>最终，Marc Zyngier 表示将在撰写提交信息后尽快发布修复补丁。整体来看，讨论的结论是需要对 GIC 的寄存器写入权限进行调整，以解决现有的同步问题。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-10-12]</span> <span class="email-subject">Re: Saving and restoring state of a KVM VM using GICv2 fails</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
                </div>
            </div>
        </div>

        <div class="category">
            <h2>Question</h2>

            <div class="thread">
                <div class="thread-header">
                    <h3>Question about heterogeneous VM live migration</h3>
                </div>

                <div class="thread-meta">
                    <span>3 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-10-16</span>
                </div>

                <div class="ai-summary">
                    在本邮件讨论中，主要探讨了在HiSilicon ARM服务器之间进行异构虚拟机（VM）实时迁移时遇到的技术问题，特别是关于在虚拟机中禁用某些特性的挑战。Zhou Wang提出了两个主要问题：首先，某些特性（如FEAT_AFP、FEAT_RPRES等）在EL0/EL1中无法实际禁用，可能导致用户绕过ID检查，从而在异构VM迁移中引发潜在问题；其次，虽然某些特性可以被捕获，但KVM尚未支持这些特性，是否应在未来支持仍不确定。<br><br>Marc Zyngier对此进行了回应，指出在架构层面上，无法完全隐藏主机具备的特性，尽管可以向客机指示某些特性可能不存在。他强调，强制禁用某些控制位（如TCR2_EN）会影响其他控制位的功能，表明对架构的期望可能过高。<br><br>讨论的结论是，虽然Zhou对情况有了更清晰的理解，但仍需进一步探讨如何在不影响其他控制位的情况下实现特性的禁用，未来可能需要对KVM进行相应的支持。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-10-16]</span> <span class="email-subject">Question about heterogeneous VM live migration</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Zhou Wang <span class="email-sender">&lt;wangzhou1@hisilicon.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-17]</span> <span class="email-subject">Re: Question about heterogeneous VM live migration</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-18]</span> <span class="email-subject">Re: Question about heterogeneous VM live migration</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Zhou Wang <span class="email-sender">&lt;wangzhou1@hisilicon.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[Question] Received vtimer interrupt but ISTATUS is 0</h3>
                </div>

                <div class="thread-meta">
                    <span>2 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-10-14</span>
                </div>

                <div class="ai-summary">
                    在此次邮件讨论中，Kunkun Jiang 提出了一个关于虚拟定时器（vtimer）中断的问题，即在接收到 vtimer 中断时，ISTATUS 状态为 0 的现象。他分析了可能的原因，认为在虚拟机中可能发生了某些操作（如取消定时器），导致 ISTATUS 被清除，而硬件未能及时清除中断，从而导致中断无法被正确处理，影响后续中断的处理。<br><br>Kunkun 提出了一个解决方案，即在中断处理程序中添加一个去激活操作，以确保在 ISTATUS 为 0 时能够正确处理中断。Marc Zyngier 对此提出了质疑，认为在现代硬件上不应出现此类问题，并指出该解决方案在 GICv3 之外可能会失效。他还提到在上下文切换时需要考虑定时器中断的状态，强调了对中断上下文的信任问题。<br><br>讨论的结论是，尽管 Kunkun 的补丁可能解决了当前的问题，但仍需进一步验证其在不同硬件和上下文中的有效性，且需要避免使用不可靠的解决方案。整体来看，如何确保中断处理的准确性和及时性仍是待解决的关键问题。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-10-14]</span> <span class="email-subject">[Question] Received vtimer interrupt but ISTATUS is 0</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Kunkun Jiang <span class="email-sender">&lt;jiangkunkun@huawei.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-14]</span> <span class="email-subject">Re: [Question] Received vtimer interrupt but ISTATUS is 0</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
                </div>
            </div>
        </div>

        <div class="category">
            <h2>GIT PULL</h2>

            <div class="thread">
                <div class="thread-header">
                    <h3>[GIT PULL] KVM/arm64 fixes for 6.18, take #1</h3>
                </div>

                <div class="thread-meta">
                    <span>3 messages</span>
                    <span>3 participants</span>
                    <span>Started: 2025-10-14</span>
                </div>

                <div class="ai-summary">
                    在邮件列表讨论中，Marc Zyngier 提出了针对 KVM/arm64 的修复补丁，旨在解决在 6.18 版本中积累的一系列问题。这些补丁涵盖了用户空间接口的整理、架构修复以及其他随机的清理工作。关键修复包括对 NV 虚拟机中 ZCR_EL2 的处理、在进行页面表查找时选择正确的转换机制、确保未初始化的 vCPU 不会接收事件注入、以及改进 EL2 定时器的访问等。此外，还更新了文档以描述事件注入的失败模式，并对自测进行了多项改进。<br><br>讨论的主要结论是，尽管当前的补丁没有显著的突出问题，但仍需关注未来的修复和改进。参与者对补丁的格式化和信息追踪提出了不同的看法，尤其是关于在每个补丁中添加“Link”信息的必要性，认为这对于后续的错误报告和回溯是有价值的。总体而言，邮件讨论强调了持续改进和清理代码的重要性，同时也反映了对补丁管理流程的关注。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-10-14]</span> <span class="email-subject">[GIT PULL] KVM/arm64 fixes for 6.18, take #1</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-15]</span> <span class="email-subject">Re: [GIT PULL] KVM/arm64 fixes for 6.18, take #1</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Paolo Bonzini <span class="email-sender">&lt;pbonzini@redhat.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-10-15]</span> <span class="email-subject">Re: [GIT PULL] KVM/arm64 fixes for 6.18, take #1</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
                </div>
            </div>
        </div>

    </div>
</body>
</html>
