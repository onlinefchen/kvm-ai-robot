<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KVMARM 邮件列表 AI 总结报告</title>
    <style>
        body {
            font-family: 'Courier New', 'Courier', monospace;
            line-height: 1.5;
            max-width: 1200px;
            margin: 0 auto;
            padding: 30px 40px;
            background-color: #ffffff;
            color: #222;
        }
        .container {
            background: #ffffff;
        }
        h1 {
            font-size: 2.2em;
            font-weight: bold;
            color: #000;
            margin-bottom: 0.3em;
            text-align: center;
            border-bottom: 2px solid #000;
            padding-bottom: 15px;
        }
        h2 {
            font-size: 1.6em;
            font-weight: bold;
            color: #000;
            margin-top: 2em;
            margin-bottom: 0.6em;
            border-bottom: 1px solid #333;
            padding-bottom: 8px;
        }
        h3 {
            font-size: 1.2em;
            font-weight: bold;
            color: #111;
            margin-top: 1.5em;
            margin-bottom: 0.5em;
        }
        h4 {
            font-size: 1.05em;
            font-weight: bold;
            color: #333;
            margin-top: 1.2em;
            margin-bottom: 0.5em;
        }
        .meta-info {
            background: #f9f9f9;
            border: 1px solid #ddd;
            padding: 15px 20px;
            margin: 20px 0;
            font-size: 0.95em;
            line-height: 1.6;
        }
        .meta-info p {
            margin: 6px 0;
            color: #444;
        }
        .meta-info strong {
            color: #000;
            font-weight: bold;
        }
        .stats {
            display: table;
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            border: 1px solid #000;
        }
        .stat-card {
            display: table-cell;
            border: 1px solid #000;
            padding: 12px 15px;
            text-align: center;
            background: #fafafa;
        }
        .stat-card h3 {
            margin: 0;
            color: #000;
            font-size: 1.8em;
            font-weight: bold;
            border: none;
            padding: 0;
        }
        .stat-card p {
            margin: 5px 0 0 0;
            color: #444;
            font-size: 0.9em;
            font-weight: normal;
        }
        .category {
            margin: 30px 0;
        }
        .thread {
            margin: 25px 0;
            padding: 15px;
            background: #fafafa;
            border: 1px solid #ccc;
            page-break-inside: avoid;
        }
        .thread-header {
            margin-bottom: 12px;
            border-bottom: 1px solid #ddd;
            padding-bottom: 10px;
        }
        .thread-header h3 {
            font-size: 1.15em;
            font-weight: bold;
            color: #000;
            margin: 0;
        }
        .thread-meta {
            display: block;
            margin: 8px 0 12px 0;
            font-size: 0.9em;
            color: #555;
            font-style: italic;
        }
        .thread-meta span {
            margin-right: 15px;
        }
        .ai-summary {
            background: #fff;
            border-left: 3px solid #666;
            padding: 12px 15px;
            margin: 15px 0;
            line-height: 1.6;
            color: #222;
            font-style: italic;
        }
        .email-list {
            background: #fff;
            border: 1px solid #ccc;
            padding: 10px 15px;
            font-family: 'Courier New', 'Consolas', monospace;
            font-size: 0.88em;
            line-height: 1.5;
            overflow-x: auto;
            margin: 10px 0;
        }
        .email-item {
            margin: 4px 0;
            padding: 2px 0;
            color: #222;
        }
        .email-item.historical {
            background: #f5f5f5;
            border-left: 3px solid #999;
            padding-left: 8px;
            opacity: 0.8;
        }
        .email-item.new {
            background: #fffef0;
            border-left: 3px solid #0066cc;
            padding-left: 8px;
        }
        .email-date {
            color: #0066cc;
            font-weight: bold;
        }
        .email-date.historical {
            color: #666;
        }
        .email-sender {
            color: #c30;
            font-weight: normal;
        }
        .email-subject {
            color: #000;
        }
        .historical-marker {
            color: #999;
            font-size: 0.85em;
            font-style: italic;
        }
        .new-marker {
            color: #0066cc;
            font-size: 0.85em;
            font-weight: bold;
        }
        .archive-link {
            display: inline-block;
            margin: 15px 0;
            padding: 10px 20px;
            background: #333;
            color: #fff;
            text-decoration: none;
            border: 2px solid #000;
            font-weight: bold;
            transition: all 0.2s;
        }
        .archive-link:hover {
            background: #000;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>KVMARM Mailing List Analysis Report</h1>

        <div class="meta-info">
            <p><strong>Generated:</strong> 2025-10-27 13:14</p>
            <p><strong>Time Period:</strong> 2025年10月 第43周 (10/20 - 10/26)</p>
            <p><strong>Total Messages:</strong> 159 | <strong>Total Threads:</strong> 24</p>
            <p style="text-align: center;"><a href="archive.html" class="archive-link">📚 历史归档 Archive</a></p>
        </div>


        <div class="category">
            <h2>PATCH</h2>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v3 00/25] KVM: x86/mmu: TDX post-populate cleanups</h3>
                </div>

                <div class="thread-meta">
                    <span>65 messages</span>
                    <span>5 participants</span>
                    <span>Started: 2025-10-16</span>
                </div>

                <div class="ai-summary">
                    本邮件线程讨论了关于 KVM（内核虚拟机）中 TDX（可信执行环境扩展）相关的一系列补丁，主要集中在 TDX 后填充的清理工作上。<br><br>1. **原始补丁内容**：补丁系列的主题是对 KVM 中 TDX 后填充路径的清理，旨在解决 gmem 和 TDX 后填充钩子之间的锁定问题，以及 KVM 内部的互斥性问题。补丁包括重命名函数、删除冗余检查、添加新的 API 等。<br><br>2. **之前讨论要点**：历史讨论中，主要关注了如何确保在 TDX 的后填充过程中，内存映射的安全性和一致性。补丁中提到了一些冗余代码的清理和功能的重构，以提高代码的可读性和维护性。<br><br>3. **本周的新讨论与进展**：本周的讨论主要集中在对补丁的审查和细节的完善上。参与者对多个补丁进行了审核，提出了对锁定机制的建议和对潜在死锁问题的关注。此外，讨论中还提到了一些补丁的顺序问题，确保在执行特定操作时持有适当的锁。整体上，参与者对补丁的方向表示支持，并对细节进行了深入探讨。<br><br>总的来说，这一系列补丁的讨论旨在优化 KVM 的 TDX 支持，确保其在多线程环境下的安全性和稳定性。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-10-16]</span> <span class="email-subject">[PATCH v3 00/25] KVM: x86/mmu: TDX post-populate cleanups</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-10-16]</span> <span class="email-subject">[PATCH v3 03/25] KVM: TDX: Drop PROVE_MMU=y sanity check on
 to-be-populated mappings</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-10-16]</span> <span class="email-subject">[PATCH v3 04/25] KVM: x86/mmu: Add dedicated API to map guest_memfd
 pfn into TDP MMU</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-10-16]</span> <span class="email-subject">[PATCH v3 05/25] Revert "KVM: x86/tdp_mmu: Add a helper function to
 walk down the TDP MMU"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-10-16]</span> <span class="email-subject">[PATCH v3 06/25] KVM: x86/mmu: Rename kvm_tdp_map_page() to kvm_tdp_page_prefault()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-10-16]</span> <span class="email-subject">[PATCH v3 07/25] KVM: TDX: Drop superfluous page pinning in S-EPT management</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-10-16]</span> <span class="email-subject">[PATCH v3 09/25] KVM: TDX: Fold tdx_sept_drop_private_spte() into tdx_sept_remove_private_spte()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-10-16]</span> <span class="email-subject">[PATCH v3 10/25] KVM: x86/mmu: Drop the return code from kvm_x86_ops.remove_external_spte()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-10-16]</span> <span class="email-subject">[PATCH v3 11/25] KVM: TDX: Avoid a double-KVM_BUG_ON() in tdx_sept_zap_private_spte()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-10-16]</span> <span class="email-subject">[PATCH v3 13/25] KVM: TDX: Fold tdx_mem_page_record_premap_cnt() into
 its sole caller</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-10-16]</span> <span class="email-subject">[PATCH v3 14/25] KVM: TDX: Bug the VM if extended the initial
 measurement fails</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-10-16]</span> <span class="email-subject">[PATCH v3 15/25] KVM: TDX: ADD pages to the TD image while populating
 mirror EPT entries</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-10-16]</span> <span class="email-subject">[PATCH v3 16/25] KVM: TDX: Fold tdx_sept_zap_private_spte() into tdx_sept_remove_private_spte()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-10-16]</span> <span class="email-subject">[PATCH v3 19/25] KVM: TDX: Assert that mmu_lock is held for write
 when removing S-EPT entries</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-10-16]</span> <span class="email-subject">[PATCH v3 20/25] KVM: TDX: Add macro to retry SEAMCALLs when forcing
 vCPUs out of guest</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-10-16]</span> <span class="email-subject">[PATCH v3 21/25] KVM: TDX: Add tdx_get_cmd() helper to get and
 validate sub-ioctl command</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-10-16]</span> <span class="email-subject">[PATCH v3 22/25] KVM: TDX: Convert INIT_MEM_REGION and INIT_VCPU to
 "unlocked" vCPU ioctl</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-10-16]</span> <span class="email-subject">[PATCH v3 23/25] KVM: TDX: Use guard() to acquire kvm->lock in tdx_vm_ioctl()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-10-16]</span> <span class="email-subject">[PATCH v3 24/25] KVM: TDX: Guard VM state transitions with "all" the locks</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-10-16]</span> <span class="email-subject">[PATCH v3 25/25] KVM: TDX: Fix list_add corruption during vcpu_load()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-20]</span> <span class="email-subject">Re: [PATCH v3 25/25] KVM: TDX: Fix list_add corruption during
 vcpu_load()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Yan Zhao <span class="email-sender">&lt;yan.y.zhao@intel.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-21]</span> <span class="email-subject">Re: [PATCH v3 23/25] KVM: TDX: Use guard() to acquire kvm->lock in
 tdx_vm_ioctl()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Edgecombe, Rick P <span class="email-sender">&lt;rick.p.edgecombe@intel.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-21]</span> <span class="email-subject">Re: [PATCH v3 04/25] KVM: x86/mmu: Add dedicated API to map
 guest_memfd pfn into TDP MMU</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Edgecombe, Rick P <span class="email-sender">&lt;rick.p.edgecombe@intel.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-21]</span> <span class="email-subject">Re: [PATCH v3 07/25] KVM: TDX: Drop superfluous page pinning in S-EPT
 management</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Edgecombe, Rick P <span class="email-sender">&lt;rick.p.edgecombe@intel.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-21]</span> <span class="email-subject">Re: [PATCH v3 14/25] KVM: TDX: Bug the VM if extended the initial
 measurement fails</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Edgecombe, Rick P <span class="email-sender">&lt;rick.p.edgecombe@intel.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-21]</span> <span class="email-subject">Re: [PATCH v3 21/25] KVM: TDX: Add tdx_get_cmd() helper to get and
 validate sub-ioctl command</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Edgecombe, Rick P <span class="email-sender">&lt;rick.p.edgecombe@intel.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-21]</span> <span class="email-subject">Re: [PATCH v3 04/25] KVM: x86/mmu: Add dedicated API to map
 guest_memfd pfn into TDP MMU</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Yan Zhao <span class="email-sender">&lt;yan.y.zhao@intel.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-21]</span> <span class="email-subject">Re: [PATCH v3 04/25] KVM: x86/mmu: Add dedicated API to map
 guest_memfd pfn into TDP MMU</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-21]</span> <span class="email-subject">Re: [PATCH v3 23/25] KVM: TDX: Use guard() to acquire kvm->lock in tdx_vm_ioctl()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-21]</span> <span class="email-subject">Re: [PATCH v3 23/25] KVM: TDX: Use guard() to acquire kvm->lock in
 tdx_vm_ioctl()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Edgecombe, Rick P <span class="email-sender">&lt;rick.p.edgecombe@intel.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-22]</span> <span class="email-subject">Re: [PATCH v3 03/25] KVM: TDX: Drop PROVE_MMU=y sanity check on
 to-be-populated mappings</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Binbin Wu <span class="email-sender">&lt;binbin.wu@linux.intel.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-22]</span> <span class="email-subject">Re: [PATCH v3 04/25] KVM: x86/mmu: Add dedicated API to map
 guest_memfd pfn into TDP MMU</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Yan Zhao <span class="email-sender">&lt;yan.y.zhao@intel.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-22]</span> <span class="email-subject">Re: [PATCH v3 05/25] Revert "KVM: x86/tdp_mmu: Add a helper function
 to walk down the TDP MMU"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Binbin Wu <span class="email-sender">&lt;binbin.wu@linux.intel.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-22]</span> <span class="email-subject">Re: [PATCH v3 06/25] KVM: x86/mmu: Rename kvm_tdp_map_page() to
 kvm_tdp_page_prefault()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Binbin Wu <span class="email-sender">&lt;binbin.wu@linux.intel.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-22]</span> <span class="email-subject">Re: [PATCH v3 04/25] KVM: x86/mmu: Add dedicated API to map
 guest_memfd pfn into TDP MMU</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Yan Zhao <span class="email-sender">&lt;yan.y.zhao@intel.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-22]</span> <span class="email-subject">Re: [PATCH v3 10/25] KVM: x86/mmu: Drop the return code from
 kvm_x86_ops.remove_external_spte()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Yan Zhao <span class="email-sender">&lt;yan.y.zhao@intel.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-22]</span> <span class="email-subject">Re: [PATCH v3 04/25] KVM: x86/mmu: Add dedicated API to map
 guest_memfd pfn into TDP MMU</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-22]</span> <span class="email-subject">Re: [PATCH v3 10/25] KVM: x86/mmu: Drop the return code from kvm_x86_ops.remove_external_spte()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-23]</span> <span class="email-subject">Re: [PATCH v3 04/25] KVM: x86/mmu: Add dedicated API to map
 guest_memfd pfn into TDP MMU</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Yan Zhao <span class="email-sender">&lt;yan.y.zhao@intel.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-23]</span> <span class="email-subject">Re: [PATCH v3 19/25] KVM: TDX: Assert that mmu_lock is held for
 write when removing S-EPT entries</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Yan Zhao <span class="email-sender">&lt;yan.y.zhao@intel.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-23]</span> <span class="email-subject">Re: [PATCH v3 04/25] KVM: x86/mmu: Add dedicated API to map
 guest_memfd pfn into TDP MMU</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Huang, Kai <span class="email-sender">&lt;kai.huang@intel.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-23]</span> <span class="email-subject">Re: [PATCH v3 05/25] Revert "KVM: x86/tdp_mmu: Add a helper function
 to walk down the TDP MMU"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Huang, Kai <span class="email-sender">&lt;kai.huang@intel.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-23]</span> <span class="email-subject">Re: [PATCH v3 06/25] KVM: x86/mmu: Rename kvm_tdp_map_page() to
 kvm_tdp_page_prefault()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Huang, Kai <span class="email-sender">&lt;kai.huang@intel.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-23]</span> <span class="email-subject">Re: [PATCH v3 09/25] KVM: TDX: Fold tdx_sept_drop_private_spte() into
 tdx_sept_remove_private_spte()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Huang, Kai <span class="email-sender">&lt;kai.huang@intel.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-23]</span> <span class="email-subject">Re: [PATCH v3 09/25] KVM: TDX: Fold tdx_sept_drop_private_spte() into tdx_sept_remove_private_spte()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-23]</span> <span class="email-subject">Re: [PATCH v3 19/25] KVM: TDX: Assert that mmu_lock is held for write
 when removing S-EPT entries</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-23]</span> <span class="email-subject">Re: [PATCH v3 14/25] KVM: TDX: Bug the VM if extended the initial
 measurement fails</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-23]</span> <span class="email-subject">Re: [PATCH v3 09/25] KVM: TDX: Fold tdx_sept_drop_private_spte() into
 tdx_sept_remove_private_spte()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Huang, Kai <span class="email-sender">&lt;kai.huang@intel.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-23]</span> <span class="email-subject">Re: [PATCH v3 11/25] KVM: TDX: Avoid a double-KVM_BUG_ON() in
 tdx_sept_zap_private_spte()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Huang, Kai <span class="email-sender">&lt;kai.huang@intel.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-23]</span> <span class="email-subject">Re: [PATCH v3 13/25] KVM: TDX: Fold tdx_mem_page_record_premap_cnt()
 into its sole caller</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Huang, Kai <span class="email-sender">&lt;kai.huang@intel.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-23]</span> <span class="email-subject">Re: [PATCH v3 14/25] KVM: TDX: Bug the VM if extended the initial
 measurement fails</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Huang, Kai <span class="email-sender">&lt;kai.huang@intel.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-24]</span> <span class="email-subject">Re: [PATCH v3 15/25] KVM: TDX: ADD pages to the TD image while
 populating mirror EPT entries</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Huang, Kai <span class="email-sender">&lt;kai.huang@intel.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-24]</span> <span class="email-subject">Re: [PATCH v3 13/25] KVM: TDX: Fold tdx_mem_page_record_premap_cnt()
 into its sole caller</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Huang, Kai <span class="email-sender">&lt;kai.huang@intel.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-24]</span> <span class="email-subject">Re: [PATCH v3 13/25] KVM: TDX: Fold tdx_mem_page_record_premap_cnt()
 into its sole caller</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Binbin Wu <span class="email-sender">&lt;binbin.wu@linux.intel.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-24]</span> <span class="email-subject">Re: [PATCH v3 16/25] KVM: TDX: Fold tdx_sept_zap_private_spte() into
 tdx_sept_remove_private_spte()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Huang, Kai <span class="email-sender">&lt;kai.huang@intel.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-24]</span> <span class="email-subject">Re: [PATCH v3 24/25] KVM: TDX: Guard VM state transitions with "all"
 the locks</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Yan Zhao <span class="email-sender">&lt;yan.y.zhao@intel.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-24]</span> <span class="email-subject">Re: [PATCH v3 19/25] KVM: TDX: Assert that mmu_lock is held for
 write when removing S-EPT entries</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Yan Zhao <span class="email-sender">&lt;yan.y.zhao@intel.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-24]</span> <span class="email-subject">Re: [PATCH v3 20/25] KVM: TDX: Add macro to retry SEAMCALLs when
 forcing vCPUs out of guest</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Huang, Kai <span class="email-sender">&lt;kai.huang@intel.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-24]</span> <span class="email-subject">Re: [PATCH v3 21/25] KVM: TDX: Add tdx_get_cmd() helper to get and
 validate sub-ioctl command</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Huang, Kai <span class="email-sender">&lt;kai.huang@intel.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-24]</span> <span class="email-subject">Re: [PATCH v3 22/25] KVM: TDX: Convert INIT_MEM_REGION and INIT_VCPU
 to "unlocked" vCPU ioctl</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Huang, Kai <span class="email-sender">&lt;kai.huang@intel.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-24]</span> <span class="email-subject">Re: [PATCH v3 23/25] KVM: TDX: Use guard() to acquire kvm->lock in
 tdx_vm_ioctl()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Huang, Kai <span class="email-sender">&lt;kai.huang@intel.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-24]</span> <span class="email-subject">Re: [PATCH v3 24/25] KVM: TDX: Guard VM state transitions with "all"
 the locks</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Huang, Kai <span class="email-sender">&lt;kai.huang@intel.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-24]</span> <span class="email-subject">Re: [PATCH v3 13/25] KVM: TDX: Fold tdx_mem_page_record_premap_cnt()
 into its sole caller</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-24]</span> <span class="email-subject">Re: [PATCH v3 14/25] KVM: TDX: Bug the VM if extended the initial
 measurement fails</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-24]</span> <span class="email-subject">Re: [PATCH v3 24/25] KVM: TDX: Guard VM state transitions with "all"
 the locks</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v6 0/7] Add support for FEAT_{LS64, LS64_V} and related tests</h3>
                </div>

                <div class="thread-meta">
                    <span>16 messages</span>
                    <span>3 participants</span>
                    <span>Started: 2025-10-24</span>
                </div>

                <div class="ai-summary">
                    本周讨论的主题是关于添加对 Armv8.7 中 FEAT_{LS64, LS64_V} 特性的支持及相关测试的补丁（PATCH v6 0/7）。该补丁旨在引入单拷贝原子64字节加载和存储指令，主要包括以下内容：<br><br>1. **原始补丁内容**：补丁包括对 FEAT_{LS64, LS64_V} 的识别和启用，向用户空间暴露这些特性，通过 HWCAP3 和 cpuinfo 进行支持，并添加相关的硬件能力测试。同时，处理在虚拟机中对不支持内存（正常/不可缓存）访问的陷阱。<br><br>2. **之前讨论要点**：在历史讨论中，补丁经历了多次版本迭代，主要集中在如何处理 LS64 指令在不支持的内存上的异常，以及如何在虚拟机中正确管理这些指令的执行。<br><br>3. **本周新讨论与进展**：本周的讨论中，补丁得到了进一步的完善，参与者对代码的细节进行了审查和建议，包括对信号处理的改进和文档的补充。Arnd Bergmann 提出了对某些代码实现的建议，强调了在测试中对寄存器的正确使用。此外，Zhou Wang 表示将根据反馈进行修改，并确保在下一版本中添加签名，以便于合并。<br><br>整体来看，本周的讨论推动了补丁的完善，确保了对新特性的支持能够在虚拟化环境中正确实现。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-24]</span> <span class="email-subject">[PATCH v6 0/7] Add support for FEAT_{LS64, LS64_V} and related tests</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Zhou Wang <span class="email-sender">&lt;wangzhou1@hisilicon.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-24]</span> <span class="email-subject">[PATCH v6 1/7] KVM: arm64: Add exit to userspace on {LD,ST}64B* outside of memslots</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Zhou Wang <span class="email-sender">&lt;wangzhou1@hisilicon.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-24]</span> <span class="email-subject">[PATCH v6 2/7] KVM: arm64: Add documentation for KVM_EXIT_ARM_LDST64B</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Zhou Wang <span class="email-sender">&lt;wangzhou1@hisilicon.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-24]</span> <span class="email-subject">[PATCH v6 3/7] KVM: arm64: Handle DABT caused by LS64* instructions on unsupported memory</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Zhou Wang <span class="email-sender">&lt;wangzhou1@hisilicon.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-24]</span> <span class="email-subject">[PATCH v6 4/7] arm64: Provide basic EL2 setup for FEAT_{LS64, LS64_V} usage at EL0/1</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Zhou Wang <span class="email-sender">&lt;wangzhou1@hisilicon.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-24]</span> <span class="email-subject">[PATCH v6 5/7] arm64: Add support for FEAT_{LS64, LS64_V}</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Zhou Wang <span class="email-sender">&lt;wangzhou1@hisilicon.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-24]</span> <span class="email-subject">[PATCH v6 6/7] KVM: arm64: Enable FEAT_{LS64, LS64_V} in the supported guest</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Zhou Wang <span class="email-sender">&lt;wangzhou1@hisilicon.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-24]</span> <span class="email-subject">[PATCH v6 7/7] kselftest/arm64: Add HWCAP test for FEAT_{LS64, LS64_V}</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Zhou Wang <span class="email-sender">&lt;wangzhou1@hisilicon.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-24]</span> <span class="email-subject">Re: [PATCH v6 7/7] kselftest/arm64: Add HWCAP test for FEAT_{LS64, LS64_V}</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Arnd Bergmann <span class="email-sender">&lt;arnd@arndb.de&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-24]</span> <span class="email-subject">Re: [PATCH v6 0/7] Add support for FEAT_{LS64, LS64_V} and related tests</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Arnd Bergmann <span class="email-sender">&lt;arnd@arndb.de&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-24]</span> <span class="email-subject">Re: [PATCH v6 3/7] KVM: arm64: Handle DABT caused by LS64*
 instructions on unsupported memory</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-25]</span> <span class="email-subject">Re: [PATCH v6 0/7] Add support for FEAT_{LS64, LS64_V} and related
 tests</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Zhou Wang <span class="email-sender">&lt;wangzhou1@hisilicon.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-25]</span> <span class="email-subject">Re: [PATCH v6 7/7] kselftest/arm64: Add HWCAP test for FEAT_{LS64,
 LS64_V}</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Zhou Wang <span class="email-sender">&lt;wangzhou1@hisilicon.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-25]</span> <span class="email-subject">Re: [PATCH v6 3/7] KVM: arm64: Handle DABT caused by LS64*
 instructions on unsupported memory</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Zhou Wang <span class="email-sender">&lt;wangzhou1@hisilicon.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-26]</span> <span class="email-subject">Re: [PATCH v6 7/7] kselftest/arm64: Add HWCAP test for FEAT_{LS64, LS64_V}</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Arnd Bergmann <span class="email-sender">&lt;arnd@arndb.de&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-26]</span> <span class="email-subject">Re: [PATCH v6 0/7] Add support for FEAT_{LS64, LS64_V} and related tests</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Arnd Bergmann <span class="email-sender">&lt;arnd@arndb.de&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v2 1/4] arm64/sysreg: Fix checks for incomplete sysreg
 definitions</h3>
                </div>

                <div class="thread-meta">
                    <span>8 messages</span>
                    <span>4 participants</span>
                    <span>Started: 2025-10-09</span>
                </div>

                <div class="ai-summary">
                    本邮件线程讨论了针对 ARM64 系统寄存器（sysreg）的几个补丁，特别是修复不完整 sysreg 定义的检查。<br><br>1. **原始补丁内容**：Sascha Bischoff 提出的补丁 [PATCH v2 1/4] 旨在修复对不完整 sysreg 定义的检查逻辑。原检查条件为 `next_bit > 0`，这在某些情况下不正确，未能考虑到 bit 0 未定义的情况。补丁建议将检查条件改为 `next_bit >= 0`，并将 Mapping 中的 `next_bit` 设置为 -1，以匹配新的检查逻辑。<br><br>2. **之前讨论要点**：在历史讨论中，补丁系列还包括引入 Prefix descriptor 以支持条件字段编码，并迁移 vGIC-v3 代码使用生成的 ICH_VMCR_EL2 定义。补丁的目标是增强 sysreg 描述框架的灵活性，并解决不完整 sysreg 定义的跟踪问题。<br><br>3. **本周的新讨论与进展**：本周的讨论中，Mark Brown 对补丁进行了审核并表示认可，认为解决方案合理且实现良好。他指出，过多的改动可能会引入复杂性，建议将某些重构作为单独的补丁提交。此外，Sean Christopherson 针对另一个补丁提出了对 selftests 的疑问，关注错误的 map_size 是否会导致 munmap() 静默失败的问题。<br><br>总体来看，补丁的审核进展顺利，参与者对补丁的方向表示支持，同时也对潜在问题进行了讨论。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-10-09]</span> <span class="email-subject">[PATCH v2 1/4] arm64/sysreg: Fix checks for incomplete sysreg
 definitions</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sascha Bischoff <span class="email-sender">&lt;Sascha.Bischoff@arm.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-10-09]</span> <span class="email-subject">[PATCH v2 0/4] arm64/sysreg: Introduce Prefix descriptor and
 generated ICH_VMCR_EL2 support</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sascha Bischoff <span class="email-sender">&lt;Sascha.Bischoff@arm.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-10-09]</span> <span class="email-subject">[PATCH v2 2/4] arm64/sysreg: Support feature-specific fields with
 'Prefix' descriptor</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sascha Bischoff <span class="email-sender">&lt;Sascha.Bischoff@arm.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-10-13]</span> <span class="email-subject">[PATCH v2 0/4] KVM ARM64 pre_fault_memory</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Jack Thomson <span class="email-sender">&lt;jackabt.amazon@gmail.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-10-13]</span> <span class="email-subject">[PATCH v2 2/4] KVM: selftests: Fix unaligned mmap allocations</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Jack Thomson <span class="email-sender">&lt;jackabt.amazon@gmail.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-21]</span> <span class="email-subject">Re: [PATCH v2 1/4] arm64/sysreg: Fix checks for incomplete sysreg
 definitions</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-21]</span> <span class="email-subject">Re: [PATCH v2 2/4] arm64/sysreg: Support feature-specific fields
 with 'Prefix' descriptor</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-23]</span> <span class="email-subject">Re: [PATCH v2 2/4] KVM: selftests: Fix unaligned mmap allocations</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH] KVM: arm64: gic-v3: Only set ICH_HCR traps for v2-on-v3 or v3
 guests</h3>
                </div>

                <div class="thread-meta">
                    <span>8 messages</span>
                    <span>4 participants</span>
                    <span>Started: 2025-10-07</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主题是关于 KVM（Kernel-based Virtual Machine）在 arm64 架构中对 GICv3 的处理，特别是如何设置 ICH_HCR 陷阱以支持不同版本的 GIC 客户机。历史讨论中，Sascha Bischoff 提出了一个补丁，旨在确保仅在 GICv2-on-v3 或 GICv3 客户机中设置这些陷阱，以避免 GICv2 原生客户机受到不必要的影响。<br><br>在本周的新讨论中，Mark Brown 指出，最近的补丁（3193287ddffb）引入了 KVM no-vgic-v3 自测的失败，影响了所有 arm64 平台的 GICv3 模式。他建议将 KVM 的修复分支直接纳入 -next，以便更好地进行测试覆盖和问题追踪。Marc Zyngier 和 Mark Brown 之间的讨论涉及到对修复分支管理的不同看法，Marc 强调了保持修复分支和功能分支分开的必要性，而 Mark 则认为将修复分支纳入 -next 可以减少测试工作负担并提高效率。<br><br>总体来看，本周的讨论集中在如何优化 KVM arm64 的修复流程，以及对补丁引入的问题进行追踪和解决的建议上。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-10-07]</span> <span class="email-subject">[PATCH] KVM: arm64: gic-v3: Only set ICH_HCR traps for v2-on-v3 or v3
 guests</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sascha Bischoff <span class="email-sender">&lt;Sascha.Bischoff@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-21]</span> <span class="email-subject">Re: [PATCH] KVM: arm64: gic-v3: Only set ICH_HCR traps for v2-on-v3
 or v3 guests</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-20]</span> <span class="email-subject">Re: [PATCH] KVM: arm64: gic-v3: Only set ICH_HCR traps for v2-on-v3
 or v3 guests</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-21]</span> <span class="email-subject">Re: [PATCH] KVM: arm64: gic-v3: Only set ICH_HCR traps for v2-on-v3 or v3 guests</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-21]</span> <span class="email-subject">Re: [PATCH] KVM: arm64: gic-v3: Only set ICH_HCR traps for v2-on-v3
 or v3 guests</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-21]</span> <span class="email-subject">Re: [PATCH] KVM: arm64: gic-v3: Only set ICH_HCR traps for v2-on-v3
 or v3 guests</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-21]</span> <span class="email-subject">Re: [PATCH] KVM: arm64: gic-v3: Only set ICH_HCR traps for v2-on-v3 or v3 guests</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-21]</span> <span class="email-subject">Re: [PATCH] KVM: arm64: gic-v3: Only set ICH_HCR traps for v2-on-v3
 or v3 guests</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH 0/3] KVM: arm64: Fix handling of ID_PFR1_EL1.GIC</h3>
                </div>

                <div class="thread-meta">
                    <span>7 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-10-13</span>
                </div>

                <div class="ai-summary">
                    本邮件线程讨论了针对 KVM（内核虚拟机）在 arm64 架构下对 ID_PFR1_EL1.GIC 的处理修复的三个补丁。<br><br>1. **原始补丁内容**：Marc Zyngier 提出了三个补丁，旨在解决 GICv2 虚拟机恢复失败的问题。补丁包括：将 ID_PFR1_EL1.GIC 设为可写、在配置 GICv3 时设置 ID_AA64PFR0 和 ID_PFR1 的 GIC 字段，以及限制在没有内核 GIC 时对这些字段的清零操作。<br><br>2. **之前讨论要点**：在历史讨论中，Marc 指出 ID_PFR1_EL1.GIC 不能被写入，而其 64 位等价物可以，这导致了 GICv2 虚拟机的恢复失败。他提出的补丁旨在解决这些问题，并标记了第一个补丁为稳定候选。<br><br>3. **本周的新讨论与进展**：本周，Oliver Upton 对三个补丁进行了回复。他认为第一个补丁可以允许用户空间随意写入 32 位 ID 寄存器的值，因为这不会影响 KVM 的配置和仿真。对于第二个补丁，他建议使用 kvm_read_vm_id_reg() 和 kvm_set_vm_id_reg() 函数，以确保符合锁定依赖的断言。对于第三个补丁，他同意将其转换为使用访问器的做法也是一个好主意。整体来看，讨论集中在补丁的实现细节和潜在改进上。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-10-13]</span> <span class="email-subject">[PATCH 0/3] KVM: arm64: Fix handling of ID_PFR1_EL1.GIC</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-10-13]</span> <span class="email-subject">[PATCH 1/3] KVM: arm64: Make ID_PFR1_EL1.GIC writable</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-10-13]</span> <span class="email-subject">[PATCH 2/3] KVM: arm64: Set ID_{AA64PFR0,PFR1}_EL1.GIC when GICv3 is configured</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-10-13]</span> <span class="email-subject">[PATCH 3/3] KVM: arm64: Limit clearing of ID_{AA64PFR0,PFR1}_EL1.GIC to userspace irqchip</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-22]</span> <span class="email-subject">Re: [PATCH 1/3] KVM: arm64: Make ID_PFR1_EL1.GIC writable</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-22]</span> <span class="email-subject">Re: [PATCH 2/3] KVM: arm64: Set ID_{AA64PFR0,PFR1}_EL1.GIC when
 GICv3 is configured</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-22]</span> <span class="email-subject">Re: [PATCH 3/3] KVM: arm64: Limit clearing of
 ID_{AA64PFR0,PFR1}_EL1.GIC to userspace irqchip</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v3 0/5] arm64/sysreg: Introduce Prefix descriptor and
 generated ICH_VMCR_EL2 support</h3>
                </div>

                <div class="thread-meta">
                    <span>6 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-10-22</span>
                </div>

                <div class="ai-summary">
                    本邮件线程讨论了一个关于 ARM64 系统寄存器的补丁系列，主要集中在引入前缀描述符和生成 ICH_VMCR_EL2 支持的内容。<br><br>1. **原始补丁内容**：该补丁系列（PATCH v3 0/5）旨在为 sysreg 描述框架引入条件字段编码的支持，并将 vGIC-v3 代码迁移到使用生成的 ICH_VMCR_EL2 定义。此外，补丁还修复了不完整系统寄存器定义的跟踪问题。<br><br>2. **之前讨论要点**：在历史讨论中，补丁经历了多个版本的迭代，主要改进包括重构生成器以使用前缀而非特性，增加了对重复前缀的检查，并将某些功能重构为单独的补丁。<br><br>3. **本周的新讨论与进展**：本周的讨论中，Sascha Bischoff 提出了五个补丁，分别修复了不完整 sysreg 定义的检查、支持特性特定字段的前缀描述符、将 RES0/RES1/UNKN 的生成移至函数、添加了 ICH_VMCR_EL2 寄存器，并将 vGIC-v3 代码切换为使用生成的 ICH_VMCR_EL2 定义。这些补丁的实施将为即将到来的 GICv5 KVM 支持奠定基础。<br><br>总的来说，这些补丁的合并将增强 ARM64 系统寄存器的灵活性和可维护性，同时为未来的扩展提供了必要的基础设施。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-22]</span> <span class="email-subject">[PATCH v3 0/5] arm64/sysreg: Introduce Prefix descriptor and
 generated ICH_VMCR_EL2 support</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sascha Bischoff <span class="email-sender">&lt;Sascha.Bischoff@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-22]</span> <span class="email-subject">[PATCH v3 2/5] arm64/sysreg: Support feature-specific fields with
 'Prefix' descriptor</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sascha Bischoff <span class="email-sender">&lt;Sascha.Bischoff@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-22]</span> <span class="email-subject">[PATCH v3 1/5] arm64/sysreg: Fix checks for incomplete sysreg
 definitions</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sascha Bischoff <span class="email-sender">&lt;Sascha.Bischoff@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-22]</span> <span class="email-subject">[PATCH v3 3/5] arm64/sysreg: Move generation of RES0/RES1/UNKN to
 function</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sascha Bischoff <span class="email-sender">&lt;Sascha.Bischoff@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-22]</span> <span class="email-subject">[PATCH v3 4/5] arm64/sysreg: Add ICH_VMCR_EL2</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sascha Bischoff <span class="email-sender">&lt;Sascha.Bischoff@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-22]</span> <span class="email-subject">[PATCH v3 5/5] KVM: arm64: gic-v3: Switch vGIC-v3 to use generated
 ICH_VMCR_EL2</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sascha Bischoff <span class="email-sender">&lt;Sascha.Bischoff@arm.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH V2 0/2] arm64/mm: Add remaining TLBI_XXX_MASK macros</h3>
                </div>

                <div class="thread-meta">
                    <span>5 messages</span>
                    <span>3 participants</span>
                    <span>Started: 2025-10-24</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主题是针对 arm64 架构的内存管理，提出了两个补丁（patch），旨在添加剩余的 TLBI_XXX_MASK 宏。<br><br>**原始 patch/问题的内容**：<br>补丁的主要内容是添加剩余的 TLBI_XXX_MASK 宏，并在此过程中去掉了 __tlbi_level() 函数中冗余的 'level' 修剪操作。<br><br>**之前讨论要点**：<br>在本次讨论之前，参与者 Anshuman Khandual 提出了补丁的初稿（V1），并在 V2 中进行了更新，主要包括对 KVM 的相关更改，以适应 TLBI_TTL_MASK 的拆分，以及更新了提交信息。补丁的目的是为了更好地管理内存中的翻译表项。<br><br>**本周的新讨论、进展或结论**：<br>本周的讨论中，Anshuman Khandual 提交了补丁的 V2 版本，详细说明了对代码的修改，包括将 TLBI_TTL_MASK 拆分为 TLBI_TTL_MASK 和 TLBI_TG_MASK，以便更清晰地管理页面大小和翻译表级别信息。参与者 Ben Horgan 和 Jonathan Cameron 对补丁的正确性表示认可，并提出了一些代码优化建议，如使用 FIELD_MODIFY 函数来简化代码。整体来看，讨论氛围积极，补丁得到了初步的认可，后续可能会进行进一步的审查和优化。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-24]</span> <span class="email-subject">[PATCH V2 0/2] arm64/mm: Add remaining TLBI_XXX_MASK macros</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Anshuman Khandual <span class="email-sender">&lt;anshuman.khandual@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-24]</span> <span class="email-subject">[PATCH V2 1/2] arm64/mm: Drop redundant 'level' range trimming in __tlbi_level()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Anshuman Khandual <span class="email-sender">&lt;anshuman.khandual@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-24]</span> <span class="email-subject">[PATCH V2 2/2] arm64/mm: Add remaining TLBI_XXX_MASK macros</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Anshuman Khandual <span class="email-sender">&lt;anshuman.khandual@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-24]</span> <span class="email-subject">Re: [PATCH V2 2/2] arm64/mm: Add remaining TLBI_XXX_MASK macros</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Ben Horgan <span class="email-sender">&lt;ben.horgan@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-24]</span> <span class="email-subject">Re: [PATCH V2 2/2] arm64/mm: Add remaining TLBI_XXX_MASK macros</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Jonathan Cameron <span class="email-sender">&lt;jonathan.cameron@huawei.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v4 0/3] VMM can handle guest SEA via KVM_EXIT_ARM_SEA</h3>
                </div>

                <div class="thread-meta">
                    <span>5 messages</span>
                    <span>3 participants</span>
                    <span>Started: 2025-10-13</span>
                </div>

                <div class="ai-summary">
                    本邮件线程讨论了一个关于 KVM（Kernel-based Virtual Machine）处理客人同步外部中止（SEA）的补丁，主题为“[PATCH v4 0/3] VMM can handle guest SEA via KVM_EXIT_ARM_SEA”。<br><br>**原始补丁内容**：<br>补丁的主要目的是解决在主机 APEI 无法处理客人中止时，KVM 直接向 VCPU 注入异步 SError 的问题。这种情况通常导致客人内核崩溃，尤其是在现代数据中心服务器中，客人 VCPU 处理可恢复的未更正内存错误（UER）时更为常见。<br><br>**之前讨论要点**：<br>在历史讨论中，Jiaqi Yan 提出了补丁的背景和必要性，并附带了文档更新，介绍了新的用户空间可见特性和 API，以处理 SEA。Randy Dunlap 对文档中的某些细节提出了格式上的建议。<br><br>**本周新讨论进展**：<br>在本周的讨论中，Jason Gunthorpe 表达了对补丁内容的理解，并表示其用例与补丁所述内容相符。Jiaqi Yan 则回应了 Randy 的反馈，表示已处理相关修复，并在等待其他补丁的审查。这表明补丁得到了积极的关注和支持，且正在向前推进。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-10-13]</span> <span class="email-subject">[PATCH v4 0/3] VMM can handle guest SEA via KVM_EXIT_ARM_SEA</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Jiaqi Yan <span class="email-sender">&lt;jiaqiyan@google.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-10-13]</span> <span class="email-subject">[PATCH v4 3/3] Documentation: kvm: new UAPI for handling SEA</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Jiaqi Yan <span class="email-sender">&lt;jiaqiyan@google.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-10-13]</span> <span class="email-subject">Re: [PATCH v4 3/3] Documentation: kvm: new UAPI for handling SEA</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Randy Dunlap <span class="email-sender">&lt;rdunlap@infradead.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-20]</span> <span class="email-subject">Re: [PATCH v4 0/3] VMM can handle guest SEA via KVM_EXIT_ARM_SEA</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Jason Gunthorpe <span class="email-sender">&lt;jgg@nvidia.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-21]</span> <span class="email-subject">Re: [PATCH v4 3/3] Documentation: kvm: new UAPI for handling SEA</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Jiaqi Yan <span class="email-sender">&lt;jiaqiyan@google.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH] KVM: selftests: fix ITS collection target addresses in vgic_lpi_stress</h3>
                </div>

                <div class="thread-meta">
                    <span>5 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-10-17</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主题是针对 KVM 自测试中的一个补丁，旨在修复 vgic_lpi_stress 中的 ITS 集合目标地址问题。<br><br>**原始补丁内容**：补丁的核心问题在于，vgic_lpi_stress 在映射来宾 ITS 集合时，错误地将 vCPU ID 作为目标地址传递给 its_send_mapc_cmd()，而该函数实际上需要的是 vCPU 的 redistributor 地址。<br><br>**之前的讨论要点**：在历史讨论中，Marc Zyngier 指出，KVM ITS 模拟代码使用线性 CPU 编号进行 redistributor 地址映射，因此 GITS_TYPER.PTA 应为 0，而不是地址。Maximilian Dittgen 提到，its_encode_target 函数在处理目标地址时会将 CPU 编号右移 16 位，导致所有集合错误地映射到目标 vCPU 0。<br><br>**本周的新讨论与进展**：Maximilian Dittgen 提出了几种解决方案，包括对自测试进行对齐，避免使用其_encode_target 函数。Marc Zyngier 对补丁的提交信息表示异议，认为描述不准确，但认可补丁的修复效果。最终，Maximilian 创建了补丁 v2，修正了提交信息，并引入了一个新的辅助函数 procnum_to_rdbase()。他还表示正在开发一个针对每个 vCPU 的 vLPI 启用的 RFC 补丁集，以扩展此自测试功能。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-10-17]</span> <span class="email-subject">[PATCH] KVM: selftests: fix ITS collection target addresses in vgic_lpi_stress</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Maximilian Dittgen <span class="email-sender">&lt;mdittgen@amazon.de&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-10-17]</span> <span class="email-subject">Re: [PATCH] KVM: selftests: fix ITS collection target addresses in vgic_lpi_stress</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-20]</span> <span class="email-subject">Re: [PATCH] KVM: selftests: fix ITS collection target addresses in vgic_lpi_stress</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Maximilian Dittgen <span class="email-sender">&lt;mdittgen@amazon.de&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-20]</span> <span class="email-subject">Re: [PATCH] KVM: selftests: fix ITS collection target addresses in vgic_lpi_stress</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-20]</span> <span class="email-subject">Re: [PATCH] KVM: selftests: fix ITS collection target addresses in vgic_lpi_stress</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Maximilian Dittgen <span class="email-sender">&lt;mdittgen@amazon.de&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v2] KVM: arm64: nv: Optimize unmapping of shadow S2-MMU tables</h3>
                </div>

                <div class="thread-meta">
                    <span>3 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-10-12</span>
                </div>

                <div class="ai-summary">
                    本邮件线程讨论了一个针对 KVM（Kernel-based Virtual Machine）在 arm64 架构下优化影子 S2-MMU 表解除映射的补丁（patch）。该补丁旨在解决在解除映射时，由于缺乏直接映射，导致需要遍历整个 L1 地址空间的性能问题，这在处理 4K 页时会产生约 256K 次循环迭代，影响效率。<br><br>在历史讨论中，补丁的背景被详细阐述，指出了当前实现的不足之处，特别是在解除映射时的性能瓶颈。<br><br>本周的新讨论中，补丁的作者 Ganapatrao Kulkarni 询问是否有任何审查意见或建议。对此，Marc Zyngier 提出了批评，指出该补丁未能满足基本要求，例如未能处理影子 S2 中对同一 IPA 的多重映射问题，且缺乏必要的文档和测试。他对补丁的有效性表示怀疑，认为该优化努力未能认真对待。<br><br>总结来看，本周的讨论主要集中在对补丁的不足之处的批评上，显示出在优化影子 S2-MMU 表解除映射方面仍需进一步改进。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-10-12]</span> <span class="email-subject">[PATCH v2] KVM: arm64: nv: Optimize unmapping of shadow S2-MMU tables</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Ganapatrao Kulkarni <span class="email-sender">&lt;gankulkarni@os.amperecomputing.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-23]</span> <span class="email-subject">Re: [PATCH v2] KVM: arm64: nv: Optimize unmapping of shadow S2-MMU
 tables</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Ganapatrao Kulkarni <span class="email-sender">&lt;gankulkarni@os.amperecomputing.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-23]</span> <span class="email-subject">Re: [PATCH v2] KVM: arm64: nv: Optimize unmapping of shadow S2-MMU tables</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v13 00/12] KVM: guest_memfd: Add NUMA mempolicy support</h3>
                </div>

                <div class="thread-meta">
                    <span>3 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-10-16</span>
                </div>

                <div class="ai-summary">
                    本邮件线程讨论了一个名为“[PATCH v13 00/12] KVM: guest_memfd: Add NUMA mempolicy support”的补丁系列，旨在为 KVM 的 guest_memfd 添加 NUMA 内存策略支持。该补丁系列由 Shivank 提出，基于 kvm-x86/next 分支。<br><br>在历史讨论中，Sean Christopherson 提到补丁中包含一行修改，增加了新的迭代器宏，并指出需要对 cpuset_do_page_mem_spread() 的行为进行测试，尽管他认为可以在没有这些测试的情况下合并补丁。同时，补丁的 v13 版本收集了评审意见，修正了一些拼写错误，并对代码格式进行了小幅调整。<br><br>在本周的新讨论中，Sean Christopherson 表示已将补丁应用于 kvm-x86 gmem，但未包含 .clang-format 的更改。此外，他列出了补丁系列中的各个补丁及其对应的 GitHub 链接。Shivank 对 Sean 处理 v12 到 v13 的所有更改表示感谢，特别是对代码的重构和自测的改进，感谢所有提供支持、评审和建议的参与者。<br><br>总体来看，该补丁系列在社区的支持下得到了积极的反馈，并已成功推进至应用阶段。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-10-16]</span> <span class="email-subject">[PATCH v13 00/12] KVM: guest_memfd: Add NUMA mempolicy support</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-20]</span> <span class="email-subject">Re: [PATCH v13 00/12] KVM: guest_memfd: Add NUMA mempolicy support</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-21]</span> <span class="email-subject">Re: [PATCH v13 00/12] KVM: guest_memfd: Add NUMA mempolicy support</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Garg, Shivank <span class="email-sender">&lt;shivankg@amd.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH] KVM: arm64: Check the untrusted offset in FF-A memory share</h3>
                </div>

                <div class="thread-meta">
                    <span>2 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-10-17</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主题是关于在 KVM 的 arm64 架构中检查 FF-A 内存共享的未受信偏移量的补丁。最初的补丁由 Sebastian Ene 提出，目的是验证偏移量，以防止在虚拟机监控器中发生越界访问，尤其是在主机内核设置了一个过大的值时（范围为 [U32_MAX - sizeof(struct ffa_composite_mem_region) + 1, U32_MAX]）。<br><br>在历史讨论中，Sebastian 指出该补丁的关键在于确保偏移量的有效性，以避免潜在的系统崩溃或安全漏洞。补丁中修改了 `arch/arm64/kvm/hyp/nvhe/ffa.c` 文件，增加了对偏移量的检查。<br><br>在本周的新讨论中，参与者 Vincent Donnefort 对补丁提出了进一步的建议。他认为，偏移量的检查可能只涉及读取操作，因此不太可能导致安全漏洞，除非系统崩溃。他建议将检查逻辑与 `nr_ranges` 的计算结合，以便更容易理解和维护。具体来说，他提出在计算 `nr_ranges` 时，应该确保其与 `reg->constituents` 的偏移量是合理的，并在不符合条件时返回无效参数的错误。<br><br>总结而言，讨论围绕如何改进补丁的逻辑展开，旨在增强系统的稳定性和安全性。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-10-17]</span> <span class="email-subject">[PATCH] KVM: arm64: Check the untrusted offset in FF-A memory share</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sebastian Ene <span class="email-sender">&lt;sebastianene@google.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-22]</span> <span class="email-subject">Re: [PATCH] KVM: arm64: Check the untrusted offset in FF-A memory
 share</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Vincent Donnefort <span class="email-sender">&lt;vdonnefort@google.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH] KVM: arm64: vgic-v3: Trap all if no in-kernel irqchip</h3>
                </div>

                <div class="thread-meta">
                    <span>2 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-10-21</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主题是关于 KVM（Kernel-based Virtual Machine）在 arm64 架构下的 vgic-v3（虚拟通用中断控制器版本3）相关的补丁。补丁的主要内容是：当没有内核中的 irqchip 时，设置所有的陷阱位以阻止所有访问，从而修复 no-vgic-v3 的自测问题。<br><br>在之前的讨论中，补丁的背景是基于一个先前的提交（3193287ddffb），该提交只为 v2-on-v3 或 v3 客户机设置 ICH_HCR 陷阱。此补丁的提出旨在解决在缺少内核 irqchip 的情况下，vgic-v3 的功能问题。<br><br>在本周的新讨论中，Sascha Bischoff 提交了该补丁，并指出此更改将有效修复相关的自测问题。参与者 Mark Brown 对补丁进行了测试并确认其有效性，表示支持该补丁的提交。整体来看，本周讨论集中在补丁的有效性和必要性上，且得到了积极的反馈。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-21]</span> <span class="email-subject">[PATCH] KVM: arm64: vgic-v3: Trap all if no in-kernel irqchip</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sascha Bischoff <span class="email-sender">&lt;Sascha.Bischoff@arm.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-21]</span> <span class="email-subject">Re: [PATCH] KVM: arm64: vgic-v3: Trap all if no in-kernel irqchip</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH] KVM: arm64: selftests: Filter ZCR_EL2 in get-reg-list</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-10-24</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主题是关于 KVM（Kernel-based Virtual Machine）在 arm64 架构下的自测试中，如何处理 ZCR_EL2 寄存器的问题。<br><br>1. **原始 patch/问题的内容**：Mark Brown 提出了一个补丁，目的是在 `get-reg-list` 函数中过滤掉 ZCR_EL2 寄存器。当 NV（虚拟化）功能启用时，`get-reg-list` 会查找 EL2 寄存器，但由于缺乏对 ZCR_EL2 寄存器的特性门控，导致在测试不包含 SVE（Scalable Vector Extension）功能的情况下，出现缺失寄存器的错误。<br><br>2. **之前的讨论要点**：由于邮件中没有提供历史讨论的内容，因此无法总结之前的讨论要点。<br><br>3. **本周的新讨论、进展或结论**：本周的讨论集中在 Mark Brown 提出的补丁上，补丁通过将 ZCR_EL2 添加到 `feat_id_regs` 中，解决了在未启用 SVE 时测试失败的问题。补丁的实现细节包括在 `get-reg-list.c` 文件中添加了一行代码，以确保测试能够正确识别寄存器的存在与否。补丁已被提交并标记为修复了之前的相关问题。<br><br>总结来看，此次讨论主要围绕如何改进 KVM arm64 自测试的寄存器处理，以提高测试的准确性和可靠性。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-24]</span> <span class="email-subject">[PATCH] KVM: arm64: selftests: Filter ZCR_EL2 in get-reg-list</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH] KVM: arm64: selftests: Add SCTLR2_EL2 to get-reg-list</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-10-23</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主题是关于 KVM（Kernel-based Virtual Machine）在 arm64 架构下的自测试功能，主要涉及对 SCTLR2_EL2 寄存器的支持。<br><br>1. **原始 patch/问题的内容**：本次 patch 的目的是将 SCTLR2_EL2 寄存器添加到 KVM 的寄存器列表中。尽管内核最近已支持 SCTLR2_EL2，但在寄存器列表中未包含该寄存器，导致在可用时仍报告缺失。<br><br>2. **之前的讨论要点**：本邮件没有提供历史讨论的上下文，因此无法总结之前的讨论要点。<br><br>3. **本周的新讨论、进展或结论**：本周的邮件由 Mark Brown 提出，详细说明了 patch 的具体内容，包括在 `get-reg-list.c` 文件中添加了 SCTLR2_EL2 的相关代码。此次修改将确保在运行自测试时，系统能够正确识别并报告该寄存器的存在。<br><br>总的来说，此次讨论集中在增强 KVM 的自测试功能，以更好地支持 arm64 架构下的寄存器管理。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-23]</span> <span class="email-subject">[PATCH] KVM: arm64: selftests: Add SCTLR2_EL2 to get-reg-list</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v4 04/23] perf: arm_pmuv3: Introduce method to partition
 the PMU</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-10-22</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主题是关于一个针对 ARM PMU（性能监控单元）的补丁，具体是引入了一种方法来对 PMU 进行分区。该补丁的目的是提升性能监控的灵活性和安全性。<br><br>在之前的讨论中，尚未有相关的历史邮件记录，因此没有提供额外的背景信息。<br><br>在本周的新讨论中，参与者 Suzuki K Poulose 对补丁中的一个警告机制提出了疑问。他认为，使用 WARN_ON 可能过于严厉，因为该情况可以通过用户操作（例如使用 modprobe）轻易触发，而补丁已经能够优雅地处理这种情况并初始化为安全设置。他建议使用 pr_warn 作为替代，认为这已经足够。总体来看，Suzuki 对补丁的其他部分表示认可。<br><br>总结而言，本周的讨论主要集中在补丁中警告机制的适当性上，提出了更为温和的处理方式建议。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-22]</span> <span class="email-subject">Re: [PATCH v4 04/23] perf: arm_pmuv3: Introduce method to partition
 the PMU</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Suzuki K Poulose <span class="email-sender">&lt;suzuki.poulose@arm.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v2] KVM: selftests: fix MAPC RDbase target formatting in vgic_lpi_stress</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-10-20</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主题是针对 KVM 自测中的一个补丁（PATCH v2），旨在修复 vgic_lpi_stress 测试中 MAPC RDbase 目标格式的问题。补丁的核心内容是，当 GITS_TYPER.PTA 为 0 时，ITS MAPC 命令需要 CPU ID 而非物理重分配器地址作为 RDbase 参数。因此，在处理来宾 ITS 集合时，vgic_lpi_stress 需要将 CPU ID 作为 RDbase 参数传递给其发送 MAPC 命令的函数。<br><br>在之前的讨论中，提到该测试由于 RDbase 参数格式不正确，导致所有传入的 CPU ID 在位移后都变为 0，从而使得 vgic_its_cmd_handle_mapc 函数总是将 RDbase 目标 CPU 解释为 CPU 0，影响了多虚拟 CPU 测试的目的。<br><br>本周的新讨论中，补丁作者 Maximilian Dittgen 提出了通过创建一个名为 procnum_to_rdbase 的辅助函数来修复这个问题，该函数将 vCPU 参数左移 16 位后再传递给编码函数。补丁经过验证后，调试日志显示，修复前后对比明显，能够正确解析出每个 MAPC 调用对应的 vCPU ID，确保了多虚拟 CPU 测试的有效性。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-20]</span> <span class="email-subject">[PATCH v2] KVM: selftests: fix MAPC RDbase target formatting in vgic_lpi_stress</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Maximilian Dittgen <span class="email-sender">&lt;mdittgen@amazon.de&gt;</span></div>
                </div>
            </div>
        </div>

        <div class="category">
            <h2>RFC</h2>

            <div class="thread">
                <div class="thread-header">
                    <h3>[RFC PATCH 14/16] arm64/insn: always inline aarch64_insn_encode_ldst_size()</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-10-20</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主题是关于一个 RFC 补丁（patch），其编号为 14/16，主要内容是建议将 `aarch64_insn_encode_ldst_size()` 函数始终内联（inline）在 arm64 架构中。该补丁的目的是优化指令编码过程，特别是在加载和存储指令的大小处理上。<br><br>在之前的讨论中，参与者提出了一个枚举类型 `aarch64_insn_size_type`，定义了不同的指令大小（8、16、32、64 位）。然而，Marc Zyngier 指出，这个数组实际上是多余的，因为可以直接使用 `type` 来代替 `aarch64_insn_ldst_size[type]`，这只是一个小的改进。此外，他还提到这种方法会使得在模块中添加补丁回调变得不可能。<br><br>本周的新讨论中，Marc Zyngier 对补丁提出了具体的反馈，强调了代码的简化潜力以及对模块化的影响。他的意见表明，尽管补丁带来了一些优化，但在某些情况下可能会限制灵活性。整体来看，本周的讨论集中在补丁的实现细节和潜在影响上。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-20]</span> <span class="email-subject">Re: [RFC PATCH 14/16] arm64/insn: always inline aarch64_insn_encode_ldst_size()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[RFC PATCH 12/16] kvm/arm64: make alternative callbacks safe</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-10-20</span>
                </div>

                <div class="ai-summary">
                    本邮件主题为「[RFC PATCH 12/16] kvm/arm64: make alternative callbacks safe」，主要讨论了在 KVM 的 ARM64 架构中如何确保替代回调的安全性。<br><br>在本周的新讨论中，Marc Zyngier 对该补丁提出了建议，指出邮件主题应更符合补丁所针对的子系统，建议修改为“KVM: arm64: Make alternative callbacks safe”。他提到当前的补丁代码仅为调试用途，虽然可以轻易移除，但建议增加一种方法来指示补丁回调失败的情况。这种方法不需要复杂的基础设施，只需在单个位置对单个回调的失败进行最好的努力处理即可。<br><br>此外，Marc 还提到 `generate_mov_q()` 等函数以 `BUG_ON()` 开头，这可能导致不可恢复的错误，类似于 `WARN_ON()`。他认为在这些地方应该能够优雅地处理失败，并至少能够指示失败的发生，以帮助捕捉意外情况。<br><br>总结来看，本周的讨论集中在如何改进补丁的可用性和错误处理机制上，提出了具体的建议以增强代码的健壮性。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-20]</span> <span class="email-subject">Re: [RFC PATCH 12/16] kvm/arm64: make alternative callbacks safe</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[RFC PATCH 06/16] arm64/insn: always inline aarch64_insn_gen_movewide()</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-10-20</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主题是关于一个 RFC 补丁（patch），其内容为在 arm64 架构中始终内联函数 `aarch64_insn_gen_movewide()`。该补丁的目的是优化代码性能，通过内联函数减少函数调用的开销。<br><br>在之前的讨论中，虽然没有具体的邮件记录，但可以推测出参与者对该补丁的实现方式提出了一些建议和改进意见。<br><br>在本周的新讨论中，参与者 Marc Zyngier 对补丁中的代码风格提出了个人看法，认为当前的定义方式不够清晰，建议将 `static __always_inline` 放在单独的一行，以提高可读性。此外，他还建议在代码中使用编译时检查来验证参数的有效性，建议将相关检查放在 `default` 语句中，并去掉不必要的返回语句。这些建议旨在提升代码的可维护性和清晰度。<br><br>总体来看，本周的讨论集中在代码风格和可读性上，参与者提出了具体的改进建议，以便更好地实现补丁的目标。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-20]</span> <span class="email-subject">Re: [RFC PATCH 06/16] arm64/insn: always inline aarch64_insn_gen_movewide()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[RFC PATCH 03/16] arm64/insn: always inline aarch64_insn_decode_register()</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-10-20</span>
                </div>

                <div class="ai-summary">
                    在本邮件线程中，讨论的主题是关于一个 RFC 补丁（patch）——“arm64/insn: always inline aarch64_insn_decode_register()”。该补丁旨在优化 ARM64 架构中的指令解码函数，通过始终内联该函数来提高性能。<br><br>在历史讨论中，没有提供具体的背景信息，因此我们无法了解之前的讨论要点。<br><br>本周的讨论中，Marc Zyngier 对补丁提出了建议。他建议将补丁中的 `compiletime_assert()` 替换为 `default` 情况下的其他断言（如 `BUILD_BUG_ON()`），以避免在未来添加枚举条目时可能导致的代码破坏。他指出，当前的实现存在一定的脆弱性，尤其是“return 0”情况可能会引发问题。<br><br>总的来说，本周的讨论集中在对补丁的细节修改建议上，旨在提高代码的健壮性和可维护性。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-20]</span> <span class="email-subject">Re: [RFC PATCH 03/16] arm64/insn: always inline aarch64_insn_decode_register()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
                </div>
            </div>
        </div>

        <div class="category">
            <h2>Selftest</h2>

            <div class="thread">
                <div class="thread-header">
                    <h3>RFC KVM: arm64: selftest: stage 2 mapping helpers</h3>
                </div>

                <div class="thread-meta">
                    <span>10 messages</span>
                    <span>4 participants</span>
                    <span>Started: 2025-10-20</span>
                </div>

                <div class="ai-summary">
                    本邮件线程讨论了一个关于 KVM（Kernel-based Virtual Machine）在 arm64 架构下的自测试框架的补丁，旨在添加阶段 2 映射帮助函数。补丁的主要内容是引入新的帮助函数，以便在测试中更方便地处理阶段 2 的地址映射，避免重复编写代码。<br><br>在历史讨论中，参与者们对补丁的初步实现进行了反馈，Oliver Upton 提出了改进建议，建议引入一个用于跟踪阶段 2 MMU（内存管理单元）上下文的结构体，并强调需要为这个新结构体提供初始化帮助函数。此外，他指出在自测试中不需要处理 EL2 的阶段 1。<br><br>本周的新讨论中，Itaru Kitayama 更新了补丁并提供了一个测试程序，尝试在 L1 客户机中启动 L2 客户机，但遇到了执行时的异常。Oliver 提出了需要初始化 EL1 CPU 上下文的建议，并指出可以重用 EL2 和 EL0 的页面表。其他参与者如 Sean Christopherson 和 Yosry Ahmed 讨论了是否应提供通用接口以支持不同架构的统一测试，最终达成共识，认为当前的重点应放在 arm64 的具体实现上。<br><br>最后，Itaru 表达了对异常处理的疑问，询问如何在现有的自测试库中实现 L2 客户机的异常处理。整体来看，讨论集中在补丁的实现细节、测试框架的扩展以及不同架构间的兼容性问题上。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-20]</span> <span class="email-subject">RFC KVM: arm64: selftest: stage 2 mapping helpers </span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Itaru Kitayama <span class="email-sender">&lt;itaru.kitayama@linux.dev&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-20]</span> <span class="email-subject">Re: RFC KVM: arm64: selftest: stage 2 mapping helpers</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-22]</span> <span class="email-subject">Re: RFC KVM: arm64: selftest: stage 2 mapping helpers</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Itaru Kitayama <span class="email-sender">&lt;itaru.kitayama@linux.dev&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-22]</span> <span class="email-subject">Re: RFC KVM: arm64: selftest: stage 2 mapping helpers</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-22]</span> <span class="email-subject">Re: RFC KVM: arm64: selftest: stage 2 mapping helpers</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-22]</span> <span class="email-subject">Re: RFC KVM: arm64: selftest: stage 2 mapping helpers</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Yosry Ahmed <span class="email-sender">&lt;yosry.ahmed@linux.dev&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-22]</span> <span class="email-subject">Re: RFC KVM: arm64: selftest: stage 2 mapping helpers</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-22]</span> <span class="email-subject">Re: RFC KVM: arm64: selftest: stage 2 mapping helpers</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Yosry Ahmed <span class="email-sender">&lt;yosry.ahmed@linux.dev&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-23]</span> <span class="email-subject">Re: RFC KVM: arm64: selftest: stage 2 mapping helpers</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-25]</span> <span class="email-subject">Re: RFC KVM: arm64: selftest: stage 2 mapping helpers </span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Itaru Kitayama <span class="email-sender">&lt;itaru.kitayama@linux.dev&gt;</span></div>
                </div>
            </div>
        </div>

        <div class="category">
            <h2>Question</h2>

            <div class="thread">
                <div class="thread-header">
                    <h3>[Question] Received vtimer interrupt but ISTATUS is 0</h3>
                </div>

                <div class="thread-meta">
                    <span>4 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-10-14</span>
                </div>

                <div class="ai-summary">
                    在本次邮件讨论中，Kunkun Jiang 提出了一个关于虚拟定时器（vtimer）中断的问题，具体表现为接收到中断时 ISTATUS 为 0。他推测可能是由于虚拟机中某些操作（如取消定时器）导致 ISTATUS 被清除，而硬件清除中断的速度过慢，导致操作系统已经读取了 ICC_IAR_EL1。Marc Zyngier 对此表示困惑，并询问在现代硬件上为何会出现这种情况。<br><br>在本周的新讨论中，Kunkun Jiang 提到他在异常分支中添加了 dump_stack，并进行了测试，确认问题确实存在于硬件上，尤其是 GIC（中断控制器）处理挂起中断的速度较慢。他表示经过广泛测试后，某个补丁成功解决了他遇到的问题。Marc Zyngier 则强调，这并不是一个软件缺陷，而是硬件实现的速度问题，导致了次优的行为，但并未造成状态丢失或进展缺失，认为系统整体运行正常。<br><br>总结来看，讨论围绕虚拟定时器中断的处理延迟展开，Kunkun Jiang 提出的问题在经过测试后被确认与硬件性能有关，而 Marc Zyngier 则认为这是硬件特性导致的正常现象。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-10-14]</span> <span class="email-subject">[Question] Received vtimer interrupt but ISTATUS is 0</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Kunkun Jiang <span class="email-sender">&lt;jiangkunkun@huawei.com&gt;</span></div>
<div class="email-item historical"><span class="historical-marker">[历史]</span> <span class="email-date historical">[2025-10-14]</span> <span class="email-subject">Re: [Question] Received vtimer interrupt but ISTATUS is 0</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-21]</span> <span class="email-subject">Re: [Question] Received vtimer interrupt but ISTATUS is 0</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Kunkun Jiang <span class="email-sender">&lt;jiangkunkun@huawei.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-21]</span> <span class="email-subject">Re: [Question] Received vtimer interrupt but ISTATUS is 0</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
                </div>
            </div>
        </div>

        <div class="category">
            <h2>Other</h2>

            <div class="thread">
                <div class="thread-header">
                    <h3>linux-6.18-rc2/arch/arm64/kvm/vgic/vgic-v3.c:728: Possible || and |
 mixup ?</h3>
                </div>

                <div class="thread-meta">
                    <span>2 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-10-20</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主题是关于 Linux 内核 6.18-rc2 中 `arch/arm64/kvm/vgic/vgic-v3.c` 文件第 728 行的代码问题。David Binderman 提出了一个静态分析工具 cppcheck 的警告，指出在布尔表达式中使用了按位操作符 `|`，可能是误用，建议改为逻辑操作符 `||`。原始代码为：<br><br>```c<br>if (group0_trap || group1_trap || common_trap | dir_trap) {<br>```<br><br>他建议的改进代码为：<br><br>```c<br>if (group0_trap || group1_trap || common_trap || dir_trap) {<br>```<br><br>在本周的新讨论中，Marc Zyngier 对此表示认可，并鼓励 David 提交相应的补丁。当前讨论尚未涉及更深入的技术细节或其他参与者的意见，主要集中在代码的潜在问题及其修复建议上。整体来看，此次讨论旨在提高代码的可读性和正确性。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-20]</span> <span class="email-subject">linux-6.18-rc2/arch/arm64/kvm/vgic/vgic-v3.c:728: Possible || and |
 mixup ?</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: David Binderman <span class="email-sender">&lt;dcb314@hotmail.com&gt;</span></div>
<div class="email-item new"><span class="new-marker">[本周]</span> <span class="email-date">[2025-10-20]</span> <span class="email-subject">Re: linux-6.18-rc2/arch/arm64/kvm/vgic/vgic-v3.c:728: Possible || and | mixup ?</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
                </div>
            </div>
        </div>

    </div>
</body>
</html>
