<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KVMARM 邮件列表 AI 总结报告</title>
    <style>
        body {
            font-family: 'Courier New', 'Courier', monospace;
            line-height: 1.5;
            max-width: 1200px;
            margin: 0 auto;
            padding: 30px 40px;
            background-color: #ffffff;
            color: #222;
        }
        .container {
            background: #ffffff;
        }
        h1 {
            font-size: 2.2em;
            font-weight: bold;
            color: #000;
            margin-bottom: 0.3em;
            text-align: center;
            border-bottom: 2px solid #000;
            padding-bottom: 15px;
        }
        h2 {
            font-size: 1.6em;
            font-weight: bold;
            color: #000;
            margin-top: 2em;
            margin-bottom: 0.6em;
            border-bottom: 1px solid #333;
            padding-bottom: 8px;
        }
        h3 {
            font-size: 1.2em;
            font-weight: bold;
            color: #111;
            margin-top: 1.5em;
            margin-bottom: 0.5em;
        }
        h4 {
            font-size: 1.05em;
            font-weight: bold;
            color: #333;
            margin-top: 1.2em;
            margin-bottom: 0.5em;
        }
        .meta-info {
            background: #f9f9f9;
            border: 1px solid #ddd;
            padding: 15px 20px;
            margin: 20px 0;
            font-size: 0.95em;
            line-height: 1.6;
        }
        .meta-info p {
            margin: 6px 0;
            color: #444;
        }
        .meta-info strong {
            color: #000;
            font-weight: bold;
        }
        .stats {
            display: table;
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            border: 1px solid #000;
        }
        .stat-card {
            display: table-cell;
            border: 1px solid #000;
            padding: 12px 15px;
            text-align: center;
            background: #fafafa;
        }
        .stat-card h3 {
            margin: 0;
            color: #000;
            font-size: 1.8em;
            font-weight: bold;
            border: none;
            padding: 0;
        }
        .stat-card p {
            margin: 5px 0 0 0;
            color: #444;
            font-size: 0.9em;
            font-weight: normal;
        }
        .category {
            margin: 30px 0;
        }
        .thread {
            margin: 25px 0;
            padding: 15px;
            background: #fafafa;
            border: 1px solid #ccc;
            page-break-inside: avoid;
        }
        .thread-header {
            margin-bottom: 12px;
            border-bottom: 1px solid #ddd;
            padding-bottom: 10px;
        }
        .thread-header h3 {
            font-size: 1.15em;
            font-weight: bold;
            color: #000;
            margin: 0;
        }
        .thread-meta {
            display: block;
            margin: 8px 0 12px 0;
            font-size: 0.9em;
            color: #555;
            font-style: italic;
        }
        .thread-meta span {
            margin-right: 15px;
        }
        .ai-summary {
            background: #fff;
            border-left: 3px solid #666;
            padding: 12px 15px;
            margin: 15px 0;
            line-height: 1.6;
            color: #222;
            font-style: italic;
        }
        .email-list {
            background: #fff;
            border: 1px solid #ccc;
            padding: 10px 15px;
            font-family: 'Courier New', 'Consolas', monospace;
            font-size: 0.88em;
            line-height: 1.5;
            overflow-x: auto;
            margin: 10px 0;
        }
        .email-item {
            margin: 4px 0;
            padding: 2px 0;
            color: #222;
        }
        .email-date {
            color: #0066cc;
            font-weight: bold;
        }
        .email-sender {
            color: #c30;
            font-weight: normal;
        }
        .email-subject {
            color: #000;
        }
        .archive-link {
            display: inline-block;
            margin: 15px 0;
            padding: 10px 20px;
            background: #333;
            color: #fff;
            text-decoration: none;
            border: 2px solid #000;
            font-weight: bold;
            transition: all 0.2s;
        }
        .archive-link:hover {
            background: #000;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>KVMARM Mailing List Analysis Report</h1>

        <div class="meta-info">
            <p><strong>Generated:</strong> 2025-10-21 20:23</p>
            <p><strong>Time Period:</strong> 2025年9月 第38周 (09/15 - 09/21)</p>
            <p><strong>Total Messages:</strong> 265 | <strong>Total Threads:</strong> 81</p>
            <p style="text-align: center;"><a href="archive.html" class="archive-link">📚 历史归档 Archive</a></p>
        </div>


        <div class="category">
            <h2>PATCH</h2>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v2 00/16] KVM: arm64: TTW reporting on SEA and 52bit PA in S1 PTW</h3>
                </div>

                <div class="thread-meta">
                    <span>27 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-09-15</span>
                </div>

                <div class="ai-summary">
                    本邮件线程主要讨论了针对 KVM（Kernel-based Virtual Machine）在 ARM64 架构下的 S1 页面表走查（PTW）和 52 位物理地址（PA）支持的补丁系列。Marc Zyngier 提出了在 S1 PTW 故障注入时报告走查级别的问题，指出当前实现未能遵循架构规范。<br><br>关键技术要点包括：<br>1. 实现了对 52 位 PA 的支持，扩展了 S1 PTW 的功能，以便在处理不同级别的页面表时能够正确报告故障级别。<br>2. 引入了过滤机制，使得在走查过程中可以追踪到故障访问的级别，从而改善故障注入的准确性。<br>3. 通过一系列补丁，修改了现有代码以支持 LPA（Large Page Addressing）和 LPA2，确保在不同的虚拟 CPU 上也能正确使用 S1 PTW。<br><br>讨论的主要结论是，补丁系列得到了参与者的认可，并已被应用到下一个开发版本中。待解决的问题主要集中在对 32 位客体的支持上，当前实现仅针对 AArch64 客体进行了优化。整体而言，该补丁系列提高了 KVM 在 ARM64 架构下的页面表处理能力，确保了更高的兼容性和准确性。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-15]</span> <span class="email-subject">[PATCH v2 00/16] KVM: arm64: TTW reporting on SEA and 52bit PA in S1 PTW</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-15]</span> <span class="email-subject">[PATCH v2 01/16] KVM: arm64: Add helper computing the state of 52bit PA support</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-15]</span> <span class="email-subject">[PATCH v2 02/16] KVM: arm64: Account for 52bit when computing maximum OA</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-15]</span> <span class="email-subject">[PATCH v2 03/16] KVM: arm64: Compute 52bit TTBR address and alignment</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-15]</span> <span class="email-subject">[PATCH v2 04/16] KVM: arm64: Decouple output address from the PT descriptor</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-15]</span> <span class="email-subject">[PATCH v2 05/16] KVM: arm64: Pass the walk_info structure to compute_par_s1()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-15]</span> <span class="email-subject">[PATCH v2 06/16] KVM: arm64: Compute shareability for LPA2</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-15]</span> <span class="email-subject">[PATCH v2 07/16] KVM: arm64: Populate PAR_EL1 with 52bit addresses</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-15]</span> <span class="email-subject">[PATCH v2 08/16] KVM: arm64: Expand valid block mappings to FEAT_LPA/LPA2 support</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-15]</span> <span class="email-subject">[PATCH v2 09/16] KVM: arm64: Report faults from S1 walk setup at the expected start level</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-15]</span> <span class="email-subject">[PATCH v2 10/16] KVM: arm64: Allow use of S1 PTW for non-NV vcpus</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-15]</span> <span class="email-subject">[PATCH v2 11/16] KVM: arm64: Allow EL1 control registers to be accessed from the CPU state</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-15]</span> <span class="email-subject">[PATCH v2 12/16] KVM: arm64: Don't switch MMU on translation from non-NV context</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-15]</span> <span class="email-subject">[PATCH v2 13/16] KVM: arm64: Add filtering hook to S1 page table walk</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-15]</span> <span class="email-subject">[PATCH v2 14/16] KVM: arm64: Add S1 IPA to page table level walker</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-15]</span> <span class="email-subject">[PATCH v2 15/16] KVM: arm64: Populate level on S1PTW SEA injection</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-15]</span> <span class="email-subject">[PATCH v2 16/16] KVM: arm64: selftest: Expand external_aborts test to look for TTW levels</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-19]</span> <span class="email-subject">Re: [PATCH v2 06/16] KVM: arm64: Compute shareability for LPA2</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-19]</span> <span class="email-subject">Re: [PATCH v2 07/16] KVM: arm64: Populate PAR_EL1 with 52bit
 addresses</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-19]</span> <span class="email-subject">Re: [PATCH v2 10/16] KVM: arm64: Allow use of S1 PTW for non-NV vcpus</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-19]</span> <span class="email-subject">Re: [PATCH v2 14/16] KVM: arm64: Add S1 IPA to page table level
 walker</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-19]</span> <span class="email-subject">Re: [PATCH v2 16/16] KVM: arm64: selftest: Expand external_aborts
 test to look for TTW levels</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-19]</span> <span class="email-subject">Re: [PATCH v2 00/16] KVM: arm64: TTW reporting on SEA and 52bit PA
 in S1 PTW</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-20]</span> <span class="email-subject">Re: [PATCH v2 10/16] KVM: arm64: Allow use of S1 PTW for non-NV vcpus</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-20]</span> <span class="email-subject">Re: [PATCH v2 07/16] KVM: arm64: Populate PAR_EL1 with 52bit addresses</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-21]</span> <span class="email-subject">Re: [PATCH v2 00/16] KVM: arm64: TTW reporting on SEA and 52bit PA in S1 PTW</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-21]</span> <span class="email-subject">Re: [PATCH v2 00/16] KVM: arm64: TTW reporting on SEA and 52bit PA in S1 PTW</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH 00/13] KVM: arm64: selftests: Run selftests in VHE EL2</h3>
                </div>

                <div class="thread-meta">
                    <span>19 messages</span>
                    <span>3 participants</span>
                    <span>Started: 2025-09-17</span>
                </div>

                <div class="ai-summary">
                    本邮件线程主要讨论了针对 KVM（Kernel-based Virtual Machine）在 arm64 架构下的自测试（selftests）功能的补丁，特别是如何在 VHE（Virtualization Host Extensions） EL2 环境中运行自测试。参与者 Oliver Upton 提出了 13 个补丁，旨在改进现有的自测试基础设施，使其能够在 EL2 模式下运行，并解决了 VGICv3（虚拟通用中断控制器）初始化等相关问题。<br><br>关键技术要点包括：<br>1. 在 VHE EL2 环境中运行自测试的必要性，能够更好地验证 MMU 相关功能。<br>2. 引入了 VGICv3 的默认创建，简化了 EL2 虚拟机的配置过程。<br>3. 增加了对 EL2 特性的支持，例如使用 SMCCC（Secure Monitor Call Convention）指令与主机交互。<br>4. 通过引入新的辅助函数和宏，简化了对 EL2 寄存器的访问。<br><br>讨论的结论包括：<br>- 目前的补丁已初步实现了在 EL2 下运行自测试的功能，但仍需进一步测试以确保稳定性。<br>- 参与者对补丁的设计和实现表示认可，并提出了一些改进建议，例如在 `aarch64_vcpu_add()` 函数中是否可以无条件调用 ioctl()。<br>- 仍有部分测试在特定硬件上存在问题，需要进一步调试和修复。<br><br>整体而言，该补丁系列旨在提升 KVM 在 arm64 架构下的自测试能力，确保其在 EL2 环境中的正确性和可靠性。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-17]</span> <span class="email-subject">[PATCH 00/13] KVM: arm64: selftests: Run selftests in VHE EL2</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-17]</span> <span class="email-subject">[PATCH 01/13] KVM: arm64: selftests: Provide kvm_arch_vm_post_create() in library code</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-17]</span> <span class="email-subject">[PATCH 02/13] KVM: arm64: selftests: Initialize VGICv3 only once</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-17]</span> <span class="email-subject">[PATCH 03/13] KVM: arm64: selftests: Add helper to check for VGICv3 support</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-17]</span> <span class="email-subject">[PATCH 04/13] KVM: arm64: selftests: Add unsanitised helpers for VGICv3 creation</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-17]</span> <span class="email-subject">[PATCH 05/13] KVM: arm64: selftests: Create a VGICv3 for 'default' VMs</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-17]</span> <span class="email-subject">[PATCH 06/13] KVM: arm64: selftests: Alias EL1 registers to EL2 counterparts</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-17]</span> <span class="email-subject">[PATCH 07/13] KVM: arm64: selftests: Provide helper for getting default vCPU target</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-17]</span> <span class="email-subject">[PATCH 08/13] KVM: arm64: selftests: Select SMCCC conduit based on current EL</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-17]</span> <span class="email-subject">[PATCH 09/13] KVM: arm64: selftests: Use hyp timer IRQs when test runs at EL2</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-17]</span> <span class="email-subject">[PATCH 10/13] KVM: arm64: selftests: Use the vCPU attr for setting nr of PMU counters</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-17]</span> <span class="email-subject">[PATCH 11/13] KVM: arm64: selftests: Initialize HCR_EL2</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-17]</span> <span class="email-subject">[PATCH 12/13] KVM: arm64: selftests: Enable EL2 by default</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-17]</span> <span class="email-subject">[PATCH 13/13] KVM: arm64: selftests: Add basic test for running in VHE EL2</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-18]</span> <span class="email-subject">Re: [PATCH 07/13] KVM: arm64: selftests: Provide helper for getting
 default vCPU target</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Itaru Kitayama <span class="email-sender">&lt;itaru.kitayama@linux.dev&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-17]</span> <span class="email-subject">Re: [PATCH 07/13] KVM: arm64: selftests: Provide helper for getting
 default vCPU target</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-18]</span> <span class="email-subject">Re: [PATCH 01/13] KVM: arm64: selftests: Provide
 kvm_arch_vm_post_create() in library code</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Itaru Kitayama <span class="email-sender">&lt;itaru.kitayama@linux.dev&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-18]</span> <span class="email-subject">Re: [PATCH 03/13] KVM: arm64: selftests: Add helper to check for
 VGICv3 support</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Itaru Kitayama <span class="email-sender">&lt;itaru.kitayama@linux.dev&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-18]</span> <span class="email-subject">Re: [PATCH 02/13] KVM: arm64: selftests: Initialize VGICv3 only once</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Zenghui Yu <span class="email-sender">&lt;yuzenghui@huawei.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH RESEND v7 4/6] arm64: futex: refactor futex atomic
 operation</h3>
                </div>

                <div class="thread-meta">
                    <span>18 messages</span>
                    <span>4 participants</span>
                    <span>Started: 2025-09-15</span>
                </div>

                <div class="ai-summary">
                    本邮件线程主要讨论了针对 ARM64 架构的 futex 原子操作的重构，特别是关于使用 CAS（Compare and Swap）指令替代现有的 LLSC（Load-Link/Store-Conditional）实现。参与者 Yeoreum Yun 提出了补丁，并在讨论中对 CAS 的使用进行了辩论，认为 CAS 在某些情况下更具成功的可能性。Catalin Marinas 和 Will Deacon 等人则建议将更多的逻辑用 C 语言实现，以简化代码并提高可读性。<br><br>关键技术要点包括：<br>1. CAS 指令的引入可能会简化代码，同时在多线程环境下提供更好的性能。<br>2. 讨论中提到的 `unsafe_get_user()` 与 `get_user()` 的使用，涉及到用户空间访问的安全性和性能问题。<br>3. 参与者们对如何处理字节序和对齐问题进行了深入探讨，确保新实现的兼容性。<br><br>讨论的主要结论是，虽然 CAS 的实现可能会带来一些复杂性，但其潜在的性能优势值得探索。同时，参与者们一致认为需要完善现有的测试用例，以确保所有 futex 操作的正确性。待解决的问题包括如何在实现中更好地处理字节序和对齐问题，以及是否需要将 CAS 和 LLSC 的实现分开。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-15]</span> <span class="email-subject">Re: [PATCH RESEND v7 4/6] arm64: futex: refactor futex atomic
 operation</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Yeoreum Yun <span class="email-sender">&lt;yeoreum.yun@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-15]</span> <span class="email-subject">Re: [PATCH RESEND v7 4/6] arm64: futex: refactor futex atomic
 operation</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Catalin Marinas <span class="email-sender">&lt;catalin.marinas@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-15]</span> <span class="email-subject">Re: [PATCH RESEND v7 4/6] arm64: futex: refactor futex atomic
 operation</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Will Deacon <span class="email-sender">&lt;will@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-15]</span> <span class="email-subject">Re: [PATCH RESEND v7 4/6] arm64: futex: refactor futex atomic
 operation</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Yeoreum Yun <span class="email-sender">&lt;yeoreum.yun@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-16]</span> <span class="email-subject">Re: [PATCH RESEND v7 4/6] arm64: futex: refactor futex atomic
 operation</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Catalin Marinas <span class="email-sender">&lt;catalin.marinas@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-16]</span> <span class="email-subject">Re: [PATCH RESEND v7 4/6] arm64: futex: refactor futex atomic
 operation</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Yeoreum Yun <span class="email-sender">&lt;yeoreum.yun@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-16]</span> <span class="email-subject">Re: [PATCH RESEND v7 4/6] arm64: futex: refactor futex atomic
 operation</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Yeoreum Yun <span class="email-sender">&lt;yeoreum.yun@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-16]</span> <span class="email-subject">Re: [PATCH RESEND v7 4/6] arm64: futex: refactor futex atomic
 operation</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Yeoreum Yun <span class="email-sender">&lt;yeoreum.yun@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-16]</span> <span class="email-subject">Re: [PATCH RESEND v7 4/6] arm64: futex: refactor futex atomic
 operation</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Will Deacon <span class="email-sender">&lt;will@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-16]</span> <span class="email-subject">Re: [PATCH RESEND v7 4/6] arm64: futex: refactor futex atomic
 operation</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Rutland <span class="email-sender">&lt;mark.rutland@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-16]</span> <span class="email-subject">Re: [PATCH RESEND v7 4/6] arm64: futex: refactor futex atomic
 operation</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Yeoreum Yun <span class="email-sender">&lt;yeoreum.yun@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-16]</span> <span class="email-subject">Re: [PATCH RESEND v7 4/6] arm64: futex: refactor futex atomic
 operation</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Catalin Marinas <span class="email-sender">&lt;catalin.marinas@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-16]</span> <span class="email-subject">Re: [PATCH RESEND v7 4/6] arm64: futex: refactor futex atomic
 operation</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Yeoreum Yun <span class="email-sender">&lt;yeoreum.yun@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-16]</span> <span class="email-subject">Re: [PATCH RESEND v7 4/6] arm64: futex: refactor futex atomic
 operation</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Rutland <span class="email-sender">&lt;mark.rutland@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-16]</span> <span class="email-subject">Re: [PATCH RESEND v7 4/6] arm64: futex: refactor futex atomic
 operation</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Yeoreum Yun <span class="email-sender">&lt;yeoreum.yun@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-16]</span> <span class="email-subject">Re: [PATCH RESEND v7 4/6] arm64: futex: refactor futex atomic
 operation</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Rutland <span class="email-sender">&lt;mark.rutland@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-16]</span> <span class="email-subject">Re: [PATCH RESEND v7 4/6] arm64: futex: refactor futex atomic
 operation</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Yeoreum Yun <span class="email-sender">&lt;yeoreum.yun@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-17]</span> <span class="email-subject">Re: [PATCH RESEND v7 4/6] arm64: futex: refactor futex atomic
 operation</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Yeoreum Yun <span class="email-sender">&lt;yeoreum.yun@arm.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v2 00/10] KVM: arm64: Handle effective RES0 behaviour of undefined registers</h3>
                </div>

                <div class="thread-meta">
                    <span>15 messages</span>
                    <span>3 participants</span>
                    <span>Started: 2025-09-18</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主要技术问题是关于 KVM（Kernel-based Virtual Machine）在 ARM64 架构下如何处理未定义寄存器的有效 RES0 行为。Marc Zyngier 提出了一个补丁系列，旨在确保当某个特性（如 FEAT_FOO）对虚拟机不可见时，相关寄存器的控制位和陷阱位被正确设置为 RES0。这一系列补丁还涉及到对 EL2 相关字段的可写性支持以及与内核其他部分的 NV 支持对齐。<br><br>关键技术要点包括：<br>1. 引入了新的结构 `reg_feat_map_desc` 来描述寄存器与特性之间的依赖关系。<br>2. 通过 `compute_reg_res0_bits()` 函数来计算 RES0 位，确保在特性不可用时寄存器行为的一致性。<br>3. 对多个寄存器（如 HCRX_EL2、SCTLR2_EL1、TCR2_EL2 等）进行了 RES0 行为的强制执行。<br><br>讨论的主要结论是补丁系列得到了参与者的认可，并且在合并之前，Marc Zyngier 计划修复一些小问题（如 MDCR_EL2 的处理）。整体上，这些补丁将有助于提升 KVM 在 ARM64 平台上的稳定性和一致性。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-18]</span> <span class="email-subject">[PATCH v2 00/10] KVM: arm64: Handle effective RES0 behaviour of undefined registers</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-18]</span> <span class="email-subject">[PATCH v2 01/10] KVM: arm64: Remove duplicate FEAT_{SYSREG128,MTE2} descriptions</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-18]</span> <span class="email-subject">[PATCH v2 02/10] KVM: arm64: Add reg_feat_map_desc to describe full register dependency</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-18]</span> <span class="email-subject">[PATCH v2 03/10] KVM: arm64: Enforce absence of FEAT_FGT on FGT registers</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-18]</span> <span class="email-subject">[PATCH v2 04/10] KVM: arm64: Enforce absence of FEAT_FGT2 on FGT2 registers</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-18]</span> <span class="email-subject">[PATCH v2 05/10] KVM: arm64: Enforce absence of FEAT_HCX on HCRX_EL2</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-18]</span> <span class="email-subject">[PATCH v2 06/10] KVM: arm64: Convert HCR_EL2 RES0 handling to compute_reg_res0_bits()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-18]</span> <span class="email-subject">[PATCH v2 07/10] KVM: arm64: Enforce absence of FEAT_SCTLR2 on SCTLR2_EL{1,2}</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-18]</span> <span class="email-subject">[PATCH v2 08/10] KVM: arm64: Enforce absence of FEAT_TCR2 on TCR2_EL2</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-18]</span> <span class="email-subject">[PATCH v2 09/10] KVM: arm64: Convert SCTLR_EL1 RES0 handling to compute_reg_res0_bits()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-18]</span> <span class="email-subject">[PATCH v2 10/10] KVM: arm64: Convert MDCR_EL2 RES0 handling to compute_reg_res0_bits()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-19]</span> <span class="email-subject">Re: [PATCH v2 00/10] KVM: arm64: Handle effective RES0 behaviour of
 undefined registers</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-19]</span> <span class="email-subject">Re: [PATCH v2 10/10] KVM: arm64: Convert MDCR_EL2 RES0 handling to
 compute_reg_res0_bits()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Ben Horgan <span class="email-sender">&lt;ben.horgan@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-19]</span> <span class="email-subject">Re: [PATCH v2 10/10] KVM: arm64: Convert MDCR_EL2 RES0 handling to compute_reg_res0_bits()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-19]</span> <span class="email-subject">Re: [PATCH v2 00/10] KVM: arm64: Handle effective RES0 behaviour of undefined registers</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v8 0/5] support FEAT_LSUI and apply it on futex atomic ops</h3>
                </div>

                <div class="thread-meta">
                    <span>13 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-09-17</span>
                </div>

                <div class="ai-summary">
                    本邮件线程主要讨论了对 Linux 内核中 futex 原子操作的补丁，支持 Armv9.6 的 FEAT_LSUI 特性。FEAT_LSUI 允许特权级代码在不清除 PSTATE.PAN 位的情况下访问用户内存，从而优化了 futex 原子操作的实现。<br><br>关键技术要点包括：<br>1. 补丁集包含五个补丁，分别添加了 FEAT_LSUI 的 CPU 特性检测、将其暴露给虚拟机、更新 Kconfig 配置、重构现有的 futex 原子操作实现，并支持使用 FEAT_LSUI 进行新的原子操作。<br>2. 通过使用 FEAT_LSUI，某些原子操作可以用单个指令替代原有的 ldxr/stlxr 指令对，减少了对 PSTATE.PAN 的依赖。<br>3. 讨论中还涉及了对内存一致性的担忧，特别是在多核环境下，如何确保不同 CPU 之间的操作不引发不一致性。<br><br>主要讨论结论是，尽管 FEAT_LSUI 提供了更高效的实现方式，但仍需关注其在多核环境下可能引发的内存一致性问题，相关的代码实现也需要进一步优化和验证。参与者对补丁的具体实现提出了建议，强调了在高竞争情况下的返回值处理。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-17]</span> <span class="email-subject">[PATCH v8 0/5] support FEAT_LSUI and apply it on futex atomic ops</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Yeoreum Yun <span class="email-sender">&lt;yeoreum.yun@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-17]</span> <span class="email-subject">[PATCH v8 1/5] arm64: cpufeature: add FEAT_LSUI</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Yeoreum Yun <span class="email-sender">&lt;yeoreum.yun@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-17]</span> <span class="email-subject">[PATCH v8 2/5] KVM: arm64: expose FEAT_LSUI to guest</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Yeoreum Yun <span class="email-sender">&lt;yeoreum.yun@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-17]</span> <span class="email-subject">[PATCH v8 3/5] arm64: Kconfig: Detect toolchain support for LSUI</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Yeoreum Yun <span class="email-sender">&lt;yeoreum.yun@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-17]</span> <span class="email-subject">[PATCH v8 4/5] arm64: futex: refactor futex atomic operation</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Yeoreum Yun <span class="email-sender">&lt;yeoreum.yun@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-17]</span> <span class="email-subject">[PATCH v8 5/5] arm64: futex: support futex with FEAT_LSUI</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Yeoreum Yun <span class="email-sender">&lt;yeoreum.yun@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-17]</span> <span class="email-subject">Re: [PATCH v8 5/5] arm64: futex: support futex with FEAT_LSUI</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Yeoreum Yun <span class="email-sender">&lt;yeoreum.yun@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-17]</span> <span class="email-subject">Re: [PATCH v8 5/5] arm64: futex: support futex with FEAT_LSUI</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Rutland <span class="email-sender">&lt;mark.rutland@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-17]</span> <span class="email-subject">Re: [PATCH v8 5/5] arm64: futex: support futex with FEAT_LSUI</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Yeoreum Yun <span class="email-sender">&lt;yeoreum.yun@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-17]</span> <span class="email-subject">Re: [PATCH v8 5/5] arm64: futex: support futex with FEAT_LSUI</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Yeoreum Yun <span class="email-sender">&lt;yeoreum.yun@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-17]</span> <span class="email-subject">Re: [PATCH v8 5/5] arm64: futex: support futex with FEAT_LSUI</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Rutland <span class="email-sender">&lt;mark.rutland@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-17]</span> <span class="email-subject">Re: [PATCH v8 5/5] arm64: futex: support futex with FEAT_LSUI</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Yeoreum Yun <span class="email-sender">&lt;yeoreum.yun@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-18]</span> <span class="email-subject">Re: [PATCH v8 5/5] arm64: futex: support futex with FEAT_LSUI</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Yeoreum Yun <span class="email-sender">&lt;yeoreum.yun@arm.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH 0/8] KVM: arm64: Handle effective RES0 behaviour of undefined registers</h3>
                </div>

                <div class="thread-meta">
                    <span>11 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-09-17</span>
                </div>

                <div class="ai-summary">
                    本邮件线程主要讨论了针对 KVM（内核虚拟机）在 arm64 架构下处理未定义寄存器的有效 RES0 行为的补丁系列。Marc Zyngier 提出了一个补丁系列，旨在确保当某个特性在虚拟机中不可见时，其相关寄存器的控制位被正确设置为 RES0。这一系列补丁的目标是解决在特性不可见时，寄存器未被正确标记为 RES0 的问题，确保 EL2 和 EL1 的一致性，并为未来的迁移提供支持。<br><br>关键技术要点包括：<br>1. 通过对 SCTLR2_EL2 等寄存器的处理，确保在特性不可见时，相关位被设置为 RES0。<br>2. 引入了新的结构体和宏定义，以简化寄存器特性映射的管理。<br>3. 讨论了如何在代码中清晰地区分不同类型的寄存器特性映射（如 reg_to_feat_map 和 reg_bits_to_feat_map）。<br><br>讨论的结论是，尽管补丁系列尚不完整，但它为后续的开发和特性支持奠定了基础。Oliver Upton 提出了一些关于文档和命名的建议，以提高代码的可读性和理解性。此外，Marc Zyngier 也承认了在发送补丁时的错误，并表示将会重新发送正确的补丁系列。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-17]</span> <span class="email-subject">[PATCH 0/8] KVM: arm64: Handle effective RES0 behaviour of undefined registers</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-17]</span> <span class="email-subject">[PATCH 1/8] KVM: arm64: Enforce absence of FEAT_FGT on FGT registers</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-17]</span> <span class="email-subject">[PATCH 2/8] KVM: arm64: Enforce absence of FEAT_FGT2 on FGT2 registers</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-17]</span> <span class="email-subject">[PATCH 3/8] KVM: arm64: Enforce absence of FEAT_HCX on HCRX_EL2</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-17]</span> <span class="email-subject">[PATCH 4/8] KVM: arm64: Convert HCR_EL2 RES0 handling to compute_reg_res0_bits()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-17]</span> <span class="email-subject">[PATCH 5/8] KVM: arm64: Enforce absence of FEAT_SCTLR2 on SCTLR2_EL{1,2}</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-17]</span> <span class="email-subject">[PATCH 6/8] KVM: arm64: Enforce absence of FEAT_TCR2 on TCR2_EL2</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-17]</span> <span class="email-subject">[PATCH 7/8] KVM: arm64: Convert SCTLR_EL1 RES0 handling to compute_reg_res0_bits()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-17]</span> <span class="email-subject">[PATCH 8/8] KVM: arm64: Convert MDCR_EL2 RES0 handling to compute_reg_res0_bits()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-17]</span> <span class="email-subject">Re: [PATCH 1/8] KVM: arm64: Enforce absence of FEAT_FGT on FGT
 registers</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-18]</span> <span class="email-subject">Re: [PATCH 1/8] KVM: arm64: Enforce absence of FEAT_FGT on FGT registers</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v4 22/28] iommu/arm-smmu-v3-kvm: Emulate CMDQ for host</h3>
                </div>

                <div class="thread-meta">
                    <span>10 messages</span>
                    <span>3 participants</span>
                    <span>Started: 2025-09-15</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主要技术问题是关于在 ARM SMMU v3 驱动中实现 CMDQ 的缓存一致性，特别是在使用 pKVM 时如何处理缓存属性。参与者们讨论了在 pKVM 环境下，SMMU 驱动应如何管理缓存可用性，以确保性能和功能的平衡。<br><br>关键技术要点包括： <br>1. pKVM 不应在未确认 IORT/IDR 为一致性标记的情况下，将映射设置为可缓存。<br>2. 建议 SMMU 驱动始终分配可缓存内存，并使用 `dma_sync_single_for_device()` 进行同步，而不是使用非缓存的 DMA 一致性分配。<br>3. 讨论了在某些 SoC 上，非缓存访问可能会改善实时 DMA 的性能。<br><br>讨论的结论是，当前 pKVM 应要求使用一致性 SMMU，直到驱动的相关修复完成。此外，参与者们也提到了一些潜在的性能问题，特别是在处理 CMDQ 时，可能需要在 pKVM 模式下强制将 CMDQ 设置为可缓存，以避免在快速路径中频繁发出缓存操作命令（CMO）。待解决的问题包括如何在不影响其他功能的情况下实现这一点。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-15]</span> <span class="email-subject">Re: [PATCH v4 22/28] iommu/arm-smmu-v3-kvm: Emulate CMDQ for host</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Jason Gunthorpe <span class="email-sender">&lt;jgg@ziepe.ca&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-16]</span> <span class="email-subject">Re: [PATCH v4 22/28] iommu/arm-smmu-v3-kvm: Emulate CMDQ for host</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mostafa Saleh <span class="email-sender">&lt;smostafa@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-16]</span> <span class="email-subject">Re: [PATCH v4 22/28] iommu/arm-smmu-v3-kvm: Emulate CMDQ for host</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mostafa Saleh <span class="email-sender">&lt;smostafa@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-17]</span> <span class="email-subject">Re: [PATCH v4 22/28] iommu/arm-smmu-v3-kvm: Emulate CMDQ for host</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Jason Gunthorpe <span class="email-sender">&lt;jgg@ziepe.ca&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-17]</span> <span class="email-subject">Re: [PATCH v4 22/28] iommu/arm-smmu-v3-kvm: Emulate CMDQ for host</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Will Deacon <span class="email-sender">&lt;will@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-17]</span> <span class="email-subject">Re: [PATCH v4 22/28] iommu/arm-smmu-v3-kvm: Emulate CMDQ for host</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Jason Gunthorpe <span class="email-sender">&lt;jgg@ziepe.ca&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-17]</span> <span class="email-subject">Re: [PATCH v4 22/28] iommu/arm-smmu-v3-kvm: Emulate CMDQ for host</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Will Deacon <span class="email-sender">&lt;will@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-17]</span> <span class="email-subject">Re: [PATCH v4 22/28] iommu/arm-smmu-v3-kvm: Emulate CMDQ for host</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Jason Gunthorpe <span class="email-sender">&lt;jgg@ziepe.ca&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-18]</span> <span class="email-subject">Re: [PATCH v4 22/28] iommu/arm-smmu-v3-kvm: Emulate CMDQ for host</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Will Deacon <span class="email-sender">&lt;will@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-18]</span> <span class="email-subject">Re: [PATCH v4 22/28] iommu/arm-smmu-v3-kvm: Emulate CMDQ for host</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Jason Gunthorpe <span class="email-sender">&lt;jgg@ziepe.ca&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v5 0/6] initialize SCTRL2_ELx</h3>
                </div>

                <div class="thread-meta">
                    <span>9 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-09-17</span>
                </div>

                <div class="ai-summary">
                    本邮件列表讨论的主要内容是针对 Linux 内核中 SCTLR2_ELx 寄存器的初步支持，涉及一系列补丁（PATCH v5 0/6）。该特性从 ARMv8.8/ARMv9.3 开始为可选，至 ARMv8.9/ARMv9.4 时变为强制要求。当前 Linux 内核并不严格需要修改 SCTLR2_ELx，假设固件已将这些寄存器初始化为合理的默认值。然而，未来的一些架构特性（如 FEAT_PAuth_LR 和 FEAT_CPA2）将需要配置这些寄存器中的控制位。<br><br>关键技术要点包括：<br>1. 在内核启动时初始化 SCTLR2_ELx 寄存器，以防止由于未初始化的值导致系统行为异常。<br>2. 在 CPU 挂起和恢复时保存和恢复 SCTLR2_EL1 的值，以确保其一致性。<br>3. 在使用 kexec 启动新内核前显式初始化 SCTLR2_ELx，以避免遗留任意值。<br><br>讨论的结论是，虽然当前对 SCTLR2_ELx 的需求不迫切，但为了未来架构特性的支持，进行这些补丁的实现是必要的。同时，参与者对补丁的合并持谨慎态度，认为应在有实际使用需求时再进行合并。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-17]</span> <span class="email-subject">[PATCH v5 0/6] initialize SCTRL2_ELx</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Yeoreum Yun <span class="email-sender">&lt;yeoreum.yun@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-17]</span> <span class="email-subject">[PATCH v5 1/6] arm64: make SCTLR2_EL1 accessible</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Yeoreum Yun <span class="email-sender">&lt;yeoreum.yun@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-17]</span> <span class="email-subject">[PATCH v5 2/6] arm64: initialise SCTLR2_ELx register at boot time</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Yeoreum Yun <span class="email-sender">&lt;yeoreum.yun@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-17]</span> <span class="email-subject">[PATCH v5 3/6] arm64: save/restore SCTLR2_EL1 when cpu_suspend()/resume()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Yeoreum Yun <span class="email-sender">&lt;yeoreum.yun@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-17]</span> <span class="email-subject">[PATCH v5 4/6] arm64: initialise SCTLR2_EL1 at cpu_soft_restart()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Yeoreum Yun <span class="email-sender">&lt;yeoreum.yun@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-17]</span> <span class="email-subject">[PATCH v5 5/6] arm64: make the per-task SCTLR2_EL1</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Yeoreum Yun <span class="email-sender">&lt;yeoreum.yun@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-17]</span> <span class="email-subject">[PATCH v5 6/6] docs: arm64: Document booting requirements for FEAT_SCTLR2</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Yeoreum Yun <span class="email-sender">&lt;yeoreum.yun@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-17]</span> <span class="email-subject">Re: [PATCH v5 0/6] initialize SCTRL2_ELx</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Will Deacon <span class="email-sender">&lt;will@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-17]</span> <span class="email-subject">Re: [PATCH v5 0/6] initialize SCTRL2_ELx</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Yeoreum Yun <span class="email-sender">&lt;yeoreum.yun@arm.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v4 0/2] arm64: Support FEAT_LSFE (Large System Float
 Extension)</h3>
                </div>

                <div class="thread-meta">
                    <span>7 messages</span>
                    <span>4 participants</span>
                    <span>Started: 2025-09-18</span>
                </div>

                <div class="ai-summary">
                    本邮件线程主要讨论了对 ARM64 架构的 FEAT_LSFE（大型系统浮点扩展）的支持，该扩展自 v9.5 起为可选特性，提供对浮点值的原子内存操作。Mark Brown 提出了两个补丁，分别用于在 KVM 中向虚拟机客体暴露 FEAT_LSFE，并在自测试中添加相关的硬件能力测试。<br><br>关键技术要点包括：<br>1. FEAT_LSFE 不会增加新的架构状态，主要是通过 ID 寄存器字段向用户空间和 KVM 客体暴露该特性。<br>2. 补丁中修复了 hwcap 测试中的一些问题，并添加了对 LSFE 的支持。<br>3. 由于该特性没有相关的陷阱，因此 SIGILL 信号的可靠性受到质疑。<br><br>讨论的主要结论是，补丁已被采纳并应用于下一个版本，Oliver Upton 提出需要在自测试中增加对新特性字段可写性的测试。整体来看，FEAT_LSFE 的支持将增强 ARM64 架构在处理浮点操作时的能力，尽管仍需解决一些测试覆盖的问题。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-18]</span> <span class="email-subject">[PATCH v4 0/2] arm64: Support FEAT_LSFE (Large System Float
 Extension)</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-18]</span> <span class="email-subject">[PATCH v4 1/2] KVM: arm64: Expose FEAT_LSFE to guests</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-18]</span> <span class="email-subject">[PATCH v4 2/2] kselftest/arm64: Add lsfe to the hwcaps test</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-18]</span> <span class="email-subject">Re: [PATCH v4 1/2] KVM: arm64: Expose FEAT_LSFE to guests</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-18]</span> <span class="email-subject">Re: [PATCH v4 1/2] KVM: arm64: Expose FEAT_LSFE to guests</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-19]</span> <span class="email-subject">Re: (subset) [PATCH v4 1/2] KVM: arm64: Expose FEAT_LSFE to guests</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-19]</span> <span class="email-subject">Re: [PATCH v4 0/2] arm64: Support FEAT_LSFE (Large System Float Extension)</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Will Deacon <span class="email-sender">&lt;will@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v4 5/7] arm64: Add support for FEAT_{LS64, LS64_V}</h3>
                </div>

                <div class="thread-meta">
                    <span>6 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-09-15</span>
                </div>

                <div class="ai-summary">
                    该邮件线程主要讨论了在 ARM64 架构中添加对 FEAT_{LS64, LS64_V} 的支持，特别是如何确保在不同内存区域上使用这些指令的安全性和有效性。参与者们关注的关键技术点包括：LS64 指令仅适用于设备内存，用户需要确保所用内存支持该功能；如果在不支持原子性的内存上执行原子指令，可能会导致系统错误或数据损坏。<br><br>讨论中提到，当前缺乏有效的机制来识别整个系统（SoC）是否支持特定功能，导致硬件供应商在广告 CPU 功能时可能存在误导。参与者建议，HWCAP（硬件能力标志）应仅在系统完全支持该功能时才被设置，且应在文档中明确说明这一点。此外，驱动程序开发者需了解其设备是否支持相关功能，以避免潜在的错误。<br><br>最终结论是，尽管 HWCAP 对于用户空间的功能启用是必要的，但仅依赖 HWCAP 可能不足以确保安全使用 LS64 指令。建议在固件表中提供更多信息，以帮助驱动程序开发者做出明智的决策。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-15]</span> <span class="email-subject">Re: [PATCH v4 5/7] arm64: Add support for FEAT_{LS64, LS64_V}</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Yicong Yang <span class="email-sender">&lt;yangyicong@huawei.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-16]</span> <span class="email-subject">Re: [PATCH v4 5/7] arm64: Add support for FEAT_{LS64, LS64_V}</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Catalin Marinas <span class="email-sender">&lt;catalin.marinas@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-17]</span> <span class="email-subject">Re: [PATCH v4 5/7] arm64: Add support for FEAT_{LS64, LS64_V}</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Yicong Yang <span class="email-sender">&lt;yangyicong@huawei.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-17]</span> <span class="email-subject">Re: [PATCH v4 5/7] arm64: Add support for FEAT_{LS64, LS64_V}</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Yicong Yang <span class="email-sender">&lt;yangyicong@huawei.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-17]</span> <span class="email-subject">Re: [PATCH v4 5/7] arm64: Add support for FEAT_{LS64, LS64_V}</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Catalin Marinas <span class="email-sender">&lt;catalin.marinas@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-18]</span> <span class="email-subject">Re: [PATCH v4 5/7] arm64: Add support for FEAT_{LS64, LS64_V}</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Yicong Yang <span class="email-sender">&lt;yangyicong@huawei.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH V5 0/4] arm64/sysreg: Clean up TCR_EL1 field macros</h3>
                </div>

                <div class="thread-meta">
                    <span>5 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-09-21</span>
                </div>

                <div class="ai-summary">
                    本邮件线程主要讨论了对 ARM64 架构中 TCR_EL1 寄存器字段宏的清理和重构，涉及四个补丁的提交。Anshuman Khandual 提出了将分散在 ARM64 平台代码和 KVM 实现中的 TCR_EL1 字段宏集中到 KVM 头文件（asm/kvm_arm.h）中，以便于后续使用，并更新了相关的寄存器字段定义。<br><br>关键技术要点包括：<br>1. 将 TCR_NFD[0|1] 替换为工具 sysreg 格式中的字段定义，以便于后续的宏清理。<br>2. 更新 TCR_EL1 寄存器字段以符合最新的 ARM 文档，并删除冗余的 sysreg 定义。<br>3. 所有 TCR_XXX 宏被移动到 KVM 头文件中，确保 KVM 代码的持续使用。<br><br>讨论的结论是，这些清理工作不会引入功能性变化，但提升了代码的整洁性和可维护性。待解决的问题主要是确保所有相关代码在宏更新后正常工作，并进行必要的测试验证。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-21]</span> <span class="email-subject">[PATCH V5 0/4] arm64/sysreg: Clean up TCR_EL1 field macros</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Anshuman Khandual <span class="email-sender">&lt;anshuman.khandual@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-21]</span> <span class="email-subject">[PATCH V5 1/4] tools: header : arm64: Replace TCR_NFD[0|1] with TCR_EL1_NFD[0|1]</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Anshuman Khandual <span class="email-sender">&lt;anshuman.khandual@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-21]</span> <span class="email-subject">[PATCH V5 2/4] arm64/sysreg: Update TCR_EL1 register</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Anshuman Khandual <span class="email-sender">&lt;anshuman.khandual@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-21]</span> <span class="email-subject">[PATCH V5 3/4] arm64/sysreg: Replace TCR_EL1 field macros</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Anshuman Khandual <span class="email-sender">&lt;anshuman.khandual@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-21]</span> <span class="email-subject">[PATCH V5 4/4] KVM: arm64: Move inside all required TCR_XXX macros</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Anshuman Khandual <span class="email-sender">&lt;anshuman.khandual@arm.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH 0/2] KVM: arm64: nv: Fix SError injection at EL2</h3>
                </div>

                <div class="thread-meta">
                    <span>5 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-09-18</span>
                </div>

                <div class="ai-summary">
                    本邮件线程主要讨论了针对 KVM（Kernel-based Virtual Machine）在 arm64 架构下的 SError（系统错误）注入问题的修复补丁。参与者 Oliver Upton 提出了两个补丁，旨在解决在 EL2（异常级别 2）下 SError 注入的质量问题，特别是在 HCR_EL2（Hypervisor Configuration Register EL2）寄存器的某些位被修改时。<br><br>关键技术要点包括：<br>1. 在 HCR_EL2.{E2H, TGE} = {1, 0} 的情况下，允许将 HCR_EL2.AMO（Abort Mask Option）视为 1，从而确保 SError 始终可被传递。这一变化有助于改善嵌套虚拟机中的 SError 处理。<br>2. 补丁中还包含了自测试代码，以验证 SError 的有效性，并确保在特定条件下能够正确处理 SError。<br><br>讨论的结论是，虽然对 E2H=0 的虚拟机无法进行完全解决，但补丁的应用将显著改善当前的实现质量。Marc Zyngier 表示将把这些补丁纳入到 6.18 版本中，并对补丁的方向表示支持。整体来看，讨论集中在如何提高 KVM 在处理 SError 时的可靠性和一致性上。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-18]</span> <span class="email-subject">[PATCH 0/2] KVM: arm64: nv: Fix SError injection at EL2</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-18]</span> <span class="email-subject">[PATCH 1/2] KVM: arm64: nv: Treat AMO as 1 when at EL2 and {E2H,TGE} = {1, 0}</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-18]</span> <span class="email-subject">[PATCH 2/2] [DO NOT SUBMIT] KVM: arm64: selftests: Test effective value of HCR_EL2.AMO</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-19]</span> <span class="email-subject">Re: [PATCH 0/2] KVM: arm64: nv: Fix SError injection at EL2</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-19]</span> <span class="email-subject">Re: [PATCH 0/2] KVM: arm64: nv: Fix SError injection at EL2</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH] KVM: arm64: Validate input range for pKVM mem transitions</h3>
                </div>

                <div class="thread-meta">
                    <span>5 messages</span>
                    <span>3 participants</span>
                    <span>Started: 2025-09-18</span>
                </div>

                <div class="ai-summary">
                    本邮件列表讨论的主题是关于在 pKVM 内存转换中验证输入范围的补丁。Vincent Donnefort 提出了一个补丁，目的是在大多数 pKVM 内存转换中增加对主机发出的范围的验证，以防止潜在的溢出问题。补丁中引入了一个新的函数 `range_is_valid()`，用于检查起始和结束地址的有效性，确保结束地址大于起始地址。<br><br>讨论中，Oliver Upton 对补丁进行了初步审查，提出了对某些边界情况的关注，例如负范围的合法性。Quentin Perret 则建议将溢出检查合并到 `range_is_valid()` 函数中，以增强安全性，并提出可以使用 `nr_pages` 作为参数来进一步验证大小，以提高未来的兼容性。<br><br>最终，讨论的结论是补丁的基本思路是正确的，但需要进一步改进以处理边界情况和溢出问题。Vincent 表示将根据反馈重新调整补丁。整体来看，邮件讨论强调了在内存管理中进行严格验证的重要性，以确保系统的稳定性和安全性。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-18]</span> <span class="email-subject">[PATCH] KVM: arm64: Validate input range for pKVM mem transitions</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Vincent Donnefort <span class="email-sender">&lt;vdonnefort@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-18]</span> <span class="email-subject">Re: [PATCH] KVM: arm64: Validate input range for pKVM mem transitions</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-19]</span> <span class="email-subject">Re: [PATCH] KVM: arm64: Validate input range for pKVM mem transitions</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Quentin Perret <span class="email-sender">&lt;qperret@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-19]</span> <span class="email-subject">Re: [PATCH] KVM: arm64: Validate input range for pKVM mem transitions</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Vincent Donnefort <span class="email-sender">&lt;vdonnefort@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-19]</span> <span class="email-subject">Re: [PATCH] KVM: arm64: Validate input range for pKVM mem transitions</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Vincent Donnefort <span class="email-sender">&lt;vdonnefort@google.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH] KVM: arm64: nv: Allow userspace to de-feature stage-2 TGRANs</h3>
                </div>

                <div class="thread-meta">
                    <span>4 messages</span>
                    <span>3 participants</span>
                    <span>Started: 2025-09-18</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主题是关于 KVM（Kernel-based Virtual Machine）在 arm64 架构下的一个补丁，主要内容是允许用户空间去禁用 stage-2 TGRAN（Translation Granule）特性。当前 KVM 将 stage-2 TGRAN 字段标记为可写，但对于启用 NV（Nested Virtualization）的虚拟机却限制了修改。补丁的目的是更新特定的清理逻辑，以允许用户在不允许使用传统值的情况下禁用特定的 TGRAN。<br><br>关键技术要点包括：<br>1. 补丁允许用户空间在 NV 启用的虚拟机中禁用 TGRAN，而不允许声称不可能的值。<br>2. 通过定义 `tgran2_val_allowed` 宏，确保用户提供的值与当前值相符，或者指定为不支持的状态。<br>3. 讨论中提到的代码改动涉及对 `set_id_aa64mmfr0_el1` 函数的修改，以实现上述功能。<br><br>主要讨论结论是补丁得到了参与者的认可，并已被 Marc Zyngier 应用到下一个版本中。Suzuki K Poulose 提出了对函数命名的微小建议，强调了其与 NV 相关的特性。整体来看，此补丁提升了 KVM 对于用户空间的灵活性，尤其是在处理虚拟化特性时。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-18]</span> <span class="email-subject">[PATCH] KVM: arm64: nv: Allow userspace to de-feature stage-2 TGRANs</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-18]</span> <span class="email-subject">Re: [PATCH] KVM: arm64: nv: Allow userspace to de-feature stage-2
 TGRANs</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-19]</span> <span class="email-subject">Re: [PATCH] KVM: arm64: nv: Allow userspace to de-feature stage-2
 TGRANs</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Suzuki K Poulose <span class="email-sender">&lt;suzuki.poulose@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-19]</span> <span class="email-subject">Re: [PATCH] KVM: arm64: nv: Allow userspace to de-feature stage-2 TGRANs</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH 0/2] KVM: arm64: nv: Fixes for handling debug, MDCR_EL2</h3>
                </div>

                <div class="thread-meta">
                    <span>4 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-09-17</span>
                </div>

                <div class="ai-summary">
                    该邮件线程主要讨论了针对 KVM（Kernel-based Virtual Machine）在 arm64 架构下的调试和 MDCR_EL2 处理的修复补丁。参与者 Oliver Upton 提出了两个主要问题：首先，当前的自托管调试在虚拟机内完全失效；其次，FEAT_NV2 特性导致 MDSCR_EL1 的访问被错误重定向到 VNCR 页面，影响了 EL2 上下文的执行。<br><br>为了解决这些问题，Upton 提出了两个补丁：一是当处于 HYP（Hypervisor）上下文时，捕获调试寄存器的访问；二是确保在嵌套上下文中应用来宾的 MDCR（Monitor Debug Control Register）陷阱配置。这些补丁通过在内存中直接更新 MDCR_EL2 的表示，确保来宾的陷阱配置能够生效。<br><br>讨论的关键要点包括：修复了嵌套虚拟化中的寄存器重定向问题，确保了调试寄存器的正确处理以及来宾的 MDCR 陷阱的应用。最终，Marc Zyngier 确认了补丁的应用，表示感谢。<br><br>目前待解决的问题包括如何优化性能，尤其是在未来可能引入的精确陷阱支持方面。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-17]</span> <span class="email-subject">[PATCH 0/2] KVM: arm64: nv: Fixes for handling debug, MDCR_EL2</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-17]</span> <span class="email-subject">[PATCH 1/2] KVM: arm64: nv: Trap debug registers when in hyp context</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-17]</span> <span class="email-subject">[PATCH 2/2] KVM: arm64: nv: Apply guest's MDCR traps in nested context</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-18]</span> <span class="email-subject">Re: [PATCH 0/2] KVM: arm64: nv: Fixes for handling debug, MDCR_EL2</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH] KVM: arm64: Fix kvm_vcpu_{set,is}_be() to deal with EL2 state</h3>
                </div>

                <div class="thread-meta">
                    <span>4 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-09-16</span>
                </div>

                <div class="ai-summary">
                    本邮件线程讨论的主要技术问题是针对 KVM（Kernel-based Virtual Machine）在 arm64 架构下处理大端（BE）状态的补丁。Marc Zyngier 提出了一个补丁，修复了 `kvm_vcpu_set_be()` 和 `kvm_vcpu_is_be()` 函数，使其能够正确处理 EL2 状态下的 SCTLR（系统控制寄存器），而不仅仅依赖于 EL1 的 SCTLR。<br><br>关键技术要点包括：<br>1. 现有实现仅考虑了 SCTLR_EL1，而未考虑 EL2 状态，导致在 PSCI（电源状态协调接口）中评估和设置字节序时可能出现问题。<br>2. 补丁通过引入对 SCTLR_EL2 的处理，确保在不同的虚拟化上下文中正确设置和读取字节序。<br>3. 讨论中提到，虽然 SCTLR_EL2 的某些位依赖于 E2H（EL2 到 EL1 的转发），但目前的补丁已解决了基本的字节序问题。<br><br>讨论的结论是，补丁已被接受并应用于下一个版本，但仍需关注 SCTLR_EL2 中其他复杂位的处理，这将是未来需要解决的问题。参与者 Oliver Upton 对补丁进行了审查并表示支持。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-16]</span> <span class="email-subject">[PATCH] KVM: arm64: Fix kvm_vcpu_{set,is}_be() to deal with EL2 state</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-16]</span> <span class="email-subject">Re: [PATCH] KVM: arm64: Fix kvm_vcpu_{set,is}_be() to deal with EL2
 state</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-17]</span> <span class="email-subject">Re: [PATCH] KVM: arm64: Fix kvm_vcpu_{set,is}_be() to deal with EL2 state</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-17]</span> <span class="email-subject">Re: [PATCH] KVM: arm64: Fix kvm_vcpu_{set,is}_be() to deal with EL2 state</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v4 04/28] iommu/io-pgtable-arm: Move selftests to a
 separate file</h3>
                </div>

                <div class="thread-meta">
                    <span>4 messages</span>
                    <span>3 participants</span>
                    <span>Started: 2025-09-15</span>
                </div>

                <div class="ai-summary">
                    本邮件线程主要讨论了对 Linux 内核中 IOMMU（输入输出内存管理单元）相关代码的补丁，特别是将自测试（selftests）代码移动到一个单独的文件中。参与者们一致认为将自测试代码重命名为“io-pgtable-arm-selftests.c”是一个合理的建议，以提高代码的可读性和组织性。<br><br>关键技术要点包括： <br>1. 自测试代码的独立性，便于管理和维护。<br>2. 建议将自测试代码包装成 KUnit 测试框架，以便于集成和测试。<br>3. 参与者们确认了补丁的可行性，并表示在构建过程中成功应用了该补丁。<br><br>讨论的结论是，参与者们支持将自测试代码移至新文件，并希望在后续补丁中进一步完善相关代码。Mostafa Saleh 表示将会在下一个补丁中添加更多内核代码，并计划在周末之前完成相关修改。整体来看，讨论氛围积极，大家对补丁的方向和实现方案达成了一致。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-15]</span> <span class="email-subject">Re: [PATCH v4 04/28] iommu/io-pgtable-arm: Move selftests to a
 separate file</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Pranjal Shrivastava <span class="email-sender">&lt;praan@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-15]</span> <span class="email-subject">Re: [PATCH v4 04/28] iommu/io-pgtable-arm: Move selftests to a
 separate file</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Jason Gunthorpe <span class="email-sender">&lt;jgg@ziepe.ca&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-16]</span> <span class="email-subject">Re: [PATCH v4 04/28] iommu/io-pgtable-arm: Move selftests to a
 separate file</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mostafa Saleh <span class="email-sender">&lt;smostafa@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-16]</span> <span class="email-subject">Re: [PATCH v4 04/28] iommu/io-pgtable-arm: Move selftests to a
 separate file</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mostafa Saleh <span class="email-sender">&lt;smostafa@google.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH 0/2] KVM: arm64: selftests: Cover ID_AA64ISAR3_EL1 in
 set_id_regs</h3>
                </div>

                <div class="thread-meta">
                    <span>3 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-09-20</span>
                </div>

                <div class="ai-summary">
                    本邮件线程主要讨论了针对 KVM（内核虚拟机）在 arm64 架构下的自测试（selftests）补丁，特别是如何在 `set_id_regs` 测试中增加对 `ID_AA64ISAR3_EL1` 寄存器的覆盖。参与者 Mark Brown 提出了两个补丁，旨在改进测试的可维护性并确保对新寄存器的支持。<br><br>关键技术要点包括：<br>1. 增加了对 `ID_AA64ISAR3_EL1` 寄存器的测试覆盖，该寄存器包含多个可写的位域，之前的测试未涵盖此寄存器。<br>2. 优化了测试代码，减少了重复的寄存器列表，改为在运行时动态计算测试计数，简化了代码的维护。<br><br>讨论的结论是，补丁将有效提高测试的准确性和可维护性，但仍需关注测试覆盖的完整性，确保所有相关寄存器都能得到充分测试。待解决的问题包括如何进一步优化测试框架，以便在添加新寄存器时减少手动干预。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-20]</span> <span class="email-subject">[PATCH 0/2] KVM: arm64: selftests: Cover ID_AA64ISAR3_EL1 in
 set_id_regs</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-20]</span> <span class="email-subject">[PATCH 1/2] KVM: arm64: selftests: Remove a duplicate register
 listing in set_id_regs</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-20]</span> <span class="email-subject">[PATCH 2/2] KVM: arm64: selftests: Cover ID_AA64ISAR3_EL1 in
 set_id_regs</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v6 01/11] filemap: Pass address_space mapping to
 ->free_folio()</h3>
                </div>

                <div class="thread-meta">
                    <span>3 messages</span>
                    <span>3 participants</span>
                    <span>Started: 2025-09-15</span>
                </div>

                <div class="ai-summary">
                    本邮件线程主要讨论了一个关于 Linux 内核中 `free_folio()` 函数的补丁提案，特别是如何在该函数中安全地传递 `address_space` 结构体的问题。参与者们对补丁的意图和实现进行了深入分析。<br><br>关键技术要点包括：Hugh Dickins 指出，`free_folio()` 自 2.6.37 版本以来，设计上并不接受 `address_space *mapping` 参数，因为在调用时该结构体可能已经被释放。David Hildenbrand 进一步分析了调用 `free_folio()` 的几个函数，确认在某些情况下确实存在竞争条件，可能导致不安全的访问。Hugh 提出了使用 `rcu_read_lock()` 或其他机制来避免这种竞争的建议。<br><br>讨论的结论是，虽然补丁的初衷是合理的，但由于潜在的安全隐患，参与者们认为需要重新考虑实现方式。Patrick Roy 最终表示可以通过在 `folio` 中直接存储状态来避免使用该补丁，并计划在下一次迭代中进行调整。整体来看，邮件讨论强调了内核开发中对安全性和稳定性的关注。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-15]</span> <span class="email-subject">Re: [PATCH v6 01/11] filemap: Pass address_space mapping to
 ->free_folio()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Hugh Dickins <span class="email-sender">&lt;hughd@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-17]</span> <span class="email-subject">Re: [PATCH v6 01/11] filemap: Pass address_space mapping to
 ->free_folio()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: David Hildenbrand <span class="email-sender">&lt;david@redhat.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-19]</span> <span class="email-subject">Re: [PATCH v6 01/11] filemap: Pass address_space mapping to
 ->free_folio()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Roy, Patrick <span class="email-sender">&lt;roypat@amazon.co.uk&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH] PMCR_EL0.N is RAZ/WI. At least a build failes in Ubuntu
 22.04 LTS. Remove the set function.</h3>
                </div>

                <div class="thread-meta">
                    <span>3 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-09-16</span>
                </div>

                <div class="ai-summary">
                    在这次邮件讨论中，主要关注的是关于 PMCR_EL0.N 寄存器的处理，该寄存器在 Ubuntu 22.04 LTS 中导致了构建失败。参与者 Itaru Kitayama 提出了一个补丁，建议移除与该寄存器相关的设置函数，因为该位字段在写入时被忽略（RAZ/WI）。然而，Marc Zyngier 指出，尽管该位字段在用户空间写入时并不被忽略，但为了与其他寄存器的处理保持一致，仍然需要在 `vpmu_counter_access.c` 文件中保留检查写操作的逻辑。<br><br>讨论中提到的关键技术要点包括：<br>1. PMCR_EL0.N 的位字段在用户空间写入时的行为。<br>2. 构建错误的具体信息，涉及到编译器的版本和相关的代码行。<br>3. 参与者对 Ubuntu 和编译器版本的讨论，以便找到解决方案。<br><br>最终的讨论结论是，尽管存在构建错误，但在处理 PMCR_EL0.N 时需要保持一致性，仍需进一步讨论如何解决构建问题并确认补丁的有效性。当前尚未达成共识，待解决的问题包括如何处理该寄存器的写入行为和构建错误的具体修复方案。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-16]</span> <span class="email-subject">Re: [PATCH] PMCR_EL0.N is RAZ/WI. At least a build failes in Ubuntu
 22.04 LTS. Remove the set function.</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Itaru Kitayama <span class="email-sender">&lt;itaru.kitayama@linux.dev&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-17]</span> <span class="email-subject">Re: [PATCH] PMCR_EL0.N is RAZ/WI. At least a build failes in Ubuntu 22.04 LTS. Remove the set function.</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-18]</span> <span class="email-subject">Re: [PATCH] PMCR_EL0.N is RAZ/WI. At least a build failes in Ubuntu
 22.04 LTS. Remove the set function.</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Itaru Kitayama <span class="email-sender">&lt;itaru.kitayama@linux.dev&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v1] KVM: arm64: Fix page leak in user_mem_abort()</h3>
                </div>

                <div class="thread-meta">
                    <span>3 messages</span>
                    <span>3 participants</span>
                    <span>Started: 2025-09-17</span>
                </div>

                <div class="ai-summary">
                    本邮件线程主要讨论了针对 KVM（Kernel-based Virtual Machine）在 arm64 架构下的一个补丁，旨在修复 `user_mem_abort()` 函数中的页面泄漏问题。Fuad Tabba 提出了该补丁，指出在函数执行早期通过 `__kvm_faultin_pfn()` 获取页面引用后，后续对阶段 1 和阶段 2 映射属性不匹配的检查直接返回错误码，导致未释放相应的页面。为了解决这个问题，补丁修改了代码逻辑，确保在返回错误之前释放未使用的页面。<br><br>关键技术要点包括：<br>1. 补丁通过存储错误码并在返回之前释放未使用的页面，修复了页面泄漏问题。<br>2. 该补丁基于 Linux 6.17-rc6 版本，涉及 `arch/arm64/kvm/mmu.c` 文件的修改。<br><br>讨论的结论是，Oliver Upton 对补丁进行了审查并表示认可，Marc Zyngier 确认已将补丁应用到下一个版本中。整体来看，此次讨论有效解决了 KVM 在特定条件下的页面管理问题，提升了系统的稳定性。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-17]</span> <span class="email-subject">[PATCH v1] KVM: arm64: Fix page leak in user_mem_abort()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Fuad Tabba <span class="email-sender">&lt;tabba@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-17]</span> <span class="email-subject">Re: [PATCH v1] KVM: arm64: Fix page leak in user_mem_abort()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-17]</span> <span class="email-subject">Re: [PATCH v1] KVM: arm64: Fix page leak in user_mem_abort()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v4 01/28] KVM: arm64: Add a new function to donate memory
 with prot</h3>
                </div>

                <div class="thread-meta">
                    <span>3 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-09-14</span>
                </div>

                <div class="ai-summary">
                    在这组邮件讨论中，主要关注的是针对 KVM（Kernel-based Virtual Machine）在 arm64 架构下的内存捐赠功能的补丁。具体来说，讨论的核心是如何改进当前的权限检查机制，以避免潜在的安全隐患。<br><br>关键技术要点包括：<br>1. 当前的 `WARN_ON(prot & KVM_PGTABLE_PROT_X);` 检查可能会允许“只读”或“只写”的内存捐赠在没有警告的情况下通过，这可能会导致不安全的内存访问。<br>2. 参与者 Mostafa Saleh 表示，虽然当前的补丁系列并未更改权限设置，但他同意将检查条件改得更加严格，以增强安全性。<br><br>讨论的结论是，Mostafa 将根据 Will Deacon 的建议更新检查机制，以确保只有合适的内存捐赠能够被接受。如果未来需要放宽限制，可以再进行调整。整体上，讨论强调了在虚拟化环境中对内存权限管理的重要性和必要性。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-14]</span> <span class="email-subject">Re: [PATCH v4 01/28] KVM: arm64: Add a new function to donate memory
 with prot</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Pranjal Shrivastava <span class="email-sender">&lt;praan@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-16]</span> <span class="email-subject">Re: [PATCH v4 01/28] KVM: arm64: Add a new function to donate memory
 with prot</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mostafa Saleh <span class="email-sender">&lt;smostafa@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-16]</span> <span class="email-subject">Re: [PATCH v4 01/28] KVM: arm64: Add a new function to donate memory
 with prot</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mostafa Saleh <span class="email-sender">&lt;smostafa@google.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH] KVM: arm64: Update stale comment for sanitise_mte_tags()</h3>
                </div>

                <div class="thread-meta">
                    <span>3 messages</span>
                    <span>3 participants</span>
                    <span>Started: 2025-09-15</span>
                </div>

                <div class="ai-summary">
                    该邮件线程讨论了针对 KVM（内核虚拟机）在 arm64 架构下的一个补丁，主要内容是更新 `sanitise_mte_tags()` 函数的注释。参与者 Alexandru Elisei 指出，之前的注释与当前代码逻辑不符，因此需要进行修改。具体来说，补丁中提到的两个提交（c911f0d46879 和 d77e59a8fccd）分别允许在启用 MTE（内存标签扩展）的虚拟机中使用共享映射，并消除了多个线程在初始化标签时可能导致的竞争条件。<br><br>关键技术要点包括：<br>1. 移除与当前实现不符的旧注释，确保文档与代码一致。<br>2. 强调在调用 `sanitise_mte_tags()` 时必须持有 `kvm->mmu_lock`，以确保内存在标签清零期间保持映射状态。<br><br>讨论的结论是，补丁得到了 Steven Price 的审核并被 Marc Zyngier 应用，表明该修改已被接受并将纳入后续版本中。整体来看，此次讨论有效地提升了代码的可读性和准确性。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-15]</span> <span class="email-subject">[PATCH] KVM: arm64: Update stale comment for sanitise_mte_tags()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Alexandru Elisei <span class="email-sender">&lt;alexandru.elisei@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-15]</span> <span class="email-subject">Re: [PATCH] KVM: arm64: Update stale comment for sanitise_mte_tags()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Steven Price <span class="email-sender">&lt;steven.price@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-15]</span> <span class="email-subject">Re: [PATCH] KVM: arm64: Update stale comment for sanitise_mte_tags()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH RESEND v7 3/6] arm64: Kconfig: add LSUI Kconfig</h3>
                </div>

                <div class="thread-meta">
                    <span>3 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-09-15</span>
                </div>

                <div class="ai-summary">
                    在此次邮件讨论中，主要围绕着一项针对 ARM64 架构的 Kconfig 补丁进行交流，具体是关于添加 LSUI Kconfig 的内容。参与者 Yeoreum Yun 提出了补丁并表示会根据反馈进行修改，但在此之前，Will Deacon 提醒他不要重新提交补丁，直到关于 CAS（Compare And Swap）讨论的结论达成。<br><br>关键技术要点包括：<br>1. LSUI Kconfig 的添加旨在增强 ARM64 架构的配置选项。<br>2. 当前讨论中存在对 CAS 相关问题的关注，可能影响补丁的最终提交。<br><br>讨论的主要结论是，Yeoreum Yun 将等待 Will Deacon 对 CAS 讨论的进一步评论，之后再进行补丁的修改和重新提交。这表明在补丁提交前，团队需要先解决 CAS 相关的技术问题，以确保补丁的有效性和兼容性。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-15]</span> <span class="email-subject">Re: [PATCH RESEND v7 3/6] arm64: Kconfig: add LSUI Kconfig</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Yeoreum Yun <span class="email-sender">&lt;yeoreum.yun@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-15]</span> <span class="email-subject">Re: [PATCH RESEND v7 3/6] arm64: Kconfig: add LSUI Kconfig</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Will Deacon <span class="email-sender">&lt;will@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-15]</span> <span class="email-subject">Re: [PATCH RESEND v7 3/6] arm64: Kconfig: add LSUI Kconfig</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Yeoreum Yun <span class="email-sender">&lt;yeoreum.yun@arm.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v2] KVM: arm64: Check range args for pKVM mem transitions</h3>
                </div>

                <div class="thread-meta">
                    <span>2 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-09-19</span>
                </div>

                <div class="ai-summary">
                    本邮件线程主要讨论了针对 pKVM 内存转换的补丁，旨在增强对主机发起的内存范围参数的验证。当前实现中，缺乏对这些范围的检查，可能导致结束边界溢出，从而绕过后续的检查。为了解决这一问题，补丁引入了 `check_range_args()` 函数，对每个公共函数进行范围检查。<br><br>关键技术要点包括：<br>1. 新增的 `check_range_args()` 函数用于检查起始地址和页数的乘法溢出，以及确保起始地址小于结束地址。<br>2. 在多个 pKVM 函数中调用该检查，以防止无效的内存范围导致潜在的错误。<br><br>讨论的结论是，补丁有效地填补了现有的安全漏洞，但也提出了一个待解决的问题：需要确保范围检查的结束边界是包含的，以避免在处理 64 位地址时出现误判。Marc Zyngier 提出了这一点，强调了对虚拟地址的范围检查的重要性。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-19]</span> <span class="email-subject">[PATCH v2] KVM: arm64: Check range args for pKVM mem transitions</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Vincent Donnefort <span class="email-sender">&lt;vdonnefort@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-21]</span> <span class="email-subject">Re: [PATCH v2] KVM: arm64: Check range args for pKVM mem transitions</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v8 06/29] KVM: arm64: Introduce non-UNDEF FGT control</h3>
                </div>

                <div class="thread-meta">
                    <span>2 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-09-19</span>
                </div>

                <div class="ai-summary">
                    本邮件线程主要讨论了针对 KVM（Kernel-based Virtual Machine）在 arm64 架构下引入非 UNDEF FGT（Fault Generation Traps）控制的补丁内容。参与者 Marc Zyngier 和 Mark Brown 针对 FGT 的处理方式进行了深入的技术探讨。<br><br>关键技术要点包括：现有的控制寄存器（如 HCR_EL2、HCRX_EL2 和 MDCR_EL2）是按每个 vCPU 管理的，而将 FGT 设定为按每个虚拟机（VM）管理并不合适，因为不同 vCPU 的行为可能并不一致。此外，FGT 的使用需要更灵活的处理方式，特别是在仿真场景中，某些情况下并不需要在所有 vCPU 上都捕获特定的操作。<br><br>讨论的结论是，FGT 的处理应当改为按每个 vCPU 进行管理，并且应当将读写寄存器的处理分开，以避免混淆。Marc Zyngier 认为这种调整将使得 FGT 的行为更加清晰和一致，尤其是在处理特定寄存器时。<br><br>待解决的问题主要是如何有效地实现这一改动，并确保与现有的 SME（Secure Memory Encryption）要求兼容。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-19]</span> <span class="email-subject">Re: [PATCH v8 06/29] KVM: arm64: Introduce non-UNDEF FGT control</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-19]</span> <span class="email-subject">Re: [PATCH v8 06/29] KVM: arm64: Introduce non-UNDEF FGT control</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v8 07/12] KVM: arm64: Add trap configs for PMSDSFR_EL1</h3>
                </div>

                <div class="thread-meta">
                    <span>2 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-09-19</span>
                </div>

                <div class="ai-summary">
                    本邮件线程讨论的主要技术问题是关于在 KVM（Kernel-based Virtual Machine）中为 ARM64 架构添加 PMSDSFR_EL1 的陷阱配置。邮件中提到，尽管该补丁与当前讨论系列无关，但 KVM 已经能够识别 FEAT_SPE_FSD 特性，以确保相关寄存器处于未定义状态（UNDEF）。<br><br>关键技术要点包括：<br>1. PMSDSFR_EL1 是 ARM64 架构中的一个寄存器，涉及到特定的陷阱配置。<br>2. KVM 对于 FEAT_SPE_FSD 的支持是为了确保在虚拟化环境中能够正确处理相关的寄存器状态。<br><br>讨论的结论是，Marc Zyngier 表示将该补丁直接合并到 KVM 树中，并确认已成功应用该补丁。这表明该补丁的实现得到了认可，且没有进一步的争议或待解决的问题。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-19]</span> <span class="email-subject">Re: [PATCH v8 07/12] KVM: arm64: Add trap configs for PMSDSFR_EL1</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-19]</span> <span class="email-subject">Re: (subset) [PATCH v8 07/12] KVM: arm64: Add trap configs for PMSDSFR_EL1</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v8 00/12] perf: arm_spe: Armv8.8 SPE features</h3>
                </div>

                <div class="thread-meta">
                    <span>2 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-09-18</span>
                </div>

                <div class="ai-summary">
                    本邮件列表讨论的主要内容是关于针对 Armv8.8 SPE（Sampling Processor Event）特性的补丁集，包含12个补丁的更新。参与者主要讨论了补丁的应用情况和后续的维护需求。<br><br>关键技术要点包括：<br>1. 新增的 PMSFCR_EL1 字段和 PMSDSFR_EL1 寄存器的支持（补丁 1）。<br>2. 对 FEAT_SPEv1p4 过滤器的支持（补丁 2）。<br>3. 事件过滤器的暴露（补丁 3）。<br>4. 对 FEAT_SPE_EFT 扩展过滤的支持（补丁 4）。<br>5. 引入宏来检查 SPE 版本（补丁 5）。<br>6. 启用 EL2 对 SPE_FEAT_FDS 的要求（补丁 6）。<br><br>讨论的结论是，补丁 1 到 6 已经被应用，但补丁 7 和 8 仍需维护者的确认才能继续推进。参与者将继续跟进 Arm64 虚拟化和性能维护者，以确保这些补丁在合并窗口前得到审查和处理。当前的待解决问题是补丁 7 和 8 的审查进度。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-18]</span> <span class="email-subject">Re: [PATCH v8 00/12] perf: arm_spe: Armv8.8 SPE features</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Will Deacon <span class="email-sender">&lt;will@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-19]</span> <span class="email-subject">Re: [PATCH v8 00/12] perf: arm_spe: Armv8.8 SPE features</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Leo Yan <span class="email-sender">&lt;leo.yan@arm.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH V4 2/2] arm64/sysreg: Replace TCR_EL1 field macros</h3>
                </div>

                <div class="thread-meta">
                    <span>2 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-09-18</span>
                </div>

                <div class="ai-summary">
                    本邮件线程主要讨论了对 ARM64 架构中 TCR_EL1 字段宏的替换补丁。参与者 Anshuman Khandual 提出了补丁，但 Will Deacon 指出不应将工具补丁与架构补丁混合，建议将 KVM 相关的更改分开处理。<br><br>关键技术要点包括：<br>1. TCR_EL1 字段宏的更新是补丁的核心内容，涉及到 ARM64 架构的系统寄存器。<br>2. Anshuman 提到的补丁将包括对工具和内核的更新，以及 KVM 特定的宏移动。<br><br>讨论的主要结论是，Anshuman 同意将这些更改拆分为几个部分，以便更清晰地管理和审查，包括 ARM64 工具的 sysreg 更新、工具头文件更新、内核更新以及 KVM 相关的更新。这种拆分将有助于提高补丁的可读性和可维护性。待解决的问题是如何有效地组织和实施这些分拆后的补丁。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-18]</span> <span class="email-subject">Re: [PATCH V4 2/2] arm64/sysreg: Replace TCR_EL1 field macros</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Will Deacon <span class="email-sender">&lt;will@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-19]</span> <span class="email-subject">Re: [PATCH V4 2/2] arm64/sysreg: Replace TCR_EL1 field macros</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Anshuman Khandual <span class="email-sender">&lt;anshuman.khandual@arm.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v6 05/11] KVM: guest_memfd: Add flag to remove from
 direct map</h3>
                </div>

                <div class="thread-meta">
                    <span>2 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-09-18</span>
                </div>

                <div class="ai-summary">
                    在此次邮件讨论中，主要围绕 KVM 的补丁内容展开，具体是关于在直接映射中添加一个标志以移除 guest_memfd。参与者 Will Deacon 和 Patrick Roy 就此补丁的性能和安全性进行了深入探讨。<br><br>关键技术要点包括：Will 提出如果不在解除直接映射后进行 TLB（翻译后备页表）失效处理，可能会影响安全性，因为映射可能会持续存在，导致安全隐患。他建议在 arm64 架构中可以选择性地启用 TLB 失效，以增强安全性。Patrick 则表示，尽管 TLB 失效会影响性能，但他也承认这比当前状态要好。他提到，性能问题主要源于所有 CPU 需要确认失效，这可能导致延迟。他建议可以考虑一种“火忘”式的失效机制，避免等待确认。<br><br>讨论的结论是，双方对如何平衡性能与安全性达成了一定共识，但仍需进一步探讨是否采用架构选择或用户空间的选择标志来实现这一目标。待解决的问题包括如何在不显著影响性能的情况下，确保安全性得到保障。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-18]</span> <span class="email-subject">Re: [PATCH v6 05/11] KVM: guest_memfd: Add flag to remove from
 direct map</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Will Deacon <span class="email-sender">&lt;will@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-19]</span> <span class="email-subject">Re: [PATCH v6 05/11] KVM: guest_memfd: Add flag to remove from direct
 map</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Roy, Patrick <span class="email-sender">&lt;roypat@amazon.co.uk&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v6 00/12] perf: arm_spe: Armv8.8 SPE features</h3>
                </div>

                <div class="thread-meta">
                    <span>2 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-09-17</span>
                </div>

                <div class="ai-summary">
                    该邮件线程主要讨论了关于 Armv8.8 SPE（Sampling Processor Extensions）特性的补丁集，特别是与 Linux 内核性能工具（perf）相关的实现。参与者 Leo Yan 提到，James 最近提交的补丁系列 v8 已经可以在最新的主线内核上顺利应用，期待内核维护者的审核以便推进合并。<br><br>关键技术要点包括：<br>1. Armv8.8 SPE 特性对性能监控的潜在影响。<br>2. 补丁集的版本更新情况，强调了 v8 版本的适用性。<br><br>讨论的主要结论是，当前的进展依赖于内核维护者的审查，只有在获得审核后，才能继续推进合并工作。待解决的问题是如何加快审核流程，以便尽快将这些新特性整合到主线内核中。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-17]</span> <span class="email-subject">Re: [PATCH v6 00/12] perf: arm_spe: Armv8.8 SPE features</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Arnaldo Carvalho de Melo <span class="email-sender">&lt;acme@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-18]</span> <span class="email-subject">Re: [PATCH v6 00/12] perf: arm_spe: Armv8.8 SPE features</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Leo Yan <span class="email-sender">&lt;leo.yan@arm.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH] KVM: arm64: Don't access ICC_SRE_EL2 if GICv3 doesn't support v2 compatibility</h3>
                </div>

                <div class="thread-meta">
                    <span>2 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-09-17</span>
                </div>

                <div class="ai-summary">
                    本邮件线程讨论了一个关于 KVM（内核虚拟机）在 ARM64 架构下的补丁，主要集中在对 ICC_SRE_EL2 寄存器的访问问题。当前实现中，在 VHE（虚拟化高特权模式）和 nVHE（非虚拟化高特权模式）下，每次加载和卸载时都会访问 ICC_SRE_EL2，这在 NV（非虚拟化）环境中造成了性能开销，因为该寄存器总是会触发异常。Marc Zyngier 提出，考虑到现代实现已不再支持 v2 兼容性，因此可以通过引入一个静态键来替代对 GICv5 的 v2 兼容性检查，从而减少不必要的开销。<br><br>关键技术要点包括：<br>1. 引入静态键 `vgic_v3_has_v2_compat` 来判断 GICv3 是否支持 v2 兼容性。<br>2. 修改对 ICC_SRE_EL2 的访问逻辑，仅在主机实现 GICv2 接口时才进行相应操作。<br><br>讨论结论是，补丁已被 Oliver Upton 审核通过，标志着这一改进的认可。待解决的问题主要是确保在未来 GICv5 规范放宽后，相关的条件检查可以被移除。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-17]</span> <span class="email-subject">[PATCH] KVM: arm64: Don't access ICC_SRE_EL2 if GICv3 doesn't support v2 compatibility</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-17]</span> <span class="email-subject">Re: [PATCH] KVM: arm64: Don't access ICC_SRE_EL2 if GICv3 doesn't
 support v2 compatibility</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v3 3/3] kselftest/arm64: Add lsfe to the hwcaps test</h3>
                </div>

                <div class="thread-meta">
                    <span>2 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-09-16</span>
                </div>

                <div class="ai-summary">
                    本邮件线程主要讨论了一个针对 ARM64 架构的 kselftest 补丁，具体是将 lsfe（Load Store Forwarding Exception）功能添加到 hwcaps 测试中。参与者 Will Deacon 和 Mark Brown 针对补丁中的实现细节进行了技术探讨。<br><br>关键技术要点包括：<br>1. Will 对补丁中可能导致 H0 寄存器被破坏的情况表示担忧，并建议使用 STFADD 指令来避免这一问题。<br>2. Mark 对于补丁中使用的 "cc" clobber 的必要性提出了疑问，认为在实际应用中，编译器不太可能使用浮点指令，因此可以简化约束条件。<br><br>讨论的结论是，虽然补丁的实现方式在理论上是安全的，但在约束条件的处理上存在过于复杂的情况，可能导致不必要的开销。参与者们认为可以通过更简洁的方式来实现相同的功能，未来需要进一步优化补丁的实现。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-16]</span> <span class="email-subject">Re: [PATCH v3 3/3] kselftest/arm64: Add lsfe to the hwcaps test</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Will Deacon <span class="email-sender">&lt;will@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-16]</span> <span class="email-subject">Re: [PATCH v3 3/3] kselftest/arm64: Add lsfe to the hwcaps test</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v4 03/28] KVM: arm64: pkvm: Add pkvm_time_get()</h3>
                </div>

                <div class="thread-meta">
                    <span>2 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-09-15</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主题是针对 KVM（Kernel-based Virtual Machine）在 ARM64 架构下的一个补丁，具体是添加了 `pkvm_time_get()` 函数。主要参与者为 Pranjal Shrivastava 和 Mostafa Saleh。<br><br>讨论的核心技术问题是关于 CNTFRQ_EL0 寄存器的设置，该寄存器用于配置系统计时器的频率。Pranjal 提出，基于 TF-A（Trusted Firmware-A）的文档，CNTFRQ_EL0 的值必须由平台提供并在启动时设置。他引用了相关文档，强调了这一要求的重要性，并指出即使不使用 TF-A，AArch64 Linux 启动协议也要求 CNTFRQ 必须被正确编程。<br><br>Mostafa 则表示，虽然可以将 "arch_timer_rate" 提供给虚拟机监控器，但他倾向于在缺乏硬件测试条件的情况下，选择在出现问题时直接失败，以避免增加复杂性。<br><br>讨论的结论是，CNTFRQ_EL0 的设置是一个必须遵循的要求，且在实现过程中需要考虑到硬件测试的限制，确保在保护模式下的正确性。待解决的问题是如何在不同平台和条件下有效地管理这一设置。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-15]</span> <span class="email-subject">Re: [PATCH v4 03/28] KVM: arm64: pkvm: Add pkvm_time_get()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Pranjal Shrivastava <span class="email-sender">&lt;praan@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-16]</span> <span class="email-subject">Re: [PATCH v4 03/28] KVM: arm64: pkvm: Add pkvm_time_get()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mostafa Saleh <span class="email-sender">&lt;smostafa@google.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v4 02/28] KVM: arm64: Donate MMIO to the hypervisor</h3>
                </div>

                <div class="thread-meta">
                    <span>2 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-09-14</span>
                </div>

                <div class="ai-summary">
                    本邮件线程讨论了一个关于 KVM（Kernel-based Virtual Machine）在 arm64 架构下的补丁，主要内容是“捐赠 MMIO（内存映射输入输出）给虚拟机监控器（hypervisor）”。参与者 Pranjal Shrivastava 和 Mostafa Saleh 针对补丁中的两个检查进行了深入探讨。<br><br>关键技术要点包括：第一个检查确认捐赠的页面是否仍由主机内核拥有，确保主机可以合法捐赠该页面；第二个检查则是确认该页面在虚拟机监控器的空间中没有被映射。Pranjal 提出对第二个检查的疑问，想了解其是否仅用于捕捉共享页面的错误捐赠，或是有其他目的。<br><br>Mostafa 回应称，第一个检查是为了确保主机拥有页面，而第二个检查主要是一个调试检查，类似于其他内存捐赠的机制。他表示目前没有发现第二个检查的实际应用案例，认为其主要作用是防止潜在错误。<br><br>讨论的结论是，虽然两个检查的目的明确，但第二个检查的必要性仍需进一步验证，以确保其在实际应用中的有效性。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-14]</span> <span class="email-subject">Re: [PATCH v4 02/28] KVM: arm64: Donate MMIO to the hypervisor</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Pranjal Shrivastava <span class="email-sender">&lt;praan@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-16]</span> <span class="email-subject">Re: [PATCH v4 02/28] KVM: arm64: Donate MMIO to the hypervisor</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mostafa Saleh <span class="email-sender">&lt;smostafa@google.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH] KVM: arm64: Fix debug checking for np-guests using huge
 mappings</h3>
                </div>

                <div class="thread-meta">
                    <span>2 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-09-15</span>
                </div>

                <div class="ai-summary">
                    本邮件列表讨论的主题是关于对 KVM（内核虚拟机）在 arm64 架构下的一个补丁，主要针对使用大页映射的非物理访客（np-guests）进行调试检查的修复。参与者包括 Ben Horgan 和 Marc Zyngier。<br><br>在讨论中，Ben Horgan 提到他愿意根据需要更新补丁的 Fixes 标签，并表示选择了特定的提交 ID（db14091d8f75），因为这是该功能开始产生实际影响的地方。Marc Zyngier 随后确认不需要重新发送补丁，因为他已经在本地进行了调整。<br><br>讨论的关键技术要点包括对 KVM 的调试检查机制的改进，特别是在处理大页映射时的行为修复。参与者之间的互动显示出对补丁内容的认可和必要性的共识。<br><br>最终的讨论结论是，补丁已经被调整并不需要再次发送，表明修复工作正在顺利进行，且没有明显的待解决问题。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-15]</span> <span class="email-subject">Re: [PATCH] KVM: arm64: Fix debug checking for np-guests using huge
 mappings</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Ben Horgan <span class="email-sender">&lt;ben.horgan@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-15]</span> <span class="email-subject">Re: [PATCH] KVM: arm64: Fix debug checking for np-guests using huge mappings</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v2 0/4] Add workaround for HIP10/HIP10C erratum 162200802</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-09-19</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主要技术问题是针对HIP10/HIP10C硬件缺陷（erratum 162200802）提出的补丁方案。参与者Zhou Wang提出了一个补丁集（PATCH v2 0/4），旨在解决该硬件缺陷带来的问题。<br><br>关键技术要点包括：<br>1. 在处理该硬件缺陷时，建议首先在GIC（通用中断控制器）层面制定解决策略，而不是直接将相关内容暴露给用户空间。<br>2. 这一策略的目的是确保内核中能够有效地处理该缺陷，从而避免潜在的用户空间问题。<br><br>讨论的结论是，参与者Marc Zyngier支持Zhou Wang的观点，强调在内核中找到合适的解决方案是优先事项，待达成一致后再考虑如何在用户空间实现相关功能。目前尚未讨论具体的补丁实现细节，后续需要进一步的技术交流和方案确认。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-19]</span> <span class="email-subject">Re: [PATCH v2 0/4] Add workaround for HIP10/HIP10C erratum 162200802</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH 00/11] KVM: arm64: nv: Align feature limitations with current state of support</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-09-19</span>
                </div>

                <div class="ai-summary">
                    在这封邮件中，讨论的主要技术问题是针对 KVM（Kernel-based Virtual Machine）在 arm64 架构下的特性限制进行调整，以与当前的支持状态保持一致。邮件中包含了11个补丁，主要内容涉及对不同特性（如 FEAT_DF2、FEAT_RASv1p1、FEAT_ECBHB 等）的暴露和配置。<br><br>关键技术要点包括：<br>1. 将特性掩码转换为拒绝列表，以更准确地反映支持情况。<br>2. 针对 NV（Non-Volatile）虚拟机，修正了错误地声称支持某些特性的情况。<br>3. 逐步暴露新的特性给 NV 启用的虚拟机，确保它们能够利用最新的硬件功能。<br><br>讨论的结论是，这些补丁已被应用到下一个版本中，表明开发者对这些改进的认可和支持。然而，仍需关注在不同虚拟机配置下的特性兼容性问题，以确保系统的稳定性和性能。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-19]</span> <span class="email-subject">Re: [PATCH 00/11] KVM: arm64: nv: Align feature limitations with current state of support</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v3 0/2] KVM: arm64: make EL2 feature fields writable in ID_AA64MMFR1_EL1</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-09-19</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主要技术问题是关于在 KVM (Kernel-based Virtual Machine) 的 arm64 架构中，使得 ID_AA64MMFR1_EL1 寄存器的特性字段（HCX 和 TWED）可由用户空间进行写入。该讨论包含两个补丁：第一个补丁实现了将 ID_AA64MMFR1_EL1.{HCX, TWED} 字段设为可写，第二个补丁则是为这一功能增加了自测试，以验证用户空间对这些字段的写入操作。<br><br>关键技术要点包括：<br>1. 通过补丁使得特性字段可写，增强了用户空间对虚拟化环境的控制能力。<br>2. 自测试的引入确保了新功能的稳定性和正确性，减少了潜在的错误。<br><br>讨论的结论是补丁已被采纳并应用于后续版本，表明该功能的实现得到了认可。目前没有提到待解决的问题，表明该补丁的实施过程较为顺利。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-19]</span> <span class="email-subject">Re: [PATCH v3 0/2] KVM: arm64: make EL2 feature fields writable in ID_AA64MMFR1_EL1</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v6 05/11] KVM: guest_memfd: Add flag to remove from direct
 map</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-09-19</span>
                </div>

                <div class="ai-summary">
                    在这封邮件中，讨论的主要技术问题是关于 KVM（内核虚拟机）中的 `guest_memfd` 功能，特别是如何添加一个标志以便从直接映射中移除内存页面。参与者 Patrick 提到，当前该功能主要用于 AMD-SEV（安全加密虚拟化），并且在将页面传递给 CoCo 上下文时可能会出现问题。<br><br>关键技术要点包括：首先，Patrick 指出如果不撤销准备状态，`guest_memfd` 将错误地认为页面未准备好，并在下次访问时将其归零，这可能导致机器检查错误。其次，讨论中提到希望将准备状态的跟踪与直接映射移除状态的跟踪分开，并将准备状态的跟踪移至架构特定代码中。<br><br>讨论的结论是，参与者达成一致，认为将准备状态与直接映射状态分开是必要的，这样可以准确记录“准备成功但直接映射移除失败”的状态。待解决的问题包括如何有效地实现这一分离以及对现有代码的影响。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-19]</span> <span class="email-subject">Re: [PATCH v6 05/11] KVM: guest_memfd: Add flag to remove from direct
 map</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Roy, Patrick <span class="email-sender">&lt;roypat@amazon.co.uk&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v5 00/44] KVM: x86: Add support for mediated vPMUs</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-09-18</span>
                </div>

                <div class="ai-summary">
                    该邮件讨论的主要内容是关于 KVM（内核虚拟机）在 x86 架构上增加对中介虚拟性能监控单元（vPMUs）支持的补丁集。参与者 Sean Christopherson 提到，由于时间原因，他只应用了补丁集中的一部分（约四分之一），主要包括与中介 PMU 支持无直接关系的准备工作和清理。<br><br>关键技术要点包括：<br>1. 在 `kvm_x86_vendor_init()` 之前设置 VMCS（虚拟机控制结构）的顺序，以确保后续操作的兼容性。<br>2. 对 PMU 版本的检查和报告主机性能监控单元能力的快照。<br>3. 一系列重命名和重构的补丁，以提高代码的可读性和维护性。<br><br>讨论的结论是，虽然部分补丁已被应用，但仍有待解决的问题，包括确保补丁之间的兼容性，特别是在进行嵌套 VMCS 设置时。此外，参与者对后续补丁的整合和测试表示关注，以确保整体功能的稳定性和性能。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-18]</span> <span class="email-subject">Re: [PATCH v5 00/44] KVM: x86: Add support for mediated vPMUs</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH 1/2] target/arm/kvm: add constants for new PSCI versions</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-09-18</span>
                </div>

                <div class="ai-summary">
                    该邮件列表讨论的主要内容是关于在 ARM KVM 目标中添加新的 PSCI（电源状态控制接口）版本常量的补丁。参与者 Sebastian Ott 建议将该补丁与下一个补丁合并，以简化提交过程。Eric Auger 对此表示感谢并同意该建议。<br><br>关键技术要点包括：<br>1. 新的 PSCI 版本常量的引入，旨在增强 ARM KVM 的功能。<br>2. 讨论中提到的补丁合并策略，有助于提高代码的整洁性和可维护性。<br><br>讨论的结论是，参与者一致认为将补丁合并是一个合理的选择，虽然没有提出其他待解决的问题，但这一合并策略可能会在后续的补丁提交中得到进一步的应用。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-18]</span> <span class="email-subject">Re: [PATCH 1/2] target/arm/kvm: add constants for new PSCI versions</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Eric Auger <span class="email-sender">&lt;eric.auger@redhat.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH 2/2] target/arm/kvm: add kvm-psci-version vcpu property</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-09-18</span>
                </div>

                <div class="ai-summary">
                    在这封邮件中，讨论的主要技术问题是关于在 KVM（Kernel-based Virtual Machine）中添加 `kvm-psci-version` 虚拟 CPU 属性的补丁。参与者 Eric Auger 针对 Sebastian Ott 提出的疑问进行了回应。<br><br>关键的技术要点包括：Sebastian 对于补丁中默认返回值 0.2 的合理性表示疑惑，认为应该报告 KVM 所暴露的默认值，而不是一个固定值。Eric 则询问是否需要使用 `PRIx64` 来处理数据格式，显示出对代码实现细节的关注。<br><br>讨论的结论是，Eric 需要进一步解释为什么选择 0.2 作为默认值，并确认是否需要调整数据格式的处理方式。当前的主要待解决问题是补丁的必要性和默认值的合理性，以及代码实现中的数据格式问题。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-18]</span> <span class="email-subject">Re: [PATCH 2/2] target/arm/kvm: add kvm-psci-version vcpu property</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Eric Auger <span class="email-sender">&lt;eric.auger@redhat.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH 0/2] arm: add kvm-psci-version vcpu property</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-09-18</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主要技术问题是关于在 ARM 架构下添加 kvm-psci-version 虚拟 CPU 属性的补丁。参与者 Eric Auger 提到，这个补丁系列特别处理了一类迁移错误，即源主机内核向用户空间暴露的 KVM 寄存器数量多于目标主机内核的情况。在这种情况下，当前的虚拟 CPU 状态无法成功迁移。Sebastian Ott 进一步解释了这一问题，指出他试图处理伪固件寄存器默认值的变化，并希望能够提供向后兼容性，以便在旧机器类型上保持旧值。<br><br>关键技术要点包括：1) 迁移过程中可能出现的寄存器不匹配问题；2) 伪固件寄存器默认值的变化及其对迁移的影响；3) 提供向后兼容性以支持旧机器类型。<br><br>讨论的主要结论是，当前的补丁旨在缓解“无法加载 CPU: cpreg_vmstate_array_len”迁移错误，但仍需进一步确认如何实现向后兼容性，以确保旧机器类型的正常运行。待解决的问题是如何有效地处理不同主机间的寄存器差异，以确保迁移的成功。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-18]</span> <span class="email-subject">Re: [PATCH 0/2] arm: add kvm-psci-version vcpu property</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Eric Auger <span class="email-sender">&lt;eric.auger@redhat.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v3 08/10] arm/cpu: more customization for the kvm host cpu
 model</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-09-18</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主要技术问题是关于 ARM 架构下 KVM 主机 CPU 模型的内存管理，具体涉及到在代码中未释放 `prop_name` 变量所占用的内存。参与者 Cornelia Huck 指出，使用 `g_strdup_printf` 分配的内存需要通过 `g_free` 进行释放，以防止内存泄漏。<br><br>关键技术要点包括：<br>1. 在 ARM KVM 代码中，内存管理是一个重要的考虑因素，尤其是在动态分配内存后需要确保其正确释放。<br>2. 代码片段中展示了如何在特定条件下释放 `prop_name` 的内存，以避免潜在的内存泄漏问题。<br><br>讨论的结论是，开发者需要在代码中添加适当的内存释放操作，以确保资源的有效管理。当前的补丁已经修复了这一问题，但仍需关注其他可能存在的内存管理问题，以提升代码的稳定性和性能。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-18]</span> <span class="email-subject">Re: [PATCH v3 08/10] arm/cpu: more customization for the kvm host cpu
 model</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Jinqian Yang <span class="email-sender">&lt;yangjinqian1@huawei.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH 0/5] KVM: arm64: GICv5 legacy (GCIE_LEGACY) NV enablement and cleanup</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-09-17</span>
                </div>

                <div class="ai-summary">
                    本邮件线程讨论了关于 KVM（内核虚拟机）在 arm64 架构下对 GICv5（通用中断控制器版本5）遗留支持（GCIE_LEGACY）的启用及相关清理工作。邮件中包含了五个补丁，主要内容如下：<br><br>1. **技术问题**：讨论的核心是如何在 GICv5 主机上支持 ICC_SRE_EL2 访问，并启用嵌套虚拟化功能，确保 GICv5 与遗留特性（FEAT_GCIE_LEGACY）兼容。<br><br>2. **关键技术要点**：<br>   - 第一个补丁允许在 GICv5 主机上访问 ICC_SRE_EL2。<br>   - 第二个补丁实现了对 GICv5 主机的嵌套支持。<br>   - 第三个补丁为 GICv5 遗留 vCPU 接口添加了能力标志。<br>   - 第四个补丁使用 ARM64_HAS_GICV5_LEGACY 进行 GICv5 探测。<br>   - 第五个补丁则移除了 gic_kvm_info 中的 has_gcie_v3_compat 标志。<br><br>3. **讨论结论**：所有补丁已被应用，标志着对 GICv5 遗留支持的进一步完善。尽管当前的补丁已完成，但未来可能需要继续关注 GICv5 的性能优化和兼容性问题。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-17]</span> <span class="email-subject">Re: [PATCH 0/5] KVM: arm64: GICv5 legacy (GCIE_LEGACY) NV enablement and cleanup</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH 1/5] KVM: arm64: Allow ICC_SRE_EL2 accesses on a GICv5 host</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-09-17</span>
                </div>

                <div class="ai-summary">
                    该邮件讨论的主要技术问题是关于在 GICv5 主机上允许 ICC_SRE_EL2 访问的补丁。参与者 Marc Zyngier 提到他在三周前承诺的内容，并分享了一个相关的补丁链接，表明这个补丁可以同时解决两个问题。<br><br>关键的技术要点包括：<br>1. ICC_SRE_EL2 访问的必要性和其在 GICv5 中的实现。<br>2. 该补丁的设计旨在提高 ARM64 架构下 KVM 的性能和兼容性。<br><br>讨论的结论是，Marc Zyngier 认为这个补丁是一个重要的前缀，可以为后续的补丁系列奠定基础。尽管邮件中没有明确指出待解决的问题，但可以推测在 GICv5 的实现和 ICC_SRE_EL2 访问的细节上可能还需要进一步的讨论和验证。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-17]</span> <span class="email-subject">Re: [PATCH 1/5] KVM: arm64: Allow ICC_SRE_EL2 accesses on a GICv5 host</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v4 2/5] arm64: initialise SCTLR2_ELx register at boot time</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-09-17</span>
                </div>

                <div class="ai-summary">
                    在本次邮件讨论中，主要关注的是针对 ARM64 架构的一个补丁，具体内容是初始化 SCTLR2_ELx 寄存器的过程。参与者 Yeoreum Yun 针对该补丁进行了回复，表示对其使用场景的理解和思考。<br><br>关键技术要点包括：Yeoreum Yun 提到在现有的使用案例中，除了宏定义外，未能找到其他适用场景。他指出，在处理入口时，仅需检查 "el0" 情况，因此不需要将该补丁应用于所有情况。最终，他决定仅将补丁应用于 set_sctlr2_elx 函数，并表示在未来如果有新的寄存器需要类似的处理时，再进行更广泛的应用。<br><br>讨论的结论是，当前的补丁将局限于特定的函数，而对于更广泛的应用场景，需待后续需求出现时再进行调整。此时，尚未发现其他需要解决的问题。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-17]</span> <span class="email-subject">Re: [PATCH v4 2/5] arm64: initialise SCTLR2_ELx register at boot time</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Yeoreum Yun <span class="email-sender">&lt;yeoreum.yun@arm.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v3 0/3] arm64: Support FEAT_LSFE (Large System Float Extension)</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-09-16</span>
                </div>

                <div class="ai-summary">
                    本邮件线程主要讨论了对 ARM64 架构的补丁支持，具体是针对大系统浮点扩展（FEAT_LSFE）的实现。参与者 Mark Brown 提到已将第一部分补丁应用到 ARM64 的开发分支中，补丁内容主要涉及为 FEAT_LSFE 添加硬件能力标志（hwcap）。<br><br>关键技术要点包括：<br>1. FEAT_LSFE 是 ARM64 架构的一项新特性，旨在增强浮点运算的能力。<br>2. 补丁的第一部分涉及到在系统中添加相应的硬件能力标志，以便操作系统能够识别和利用这一特性。<br><br>讨论的结论是，补丁的第一部分已成功应用，后续可能还会有更多相关补丁的提交，以全面支持 FEAT_LSFE 特性。当前没有提及待解决的问题，表明讨论进展顺利。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-16]</span> <span class="email-subject">Re: [PATCH v3 0/3] arm64: Support FEAT_LSFE (Large System Float Extension)</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Will Deacon <span class="email-sender">&lt;will@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v4 16/28] iommu/arm-smmu-v3-kvm: Create array for hyp
 SMMUv3</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-09-16</span>
                </div>

                <div class="ai-summary">
                    在这封邮件中，讨论的主要技术问题是关于针对 ARM SMMUv3 的 KVM（Kernel-based Virtual Machine）补丁，具体是创建一个用于 Hypervisor 的 SMMUv3 数组。邮件的参与者主要是 Mostafa Saleh 和 Daniel Mentz。<br><br>关键的技术要点包括：Mostafa 提到 Daniel 发现了一个问题，并表示会在下一个版本（v5）中修复。讨论中提到的 `kvm_err` 函数似乎仅在核心架构代码中使用，但 Mostafa 对其在其他上下文中的适用性表示不确定。<br><br>主要讨论结论是，虽然存在一些疑问和需要修复的地方，但整体上，补丁的方向是正确的。待解决的问题包括如何进一步明确 `kvm_err` 的使用场景，以及在下一个版本中如何有效地解决当前的问题。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-16]</span> <span class="email-subject">Re: [PATCH v4 16/28] iommu/arm-smmu-v3-kvm: Create array for hyp
 SMMUv3</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mostafa Saleh <span class="email-sender">&lt;smostafa@google.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v4 14/28] iommu/arm-smmu-v3: Add KVM mode in the driver</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-09-16</span>
                </div>

                <div class="ai-summary">
                    在这封邮件中，讨论的主要技术问题是关于在 ARM SMMU v3 驱动中添加 KVM 模式的补丁（PATCH v4 14/28）。参与者 Mostafa Saleh 和 Will Deacon 就如何设置默认配置进行了交流。<br><br>关键的技术要点包括：Mostafa 提出可以通过配置文件或命令行参数（或两者结合）来设置默认值，以便更灵活地管理 KVM 模式的启用。这表明开发者在考虑用户的使用便利性和系统的可配置性。<br><br>讨论的结论是，Mostafa 表达了对该提议的支持，并表示可以进行相应的调整。当前的待解决问题是如何具体实现这些配置选项，以确保 KVM 模式能够顺利集成到 ARM SMMU v3 驱动中。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-16]</span> <span class="email-subject">Re: [PATCH v4 14/28] iommu/arm-smmu-v3: Add KVM mode in the driver</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mostafa Saleh <span class="email-sender">&lt;smostafa@google.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v4 10/28] KVM: arm64: iommu: Shadow host stage-2 page
 table</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-09-16</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主要技术问题是关于 KVM（Kernel-based Virtual Machine）在 ARM64 架构下的 IOMMU（输入输出内存管理单元）实现，特别是涉及到影子主机阶段-2 页表的补丁内容。参与者 Mostafa Saleh 提到，主机可以设置 SMMU（系统内存管理单元）以绕过配置，这意味着在这种情况下，虚拟机监控器（hypervisor）将其阶段-2 页表附加时不需要配置阶段-1。因此，阶段-2 页表必须具备正确的属性以支持 MMIO（内存映射输入输出）。<br><br>关键技术要点包括：在 SMMUv3 驱动中，无法处理页面错误，因此需要主动映射所有内容。此外，未来的工作将涉及将 CPU 的阶段-2 页表与 SMMUv3 共享，以提高效率和灵活性。<br><br>讨论的结论是，目前的实现需要确保阶段-2 页表的正确性，同时未来的改进方向是实现 CPU 和 SMMUv3 页表的共享，以便更好地处理页面错误和提高性能。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-16]</span> <span class="email-subject">Re: [PATCH v4 10/28] KVM: arm64: iommu: Shadow host stage-2 page
 table</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mostafa Saleh <span class="email-sender">&lt;smostafa@google.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v4 06/28] iommu/arm-smmu-v3: Split code with hyp</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-09-16</span>
                </div>

                <div class="ai-summary">
                    在本邮件线程中，讨论的主要技术问题是关于对 ARM SMMU v3 的 IOMMU 代码进行拆分，以便更好地与 Hypervisor（hyp）进行协作。参与者 Mostafa Saleh 提出了一个补丁（PATCH v4 06/28），旨在改善代码结构和可维护性。<br><br>关键的技术要点包括：<br>1. 拆分代码的必要性，能够提高代码的清晰度和模块化，便于后续的开发和维护。<br>2. 与 Hypervisor 的集成将使得 ARM SMMU v3 在虚拟化环境中的性能和功能得到增强。<br><br>讨论的结论是，Mostafa Saleh 同意将代码进行拆分，并表示将会落实这一改动。这表明参与者对补丁的方向表示认可，但具体的实现细节和后续的代码审查仍需进一步讨论和确认。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-16]</span> <span class="email-subject">Re: [PATCH v4 06/28] iommu/arm-smmu-v3: Split code with hyp</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mostafa Saleh <span class="email-sender">&lt;smostafa@google.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v4 02/28] KVM: arm64: Donate MMIO to the hypervisor</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-09-16</span>
                </div>

                <div class="ai-summary">
                    在这封邮件中，讨论的主要技术问题是关于在 KVM（Kernel-based Virtual Machine）中如何将 MMIO（内存映射输入输出）捐赠给 hypervisor 的补丁。参与者 Mostafa Saleh 和 Will Deacon 针对代码的安全性和错误处理进行了深入探讨。<br><br>关键技术要点包括：<br>1. 该代码仅在 hypervisor 中被调用，并且输入来自可信的 SMMUv3 驱动，主要在启动时执行。<br>2. 代码的错误处理路径中，使用 WARN_ON 来处理 MMIO 页面的取消映射失败，认为这样足够简洁，避免了额外的代码复杂性。<br>3. 讨论中提到的 VM 页表的销毁过程与 MMIO 页面的取消映射并不相互影响，确保了操作的安全性。<br><br>主要讨论结论是，虽然当前的错误处理机制已经足够，但如果认为有必要，仍可以添加新的检查和辅助函数来管理 MMIO 状态。待解决的问题是是否需要进一步增强代码的安全性和可读性。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-16]</span> <span class="email-subject">Re: [PATCH v4 02/28] KVM: arm64: Donate MMIO to the hypervisor</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mostafa Saleh <span class="email-sender">&lt;smostafa@google.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH kvmtool v3 4/6] arm64: add counter offset control</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-09-16</span>
                </div>

                <div class="ai-summary">
                    在这封邮件中，讨论的主要技术问题是关于 KVM 工具中 ARM64 架构的计数器偏移控制补丁的描述和实现。邮件的参与者 Andre Przywara 针对补丁中对选项描述的冗长性提出了意见，认为虽然“默认值为 0”在实现上可能不完全准确，但从用户的角度来看，其效果是相同的。<br><br>关键技术要点包括：1) 对于用户而言，计数器偏移为 0 的情况应被视为默认行为；2) 拒绝使用“--counter-offset 0”选项，即使它是默认行为，可能会给用户带来不便；3) “偏移 0”作为一个特殊情况是广泛理解的，因此不应造成混淆。<br><br>讨论的结论是，若确实需要对这一点进行详细解释，建议在文档中添加相关说明，以便用户更好地理解该选项的使用。整体来看，邮件强调了用户体验的重要性以及文档清晰度的必要性。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-16]</span> <span class="email-subject">Re: [PATCH kvmtool v3 4/6] arm64: add counter offset control</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Andre Przywara <span class="email-sender">&lt;andre.przywara@arm.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH kvmtool v3 3/6] arm64: nested: add support for setting
 maintenance IRQ</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-09-16</span>
                </div>

                <div class="ai-summary">
                    在此次邮件讨论中，主要关注的是针对 KVM 工具的一个补丁，具体内容是为 ARM64 架构的嵌套虚拟化添加设置维护中断（maintenance IRQ）的支持。参与者 Andre Przywara 和 Alexandru Elisei 讨论了在实现这一功能时应遵循的原则。<br><br>关键技术要点包括：在使用特定功能之前，必须先检查该功能是否可用，而不是依赖于某些实现细节。这种做法有助于确保代码的清晰性和可维护性。<br><br>讨论的结论是，参与者一致同意遵循这一原则，并确认已对补丁进行了必要的修正和更新。虽然邮件讨论较为简短，但明确了在开发过程中应保持的良好实践，确保未来的代码实现更加稳健。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-16]</span> <span class="email-subject">Re: [PATCH kvmtool v3 3/6] arm64: nested: add support for setting
 maintenance IRQ</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Andre Przywara <span class="email-sender">&lt;andre.przywara@arm.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH kvmtool v3 2/6] arm64: Initial nested virt support</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-09-16</span>
                </div>

                <div class="ai-summary">
                    在这封邮件中，讨论的主要技术问题是关于在 KVM 工具中实现 ARM64 的嵌套虚拟化支持的补丁。参与者 Andre Przywara 和 Alexandru Elisei 就“nested”这一术语的使用进行了交流，讨论了其直观性以及与 KVM 命令行选项的一致性。<br><br>关键技术要点包括：<br>1. “nested”被认为是描述嵌套虚拟化的最直观术语，且与现有的 KVM 命令行选项相符。<br>2. Andre 提出使用“EL2/nested virt is not supported”来表述不支持的情况，但他也意识到这个讨论可能会偏离主题（“bikeshedding”）。<br><br>主要讨论结论是，尽管对术语的选择存在不同意见，最终建议继续使用“nested”这一术语，以保持一致性和直观性。待解决的问题是如何在描述中兼顾技术细节与术语的清晰度。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-16]</span> <span class="email-subject">Re: [PATCH kvmtool v3 2/6] arm64: Initial nested virt support</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Andre Przywara <span class="email-sender">&lt;andre.przywara@arm.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH kvmtool v3 0/6] arm64: Nested virtualization support</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-09-16</span>
                </div>

                <div class="ai-summary">
                    该邮件线程主要讨论了针对 arm64 架构的嵌套虚拟化支持的补丁内容，共包含六个补丁。参与者 Andre Przywara 和 Will Deacon 之间的交流表明，Andre 将会继续推进相关工作。<br><br>关键技术要点包括：<br>1. 嵌套虚拟化的实现对于提升虚拟化环境的灵活性和效率至关重要，特别是在 arm64 平台上。<br>2. 该补丁系列可能涉及对现有 KVM 工具的修改，以支持新的嵌套虚拟化特性。<br><br>讨论的结论是，Andre 将会落实补丁的进一步开发和测试，确保其能够顺利集成到现有的 KVM 工具中。当前没有明确的待解决问题，但后续的实现细节和测试结果将是关注的重点。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-16]</span> <span class="email-subject">Re: [PATCH kvmtool v3 0/6] arm64: Nested virtualization support</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Andre Przywara <span class="email-sender">&lt;andre.przywara@arm.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH RESEND v7 0/6] support FEAT_LSUI and apply it on futex
 atomic ops</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-09-15</span>
                </div>

                <div class="ai-summary">
                    在这封邮件中，讨论的主要技术问题是关于支持 FEAT_LSUI 特性并将其应用于 futex 原子操作的补丁。邮件的参与者主要是 Will Deacon 和 Catalin Marinas，讨论的内容集中在补丁的审查和改进上。<br><br>关键的技术要点包括：<br>1. FEAT_LSUI 是一种新特性，旨在优化原子操作的性能。<br>2. 将该特性应用于 futex 机制，可以提高多线程环境下的效率。<br>3. Catalin Marinas 提到补丁的 XML 文档比之前的版本有了显著改善，表明对补丁的理解和审查过程有了更好的支持。<br><br>讨论的结论是，Will Deacon 对补丁的审查表示认可，并希望 Catalin Marinas 能继续参与后续的审查工作。当前没有明确的待解决问题，但后续的审查和反馈将是推动补丁完善的重要步骤。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-15]</span> <span class="email-subject">Re: [PATCH RESEND v7 0/6] support FEAT_LSUI and apply it on futex
 atomic ops</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Will Deacon <span class="email-sender">&lt;will@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v2 0/2] Dump instructions on panic for pKVM/nvhe</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-09-15</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主要技术问题是针对 pKVM/nvhe 的内核崩溃时的指令转储功能，提出了两个补丁。补丁内容包括：1) 在 hypervisor panic 时转储指令；2) 将 hypervisor 代码映射为只读，并在崩溃时进行指令转储。<br><br>关键的技术要点包括：<br>- 第一个补丁（[1/2]）实现了在 hypervisor 发生 panic 时，能够转储当前执行的指令，有助于调试和分析崩溃原因。<br>- 第二个补丁（[2/2]）则是将 hypervisor 的文本段设置为只读，这样可以防止在运行时被意外修改，提高系统的稳定性。<br><br>讨论的结论是，这两个补丁已被接受并应用到下一个版本中，表明开发者对增强内核调试能力的认可。当前没有提及的待解决问题，表明这些补丁在功能实现上是有效的。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-15]</span> <span class="email-subject">Re: [PATCH v2 0/2] Dump instructions on panic for pKVM/nvhe</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v10 00/43] arm64: Support for Arm CCA in KVM</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-09-15</span>
                </div>

                <div class="ai-summary">
                    本邮件线程主要讨论了针对 ARM64 架构的 KVM（Kernel-based Virtual Machine）支持 Arm CCA（Cache Coherent Accelerator）的一系列补丁，版本为 v10，共包含 43 个补丁。参与者 Steven Price 和 Gavin Shan 进行了简短的交流，Gavin 对补丁进行了测试，Steven 表达了感谢。<br><br>关键技术要点包括：<br>1. Arm CCA 的支持将增强 KVM 在 ARM64 平台上的性能，特别是在处理加速器时的缓存一致性。<br>2. 补丁的实现细节和性能测试结果尚未在邮件中详细展开，但测试反馈表明补丁的有效性。<br><br>讨论的结论是，补丁经过测试并获得积极反馈，但邮件中并未提及具体的待解决问题或后续步骤，可能需要进一步的讨论和验证以确保补丁的稳定性和兼容性。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-15]</span> <span class="email-subject">Re: [PATCH v10 00/43] arm64: Support for Arm CCA in KVM</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Steven Price <span class="email-sender">&lt;steven.price@arm.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v10 05/43] arm64: RME: Check for RME support at KVM init</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-09-15</span>
                </div>

                <div class="ai-summary">
                    在这封邮件中，主要讨论了一个与 ARM64 架构相关的补丁，具体是关于在 KVM 初始化时检查 RME（Realm Management Extensions）支持的问题。Gavin Shan 提出了一个建议，认为在代码中显式包含所需的头文件是更好的做法，这样可以在未来进行代码重构时避免潜在的问题。<br><br>关键的技术要点包括：<br>1. 在 KVM 初始化过程中，确保正确检查 RME 支持，以防止因版本不一致而导致的错误。<br>2. 讨论了代码中头文件的包含方式，强调了显式包含的好处。<br>3. 提到了一些代码结构的改进建议，例如在错误路径中使用括号以提高可读性。<br><br>讨论的结论是，虽然当前的实现可以正常工作，但在代码可维护性和清晰性方面还有改进的空间。参与者们一致认为在未来的代码中应更加注意头文件的管理和错误处理的清晰性。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-15]</span> <span class="email-subject">Re: [PATCH v10 05/43] arm64: RME: Check for RME support at KVM init</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Steven Price <span class="email-sender">&lt;steven.price@arm.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v10 02/43] arm64: RME: Handle Granule Protection Faults
 (GPFs)</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-09-15</span>
                </div>

                <div class="ai-summary">
                    在这封邮件中，讨论的主要技术问题是关于 ARM64 架构下的 RME（Runtime Memory Encryption）处理 Granule Protection Faults（GPFs）的补丁。参与者 Catalin Marinas 提出，虽然内核遇到 GPF 通常意味着出现了严重错误，但仍然需要输出更有用的错误信息，以便于调试和问题定位。<br><br>关键技术要点包括：<br>1. GPF 的发生指示内核在内存保护方面遇到了问题，可能影响系统的稳定性和安全性。<br>2. 提高错误信息的可读性和实用性，可以帮助开发者更快地识别和解决问题。<br><br>讨论的结论是，尽管 GPF 的出现通常是一个严重的警告，但改进错误信息的输出是必要的，以增强内核的可维护性和调试能力。目前尚未提出具体的解决方案或补丁细节，后续可能需要进一步的讨论和开发。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-15]</span> <span class="email-subject">Re: [PATCH v10 02/43] arm64: RME: Handle Granule Protection Faults
 (GPFs)</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Steven Price <span class="email-sender">&lt;steven.price@arm.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v2 1/2] KVM: arm64: Dump instruction on hyp panic</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-09-15</span>
                </div>

                <div class="ai-summary">
                    在这封邮件中，讨论的主要技术问题是关于 KVM（Kernel-based Virtual Machine）在 arm64 架构下的一个补丁，该补丁旨在在 hypervisor（hyp）发生崩溃时转储指令信息。邮件中提到的补丁版本为 v2 1/2，参与者为 Mostafa Saleh 和 Will Deacon。<br><br>关键的技术要点包括：<br>1. 补丁的目的是增强 KVM 的调试能力，通过在 hyp 崩溃时记录指令信息，帮助开发者更好地分析和解决问题。<br>2. Will Deacon 对该补丁表示认可，并给予了“已确认”（Acked-by）的反馈，表明他支持该补丁的合并。<br><br>讨论的结论是，补丁得到了积极的反馈，表明其在提升 KVM 调试能力方面的重要性。当前没有提到待解决的问题，表明该补丁可能已准备好进入下一步的合并流程。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-15]</span> <span class="email-subject">Re: [PATCH v2 1/2] KVM: arm64: Dump instruction on hyp panic</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Will Deacon <span class="email-sender">&lt;will@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v2] KVM: arm64: Fix NULL pointer access issue</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-09-15</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主要技术问题是针对 KVM（Kernel-based Virtual Machine）在 arm64 架构下的一个 NULL 指针访问问题的修复。参与者 Yingchao Deng 提出了一个补丁，旨在解决该问题，并在邮件中确认该补丁已被应用到下一个版本中。<br><br>关键的技术要点包括：补丁的提交 ID 为 27d2b47eef033f1fc6c0452dc1017e43dad5fe14，修复的内容主要涉及对 NULL 指针的访问进行检查，以避免潜在的系统崩溃或不稳定性。<br><br>讨论的结论是，补丁已成功应用，表明该问题得到了及时解决。当前没有提及其他待解决的问题，表明此修复在讨论中得到了认可和支持。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-15]</span> <span class="email-subject">Re: [PATCH v2] KVM: arm64: Fix NULL pointer access issue</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v7 RESEND 5/6] arm64: futex: small optimisation for
 __llsc_futex_atomic_set()</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-09-15</span>
                </div>

                <div class="ai-summary">
                    在这封邮件中，讨论的主要技术问题是关于对 ARM64 架构下的 futex 实现进行的小优化，具体是针对 `__llsc_futex_atomic_set()` 函数的补丁（PATCH v7 RESEND 5/6）。参与者 Catalin Marinas 表示，这个补丁并没有带来显著的性能提升，因此决定放弃该补丁。<br><br>关键的技术要点包括：<br>1. 该补丁旨在优化 ARM64 futex 的原子设置操作。<br>2. 经过讨论，参与者认为优化效果不明显。<br><br>最终的讨论结论是，鉴于补丁未能显著改善性能，Catalin Marinas 决定不再推进该补丁。这一决定反映了在内核开发中对性能提升的严格要求，以及对补丁有效性进行评估的重要性。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-15]</span> <span class="email-subject">Re: [PATCH v7 RESEND 5/6] arm64: futex: small optimisation for
 __llsc_futex_atomic_set()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Yeoreum Yun <span class="email-sender">&lt;yeoreum.yun@arm.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v2] KVM: arm64: Fix NULL pointer access issue</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-09-15</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主要技术问题是修复 KVM（Kernel-based Virtual Machine）在 arm64 架构下的空指针访问问题。具体来说，当 Linux 在 EL1 模式下启动时，`host_data_ptr()` 会解析为 nVHE（non-Virtualization Host Extensions）超管的主机数据副本。如果 KVM 的 hyp 模式未初始化，nVHE 的每个 CPU 基址将保持未初始化状态，导致对 `host_data_ptr()` 的调用出现 NULL 解引用错误。这一问题在 KVM 的跟踪过滤助手中被观察到。<br><br>为了解决这个问题，补丁中添加了一个早期返回机制，确保在 KVM 未初始化时，跟踪过滤助手不会继续执行，从而避免 NULL 解引用。此外，补丁还将 TRBE（Trace Buffer Extension）跳过检查的逻辑重构到一个公共助手中，以提高代码的可读性和维护性。<br><br>讨论的关键要点包括：<br>1. 通过早期返回机制避免 NULL 解引用。<br>2. 重构 TRBE 跳过检查逻辑以提升代码质量。<br><br>最终的讨论结论是，补丁已被审核并准备合并，解决了 KVM 在特定条件下的潜在崩溃问题。待解决的问题主要是确保所有相关功能在不同的 KVM 初始化状态下都能正常工作。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-15]</span> <span class="email-subject">Re: [PATCH v2] KVM: arm64: Fix NULL pointer access issue</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH RESEND v7 4/6] arm64: futex: refactor futex atomic
 operation</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-09-15</span>
                </div>

                <div class="ai-summary">
                    该邮件列表讨论的主题是关于对 ARM64 架构下 futex 原子操作的重构补丁（PATCH RESEND v7 4/6）。参与者 Yeoreum Yun 表达了对该补丁的感谢，表明其可能已经对相关问题进行了有效的解决。<br><br>在技术要点方面，重构 futex 原子操作旨在提高其效率和可维护性，可能涉及对现有代码的优化和清理，以确保在多线程环境下的正确性和性能。虽然邮件中没有详细讨论具体的实现细节，但可以推测出该补丁的目标是增强 ARM64 平台的并发处理能力。<br><br>讨论的结论是，虽然参与者对补丁表示感谢，但邮件中并未提及任何待解决的问题或进一步的讨论，这可能意味着补丁已被接受或没有明显的争议。整体来看，该邮件反映了对 ARM64 futex 机制改进的积极态度。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-15]</span> <span class="email-subject">Re: [PATCH RESEND v7 4/6] arm64: futex: refactor futex atomic
 operation</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Yeoreum Yun <span class="email-sender">&lt;yeoreum.yun@arm.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v11 0/6] KVM: arm64: Support FF-A 1.2</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-09-15</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主要技术问题是对 KVM（Kernel-based Virtual Machine）在 arm64 架构中对 FF-A（Firmware Framework for Arm）1.2 版本的支持。讨论中包含了六个补丁的提交，旨在修复和增强 KVM 对 FF-A 1.2 的兼容性。<br><br>关键技术要点包括：<br>1. 修正了在主机版本降级尝试时的返回值（补丁 1）。<br>2. 在 FF-A 初始化和主机处理程序中使用 SMCCC 1.2（补丁 2）。<br>3. 将 FFA_NOTIFICATION_* 调用标记为不支持（补丁 3）。<br>4. 将可选的 FF-A 1.2 接口标记为不支持（补丁 4）。<br>5. 对 FFA_FEATURE 调用的响应进行屏蔽（补丁 5）。<br>6. 将支持的 FF-A 版本提升至 1.2（补丁 6）。<br><br>讨论的结论是，所有补丁已被应用，标志着对 FF-A 1.2 的支持已得到确认。待解决的问题主要集中在未支持的功能上，开发者需要进一步评估这些功能的实现可能性。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-15]</span> <span class="email-subject">Re: [PATCH v11 0/6] KVM: arm64: Support FF-A 1.2</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v2] KVM: arm64: ptdump: Don't test PTE_VALID alongside other attributes</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-09-15</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主要技术问题是关于 KVM（Kernel-based Virtual Machine）在 arm64 架构下的 ptdump 功能的一个补丁。补丁的核心内容是修改 ptdump 的实现，避免在测试页表项（PTE）时将 PTE_VALID 属性与其他属性一起测试。<br><br>关键技术要点包括：<br>1. PTE_VALID 属性用于指示页表项是否有效，单独测试该属性可以提高代码的清晰度和可维护性。<br>2. 此补丁的提交旨在简化 ptdump 的逻辑，减少潜在的错误和混淆。<br><br>讨论的结论是，该补丁已被接受并应用于下一个版本，表明参与者对该修改的认可。当前没有提及待解决的问题，表明此补丁的实施过程顺利。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-15]</span> <span class="email-subject">Re: [PATCH v2] KVM: arm64: ptdump: Don't test PTE_VALID alongside other attributes</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH] KVM: arm64: Fix debug checking for np-guests using huge mappings</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-09-15</span>
                </div>

                <div class="ai-summary">
                    在这封邮件中，讨论的主要技术问题是针对 KVM（Kernel-based Virtual Machine）在 arm64 架构下的一个补丁，该补丁旨在修复在使用大页映射时对非物理访客（np-guests）进行调试检查的问题。补丁的提交编号为 2ba972bf71cb71d2127ec6c3db1ceb6dd0c73173。<br><br>关键技术要点包括：该补丁解决了在处理大页映射时可能出现的调试检查错误，这对于确保虚拟化环境的稳定性和可靠性至关重要。通过修复这一问题，开发者能够更好地管理和调试虚拟机中的内存映射，尤其是在使用大页时。<br><br>讨论的结论是，该补丁已被应用到下一版本中，表明开发者对其有效性和必要性的认可。目前没有提到其他待解决的问题，表明这一修复是一个明确且及时的改进。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-15]</span> <span class="email-subject">Re: [PATCH] KVM: arm64: Fix debug checking for np-guests using huge mappings</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v4 0/9] KVM: arm64: Reserve pKVM VM handle during initial VM setup</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-09-15</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主题是关于 KVM（内核虚拟机）在 arm64 架构下的 pKVM（保护型 KVM）虚拟机处理的补丁集，共包含九个补丁。主要技术问题集中在如何在初始虚拟机设置过程中保留 pKVM 虚拟机句柄，以提升系统的稳定性和可维护性。<br><br>关键技术要点包括：<br>1. 增加了构建时检查以避免重复声明的使用。<br>2. 将 `pkvm.enabled` 重命名为 `pkvm.is_protected`，以更清晰地表述其功能。<br>3. 对 pKVM 主机代码中的变量进行了重命名，使其更具一致性。<br>4. 明确了 pKVM 模式与保护虚拟机之间的区别。<br>5. 解耦了 hyp 虚拟机创建状态与其句柄的关系。<br>6. 分离了 pKVM 虚拟机表项的分配与插入过程。<br>7. 整合了 pKVM 超级管理程序虚拟机初始化逻辑。<br>8. 引入了用于 pKVM 虚拟机保留和初始化的独立超级调用。<br><br>讨论的结论是，这些补丁已被应用到后续版本中，标志着对 pKVM 功能的进一步完善和优化。待解决的问题可能包括在实际应用中验证这些改动的效果及其对系统性能的影响。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-15]</span> <span class="email-subject">Re: [PATCH v4 0/9] KVM: arm64: Reserve pKVM VM handle during initial VM setup</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH RESEND v7 6/6] arm64: futex: support futex with FEAT_LSUI</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-09-15</span>
                </div>

                <div class="ai-summary">
                    在这封邮件中，讨论的主要技术问题是关于在 ARM64 架构中对 futex（快速用户空间锁）的支持，特别是与 FEAT_LSUI 特性相关的补丁。参与者 Yeoreum Yun 表达了对补丁的支持，并指出在进行修改时，32 位的无关更改可能会导致 futex 原子操作失败。<br><br>关键的技术要点包括：Yeoreum Yun 决定在使用 lsui 指令进行比较和交换（cmpxchg）以及异或（eor）操作时，仍然保留 llsc 方法。这表明他对原子操作的稳定性和兼容性有一定的考虑。<br><br>讨论的结论是，尽管引入了新的特性，但为了确保 futex 的可靠性，仍需维持现有的 llsc 方法。待解决的问题可能包括如何在不影响现有功能的情况下，进一步优化和集成新的指令特性。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-15]</span> <span class="email-subject">Re: [PATCH RESEND v7 6/6] arm64: futex: support futex with FEAT_LSUI</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Yeoreum Yun <span class="email-sender">&lt;yeoreum.yun@arm.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH RESEND v7 6/6] arm64: futex: support futex with FEAT_LSUI</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-09-15</span>
                </div>

                <div class="ai-summary">
                    在这封邮件中，Yeoreum Yun 针对一项补丁进行了讨论，补丁内容涉及对 ARM64 架构下的 futex（快速用户空间锁）支持 FEAT_LSUI 特性的实现。邮件的主要内容是对 Catalin 提出的意见表示感谢，并承诺将根据反馈进行相应的修改。<br><br>关键技术要点包括：<br>1. ARM64 架构的 futex 机制的扩展，旨在提高性能和功能。<br>2. FEAT_LSUI 特性在用户空间锁的实现中的重要性。<br><br>讨论的结论是，Yeoreum Yun 将根据反馈对补丁进行修改，表明了对改进的积极态度。然而，邮件中没有详细讨论具体的技术细节或存在的争议，主要集中在对反馈的响应上，因此后续的技术细节和问题仍需在后续邮件中进一步探讨。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-15]</span> <span class="email-subject">Re: [PATCH RESEND v7 6/6] arm64: futex: support futex with FEAT_LSUI</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Yeoreum Yun <span class="email-sender">&lt;yeoreum.yun@arm.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH V4 0/2] arm64/sysreg: Clean up TCR_EL1 field macros</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-09-15</span>
                </div>

                <div class="ai-summary">
                    在这封邮件中，Anshuman Khandual 提出了关于 ARM64 系统寄存器（sysreg）中 TCR_EL1 字段宏的清理补丁（PATCH V4 0/2）的讨论。邮件中并没有详细的技术细节或补丁内容，主要是对之前提交的补丁进行跟进询问，显示出对该补丁进展的关注。<br><br>关键技术要点包括：<br>1. TCR_EL1 字段宏的清理工作，旨在提升代码的可读性和维护性。<br>2. 补丁版本为 V4，表明该补丁经过多次修改和迭代。<br><br>讨论的结论是，Anshuman Khandual 在邮件中发出“温和的提醒”，希望能够获得关于该补丁的更新信息，表明该补丁尚未得到回复或处理，可能仍存在待解决的问题。整体上，邮件反映出对 ARM64 系统寄存器代码质量的重视，以及对补丁进展的期待。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-15]</span> <span class="email-subject">Re: [PATCH V4 0/2] arm64/sysreg: Clean up TCR_EL1 field macros</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Anshuman Khandual <span class="email-sender">&lt;anshuman.khandual@arm.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v3 1/2] KVM: arm64: Make ID_AA64MMFR1_EL1.{HCX, TWED} writable from userspace</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-09-14</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主要技术问题是关于 KVM（Kernel-based Virtual Machine）在 arm64 架构下的一个补丁，旨在使 ID_AA64MMFR1_EL1 寄存器的 HCX 和 TWED 字段能够从用户空间进行写入。参与者 Marc Zyngier 提到，Oliver Upton 已经推送了实现该功能的代码分支，但尚未经过充分测试。<br><br>关键技术要点包括：<br>1. ID_AA64MMFR1_EL1 寄存器的 HCX 和 TWED 字段的可写性将为用户空间提供更多的灵活性，可能会影响虚拟化性能和功能。<br>2. 该补丁的实现尚处于测试阶段，开发者需要确保其稳定性和安全性。<br><br>讨论的结论是，虽然补丁的初步实现已经完成，但在广泛应用之前，仍需进行更多的测试以验证其合理性和有效性。开发者们需要关注潜在的风险和影响，以确保补丁的可靠性。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-14]</span> <span class="email-subject">Re: [PATCH v3 1/2] KVM: arm64: Make ID_AA64MMFR1_EL1.{HCX, TWED} writable from userspace</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
                </div>
            </div>
        </div>

        <div class="category">
            <h2>RFC</h2>

            <div class="thread">
                <div class="thread-header">
                    <h3>[RFC PATCH v1 04/38] tsm: Support DMA Allocation from private
 memory</h3>
                </div>

                <div class="thread-meta">
                    <span>3 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-09-15</span>
                </div>

                <div class="ai-summary">
                    此次邮件讨论的主题是关于在私有内存中支持DMA分配的补丁（RFC PATCH v1 04/38）。主要参与者为Mostafa Saleh和Aneesh Kumar K.V。<br><br>讨论的技术问题主要集中在DMA操作如何在没有分配IOMMU的情况下进行，特别是涉及到DMA-direct和swiotlb的使用。Mostafa提出了一个基本问题，询问在没有IOMMU的情况下，如何影响DMA操作中的数据传输。Aneesh解释说，在当前的补丁集中，来宾操作不使用分配的IOMMU，因此DMA操作使用DMA-direct。对于非安全设备，流式DMA使用swiotlb（与虚拟机监控器共享的池），而非流式DMA则使用DMA-direct，并通过dma_set_decrypted()更新分配内存的属性。对于安全设备，则不需要这两种机制。<br><br>讨论的结论是，当前补丁在处理DMA分配时的机制已经明确，但仍需进一步探讨如何在不同设备和场景下优化DMA操作，特别是在涉及IOMMU的情况下。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-15]</span> <span class="email-subject">Re: [RFC PATCH v1 04/38] tsm: Support DMA Allocation from private
 memory</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mostafa Saleh <span class="email-sender">&lt;smostafa@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-16]</span> <span class="email-subject">Re: [RFC PATCH v1 04/38] tsm: Support DMA Allocation from private
 memory</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Aneesh Kumar K.V <span class="email-sender">&lt;aneesh.kumar@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-16]</span> <span class="email-subject">Re: [RFC PATCH v1 04/38] tsm: Support DMA Allocation from private
 memory</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mostafa Saleh <span class="email-sender">&lt;smostafa@google.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[RFC RESEND PATCH] arm64: Rename is_midr_in_range_list and add is_midr_subset_of_range_list</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-09-15</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主要技术问题是对 ARM64 架构中 `is_midr_in_range_list` 函数的重命名及其相关功能的增强。参与者 Jia Qingtong 提出，在现有的实现中，该函数用于判断当前 CPU 是否不受特定漏洞影响，但其逻辑与预期相悖，可能导致虚拟机监控程序（VMM）在判断时出现误导。因此，建议将其重命名为 `is_any_midr_in_range_list`，以更明确地表示“如果任何目标实现的 CPU 在范围列表中”，并新增 `is_midr_subset_of_range_list` 函数，以便更准确地用于漏洞判断。<br><br>关键技术要点包括：<br>1. VMM 需要确保目标实现 CPU 集合的正确性。<br>2. 对于与错误相关的修复，如果任何目标实现 CPU 受到影响，则所有 CPU 都应视为受到影响。<br>3. 新增的 `is_midr_subset_of_range_list` 函数用于确认所有目标实现 CPU 是否均在指定范围内。<br><br>讨论的结论是，重命名和新增函数的提议有助于消除逻辑混淆，提高代码的可读性和准确性。待解决的问题包括对新函数的进一步测试和验证，以确保其在实际应用中的有效性。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-15]</span> <span class="email-subject">[RFC RESEND PATCH] arm64: Rename is_midr_in_range_list and add is_midr_subset_of_range_list</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Jia Qingtong <span class="email-sender">&lt;jiaqingtong97@gmail.com&gt;</span></div>
                </div>
            </div>
        </div>

        <div class="category">
            <h2>Bug Report</h2>

            <div class="thread">
                <div class="thread-header">
                    <h3>[syzbot] [kvmarm?] kernel BUG in kvm_s2_put_page</h3>
                </div>

                <div class="thread-meta">
                    <span>2 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-09-19</span>
                </div>

                <div class="ai-summary">
                    该邮件线程主要讨论了在 KVM ARM 虚拟化环境中出现的一个内核错误，具体是 `kvm_s2_put_page` 函数中的内核 BUG。syzbot 报告了该问题，并提供了相关的内核版本、配置和调试信息。错误信息显示在处理页面引用计数时出现了问题，导致了内核崩溃。<br><br>关键技术要点包括：<br>1. 错误发生在 `put_page` 和 `folio_put` 函数中，涉及到页面的引用计数管理。<br>2. 报告中提到的错误与 S2 参考计数问题有关，该问题在 Linus 的主干中已被回退，但尚未在 kvmarm/next 分支中解决。<br><br>讨论的结论是，Marc Zyngier 指出该问题可能与最近的 S2 引用计数问题有关，并建议开发者关注该问题的修复。当前尚未提供重现该问题的具体步骤，且需要进一步的调查和修复。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-19]</span> <span class="email-subject">[syzbot] [kvmarm?] kernel BUG in kvm_s2_put_page</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: syzbot <span class="email-sender">&lt;syzbot+c41f3ddb8299a30a98b5@syzkaller.appspotmail.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-19]</span> <span class="email-subject">Re: [syzbot] [kvmarm?] kernel BUG in kvm_s2_put_page</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
                </div>
            </div>
        </div>

        <div class="category">
            <h2>GIT PULL</h2>

            <div class="thread">
                <div class="thread-header">
                    <h3>[GIT PULL] KVM/arm64 changes for 6.17, round #3</h3>
                </div>

                <div class="thread-meta">
                    <span>2 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-09-17</span>
                </div>

                <div class="ai-summary">
                    该邮件列表讨论的主题是关于 KVM/arm64 在 6.17 版本中的变更，主要涉及补丁的提交和管理。参与者 Oliver Upton 和 Paolo Bonzini 讨论了在补丁标签中遗漏了关于撤销（reverts）的说明，Oliver 表达了感谢，并表示将会在自己的标签中加入相关说明。Paolo 也承认这是他标签中的一个无意遗漏，并对此表示感谢。<br><br>关键技术要点包括：补丁管理中的标签准确性和撤销操作的重要性，确保开发者在提交补丁时能够清晰地了解变更的背景和历史。 <br><br>讨论的结论是，双方达成共识，Oliver 将在其标签中添加关于撤销的说明，以避免未来的混淆。这一问题的解决有助于提升补丁管理的透明度和准确性。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-17]</span> <span class="email-subject">Re: [GIT PULL] KVM/arm64 changes for 6.17, round #3</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Paolo Bonzini <span class="email-sender">&lt;pbonzini@redhat.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-17]</span> <span class="email-subject">Re: [GIT PULL] KVM/arm64 changes for 6.17, round #3</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
                </div>
            </div>
        </div>

        <div class="category">
            <h2>Other</h2>

            <div class="thread">
                <div class="thread-header">
                    <h3>[kvm-unit-tests PATCH v2 0/4] Better backtraces for leaf functions</h3>
                </div>

                <div class="thread-meta">
                    <span>6 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-09-15</span>
                </div>

                <div class="ai-summary">
                    本邮件线程主要讨论了针对 KVM 单元测试中叶子函数（leaf functions）回溯（backtrace）改进的补丁。Mathias Krause 提出了 v2 版本的补丁，旨在解决 ARM 和 ARM64 架构中叶子函数缺乏适当栈帧设置导致的回溯问题。补丁引入了“晚期 CFLAGS”（late CFLAGS）的概念，以确保在所有其他可选标志处理后再添加特定的编译选项，从而改善回溯信息的准确性。<br><br>关键技术要点包括：<br>1. 通过强制编译器为叶子函数生成栈帧，改善回溯信息，使得在发生错误时可以追踪到调用者。<br>2. 对于 ARM 架构，使用 `-mapcs-frame` 选项来生成 APCS 栈帧布局，以便可靠地进行栈遍历。<br>3. 针对 x86 架构，利用伪剖析（fake profiling）技术来确保生成栈帧。<br><br>讨论的主要结论是，补丁已获得 Andrew Jones 的审核和测试认可，表明其在 ARM 和 ARM64 架构上的修复有效。然而，仍需关注 Clang 对 ARM 的支持问题，当前补丁可能无法完全解决该平台的所有兼容性问题。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-15]</span> <span class="email-subject">[kvm-unit-tests PATCH v2 0/4] Better backtraces for leaf functions</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mathias Krause <span class="email-sender">&lt;minipli@grsecurity.net&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-15]</span> <span class="email-subject">[kvm-unit-tests PATCH v2 1/4] Makefile: Provide a concept of late CFLAGS</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mathias Krause <span class="email-sender">&lt;minipli@grsecurity.net&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-15]</span> <span class="email-subject">[kvm-unit-tests PATCH v2 2/4] x86: Better backtraces for leaf functions</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mathias Krause <span class="email-sender">&lt;minipli@grsecurity.net&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-15]</span> <span class="email-subject">[kvm-unit-tests PATCH v2 3/4] arm64: Better backtraces for leaf functions</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mathias Krause <span class="email-sender">&lt;minipli@grsecurity.net&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-15]</span> <span class="email-subject">[kvm-unit-tests PATCH v2 4/4] arm: Fix backtraces involving leaf functions</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mathias Krause <span class="email-sender">&lt;minipli@grsecurity.net&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-16]</span> <span class="email-subject">Re: [kvm-unit-tests PATCH v2 0/4] Better backtraces for leaf
 functions</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Andrew Jones <span class="email-sender">&lt;andrew.jones@linux.dev&gt;</span></div>
                </div>
            </div>
        </div>

    </div>
</body>
</html>
