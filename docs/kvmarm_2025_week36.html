<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KVMARM 邮件列表 AI 总结报告</title>
    <style>
        body {
            font-family: 'Courier New', 'Courier', monospace;
            line-height: 1.5;
            max-width: 1200px;
            margin: 0 auto;
            padding: 30px 40px;
            background-color: #ffffff;
            color: #222;
        }
        .container {
            background: #ffffff;
        }
        h1 {
            font-size: 2.2em;
            font-weight: bold;
            color: #000;
            margin-bottom: 0.3em;
            text-align: center;
            border-bottom: 2px solid #000;
            padding-bottom: 15px;
        }
        h2 {
            font-size: 1.6em;
            font-weight: bold;
            color: #000;
            margin-top: 2em;
            margin-bottom: 0.6em;
            border-bottom: 1px solid #333;
            padding-bottom: 8px;
        }
        h3 {
            font-size: 1.2em;
            font-weight: bold;
            color: #111;
            margin-top: 1.5em;
            margin-bottom: 0.5em;
        }
        h4 {
            font-size: 1.05em;
            font-weight: bold;
            color: #333;
            margin-top: 1.2em;
            margin-bottom: 0.5em;
        }
        .meta-info {
            background: #f9f9f9;
            border: 1px solid #ddd;
            padding: 15px 20px;
            margin: 20px 0;
            font-size: 0.95em;
            line-height: 1.6;
        }
        .meta-info p {
            margin: 6px 0;
            color: #444;
        }
        .meta-info strong {
            color: #000;
            font-weight: bold;
        }
        .stats {
            display: table;
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            border: 1px solid #000;
        }
        .stat-card {
            display: table-cell;
            border: 1px solid #000;
            padding: 12px 15px;
            text-align: center;
            background: #fafafa;
        }
        .stat-card h3 {
            margin: 0;
            color: #000;
            font-size: 1.8em;
            font-weight: bold;
            border: none;
            padding: 0;
        }
        .stat-card p {
            margin: 5px 0 0 0;
            color: #444;
            font-size: 0.9em;
            font-weight: normal;
        }
        .category {
            margin: 30px 0;
        }
        .thread {
            margin: 25px 0;
            padding: 15px;
            background: #fafafa;
            border: 1px solid #ccc;
            page-break-inside: avoid;
        }
        .thread-header {
            margin-bottom: 12px;
            border-bottom: 1px solid #ddd;
            padding-bottom: 10px;
        }
        .thread-header h3 {
            font-size: 1.15em;
            font-weight: bold;
            color: #000;
            margin: 0;
        }
        .thread-meta {
            display: block;
            margin: 8px 0 12px 0;
            font-size: 0.9em;
            color: #555;
            font-style: italic;
        }
        .thread-meta span {
            margin-right: 15px;
        }
        .ai-summary {
            background: #fff;
            border-left: 3px solid #666;
            padding: 12px 15px;
            margin: 15px 0;
            line-height: 1.6;
            color: #222;
            font-style: italic;
        }
        .email-list {
            background: #fff;
            border: 1px solid #ccc;
            padding: 10px 15px;
            font-family: 'Courier New', 'Consolas', monospace;
            font-size: 0.88em;
            line-height: 1.5;
            overflow-x: auto;
            margin: 10px 0;
        }
        .email-item {
            margin: 4px 0;
            padding: 2px 0;
            color: #222;
        }
        .email-date {
            color: #0066cc;
            font-weight: bold;
        }
        .email-sender {
            color: #c30;
            font-weight: normal;
        }
        .email-subject {
            color: #000;
        }
        .archive-link {
            display: inline-block;
            margin: 15px 0;
            padding: 10px 20px;
            background: #333;
            color: #fff;
            text-decoration: none;
            border: 2px solid #000;
            font-weight: bold;
            transition: all 0.2s;
        }
        .archive-link:hover {
            background: #000;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>KVMARM Mailing List Analysis Report</h1>

        <div class="meta-info">
            <p><strong>Generated:</strong> 2025-10-21 19:57</p>
            <p><strong>Time Period:</strong> 2025年9月 第36周 (09/01 - 09/07)</p>
            <p><strong>Total Messages:</strong> 170 | <strong>Total Threads:</strong> 49</p>
            <p style="text-align: center;"><a href="archive.html" class="archive-link">📚 历史归档 Archive</a></p>
        </div>


        <div class="category">
            <h2>PATCH</h2>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v8 00/29] KVM: arm64: Implement support for SME</h3>
                </div>

                <div class="thread-meta">
                    <span>30 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-09-02</span>
                </div>

                <div class="ai-summary">
                    本邮件线程主要讨论了针对 KVM（内核虚拟机）在 ARM64 架构上实现对 SME（可扩展矩阵扩展）的支持的补丁系列。该补丁系列包含 29 个补丁，重点在于如何在 KVM 中有效管理 SME 的状态和相关寄存器。<br><br>关键技术要点包括：<br>1. SME 引入了新的向量长度和控制寄存器，允许在非保护的 KVM 客户端中使用 SME。<br>2. 通过 SVCR 和 SMCR 寄存器管理 SME 的状态，确保在不同模式下（如流式模式）正确处理寄存器访问。<br>3. SME 的实现与 SVE（可扩展向量扩展）有许多相似之处，但也引入了新的挑战，如如何处理寄存器的可访问性和状态管理。<br><br>讨论的主要结论包括：<br>- 需要在 KVM 中实现对 SME 的完整支持，包括对新寄存器的访问控制和状态保存机制。<br>- 由于 SME 和 SVE 的寄存器配置存在重叠，决定将两者的最终化过程合并，以简化实现并避免复杂性。<br>- 目前 SME 的优先级管理功能尚未支持，未来可能会根据实际需求进行扩展。<br><br>待解决的问题包括如何在不同的虚拟化环境中有效管理 SME 的状态，以及如何处理可能出现的异常和寄存器访问冲突。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-02]</span> <span class="email-subject">[PATCH v8 00/29] KVM: arm64: Implement support for SME</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-02]</span> <span class="email-subject">[PATCH v8 01/29] arm64/sysreg: Update SMIDR_EL1 to DDI0601 2025-06</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-02]</span> <span class="email-subject">[PATCH v8 02/29] arm64/fpsimd: Update FA64 and ZT0 enables when
 loading SME state</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-02]</span> <span class="email-subject">[PATCH v8 03/29] arm64/fpsimd: Decide to save ZT0 and streaming
 mode FFR at bind time</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-02]</span> <span class="email-subject">[PATCH v8 04/29] arm64/fpsimd: Check enable bit for FA64 when
 saving EFI state</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-02]</span> <span class="email-subject">[PATCH v8 05/29] arm64/fpsimd: Determine maximum virtualisable SME
 vector length</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-02]</span> <span class="email-subject">[PATCH v8 06/29] KVM: arm64: Introduce non-UNDEF FGT control</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-02]</span> <span class="email-subject">[PATCH v8 07/29] KVM: arm64: Pay attention to FFR parameter in SVE
 save and load</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-02]</span> <span class="email-subject">[PATCH v8 08/29] KVM: arm64: Pull ctxt_has_ helpers to start of
 sysreg-sr.h</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-02]</span> <span class="email-subject">[PATCH v8 09/29] KVM: arm64: Move SVE state access macros after
 feature test macros</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-02]</span> <span class="email-subject">[PATCH v8 10/29] KVM: arm64: Rename SVE finalization constants to
 be more general</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-02]</span> <span class="email-subject">[PATCH v8 11/29] KVM: arm64: Document the KVM ABI for SME</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-02]</span> <span class="email-subject">[PATCH v8 12/29] KVM: arm64: Define internal features for SME</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-02]</span> <span class="email-subject">[PATCH v8 13/29] KVM: arm64: Rename sve_state_reg_region</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-02]</span> <span class="email-subject">[PATCH v8 14/29] KVM: arm64: Store vector lengths in an array</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-02]</span> <span class="email-subject">[PATCH v8 15/29] KVM: arm64: Implement SME vector length
 configuration</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-02]</span> <span class="email-subject">[PATCH v8 16/29] KVM: arm64: Support SME control registers</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-02]</span> <span class="email-subject">[PATCH v8 17/29] KVM: arm64: Support TPIDR2_EL0</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-02]</span> <span class="email-subject">[PATCH v8 18/29] KVM: arm64: Support SME identification registers
 for guests</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-02]</span> <span class="email-subject">[PATCH v8 19/29] KVM: arm64: Support SME priority registers</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-02]</span> <span class="email-subject">[PATCH v8 20/29] KVM: arm64: Provide assembly for SME register
 access</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-02]</span> <span class="email-subject">[PATCH v8 21/29] KVM: arm64: Support userspace access to streaming
 mode Z and P registers</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-02]</span> <span class="email-subject">[PATCH v8 22/29] KVM: arm64: Flush register state on writes to
 SVCR.SM and SVCR.ZA</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-02]</span> <span class="email-subject">[PATCH v8 23/29] KVM: arm64: Expose SME specific state to
 userspace</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-02]</span> <span class="email-subject">[PATCH v8 24/29] KVM: arm64: Context switch SME state for guests</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-02]</span> <span class="email-subject">[PATCH v8 25/29] KVM: arm64: Handle SME exceptions</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-02]</span> <span class="email-subject">[PATCH v8 26/29] KVM: arm64: Expose SME to nested guests</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-02]</span> <span class="email-subject">[PATCH v8 27/29] KVM: arm64: Provide interface for configuring and
 enabling SME for guests</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-02]</span> <span class="email-subject">[PATCH v8 28/29] KVM: arm64: selftests: Add SME system registers
 to get-reg-list</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-02]</span> <span class="email-subject">[PATCH v8 29/29] KVM: arm64: selftests: Add SME to set_id_regs
 test</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH 0/5] KVM: arm64: vgic-v3: Fix yet another lock ordering turd</h3>
                </div>

                <div class="thread-meta">
                    <span>13 messages</span>
                    <span>3 participants</span>
                    <span>Started: 2025-09-03</span>
                </div>

                <div class="ai-summary">
                    本邮件线程主要讨论了针对 KVM 的 arm64 架构中的 VGIC v3 组件的锁定顺序问题，尤其是解决了在处理 LPI（本地外部中断）时出现的锁定错误。Oliver Upton 提出了一个补丁系列，共五个补丁，旨在修复由于在原始自旋锁内嵌套普通自旋锁而引发的锁定问题。<br><br>关键技术要点包括：<br>1. 通过将 xarray 的修改延迟到 ap_list_lock 临界区外，避免了在不当上下文中持有锁的情况。<br>2. 将对 LPI 的引用计数从 krefs 改为常规的 refcount，以便为 LPI 提供更有意义的释放概念。<br>3. 通过引入一个新的释放机制，确保在释放 LPI 时不会导致双重释放的问题。<br><br>讨论的主要结论是，虽然补丁解决了当前的锁定问题，但仍需注意 LPI 的状态管理，确保在处理中断时不会引入新的错误。此外，参与者们对补丁的实现细节进行了审查和讨论，确保其在功能上是合理的，并提出了一些小的修正建议。整体来看，补丁系列得到了积极的反馈，并被认为是向更稳定的实现迈出了一步。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-03]</span> <span class="email-subject">[PATCH 0/5] KVM: arm64: vgic-v3: Fix yet another lock ordering turd</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-03]</span> <span class="email-subject">[PATCH 1/5] KVM: arm64: vgic-v3: Use bare refcount for VGIC LPIs</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-03]</span> <span class="email-subject">[PATCH 2/5] KVM: arm64: Spin off release helper from vgic_put_irq()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-03]</span> <span class="email-subject">[PATCH 3/5] KVM: arm64: vgic-v3: Erase LPIs from xarray outside of raw spinlocks</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-03]</span> <span class="email-subject">[PATCH 4/5] KVM: arm64: vgic-v3: Don't require IRQs be disabled for LPI xarray lock</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-03]</span> <span class="email-subject">[PATCH 5/5] KVM: arm64: vgic-v3: Indicate vgic_put_irq() may take LPI xarray lock</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-04]</span> <span class="email-subject">Re: [PATCH 5/5] KVM: arm64: vgic-v3: Indicate vgic_put_irq() may
 take LPI xarray lock</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-04]</span> <span class="email-subject">Re: [PATCH 5/5] KVM: arm64: vgic-v3: Indicate vgic_put_irq() may take
 LPI xarray lock</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Ben Horgan <span class="email-sender">&lt;ben.horgan@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-05]</span> <span class="email-subject">Re: [PATCH 3/5] KVM: arm64: vgic-v3: Erase LPIs from xarray outside
 of raw spinlocks</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-05]</span> <span class="email-subject">Re: [PATCH 3/5] KVM: arm64: vgic-v3: Erase LPIs from xarray outside of raw spinlocks</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-05]</span> <span class="email-subject">Re: [PATCH 4/5] KVM: arm64: vgic-v3: Don't require IRQs be disabled for LPI xarray lock</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-05]</span> <span class="email-subject">Re: [PATCH 0/5] KVM: arm64: vgic-v3: Fix yet another lock ordering turd</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-05]</span> <span class="email-subject">Re: [PATCH 4/5] KVM: arm64: vgic-v3: Don't require IRQs be disabled
 for LPI xarray lock</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v8 00/12] perf: arm_spe: Armv8.8 SPE features</h3>
                </div>

                <div class="thread-meta">
                    <span>13 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-09-01</span>
                </div>

                <div class="ai-summary">
                    本邮件线程讨论了针对 ARM 架构的性能监控扩展（SPE）新特性的补丁，主要集中在 Armv8.8 SPE 特性上，包括 FEAT_SPEv1p4、FEAT_SPE_EFT 和 FEAT_SPE_FDS。这些特性引入了新的过滤功能，允许用户对性能事件进行更细致的控制。<br><br>关键技术要点包括：<br>1. **FEAT_SPEv1p4**：引入新的过滤位，允许更灵活的事件过滤。<br>2. **FEAT_SPE_EFT**：扩展现有的加载、存储和分支过滤，增加了对 SIMD 和浮点操作的支持，并允许使用掩码位进行 AND 过滤。<br>3. **FEAT_SPE_FDS**：增加了数据源过滤功能，允许用户根据数据源 ID 进行过滤，使用新的配置字段 `config4`。<br><br>讨论的主要结论是，补丁已通过多位开发者的测试和审核，且在实现过程中解决了多个版本兼容性问题。待解决的问题包括确保所有新特性在不同硬件上的兼容性，以及完善文档以清晰说明新特性的使用方法。整体来看，这些补丁将显著增强 ARM SPE 的功能性和灵活性。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-01]</span> <span class="email-subject">[PATCH v8 00/12] perf: arm_spe: Armv8.8 SPE features</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: James Clark <span class="email-sender">&lt;james.clark@linaro.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-01]</span> <span class="email-subject">[PATCH v8 01/12] arm64: sysreg: Add new PMSFCR_EL1 fields and
 PMSDSFR_EL1 register</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: James Clark <span class="email-sender">&lt;james.clark@linaro.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-01]</span> <span class="email-subject">[PATCH v8 02/12] perf: arm_spe: Support FEAT_SPEv1p4 filters</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: James Clark <span class="email-sender">&lt;james.clark@linaro.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-01]</span> <span class="email-subject">[PATCH v8 03/12] perf: arm_spe: Expose event filter</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: James Clark <span class="email-sender">&lt;james.clark@linaro.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-01]</span> <span class="email-subject">[PATCH v8 04/12] perf: arm_spe: Add support for FEAT_SPE_EFT
 extended filtering</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: James Clark <span class="email-sender">&lt;james.clark@linaro.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-01]</span> <span class="email-subject">[PATCH v8 05/12] arm64/boot: Factor out a macro to check SPE
 version</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: James Clark <span class="email-sender">&lt;james.clark@linaro.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-01]</span> <span class="email-subject">[PATCH v8 06/12] arm64/boot: Enable EL2 requirements for
 SPE_FEAT_FDS</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: James Clark <span class="email-sender">&lt;james.clark@linaro.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-01]</span> <span class="email-subject">[PATCH v8 07/12] KVM: arm64: Add trap configs for PMSDSFR_EL1</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: James Clark <span class="email-sender">&lt;james.clark@linaro.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-01]</span> <span class="email-subject">[PATCH v8 08/12] perf: Add perf_event_attr::config4</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: James Clark <span class="email-sender">&lt;james.clark@linaro.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-01]</span> <span class="email-subject">[PATCH v8 09/12] perf: arm_spe: Add support for filtering on data
 source</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: James Clark <span class="email-sender">&lt;james.clark@linaro.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-01]</span> <span class="email-subject">[PATCH v8 10/12] tools headers UAPI: Sync linux/perf_event.h with
 the kernel sources</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: James Clark <span class="email-sender">&lt;james.clark@linaro.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-01]</span> <span class="email-subject">[PATCH v8 11/12] perf tools: Add support for
 perf_event_attr::config4</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: James Clark <span class="email-sender">&lt;james.clark@linaro.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-01]</span> <span class="email-subject">[PATCH v8 12/12] perf docs: arm-spe: Document new SPE filtering
 features</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: James Clark <span class="email-sender">&lt;james.clark@linaro.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v2 0/6] KVM: arm64: vgic-v3: Fix yet another lock ordering turd</h3>
                </div>

                <div class="thread-meta">
                    <span>8 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-09-05</span>
                </div>

                <div class="ai-summary">
                    本邮件线程主要讨论了针对 KVM（Kernel-based Virtual Machine）在 arm64 架构下的 vgic-v3（虚拟通用中断控制器）的一系列补丁，目的是修复锁的排序问题。参与者 Oliver Upton 提出了六个补丁，主要内容包括：<br><br>1. **补丁内容**：<br>   - 删除了关于 IRQ 活动状态的过时注释。<br>   - 将 LPI（本地中断）管理中的 kref 引用计数替换为普通的 refcount，以简化管理。<br>   - 将 vgic_put_irq() 的释放逻辑拆分为单独的辅助函数，以改善锁的排序。<br>   - 在不使用原始自旋锁的情况下，从 xarray 中删除 LPI。<br>   - 放宽对 LPI xarray 锁的要求，不再需要禁用 IRQ。<br>   - 明确指示 vgic_put_irq() 可能会获取 LPI xarray 锁。<br><br>2. **关键技术要点**：<br>   - 通过将 LPI 的释放逻辑与 ap_list_lock 解耦，解决了锁的嵌套问题。<br>   - 采用 RCU（读-复制-更新）保护机制来管理 LPI xarray 的读操作，避免在 IRQ 禁用的上下文中进行写操作。<br>   - 通过标记待释放的 LPI，避免了与 vgic_put_irq() 的竞争，确保安全释放。<br><br>3. **讨论结论与待解决问题**：<br>   - 所有补丁已被应用并确认有效，提升了代码的可维护性和安全性。<br>   - 未来可能需要进一步监测 LPI 释放路径的使用情况，以确保没有潜在的锁排序问题。<br><br>整体而言，这些补丁有效地解决了 KVM 中 LPI 管理的锁定问题，提高了系统的稳定性和性能。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-05]</span> <span class="email-subject">[PATCH v2 0/6] KVM: arm64: vgic-v3: Fix yet another lock ordering turd</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-05]</span> <span class="email-subject">[PATCH v2 1/6] KVM: arm64: vgic: Drop stale comment on IRQ active state</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-05]</span> <span class="email-subject">[PATCH v2 2/6] KVM: arm64: vgic-v3: Use bare refcount for VGIC LPIs</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-05]</span> <span class="email-subject">[PATCH v2 3/6] KVM: arm64: Spin off release helper from vgic_put_irq()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-05]</span> <span class="email-subject">[PATCH v2 4/6] KVM: arm64: vgic-v3: Erase LPIs from xarray outside of raw spinlocks</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-05]</span> <span class="email-subject">[PATCH v2 5/6] KVM: arm64: vgic-v3: Don't require IRQs be disabled for LPI xarray lock</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-05]</span> <span class="email-subject">[PATCH v2 6/6] KVM: arm64: vgic-v3: Indicate vgic_put_irq() may take LPI xarray lock</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-05]</span> <span class="email-subject">Re: [PATCH v2 0/6] KVM: arm64: vgic-v3: Fix yet another lock ordering turd</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v5 03/12] mm: introduce AS_NO_DIRECT_MAP</h3>
                </div>

                <div class="thread-meta">
                    <span>8 messages</span>
                    <span>3 participants</span>
                    <span>Started: 2025-09-01</span>
                </div>

                <div class="ai-summary">
                    该邮件线程主要讨论了一个补丁内容，即在 Linux 内核的内存管理模块中引入 `AS_NO_DIRECT_MAP` 的相关实现。参与者们围绕代码中参数的 `const` 修饰符展开了讨论，尤其是在函数调用时，如何确保参数的 `const` 属性能够正确传递和使用。<br><br>关键技术要点包括：<br>1. 讨论了在函数 `mapping_no_direct_map` 和 `vma_is_no_direct_map` 中，如何处理 `const` 参数的问题。`vma_is_no_direct_map` 函数接受一个 `const` 类型的参数，但其调用的 `mapping_no_direct_map` 函数并没有声明参数为 `const`，这可能导致潜在的代码可读性和维护性问题。<br>2. 参与者一致认为，保持一致的 `const` 使用是重要的，以避免在调试时出现混淆。<br><br>讨论的结论是，尽管当前编译器没有报错，但为了代码的清晰性和未来的可维护性，建议在相关函数中使用 `const` 修饰符。此外，参与者们提到可能需要工具（如 sparse）来检测此类潜在问题，以提高代码质量。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-01]</span> <span class="email-subject">Re: [PATCH v5 03/12] mm: introduce AS_NO_DIRECT_MAP</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Roy, Patrick <span class="email-sender">&lt;roypat@amazon.co.uk&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-01]</span> <span class="email-subject">Re: [PATCH v5 03/12] mm: introduce AS_NO_DIRECT_MAP</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Roy, Patrick <span class="email-sender">&lt;roypat@amazon.co.uk&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-02]</span> <span class="email-subject">Re: [PATCH v5 03/12] mm: introduce AS_NO_DIRECT_MAP</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Fuad Tabba <span class="email-sender">&lt;tabba@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-02]</span> <span class="email-subject">Re: [PATCH v5 03/12] mm: introduce AS_NO_DIRECT_MAP</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: David Hildenbrand <span class="email-sender">&lt;david@redhat.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-02]</span> <span class="email-subject">Re: [PATCH v5 03/12] mm: introduce AS_NO_DIRECT_MAP</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Fuad Tabba <span class="email-sender">&lt;tabba@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-02]</span> <span class="email-subject">Re: [PATCH v5 03/12] mm: introduce AS_NO_DIRECT_MAP</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Roy, Patrick <span class="email-sender">&lt;roypat@amazon.co.uk&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-02]</span> <span class="email-subject">Re: [PATCH v5 03/12] mm: introduce AS_NO_DIRECT_MAP</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Fuad Tabba <span class="email-sender">&lt;tabba@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-02]</span> <span class="email-subject">Re: [PATCH v5 03/12] mm: introduce AS_NO_DIRECT_MAP</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: David Hildenbrand <span class="email-sender">&lt;david@redhat.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v2 0/2] KVM: arm64: VHE: Debug fixes</h3>
                </div>

                <div class="thread-meta">
                    <span>7 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-09-02</span>
                </div>

                <div class="ai-summary">
                    本邮件线程主要讨论了针对 KVM（Kernel-based Virtual Machine）在 ARM64 架构下的 VHE（Virtualization Host Extensions）模式的调试修复补丁。该补丁包含两个主要内容：一是初始化 PMSCR_EL1 寄存器以避免在进入虚拟机时意外启用性能分析，二是正确保存和恢复主机的 MDCR_EL2 寄存器值。<br><br>关键技术要点包括：<br>1. PMSCR_EL1 寄存器的 E1SPE 和 E0SPE 字段在 KVM 运行时未被清零，可能导致虚拟机意外启用性能分析。补丁通过在 KVM 初始化时清零 PMSCR_EL1 来确保行为的一致性和可预测性。<br>2. 在之前的提交中，主机的 MDCR_EL2 寄存器未被正确保存，导致在虚拟机加载和卸载时出现问题。补丁通过在加载虚拟机时保存主机的 MDCR_EL2 值，并在卸载时恢复，解决了这一问题。<br><br>讨论的结论是，补丁已被确认并应用于修复中，参与者对代码组织提出了改进建议，计划在后续迭代中进行调整。整体来看，此次讨论有效地解决了 KVM 在 VHE 模式下的调试问题，提升了系统的稳定性与可靠性。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-02]</span> <span class="email-subject">[PATCH v2 0/2] KVM: arm64: VHE: Debug fixes</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Alexandru Elisei <span class="email-sender">&lt;alexandru.elisei@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-02]</span> <span class="email-subject">[PATCH v2 1/2] KVM: arm64: VHE: Initialize PMSCR_EL1</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Alexandru Elisei <span class="email-sender">&lt;alexandru.elisei@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-02]</span> <span class="email-subject">[PATCH v2 2/2] KVM: arm64: VHE: Save and restore host MDCR_EL2 value correctly</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Alexandru Elisei <span class="email-sender">&lt;alexandru.elisei@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-03]</span> <span class="email-subject">Re: [PATCH v2 1/2] KVM: arm64: VHE: Initialize PMSCR_EL1</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-03]</span> <span class="email-subject">Re: [PATCH v2 2/2] KVM: arm64: VHE: Save and restore host MDCR_EL2
 value correctly</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-04]</span> <span class="email-subject">Re: [PATCH v2 1/2] KVM: arm64: VHE: Initialize PMSCR_EL1</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Alexandru Elisei <span class="email-sender">&lt;alexandru.elisei@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-05]</span> <span class="email-subject">Re: [PATCH v2 0/2] KVM: arm64: VHE: Debug fixes</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH] KVM: arm64: Fix NULL pointer access issue</h3>
                </div>

                <div class="thread-meta">
                    <span>7 messages</span>
                    <span>4 participants</span>
                    <span>Started: 2025-09-01</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主题是针对 KVM（Kernel-based Virtual Machine）在 arm64 架构上的一个 NULL 指针访问问题的修复。参与者主要讨论了在 KVM 初始化过程中，如何确保在访问 per-CPU 数据之前进行必要的初始化，以避免潜在的崩溃。<br><br>技术要点包括：<br>1. Yingchao Deng 提出了一个补丁，增加了对 `is_kvm_arm_initialised()` 的检查，以确保 KVM 初始化完成后再进行数据访问。<br>2. 讨论中提到，当前的实现可能在未初始化时导致崩溃，特别是在调用 `kvm_enable_trbe()` 等函数时。<br>3. Marc Zyngier 和 James Clark 建议将警告条件移至函数的开头，以提高代码可读性，并确保在未初始化的情况下函数能够静默跳过。<br><br>讨论的结论是，补丁需要在代码中进行小幅调整，以改善可读性并确保在 KVM 未初始化时不会触发崩溃。Yingchao 表示将根据反馈更新补丁。整体上，邮件讨论聚焦于增强 KVM 的稳定性和安全性。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-01]</span> <span class="email-subject">[PATCH] KVM: arm64: Fix NULL pointer access issue</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Yingchao Deng <span class="email-sender">&lt;yingchao.deng@oss.qualcomm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-01]</span> <span class="email-subject">Re: [PATCH] KVM: arm64: Fix NULL pointer access issue</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: James Clark <span class="email-sender">&lt;james.clark@linaro.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-01]</span> <span class="email-subject">Re: [PATCH] KVM: arm64: Fix NULL pointer access issue</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-01]</span> <span class="email-subject">Re: [PATCH] KVM: arm64: Fix NULL pointer access issue</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: James Clark <span class="email-sender">&lt;james.clark@linaro.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-01]</span> <span class="email-subject">Re: [PATCH] KVM: arm64: Fix NULL pointer access issue</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-01]</span> <span class="email-subject">Re: [PATCH] KVM: arm64: Fix NULL pointer access issue</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: James Clark <span class="email-sender">&lt;james.clark@linaro.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-02]</span> <span class="email-subject">Re: [PATCH] KVM: arm64: Fix NULL pointer access issue</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Yingchao Deng (Consultant) <span class="email-sender">&lt;quic_yingdeng@quicinc.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v4 2/5] arm64: initialise SCTLR2_ELx register at boot time</h3>
                </div>

                <div class="thread-meta">
                    <span>6 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-09-01</span>
                </div>

                <div class="ai-summary">
                    此次邮件讨论的主要技术问题是关于在启动时初始化 ARM64 架构的 SCTLR2_ELx 寄存器的补丁。参与者 Dave Martin 和 Yeoreum Yun 主要探讨了如何正确设置和检查该寄存器的值，以确保在不同的异常级别（EL）下的正确性。<br><br>关键技术要点包括：<br>1. 讨论了在汇编代码中如何使用条件宏来处理不同的 EL 值，确保在设置寄存器时不会出现错误。<br>2. Yeoreum 提到在 init_kernel_el() 和 finalise_el2() 之间，内核会修改 SCTLR_EL1/SCTLR2_EL1，因此在最终切换到 EL2 时，需要初始化这些寄存器以避免潜在错误。<br>3. Dave 提出，虽然当前代码只关注 SCTLR2_EL1，但可能在未来需要处理其他寄存器的初始化。<br><br>讨论的结论是，虽然当前的补丁是基于对 SCTLR2_ELx 可能会在此期间被修改的假设，但仍需确认是否有必要对所有相关寄存器进行清理和初始化。此外，Yeoreum 也意识到在 KVM 启动时未重置系统寄存器的问题，强调了 KVM 在管理 EL1 寄存器状态方面的责任。整体来看，邮件讨论围绕如何确保在不同异常级别下寄存器的正确初始化和管理展开，强调了对潜在错误的防范。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-01]</span> <span class="email-subject">Re: [PATCH v4 2/5] arm64: initialise SCTLR2_ELx register at boot time</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Dave Martin <span class="email-sender">&lt;Dave.Martin@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-01]</span> <span class="email-subject">Re: [PATCH v4 2/5] arm64: initialise SCTLR2_ELx register at boot time</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Yeoreum Yun <span class="email-sender">&lt;yeoreum.yun@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-02]</span> <span class="email-subject">Re: [PATCH v4 2/5] arm64: initialise SCTLR2_ELx register at boot time</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Dave Martin <span class="email-sender">&lt;Dave.Martin@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-02]</span> <span class="email-subject">Re: [PATCH v4 2/5] arm64: initialise SCTLR2_ELx register at boot time</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Yeoreum Yun <span class="email-sender">&lt;yeoreum.yun@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-03]</span> <span class="email-subject">Re: [PATCH v4 2/5] arm64: initialise SCTLR2_ELx register at boot time</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Dave Martin <span class="email-sender">&lt;Dave.Martin@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-03]</span> <span class="email-subject">Re: [PATCH v4 2/5] arm64: initialise SCTLR2_ELx register at boot time</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Yeoreum Yun <span class="email-sender">&lt;yeoreum.yun@arm.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH V3 0/2] arm64/sysreg: Clean up TCR_EL1 field macros</h3>
                </div>

                <div class="thread-meta">
                    <span>6 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-09-01</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主要内容是对 ARM64 架构中 TCR_EL1 寄存器字段宏的清理和重构。参与者 Anshuman Khandual 提出了两个补丁，旨在将分散在 ARM64 平台代码和 KVM 实现中的 TCR_EL1 字段宏整合到 KVM 头文件中，以便于后续使用，并确保不引入功能性变化。<br><br>关键技术要点包括：<br>1. 将 TCR_EL1 的字段宏从 `asm/pgtable-hwdef.h` 移动到 `asm/kvm_arm.h`，以便在 KVM 中继续使用。<br>2. 更新 TCR_EL1 寄存器字段的定义，以符合最新的 ARM 文档（DDI 0487 L.B）。<br>3. 清理冗余的 sysreg 定义，并确保所有宏在 KVM 中的使用保持一致。<br><br>讨论的主要结论是，虽然目前的清理工作没有引入功能性变化，但在宏定义的表达方式上存在一些争议，特别是关于是否需要在宏中包含 "EL1" 的前缀。Ben Horgan 提出了一些具体的宏定义问题，Anshuman 同意进行相应的修改，以确保宏的正确性和一致性。整体来看，讨论集中在代码整洁性和准确性上，未来的工作将继续关注这些宏的使用和定义。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-01]</span> <span class="email-subject">[PATCH V3 0/2] arm64/sysreg: Clean up TCR_EL1 field macros</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Anshuman Khandual <span class="email-sender">&lt;anshuman.khandual@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-01]</span> <span class="email-subject">[PATCH V3 1/2] arm64/sysreg: Update TCR_EL1 register</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Anshuman Khandual <span class="email-sender">&lt;anshuman.khandual@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-01]</span> <span class="email-subject">[PATCH V3 2/2] arm64/sysreg: Replace TCR_EL1 field macros</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Anshuman Khandual <span class="email-sender">&lt;anshuman.khandual@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-01]</span> <span class="email-subject">Re: [PATCH V3 2/2] arm64/sysreg: Replace TCR_EL1 field macros</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Ben Horgan <span class="email-sender">&lt;ben.horgan@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-01]</span> <span class="email-subject">Re: [PATCH V3 2/2] arm64/sysreg: Replace TCR_EL1 field macros</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Anshuman Khandual <span class="email-sender">&lt;anshuman.khandual@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-01]</span> <span class="email-subject">Re: [PATCH V3 2/2] arm64/sysreg: Replace TCR_EL1 field macros</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Anshuman Khandual <span class="email-sender">&lt;anshuman.khandual@arm.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v4 0/5] initialize SCTRL2_ELx</h3>
                </div>

                <div class="thread-meta">
                    <span>5 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-09-01</span>
                </div>

                <div class="ai-summary">
                    本邮件线程主要讨论了针对 SCTRL2_ELx 的初始化补丁（PATCH v4 0/5）。参与者 Yeoreum Yun 提出了该补丁，并在后续邮件中回应了 Dave Martin 的反馈。<br><br>关键技术要点包括：<br>1. Yeoreum Yun 已对补丁进行了多种测试，包括 pKVM、嵌套虚拟化和崩溃路径，确保补丁在这些场景下的有效性。<br>2. Dave Martin 提出，尽管补丁未导致内核崩溃，但仍需验证 SCTLR2_ELx 的初始化、保存、恢复和重置是否正确，尤其是在特定硬件功能被使用时。<br>3. Dave 还强调了在合并补丁之前，需确保所有代码路径都经过测试。<br><br>讨论的结论是，虽然补丁在当前状态下看似可行，但仍需进一步的测试以确保其在实际使用中的可靠性。Yeoreum Yun 表示已尽力进行测试，并确认了 SCTLR2_ELx 的值设置符合预期，建议将测试结果提交给维护者进行最终决定。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-01]</span> <span class="email-subject">Re: [PATCH v4 0/5] initialize SCTRL2_ELx</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Yeoreum Yun <span class="email-sender">&lt;yeoreum.yun@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-01]</span> <span class="email-subject">Re: [PATCH v4 0/5] initialize SCTRL2_ELx</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Dave Martin <span class="email-sender">&lt;Dave.Martin@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-01]</span> <span class="email-subject">Re: [PATCH v4 0/5] initialize SCTRL2_ELx</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Yeoreum Yun <span class="email-sender">&lt;yeoreum.yun@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-03]</span> <span class="email-subject">Re: [PATCH v4 0/5] initialize SCTRL2_ELx</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Dave Martin <span class="email-sender">&lt;Dave.Martin@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-03]</span> <span class="email-subject">Re: [PATCH v4 0/5] initialize SCTRL2_ELx</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Yeoreum Yun <span class="email-sender">&lt;yeoreum.yun@arm.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH] KVM: arm64: Only free fully unmapped tables in stage2_free_walker()</h3>
                </div>

                <div class="thread-meta">
                    <span>4 messages</span>
                    <span>3 participants</span>
                    <span>Started: 2025-09-04</span>
                </div>

                <div class="ai-summary">
                    在这次邮件讨论中，主要关注的是一个针对 KVM（Kernel-based Virtual Machine）在 arm64 架构下的补丁，旨在修复在 `stage2_free_walker()` 函数中出现的使用后释放（use-after-free）问题。该问题是由于对部分未映射的页表进行过早的 `put_page()` 操作引起的，导致了内存管理错误。<br><br>关键技术要点包括：补丁通过确保仅在页表引用计数为 1（即不再包含有效的页表条目）时才释放页表，从而避免了对部分未映射页表的错误释放。此外，补丁更新了 `stage2_free_walker()` 函数的逻辑，将其分为处理叶子节点和表后节点的不同函数，以提高代码的可读性和安全性。<br><br>讨论的结论是，该补丁经过了 Marc Zyngier 的审核和 Alexander Potapenko 的测试，最终被确认并应用到修复分支中。这表明该问题已得到解决，且补丁的实施得到了社区的认可。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-04]</span> <span class="email-subject">[PATCH] KVM: arm64: Only free fully unmapped tables in stage2_free_walker()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-05]</span> <span class="email-subject">Re: [PATCH] KVM: arm64: Only free fully unmapped tables in stage2_free_walker()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-05]</span> <span class="email-subject">Re: [PATCH] KVM: arm64: Only free fully unmapped tables in stage2_free_walker()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Alexander Potapenko <span class="email-sender">&lt;glider@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-05]</span> <span class="email-subject">Re: [PATCH] KVM: arm64: Only free fully unmapped tables in stage2_free_walker()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH] arm64: kvm: Fix incorrect VNCR invalidation range calculation</h3>
                </div>

                <div class="thread-meta">
                    <span>4 messages</span>
                    <span>3 participants</span>
                    <span>Started: 2025-09-03</span>
                </div>

                <div class="ai-summary">
                    该邮件线程主要讨论了针对 ARM64 KVM 的一个补丁，旨在修复 VNCR（虚拟网络控制寄存器）无效化范围计算中的错误。具体问题在于，现有代码在 `kvm_invalidate_vncr_ipa()` 和 `invalidate_vncr_va()` 函数中错误地使用了按位与运算符 `&` 与 `(size - 1)`，而应使用按位取反运算符 `~(size - 1)` 来对齐起始地址。这一错误可能导致过时的 VNCR TLB（翻译后备缓冲区）条目在 TLBI（翻译无效指令）或 MMU 通知后仍然有效，从而引发内存翻译错误和意外的来宾行为。<br><br>关键技术要点包括：<br>1. 补丁修正了地址对齐的计算方式，确保 VNCR 条目正确无效化。<br>2. 参与者对补丁进行了审查，提出了关于提交格式和作者信息一致性的建议。<br><br>讨论的主要结论是，补丁已获得 Marc Zyngier 的审核通过，但需要再次确认作者信息的准确性，并在提交时遵循更清晰的线程组织方式。待解决的问题包括确保补丁的作者签名与提交信息一致。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-03]</span> <span class="email-subject">[PATCH] arm64: kvm: Fix incorrect VNCR invalidation range calculation</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: p@sswd.pw <span class="email-sender">&lt;p@sswd.pw&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-04]</span> <span class="email-subject">Re: [PATCH] arm64: kvm: Fix incorrect VNCR invalidation range calculation</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-05]</span> <span class="email-subject">Re: [PATCH v2] KVM: arm64: nv: Fix incorrect VNCR invalidation range
 calculation</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-05]</span> <span class="email-subject">[PATCH v2] KVM: arm64: nv: Fix incorrect VNCR invalidation range calculation</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: p@sswd.pw <span class="email-sender">&lt;p@sswd.pw&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH] KVM: arm64: nested: Fix VA sign extension in VNCR/TLBI paths</h3>
                </div>

                <div class="thread-meta">
                    <span>4 messages</span>
                    <span>3 participants</span>
                    <span>Started: 2025-09-01</span>
                </div>

                <div class="ai-summary">
                    本邮件线程主要讨论了针对 KVM（内核虚拟机）在 arm64 架构下的嵌套虚拟化中，VNCR/TLBI 路径中虚拟地址（VA）符号扩展的问题。Gyujeong Jin 提出了一个补丁，指出当前的 VA 重构错误地使用了第 48 位作为符号位，而对于 48 位虚拟地址，正确的符号位应为第 47 位。这一错误可能导致负半部分地址的错误规范化，进而引发潜在的过期 VNCR 伪TLB 条目、错误的地址转换或权限问题，甚至可能导致拒绝服务（DoS）攻击。<br><br>关键技术要点包括：<br>1. VNCR_EL2 中的符号扩展处理不当，导致地址规范化错误。<br>2. 补丁通过修正符号扩展的位数来解决问题。<br><br>讨论中，Marc Zyngier 对补丁的某些论点提出质疑，要求更详细的解释，认为补丁的某些说法不够准确。Greg KH 则指出了补丁签名与邮件地址不匹配的问题，并提醒不要使用虚假邮件地址。<br><br>总体来看，虽然补丁提出了有效的修复方案，但仍需进一步澄清技术细节和解决讨论中提出的疑问。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-01]</span> <span class="email-subject">[PATCH] KVM: arm64: nested: Fix VA sign extension in VNCR/TLBI paths</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Gyujeong Jin <span class="email-sender">&lt;wlsrbwjd7232@gmail.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-01]</span> <span class="email-subject">Re: [PATCH] KVM: arm64: nested: Fix VA sign extension in VNCR/TLBI paths</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-01]</span> <span class="email-subject">Re: [PATCH] KVM: arm64: nested: Fix VA sign extension in VNCR/TLBI
 paths</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Greg KH <span class="email-sender">&lt;gregkh@linuxfoundation.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-01]</span> <span class="email-subject">Re: [PATCH] KVM: arm64: nested: Fix VA sign extension in VNCR/TLBI
 paths</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Greg KH <span class="email-sender">&lt;gregkh@linuxfoundation.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH V4 0/2] arm64/sysreg: Clean up TCR_EL1 field macros</h3>
                </div>

                <div class="thread-meta">
                    <span>3 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-09-07</span>
                </div>

                <div class="ai-summary">
                    该邮件线程讨论了对 ARM64 架构中 TCR_EL1 寄存器字段宏的清理和更新。Anshuman Khandual 提出了两个补丁，旨在将分散在 ARM64 平台代码（包括 KVM 实现）中的 TCR_EL1 字段宏进行整理，更新相关的寄存器字段定义，并将所有必要的 TCR_XXX 宏移至 KVM 头文件（asm/kvm_arm.h）中，以便于在 KVM 中继续使用。<br><br>关键技术要点包括：<br>1. 清理过程中，所有未使用的 TCR_XXX 宏被删除，确保代码的整洁性。<br>2. 更新后的 TCR_EL1 字段与最新的 ARM ARM DDI 0487 L.B 版本相匹配，确保与最新标准的一致性。<br>3. 通过使用工具 sysreg 变体字段替换原有的 TCR_EL1 字段宏，简化了代码结构。<br><br>讨论的主要结论是，此次清理不会引入功能性变化，但提高了代码的可维护性和一致性。待解决的问题主要是确保所有相关代码在更新后正常工作，并在未来的开发中继续保持代码的整洁性。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-07]</span> <span class="email-subject">[PATCH V4 0/2] arm64/sysreg: Clean up TCR_EL1 field macros</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Anshuman Khandual <span class="email-sender">&lt;anshuman.khandual@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-07]</span> <span class="email-subject">[PATCH V4 1/2] arm64/sysreg: Update TCR_EL1 register</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Anshuman Khandual <span class="email-sender">&lt;anshuman.khandual@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-07]</span> <span class="email-subject">[PATCH V4 2/2] arm64/sysreg: Replace TCR_EL1 field macros</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Anshuman Khandual <span class="email-sender">&lt;anshuman.khandual@arm.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v3 00/15] KVM: Introduce KVM Userfault</h3>
                </div>

                <div class="thread-meta">
                    <span>3 messages</span>
                    <span>3 participants</span>
                    <span>Started: 2025-09-04</span>
                </div>

                <div class="ai-summary">
                    本邮件线程主要讨论了 KVM Userfault 的补丁系列（PATCH v3 00/15），该功能旨在支持 Firecracker 中通过用户缺页处理（Userfault）从快照恢复基于 guest_memfd 的虚拟机。Nikita Kalyazin 提到希望尽快合并该系列补丁，以便在 Firecracker 中实现相关功能。<br><br>关键技术要点包括：<br>1. KVM Userfault 将成为处理虚拟机内存缺页的首个用户，支持从快照恢复虚拟机。<br>2. 当前的主要阻碍是 kvm_page_fault 相关的工作，参与者们需要对该 API 进行审查和确认。<br>3. James Houghton 表示他将尽快提供一些 QEMU 补丁，以展示 KVM Userfault 的有效性。<br><br>讨论的结论是，虽然目前存在一些技术阻碍，但参与者们对 KVM Userfault 的实现没有概念上的问题，大家需要进一步对接口进行对齐，以便推动该功能的合并和应用。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-04]</span> <span class="email-subject">Re: [PATCH v3 00/15] KVM: Introduce KVM Userfault</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Nikita Kalyazin <span class="email-sender">&lt;kalyazin@amazon.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-04]</span> <span class="email-subject">Re: [PATCH v3 00/15] KVM: Introduce KVM Userfault</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: James Houghton <span class="email-sender">&lt;jthoughton@google.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-05]</span> <span class="email-subject">Re: [PATCH v3 00/15] KVM: Introduce KVM Userfault</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH] KVM: arm64: nested: fix VNCR TLB ASID match logic for non-Global entries</h3>
                </div>

                <div class="thread-meta">
                    <span>3 messages</span>
                    <span>3 participants</span>
                    <span>Started: 2025-09-04</span>
                </div>

                <div class="ai-summary">
                    本邮件线程主要讨论了针对 KVM（内核虚拟机）在 arm64 架构下的一个补丁，旨在修复 VNCR TLB（Translation Lookaside Buffer）条目的 ASID（Address Space Identifier）匹配逻辑，特别是针对非全局条目。当前代码在 ASID 不匹配时错误地返回真值，导致有效条目被忽略，从而影响性能，并可能引发权限错误或错误地将过时的翻译视为有效。<br><br>关键技术要点包括：<br>1. 修复后的逻辑确保只有当 ASID 匹配时，非全局条目才会被命中。<br>2. 此补丁解决了潜在的安全漏洞，避免了不当处理的翻译条目。<br>3. 参与者对补丁的有效性表示认可，并进行了必要的归属修改。<br><br>讨论的结论是，补丁已被确认并应用于修复版本，解决了原有代码中的逻辑错误，提升了 KVM 的性能和安全性。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-04]</span> <span class="email-subject">[PATCH] KVM: arm64: nested: fix VNCR TLB ASID match logic for non-Global entries</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Geonha Lee <span class="email-sender">&lt;w1nsom3gna@korea.ac.kr&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-04]</span> <span class="email-subject">Re: [PATCH] KVM: arm64: nested: fix VNCR TLB ASID match logic for non-Global entries</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-05]</span> <span class="email-subject">Re: [PATCH] KVM: arm64: nested: fix VNCR TLB ASID match logic for non-Global entries</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH] KVM: arm64: nv: Allow shadow stage 2 read fault</h3>
                </div>

                <div class="thread-meta">
                    <span>2 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-09-01</span>
                </div>

                <div class="ai-summary">
                    在这段邮件讨论中，主要围绕着 KVM（内核虚拟机）在 arm64 架构下的一个补丁问题，即允许在影子二级页表（shadow stage 2）中处理读取权限故障。Marc Zyngier 提出，应该始终使用来自客户机的权限信息，这样可以避免在权限故障时重新遍历客户机的二级页表（S2），从而确保获取最新的更新。<br><br>关键技术要点包括：影子 S2 的管理意味着映射可以在任何时候变为只读（例如，脏日志的情况），因此在发生权限故障时，需要判断该页面是因客户机的指示而只读，还是因主机的决策而只读。为了解决这个问题，可以选择重新遍历客户机的 S2 或者在影子 SW 中保留写入位（W bit）的副本。<br><br>讨论的结论是，为了支持客户机 S2 中的硬件设备（HD），需要将完整的影子 S2 标记为只读，并在故障发生时更新客户机的 S2。Wei-Lin Chang 表示理解了这一思路，并同意将影子 S2 设计得更像 TLB，以便更有效地处理权限故障。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-01]</span> <span class="email-subject">Re: [PATCH] KVM: arm64: nv: Allow shadow stage 2 read fault</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-07]</span> <span class="email-subject">Re: [PATCH] KVM: arm64: nv: Allow shadow stage 2 read fault</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Wei-Lin Chang <span class="email-sender">&lt;r09922117@csie.ntu.edu.tw&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v3] KVM: arm64: nv: Fix incorrect VNCR invalidation range calculation</h3>
                </div>

                <div class="thread-meta">
                    <span>2 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-09-06</span>
                </div>

                <div class="ai-summary">
                    本邮件线程讨论了一个针对 KVM（Kernel-based Virtual Machine）在 arm64 架构下的补丁，主要内容是修复 VNCR（Virtual Network Control Register）无效化范围计算中的错误。具体问题在于，现有代码在 `kvm_invalidate_vncr_ipa()` 和 `invalidate_vncr_va()` 函数中错误地使用了按位与运算符 `&` 与 `(size - 1)` 进行地址对齐，导致地址位被错误地屏蔽，而不是向下对齐到块的起始位置。<br><br>这一错误可能导致过时的 VNCR TLB（Translation Lookaside Buffer）条目在执行 TLBI（Translation Lookaside Buffer Invalidate）或 MMU 通知后仍然有效，从而引发内存翻译错误和意外的客户机行为。<br><br>经过讨论，补丁已被审核并应用于修复分支，解决了上述问题。参与者包括 Dongha Lee 和 Oliver Upton 等，补丁的关键修改在于将地址对齐的运算符从 `&` 改为 `~`，确保正确的地址对齐。<br><br>总结来说，此次讨论的主要结论是修复了 VNCR 无效化范围计算的错误，确保了 KVM 在 arm64 架构下的稳定性和正确性。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-06]</span> <span class="email-subject">[PATCH v3] KVM: arm64: nv: Fix incorrect VNCR invalidation range calculation</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: p@sswd.pw <span class="email-sender">&lt;p@sswd.pw&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-05]</span> <span class="email-subject">Re: [PATCH v3] KVM: arm64: nv: Fix incorrect VNCR invalidation range calculation</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH] KVM: arm64: Mark freed S2 MMUs as invalid</h3>
                </div>

                <div class="thread-meta">
                    <span>2 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-09-05</span>
                </div>

                <div class="ai-summary">
                    在本邮件线程中，主要讨论了一个针对 KVM（Kernel-based Virtual Machine）在 arm64 架构下的补丁，内容是关于在释放 S2 MMU（内存管理单元）时未能将其标记为无效的问题。Marc Zyngier 提出了这个问题，指出在释放 S2 MMU 关联的 pgd（页全局目录）时，未将该结构标记为无效，导致后续调用 `kvm_nested_s2_unmap()` 时可能会尝试解除映射未分配的页表，从而引发警告。<br><br>为了解决这个问题，Marc 提出了在释放 pgd 时调用 `kvm_init_nested_s2_mmu()` 来将 S2 MMU 标记为无效。补丁的代码修改了 `arch/arm64/kvm/mmu.c` 文件，增加了四行代码以实现这一功能。<br><br>Oliver Upton 在第二封邮件中确认了补丁的应用，并表示感谢。讨论的结论是该补丁已被接受并应用于修复版本，确保了在释放 S2 MMU 时的正确性，避免了潜在的错误和警告。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-05]</span> <span class="email-subject">[PATCH] KVM: arm64: Mark freed S2 MMUs as invalid</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-05]</span> <span class="email-subject">Re: [PATCH] KVM: arm64: Mark freed S2 MMUs as invalid</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v2 0/7] Drivers: hv: Fix NEED_RESCHED_LAZY and use common
 APIs</h3>
                </div>

                <div class="thread-meta">
                    <span>2 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-09-04</span>
                </div>

                <div class="ai-summary">
                    本邮件线程主要讨论了针对 Hyper-V 驱动程序的补丁系列，特别是修复 `NEED_RESCHED_LAZY` 的问题并使用通用 API。邮件中提到，Wei Liu 在处理补丁时删除了 `mshv_vtl` 的相关更改，并将其他部分（包括 KVM 的更改）应用到 `hyperv-next` 分支。<br><br>关键技术要点包括：<br>1. 删除了 `mshv_do_pre_guest_mode_work()` 函数，该函数负责在进入访客模式前的预处理工作，主要是调度和信号处理。<br>2. 通过使用通用的“入口虚拟” API 来简化代码，提升代码的可维护性和一致性。<br><br>讨论的结论是，虽然删除了该函数，但在后续的补丁中需要将其合并到之前的提交中，以确保功能的完整性和一致性。此外，参与者还需关注如何在未来的开发中避免类似的遗漏。整体来看，此次讨论强调了代码整合和清理的重要性。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-04]</span> <span class="email-subject">Re: [PATCH v2 0/7] Drivers: hv: Fix NEED_RESCHED_LAZY and use common
 APIs</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Wei Liu <span class="email-sender">&lt;wei.liu@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-04]</span> <span class="email-subject">Re: [PATCH v2 0/7] Drivers: hv: Fix NEED_RESCHED_LAZY and use common APIs</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Sean Christopherson <span class="email-sender">&lt;seanjc@google.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v2] KVM: arm64: Fix NULL pointer access issue</h3>
                </div>

                <div class="thread-meta">
                    <span>2 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-09-02</span>
                </div>

                <div class="ai-summary">
                    本邮件线程主要讨论了一个针对 KVM（Kernel-based Virtual Machine）在 arm64 架构下的补丁，旨在修复因未初始化的 per-CPU 数据导致的空指针访问问题。参与者 Yingchao Deng 提出了补丁，指出在 Linux 启动于 EL1 模式时，`host_data_ptr()` 宏会解析为未初始化的 nVHE（非虚拟化硬件扩展）超管数据指针，从而在调用时引发空指针解引用。为解决此问题，补丁中添加了 `is_kvm_arm_initialised()` 条件检查，以确保 KVM 初始化完成。<br><br>关键技术要点包括：<br>1. 在 KVM 初始化过程中，确保所有必要的初始化步骤都已完成，特别是与 hyp 模式相关的初始化。<br>2. 对 trace 过滤器的调用进行早期返回检查，以避免空指针解引用。<br><br>讨论的结论是，补丁的描述需要更为清晰，Oliver Upton 提出应在补丁说明中明确功能变化，并建议将警告条件放在检查的首位，以确保调用者在正确的上下文中使用这些帮助函数。整体来看，补丁的提出和讨论有助于提升 KVM 在 arm64 架构下的稳定性和安全性。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-02]</span> <span class="email-subject">[PATCH v2] KVM: arm64: Fix NULL pointer access issue</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Yingchao Deng <span class="email-sender">&lt;yingchao.deng@oss.qualcomm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-04]</span> <span class="email-subject">Re: [PATCH v2] KVM: arm64: Fix NULL pointer access issue</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v4 4/5] arm64: initialise SCTLR2_EL1 at cpu_soft_restart()</h3>
                </div>

                <div class="thread-meta">
                    <span>2 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-09-01</span>
                </div>

                <div class="ai-summary">
                    本邮件线程主要讨论了在 ARM64 架构中，cpu_soft_restart() 函数中对 SCTLR2_EL1 寄存器初始化的顺序问题。参与者 Dave Martin 提出疑问，询问是否有必要在重置 SCTLR 寄存器之前重置 SCTLR2 寄存器。他指出，虽然当前文档中没有明确的架构原因要求这两个寄存器按特定顺序重置，但在实现上，cpu_soft_restart 和 __kvm_handle_stub_hvc 函数中对寄存器的重置顺序相反，显得有些奇怪。<br><br>Yeoreum Yun 回应表示，他也没有找到 SCTLR2_ELx 在 SCTLR_EL1 初始化之前的必要性，认为这两个寄存器的当前位并不会相互影响。他同意 Dave 的看法，认为为了代码一致性，调整初始化顺序是更好的选择。<br><br>讨论的关键点在于寄存器初始化顺序的合理性和一致性，最终达成共识，即虽然没有明确的架构要求，但为了代码的整洁性和一致性，建议重新排序寄存器的初始化。待解决的问题是是否需要在后续的补丁中实施这一调整。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-01]</span> <span class="email-subject">Re: [PATCH v4 4/5] arm64: initialise SCTLR2_EL1 at cpu_soft_restart()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Dave Martin <span class="email-sender">&lt;Dave.Martin@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-01]</span> <span class="email-subject">Re: [PATCH v4 4/5] arm64: initialise SCTLR2_EL1 at cpu_soft_restart()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Yeoreum Yun <span class="email-sender">&lt;yeoreum.yun@arm.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v5 05/12] KVM: Documentation: describe
 GUEST_MEMFD_FLAG_NO_DIRECT_MAP</h3>
                </div>

                <div class="thread-meta">
                    <span>2 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-09-01</span>
                </div>

                <div class="ai-summary">
                    本邮件线程主要讨论了关于 KVM（内核虚拟机）中的一个补丁，具体是关于 GUEST_MEMFD_FLAG_NO_DIRECT_MAP 的文档描述。参与者 David Hildenbrand 和 Patrick Roy 讨论了补丁内容的必要性，Hildenbrand 表示不确定是否需要将此补丁单独列出，认为可以将其合并到前一个补丁中。<br><br>关键技术要点包括：<br>1. GUEST_MEMFD_FLAG_NO_DIRECT_MAP 的功能和实现细节尚未详细讨论。<br>2. 参与者对补丁的必要性和内容的重复性进行了反思，认为如果没有新的信息补充，则可能不需要单独提交此补丁。<br><br>讨论的结论是，补丁的内容可能已经在之前的讨论中涵盖，因此建议将其合并。此外，邮件中还涉及到参与者的邮件地址格式问题，显示出一些邮件服务器的处理差异。待解决的问题主要是如何处理邮件发送中的格式问题，以及是否需要继续讨论该补丁的具体内容。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-01]</span> <span class="email-subject">Re: [PATCH v5 05/12] KVM: Documentation: describe
 GUEST_MEMFD_FLAG_NO_DIRECT_MAP</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Roy, Patrick <span class="email-sender">&lt;roypat@amazon.co.uk&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-01]</span> <span class="email-subject">Re: [PATCH v5 05/12] KVM: Documentation: describe
 GUEST_MEMFD_FLAG_NO_DIRECT_MAP</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: David Hildenbrand <span class="email-sender">&lt;david@redhat.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v5 04/12] KVM: guest_memfd: Add flag to remove from direct
 map</h3>
                </div>

                <div class="thread-meta">
                    <span>2 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-09-01</span>
                </div>

                <div class="ai-summary">
                    本邮件线程主要讨论了关于 KVM（内核虚拟机）中的 guest_memfd 功能的补丁，特别是添加一个标志以从直接映射中移除该功能。参与者主要是 Mike Rapoport 和 Patrick Roy。<br><br>讨论的关键技术要点包括：<br>1. 目前 PowerPC 架构并不支持 guest_memfd，参与者对此进行了确认。<br>2. 在处理错误时，讨论了如何更新错误处理逻辑，特别是涉及到 `set_direct_map_[default|invalid]_noflush()` 函数的参数问题。该函数目前只接受一个 `struct page *` 参数，讨论中提到可能需要增加一个 `npages` 参数或添加更多函数到 `set_memory.h`。<br>3. 最终决定保留 `set_direct_map_valid_noflush()` 函数，并删除不必要的警告信息（WARN_ON_ONCE）。<br><br>讨论的结论是，虽然存在一些技术挑战，但参与者达成共识，决定对补丁进行必要的调整以优化错误处理，同时保持现有功能的完整性。待解决的问题主要集中在如何有效地扩展现有函数以支持更多参数。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-01]</span> <span class="email-subject">Re: [PATCH v5 04/12] KVM: guest_memfd: Add flag to remove from direct
 map</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Roy, Patrick <span class="email-sender">&lt;roypat@amazon.co.uk&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-01]</span> <span class="email-subject">Re: [PATCH v5 04/12] KVM: guest_memfd: Add flag to remove from
 direct map</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mike Rapoport <span class="email-sender">&lt;rppt@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH] KVM: arm64: nested: Fix VA sign extension in VNCR/TLBI paths</h3>
                </div>

                <div class="thread-meta">
                    <span>2 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-09-01</span>
                </div>

                <div class="ai-summary">
                    该邮件列表讨论的主题是关于 KVM（内核虚拟机）在 arm64 架构下的嵌套虚拟化中的一个补丁，主要针对 VNCR（虚拟地址空间控制寄存器）和 TLBI（TLB 无效）路径中的虚拟地址（VA）符号扩展问题。补丁的关键修改是将符号扩展的位数从 48 改为 47，以修正 VA 的处理。<br><br>在讨论中，参与者 Gyujeong Jin 提出了补丁，并进行了代码修改，但未附上详细的提交信息。Marc Zyngier 对此提出质疑，指出该代码并不是用于 VA 的符号扩展，而是用于位 48 的传播，涉及 RESS 和 BADDR 的高位处理。他还提到在建立翻译时已经检查了 VA 的规范性，因此在这种情况下不会安装 TLB。<br><br>讨论的结论是，尽管补丁意图修复问题，但可能存在对符号扩展目的的误解。Marc Zyngier 希望能得到更多的解释，以确认补丁的必要性和正确性，表明该问题仍需进一步澄清和解决。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-01]</span> <span class="email-subject">[PATCH] KVM: arm64: nested: Fix VA sign extension in VNCR/TLBI paths</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Gyujeong Jin <span class="email-sender">&lt;wlsrbwjd7232@gmail.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-01]</span> <span class="email-subject">Re: [PATCH] KVM: arm64: nested: Fix VA sign extension in VNCR/TLBI paths</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v7 05/12] arm64/boot: Factor out a macro to check SPE
 version</h3>
                </div>

                <div class="thread-meta">
                    <span>2 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-09-01</span>
                </div>

                <div class="ai-summary">
                    在这段邮件讨论中，主要讨论了一个关于 ARM64 启动代码的补丁，具体是将一个用于检查 SPE（可扩展性能监控）版本的宏进行提取。参与者 Leo Yan 和 James Clark 对该补丁进行了简要的审查和讨论。<br><br>关键技术要点包括：<br>1. 提出的补丁旨在提高代码的可读性和一致性，通过将宏提取出来，便于后续调用。<br>2. James Clark 提出建议，认为将宏定义移动到文件开头会更符合其他宏的定义习惯，增强代码的整洁性。<br><br>讨论的结论是，虽然将宏移动到文件开头并不是强制要求，但为了保持代码风格的一致性，Leo Yan 表示可以进行调整。整体上，邮件讨论围绕代码结构优化展开，强调了代码可读性的重要性。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-01]</span> <span class="email-subject">Re: [PATCH v7 05/12] arm64/boot: Factor out a macro to check SPE
 version</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Leo Yan <span class="email-sender">&lt;leo.yan@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-01]</span> <span class="email-subject">Re: [PATCH v7 05/12] arm64/boot: Factor out a macro to check SPE
 version</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: James Clark <span class="email-sender">&lt;james.clark@linaro.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v7 06/12] arm64/boot: Enable EL2 requirements for
 SPE_FEAT_FDS</h3>
                </div>

                <div class="thread-meta">
                    <span>2 messages</span>
                    <span>2 participants</span>
                    <span>Started: 2025-09-01</span>
                </div>

                <div class="ai-summary">
                    该邮件线程主要讨论了一个针对 ARM64 架构的补丁，内容涉及启用 EL2 对 SPE_FEAT_FDS 的要求。参与者 Leo Yan 和 James Clark 针对补丁中的注释进行了讨论，特别是关于如何更清晰地描述禁用对 EL2 的陷阱。<br><br>关键技术要点包括：<br>1. 补丁中提到的 nPMSDSFR_EL1 位的设置，目的是禁用 PMSDSFR 的陷阱。<br>2. Leo Yan 提出注释的表述可能存在歧义，建议将其修改为更明确的描述。<br><br>讨论的结论是，虽然补丁的技术实现得到了认可（Leo Yan 表示“看起来很好”），但仍需对注释进行修改以提高可读性。待解决的问题是如何更准确地表述相关的技术细节，以避免未来的误解。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-01]</span> <span class="email-subject">Re: [PATCH v7 06/12] arm64/boot: Enable EL2 requirements for
 SPE_FEAT_FDS</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Leo Yan <span class="email-sender">&lt;leo.yan@arm.com&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-01]</span> <span class="email-subject">Re: [PATCH v7 06/12] arm64/boot: Enable EL2 requirements for
 SPE_FEAT_FDS</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: James Clark <span class="email-sender">&lt;james.clark@linaro.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH] KVM: arm64: nv: Optimize unmapping of shadow S2-MMU
 tables</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-09-05</span>
                </div>

                <div class="ai-summary">
                    该邮件讨论了针对 KVM（Kernel-based Virtual Machine）在 arm64 架构下的一个补丁，主要关注于优化影子 S2-MMU（第二级内存管理单元）表的反向映射过程。发件人 Ganapatrao Kulkarni 提出了这一补丁的背景和目的，旨在提高虚拟化性能，减少内存管理的开销。<br><br>关键技术要点包括：<br>1. 影子 S2-MMU 的反向映射是虚拟化过程中重要的性能瓶颈，优化该过程可以显著提升系统效率。<br>2. 补丁的具体实现细节尚未在邮件中详细展开，但预计会涉及到内存访问模式的改进和数据结构的调整。<br><br>讨论的结论是，虽然补丁的初步目标明确，但具体的实现和测试结果尚待进一步探讨和验证。此外，发件人对使用旧的邮件列表 ID 表示歉意，显示出对邮件交流规范的重视。整体来看，此补丁的提出为未来的性能优化提供了一个良好的起点。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-05]</span> <span class="email-subject">Re: [PATCH] KVM: arm64: nv: Optimize unmapping of shadow S2-MMU
 tables</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Ganapatrao Kulkarni <span class="email-sender">&lt;gankulkarni@os.amperecomputing.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH 0/5] KVM: arm64: GICv5 legacy (GCIE_LEGACY) NV enablement
 and cleanup</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-09-04</span>
                </div>

                <div class="ai-summary">
                    该邮件线程主要讨论了针对 KVM（Kernel-based Virtual Machine）在 arm64 架构下的 GICv5 传统模式（GCIE_LEGACY）启用及清理的补丁系列，共包含五个补丁。参与者 Oliver Upton 对该补丁系列进行了审核，并表示认可。<br><br>关键技术要点包括：<br>1. GICv5 传统模式的启用将提升 KVM 在 arm64 上的性能和兼容性。<br>2. 补丁系列中涉及的清理工作旨在简化代码结构，提高可维护性。<br><br>讨论的主要结论是，Oliver Upton 对补丁系列表示支持，未提及具体的待解决问题，表明该补丁系列在技术上得到了认可，可能会在后续版本中合并。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-04]</span> <span class="email-subject">Re: [PATCH 0/5] KVM: arm64: GICv5 legacy (GCIE_LEGACY) NV enablement
 and cleanup</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Oliver Upton <span class="email-sender">&lt;oliver.upton@linux.dev&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v10 00/43] arm64: Support for Arm CCA in KVM</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-09-04</span>
                </div>

                <div class="ai-summary">
                    本邮件线程主要讨论了针对 ARM64 架构的 KVM 中对 Arm CCA（Confidential Computing Architecture）的支持，涉及到一个包含 43 个补丁的系列更新。参与者 Gavin Shan 对不同组合的主机和来宾环境进行了测试，并分享了测试结果和遇到的问题。<br><br>关键技术要点包括：<br>1. 测试了多个主机和来宾环境的组合，涉及 TF-A、QEMU、Linux 内核等多个组件。<br>2. 发现了多个问题，例如 virtio-iommu 在 QEMU 中不受支持，导致来宾内核在 IOMMU 探测时卡住；来宾中的重启命令无法正常工作；HMP 命令 'dump-guest-memory' 导致 QEMU 异常退出等。<br>3. 针对这些问题，Gavin 提出了可能的解决方案和改进方向，例如避免在来宾内存转储后重新配置领域。<br><br>讨论结论是，尽管进行了多项测试并发现了一些问题，但仍需进一步解决这些问题，特别是与 QEMU 相关的兼容性和功能性问题，以确保 Arm CCA 在 KVM 中的有效支持。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-04]</span> <span class="email-subject">Re: [PATCH v10 00/43] arm64: Support for Arm CCA in KVM</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Gavin Shan <span class="email-sender">&lt;gshan@redhat.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v10 15/43] arm64: RME: Allow VMM to set RIPAS</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-09-04</span>
                </div>

                <div class="ai-summary">
                    该邮件讨论了一个针对 ARM64 架构的补丁，主题为“允许虚拟机监控器（VMM）设置 RIPAS”。该补丁是系列补丁中的第 15 个，旨在增强 ARM64 的 RME（Runtime Memory Encryption）功能，使得 VMM 可以更灵活地控制内存加密设置。<br><br>关键技术要点包括：<br>1. RIPAS（Runtime Information Page Attribute Structure）是用于管理内存属性的重要结构，补丁允许 VMM 直接设置该结构，从而优化虚拟机的内存管理。<br>2. 该补丁的实现可能会影响虚拟机的性能和安全性，因此需要仔细评估其影响。<br><br>讨论的结论是，补丁得到了 Gavin Shan 的审核通过，表明其在技术上是可行的。然而，邮件中并未提及具体的待解决问题，暗示该补丁可能已经准备好合并到主线代码中。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-04]</span> <span class="email-subject">Re: [PATCH v10 15/43] arm64: RME: Allow VMM to set RIPAS</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Gavin Shan <span class="email-sender">&lt;gshan@redhat.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH 5/5] irqchip/gic-v5: Drop has_gcie_v3_compat from
 gic_kvm_info</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-09-03</span>
                </div>

                <div class="ai-summary">
                    在这封邮件中，讨论的主要技术问题是关于对 GICv5 中的 `gic_kvm_info` 结构进行补丁修改，具体是移除 `has_gcie_v3_compat` 字段。参与者主要是 Sascha Bischoff 和 Thomas Gleixner，后者对补丁表示认可。<br><br>关键技术要点包括：<br>1. GICv5 是 ARM 架构中的中断控制器，涉及到虚拟化时的中断管理。<br>2. `gic_kvm_info` 结构体用于存储与 KVM（Kernel-based Virtual Machine）相关的 GIC 信息，移除该字段可能是为了简化结构或是由于该字段不再必要。<br><br>讨论的结论是，Thomas Gleixner 对该补丁表示支持，并已确认其可以通过 arm/kvm 树进行合并。这表明该补丁在技术上得到了认可，但具体的影响和后续可能的测试结果仍需关注。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-03]</span> <span class="email-subject">Re: [PATCH 5/5] irqchip/gic-v5: Drop has_gcie_v3_compat from
 gic_kvm_info</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Thomas Gleixner <span class="email-sender">&lt;tglx@linutronix.de&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v10 05/43] arm64: RME: Check for RME support at KVM init</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-09-03</span>
                </div>

                <div class="ai-summary">
                    该邮件讨论了一个关于 ARM64 架构下 RME（Runtime Memory Encryption）支持的补丁，主要集中在 KVM（Kernel-based Virtual Machine）初始化时对 RME 支持的检查。邮件中提到了一些代码优化建议，包括去掉冗余的头文件包含，以及调整注释的位置以提高代码可读性。<br><br>关键技术要点包括：<br>1. 在 KVM 初始化过程中，需要检查系统是否支持 RME，以确保虚拟化环境的安全性。<br>2. Gavin Shan 提出了对代码的细节优化建议，强调了代码整洁性和可维护性的重要性。<br><br>讨论的结论是，虽然补丁的核心功能得到了认可，但在代码实现上还有改进空间，尤其是在代码结构和注释方面。待解决的问题是如何进一步优化代码以提升整体质量。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-03]</span> <span class="email-subject">Re: [PATCH v10 05/43] arm64: RME: Check for RME support at KVM init</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Gavin Shan <span class="email-sender">&lt;gshan@redhat.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v6 12/24] tracing: selftests: Add trace remote tests</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-09-03</span>
                </div>

                <div class="ai-summary">
                    在这封邮件中，主要讨论了一个关于 Linux 内核跟踪功能的补丁，具体是增加了对远程跟踪测试的支持。参与者 Masami Hiramatsu 提出了几个关键的技术要点和建议。<br><br>首先，Hiramatsu 指出该测试需要依赖于 `remotes/`，因此建议在测试代码中添加 `# requires: remotes`，以确保在未启用远程功能时跳过该测试。其次，他建议在测试中使用环境变量 `$TMPDIR` 替代硬编码的 `/tmp` 目录，以避免在每次测试后清理临时文件的问题。此外，他还提到该测试在执行 `checkbashisms` 时失败，建议使用 `printf` 来处理换行符，以提高兼容性。<br><br>总体而言，邮件讨论集中在确保测试的正确性和兼容性上，提出的建议有助于改进补丁的质量。目前的待解决问题包括如何有效地实现这些建议，以确保测试在不同环境下的稳定性。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-03]</span> <span class="email-subject">Re: [PATCH v6 12/24] tracing: selftests: Add trace remote tests</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Masami Hiramatsu (Google) <span class="email-sender">&lt;mhiramat@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v2 5/7] entry: Rename "kvm" entry code assets to "virt"
 to genericize APIs</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-09-02</span>
                </div>

                <div class="ai-summary">
                    在这封邮件中，讨论的主要技术问题是关于对 Linux 内核中 KVM（Kernel-based Virtual Machine）入口代码的重命名，以将其通用化为“virt”。具体来说，Sean Christopherson 提出了一个补丁（PATCH v2 5/7），旨在将与 KVM 相关的入口代码资产重命名为“virt”，以便于更广泛的虚拟化 API 使用。<br><br>关键的技术要点包括：<br>1. 重命名的目的是为了提高代码的可读性和可维护性，使得虚拟化相关的 API 更加通用。<br>2. 这一改动有助于减少 KVM 代码与其他虚拟化技术之间的界限，促进代码复用。<br><br>讨论的结论是，补丁得到了 Thomas Gleixner 的审核认可，表明此改动在技术上是可行的。然而，邮件中并未提及其他参与者的反馈或潜在的待解决问题，显示出该补丁在社区中的支持度较高。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-02]</span> <span class="email-subject">Re: [PATCH v2 5/7] entry: Rename "kvm" entry code assets to "virt"
 to genericize APIs</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Thomas Gleixner <span class="email-sender">&lt;tglx@linutronix.de&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v2 4/7] entry/kvm: KVM: Move KVM details related to
 signal/-EINTR into KVM proper</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-09-02</span>
                </div>

                <div class="ai-summary">
                    该邮件讨论的主要技术问题是关于将 KVM（Kernel-based Virtual Machine）中与信号和 -EINTR 错误相关的细节移动到 KVM 的核心部分。具体来说，Sean Christopherson 提出了一个补丁（PATCH v2 4/7），旨在优化 KVM 的信号处理机制。<br><br>关键的技术要点包括：<br>1. 通过将信号处理的相关代码整合到 KVM 的核心，提升了代码的可维护性和清晰度。<br>2. 该补丁有助于更好地管理虚拟机中的信号传递，确保在处理过程中不会出现不必要的复杂性。<br><br>讨论的结论是，Thomas Gleixner 对该补丁表示认可，给予了“Reviewed-by”的评价，表明该补丁在技术上是可行的并且得到了审查。当前没有提及的待解决问题，表明该补丁可能会在未来的版本中被合并。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-02]</span> <span class="email-subject">Re: [PATCH v2 4/7] entry/kvm: KVM: Move KVM details related to
 signal/-EINTR into KVM proper</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Thomas Gleixner <span class="email-sender">&lt;tglx@linutronix.de&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH 3/5] arm64: cpucaps: Add GICv5 Legacy vCPU interface
 (GCIE_LEGACY) capability</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-09-02</span>
                </div>

                <div class="ai-summary">
                    在此次邮件讨论中，主要围绕一项针对 ARM64 架构的补丁进行讨论，该补丁旨在添加 GICv5 传统虚拟 CPU 接口（GCIE_LEGACY）能力。参与者 Sascha Bischoff 提出了该补丁的有效性，认为其适用于在每次启动时对 CPU 进行测试并相应设置能力标志。<br><br>关键技术要点包括：<br>1. GICv5 传统虚拟 CPU 接口的引入，旨在增强 ARM64 架构的虚拟化支持。<br>2. 补丁的实现方式是通过在系统启动时对每个 CPU 进行检测，并根据检测结果设置能力标志。<br><br>讨论的结论是，该补丁得到了 Suzuki K Poulose 的认可，并被标记为“已审查通过”。目前没有提出待解决的问题，表明该补丁在技术上得到了共识，准备进行进一步的集成。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-02]</span> <span class="email-subject">Re: [PATCH 3/5] arm64: cpucaps: Add GICv5 Legacy vCPU interface
 (GCIE_LEGACY) capability</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Suzuki K Poulose <span class="email-sender">&lt;suzuki.poulose@arm.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v3 4/5] arm64: initialise SCTLR2_EL1 at cpu_soft_restart()</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-09-01</span>
                </div>

                <div class="ai-summary">
                    该邮件讨论的主要技术问题是关于在 `cpu_soft_restart()` 函数中初始化 `SCTLR2_EL1` 寄存器的必要性，尤其是在 `ARM64_HAS_SCTLR2` 功能未被设置的情况下。参与者 Yeoreum Yun 提出，尽管该功能未启用，仍然需要重置 `SCTLR2_EL1`，因为 `cpu_soft_restart()` 的职责类似于引导加载程序，旨在将 CPU 恢复到已知状态。这一点在当前内核发生崩溃并启动崩溃内核时尤为重要，因此不应假设 CPU 的状态是合理的。<br><br>关键技术要点包括：<br>1. `cpu_soft_restart()` 的作用是确保 CPU 处于已知状态。<br>2. 在处理内核崩溃时，重置 `SCTLR2_EL1` 可以避免潜在的状态不一致。<br><br>讨论的结论是，尽管对 `SCTLR2_EL1` 的重置在某些情况下可能看似多余，但为了确保系统的稳定性和可靠性，建议在 `cpu_soft_restart()` 中进行此操作。Dave Martin 表示将会在后续的 v4 版本中进一步审查这一修改。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-01]</span> <span class="email-subject">Re: [PATCH v3 4/5] arm64: initialise SCTLR2_EL1 at cpu_soft_restart()</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Dave Martin <span class="email-sender">&lt;Dave.Martin@arm.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v5 03/12] mm: introduce AS_NO_DIRECT_MAP</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-09-01</span>
                </div>

                <div class="ai-summary">
                    该邮件讨论的主要技术问题是关于 Linux 内核中的一个补丁，具体是引入 `AS_NO_DIRECT_MAP` 的功能。邮件中提到的关键技术要点包括对 `secretmem_aops` 的处理，建议将其声明为静态（static），以提高代码的可读性和维护性。参与者 Roy 提到这一点与之前 Mike 的观点一致，表明这一修改已经得到认可。<br><br>讨论的结论是，虽然补丁的核心内容得到了关注，但仍需进一步确认 `secretmem_aops` 的静态化是否会影响其他部分的功能或性能。此外，邮件中没有提到其他待解决的问题，表明当前讨论较为集中且明确。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-01]</span> <span class="email-subject">Re: [PATCH v5 03/12] mm: introduce AS_NO_DIRECT_MAP</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Roy, Patrick <span class="email-sender">&lt;roypat@amazon.co.uk&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v5 03/12] mm: introduce AS_NO_DIRECT_MAP</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-09-01</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主要技术问题是关于 Linux 内核中的内存管理，特别是引入一个新的标志 AS_NO_DIRECT_MAP 的补丁。参与者 David Hildenbrand 提出了一个命名建议，即使用 "vma_has_no_direct_map"，以避免与现有的 "mapping_no_direct_map" 产生混淆。<br><br>关键技术要点包括：<br>1. AS_NO_DIRECT_MAP 标志的引入旨在优化虚拟内存区域（VMA）的管理。<br>2. 命名的选择对代码的可读性和一致性至关重要，参与者对命名的讨论反映了对代码质量的关注。<br><br>讨论的结论是，虽然目前选择了 "vma_has_no_direct_map" 作为命名，但仍需进一步探讨和确认，以确保在未来的开发中不会引起混淆。此外，如何更好地整合这一补丁与现有的内存管理机制也是一个待解决的问题。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-01]</span> <span class="email-subject">Re: [PATCH v5 03/12] mm: introduce AS_NO_DIRECT_MAP</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Roy, Patrick <span class="email-sender">&lt;roypat@amazon.co.uk&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v5 03/12] mm: introduce AS_NO_DIRECT_MAP</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-09-01</span>
                </div>

                <div class="ai-summary">
                    在这封邮件中，讨论的主要技术问题是关于引入一个新的补丁“AS_NO_DIRECT_MAP”，该补丁属于内存管理（mm）模块。邮件中只有一位参与者Patrick Roy对补丁进行了简单的确认，表示支持（Ack）。<br><br>关键的技术要点包括：<br>1. “AS_NO_DIRECT_MAP”补丁的目的和具体实现细节没有在邮件中详细讨论，可能是为了优化内存映射或改善内存管理的某些方面。<br>2. 参与者之间的交流非常简洁，仅通过确认表示对补丁的认可。<br><br>讨论的结论是，补丁得到了参与者的支持，但由于邮件内容较为简短，未能深入探讨其潜在影响或具体应用场景。待解决的问题包括补丁的具体实现细节及其在实际应用中的效果尚未明确。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-01]</span> <span class="email-subject">Re: [PATCH v5 03/12] mm: introduce AS_NO_DIRECT_MAP</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Roy, Patrick <span class="email-sender">&lt;roypat@amazon.co.uk&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v5 02/12] arch: export set_direct_map_valid_noflush to KVM
 module</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-09-01</span>
                </div>

                <div class="ai-summary">
                    该邮件讨论的主要技术问题是关于将 `set_direct_map_valid_noflush` 函数导出到 KVM 模块的补丁。参与者 Fuad Tabba 提出了一个重要的观察，Roy Patrick 对此表示感谢，确认了这个问题的有效性。<br><br>关键技术要点包括：<br>1. `set_direct_map_valid_noflush` 函数的功能和在 KVM 中的应用场景。<br>2. 导出该函数可能对虚拟化性能和内存管理的影响。<br><br>讨论的结论是，Fuad Tabba 提出的补丁建议得到了认可，表明该补丁是朝着改善 KVM 模块功能的正确方向。然而，邮件中并未详细讨论补丁的具体实现细节或潜在的后续问题，可能需要进一步的技术评审和测试来确保其有效性和稳定性。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-01]</span> <span class="email-subject">Re: [PATCH v5 02/12] arch: export set_direct_map_valid_noflush to KVM
 module</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Roy, Patrick <span class="email-sender">&lt;roypat@amazon.co.uk&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v7 00/29] KVM: arm64: Implement support for SME</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-09-01</span>
                </div>

                <div class="ai-summary">
                    该邮件线程讨论了针对 KVM（Kernel-based Virtual Machine）在 arm64 架构上实现对 SME（Scalable Matrix Extension）的支持的补丁集。邮件中提到的补丁版本为 v7，共包含29个补丁。<br><br>关键技术要点包括：<br>1. SME 是一种用于加速矩阵运算的扩展，旨在提升机器学习和高性能计算的性能。<br>2. 讨论中提到需要将补丁与 QEMU 团队进行沟通，因为 QEMU 是使用这些 API 的主要工具，确保补丁的兼容性和有效性。<br><br>主要讨论结论是，建议将 QEMU 的相关开发者（如 Peter Maydell 和 Eric Auger）加入讨论，以便更好地整合和测试这些补丁。当前仍需解决的主要问题是如何确保补丁在 QEMU 中的有效应用，以及可能出现的兼容性问题。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-01]</span> <span class="email-subject">Re: [PATCH v7 00/29] KVM: arm64: Implement support for SME</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v2 0/4] Add workaround for HIP10/HIP10C erratum 162200802</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-09-01</span>
                </div>

                <div class="ai-summary">
                    本邮件讨论的主要技术问题是针对HIP10/HIP10C的错误（erratum 162200802）提出的补丁系列（PATCH v2 0/4）。参与者Zhou Wang介绍了该补丁系列的内容，首先实现了GICD.num_LPIs的可写支持，然后添加了针对该错误的补丁。<br><br>关键的技术要点包括：<br>1. GICD.num_LPIs的可写支持是解决该错误的前提。<br>2. 补丁系列的设计旨在为后续的QEMU相关补丁做好准备。<br><br>讨论的结论是，如果该补丁系列得到认可，Zhou Wang将继续准备与QEMU相关的补丁。此外，邮件中提到的v1系列补丁链接提供了更早期的讨论背景。当前的待解决问题是确认该补丁系列的有效性和适用性。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-01]</span> <span class="email-subject">Re: [PATCH v2 0/4] Add workaround for HIP10/HIP10C erratum 162200802</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Zhou Wang <span class="email-sender">&lt;wangzhou1@hisilicon.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v7 09/12] perf: arm_spe: Add support for filtering on
 data source</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-09-01</span>
                </div>

                <div class="ai-summary">
                    在这封邮件中，讨论的主要技术问题是关于对 ARM SPE（可扩展性能监控）支持数据源过滤的补丁。该补丁旨在增强性能监控功能，使其能够根据数据源进行过滤，从而提高数据分析的准确性和效率。<br><br>关键的技术要点包括：<br>1. ARM SPE 的数据源过滤功能可以帮助开发者更精确地收集和分析性能数据。<br>2. 此补丁的实现细节和预期效果得到了参与者的认可，表明其在性能监控领域的潜在价值。<br><br>讨论的结论是，补丁得到了 Leo Yan 的审核确认，表明其符合合并标准。当前没有提出待解决的问题，显示出该补丁在社区中的积极反馈和支持。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-01]</span> <span class="email-subject">Re: [PATCH v7 09/12] perf: arm_spe: Add support for filtering on
 data source</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Leo Yan <span class="email-sender">&lt;leo.yan@arm.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH RESEND v7 0/6] support FEAT_LSUI and apply it on futex
 atomic ops</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-09-01</span>
                </div>

                <div class="ai-summary">
                    该邮件线程主要讨论了一个补丁系列（PATCH RESEND v7 0/6），旨在支持 FEAT_LSUI 特性并将其应用于 futex 原子操作。FEAT_LSUI 是一种新的硬件特性，能够提高多线程环境下的性能，特别是在处理锁和等待队列时。<br><br>关键技术要点包括：<br>1. FEAT_LSUI 的引入可以优化原子操作，减少上下文切换的开销。<br>2. 该补丁系列的目标是通过改进 futex 的实现，使其能够更有效地利用这一硬件特性，从而提升整体性能。<br>3. 邮件中提到的补丁版本为 v7，表明该提案经历了多次修改和迭代。<br><br>讨论的结论是，尽管补丁的潜在好处显而易见，但仍需进一步的审查和测试，以确保其在不同场景下的稳定性和兼容性。此外，Yeoreum Yun 在邮件中发出温和的提醒，表示希望能得到更多的反馈，以推动该补丁的进展。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-01]</span> <span class="email-subject">Re: [PATCH RESEND v7 0/6] support FEAT_LSUI and apply it on futex
 atomic ops</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Yeoreum Yun <span class="email-sender">&lt;yeoreum.yun@arm.com&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[PATCH v5 0/7] Add support for FEAT_{LS64, LS64_V} and related
 tests</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-09-01</span>
                </div>

                <div class="ai-summary">
                    在这封邮件中，Yicong Yang 提出了关于支持 FEAT_{LS64, LS64_V} 及相关测试的补丁（PATCH v5 0/7）的讨论。主要技术问题集中在 KVM/虚拟机监控器对 LS64 故障处理的支持上。参与者在邮件中询问该版本的补丁是否可以继续推进。<br><br>关键技术要点包括：<br>1. LS64 和 LS64_V 特性的实现及其在虚拟化环境中的应用。<br>2. KVM 对 LS64 故障处理的具体机制和实现细节。<br><br>讨论的结论是，当前版本的补丁是否适合继续推进仍待确认，参与者希望得到 Marc 和 Oliver 的反馈，以便进一步完善和推动补丁的进展。整体来看，邮件反映了对虚拟化技术中故障处理能力的关注，以及对补丁版本的审查和讨论过程。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-01]</span> <span class="email-subject">Re: [PATCH v5 0/7] Add support for FEAT_{LS64, LS64_V} and related
 tests</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Yicong Yang <span class="email-sender">&lt;yangyicong@huawei.com&gt;</span></div>
                </div>
            </div>
        </div>

        <div class="category">
            <h2>Other</h2>

            <div class="thread">
                <div class="thread-header">
                    <h3>kvm-unit-tests hang on Arm FVP with protected mode</h3>
                </div>

                <div class="thread-meta">
                    <span>3 messages</span>
                    <span>3 participants</span>
                    <span>Started: 2025-09-05</span>
                </div>

                <div class="ai-summary">
                    在此次邮件讨论中，主要关注的问题是 kvm-unit-tests 在 Arm FVP 平台上以保护模式（kvm-arm.mode=protected）启动时出现挂起现象，而在虚拟化扩展模式（kvm-arm.mode=vhe）下则能够成功完成测试。Naresh Kamboju 报告了这一问题，并通过回归分析确定了导致挂起的第一个坏提交（commit 066daa8d3bc2694c392e14091978043aed7b1f23），该提交涉及在 pKVM 中初始化 HCRX_EL2 陷阱。<br><br>Marc Zyngier 对报告的有效性提出质疑，指出 "kvm-arm.mode=vhe" 并非有效选项，并要求提供更具体的测试信息，以便更好地理解问题。Mark Brown 进一步分析了日志文件，指出挂起可能发生在测试套件的第一个测试中，并提到该问题可能在主线和 -next 版本中都存在。<br><br>讨论的结论是，当前问题的根源可能与特定的测试用例有关，参与者需要进一步确认具体的测试触发条件，并对该问题进行深入调查。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-05]</span> <span class="email-subject">kvm-unit-tests hang on Arm FVP with protected mode</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Naresh Kamboju <span class="email-sender">&lt;naresh.kamboju@linaro.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-05]</span> <span class="email-subject">Re: kvm-unit-tests hang on Arm FVP with protected mode</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Marc Zyngier <span class="email-sender">&lt;maz@kernel.org&gt;</span></div>
<div class="email-item"><span class="email-date">[2025-09-05]</span> <span class="email-subject">Re: kvm-unit-tests hang on Arm FVP with protected mode</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Mark Brown <span class="email-sender">&lt;broonie@kernel.org&gt;</span></div>
                </div>
            </div>

            <div class="thread">
                <div class="thread-header">
                    <h3>[kvm-unit-tests PATCH] arm64: mte: Fix MTE granule mask</h3>
                </div>

                <div class="thread-meta">
                    <span>1 messages</span>
                    <span>1 participants</span>
                    <span>Started: 2025-09-05</span>
                </div>

                <div class="ai-summary">
                    在此次邮件讨论中，Vladimir Murzin 提出了针对 ARM64 架构下 MTE（Memory Tagging Extension）相关代码的补丁，主要目的是修复 MTE 的 granule mask 生成问题。补丁的关键在于正确生成与 MTE_TAG_SHIFT 一起使用时的 mask。<br><br>技术要点包括：<br>1. 修正了 MTE_GRANULE_MASK 的定义，从原来的“(~(MTE_GRANULE_SIZE - 1))”改为“(MTE_GRANULE_SIZE - 1)”，确保生成的掩码能够正确反映 MTE 的粒度大小。<br>2. 该更改有助于提高内存标记扩展的准确性，确保在处理内存标签时不会出现错误。<br><br>讨论的结论是，此补丁已被签署并提交，表明其已准备好被合并到主代码库中。当前没有提及其他待解决的问题，表明该修复是针对特定问题的直接响应。
                </div>

                <h4>Message List</h4>
                <div class="email-list">
<div class="email-item"><span class="email-date">[2025-09-05]</span> <span class="email-subject">[kvm-unit-tests PATCH] arm64: mte: Fix MTE granule mask</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Author: Vladimir Murzin <span class="email-sender">&lt;vladimir.murzin@arm.com&gt;</span></div>
                </div>
            </div>
        </div>

    </div>
</body>
</html>
